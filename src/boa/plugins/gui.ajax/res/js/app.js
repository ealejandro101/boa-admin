if(Interface.create("IAppWidget",{resize:function(){},showElement:function(e){},getDomNode:function(){},destroy:function(){}}),Interface.create("IManifestNodeProvider",{initProvider:function(e){},loadNode:function(e,t,i){}}),Interface.create("IActionProvider",{getActions:function(){}}),Interface.create("IFocusable",{setFocusBehaviour:function(){},focus:function(){},blur:function(){}}),Interface.create("IContextMenuable",{setContextualMenu:function(e){}}),Class.create("AppPane",{__implements:"IAppWidget",childrenPanes:null,initialize:function(e,t){if(this.htmlElement=$(e),!this.htmlElement)throw new Error("Cannot find element for AppPane : "+this.__className);this.options=t||{},this.htmlElement.paneObject=this,this.htmlElement.getAttribute("appPaneHeader")&&this.addPaneHeader(this.htmlElement.getAttribute("appPaneHeader"),this.htmlElement.getAttribute("appPaneIcon")),this.htmlElement&&this.options.elementStyle&&this.htmlElement.setStyle(this.options.elementStyle),this.childrenPanes=$A([]),this.scanChildrenPanes(this.htmlElement),this.options.bindSizeTo&&this.options.bindSizeTo.width&&this.options.bindSizeTo.width.events.each(function(e){document.observe("app:"+e,this.resizeBound.bind(this))}.bind(this))},resizeBound:function(e){"use strict";if($(this.options.bindSizeTo.width.id)){var t=this.options.bindSizeTo.width.min;Object.isString(t)&&0!=t.indexOf("%")&&(t=this.htmlElement.parentNode.getWidth()*t/100);var i=Math.max($(this.options.bindSizeTo.width.id).getWidth()+this.options.bindSizeTo.width.offset,t);if(this.options.bindSizeTo.width.max){var s=this.options.bindSizeTo.width.max;Object.isString(s)&&0!=s.indexOf("%")&&(s=this.htmlElement.parentNode.getWidth()*s/100),i=Math.min(s,i)}this.options.bindSizeTo.width.checkSiblings&&(i=this.filterWidthFromSiblings(i)),this.htmlElement.setStyle({width:i+"px"}),this.resize(),this.options.bindSizeTo.width.checkSiblings&&this.htmlElement.siblings().each(function(e){e.paneObject&&e.paneObject.resize()})}},filterWidthFromSiblings:function(e){"use strict";var t=this.htmlElement.parentNode.getWidth(),i=0;return this.htmlElement.siblings().each(function(e){e.hasClassName("skipSibling")||(e.paneObject&&e.paneObject.getActualWidth?i+=e.paneObject.getActualWidth():i+=e.getWidth())}),e=Math.min(e,t-i-20)},resize:function(){if(this.options.fit&&"height"==this.options.fit){var marginBottom=0;if(this.options.fitMarginBottom){var expr=this.options.fitMarginBottom;try{marginBottom=parseInt(eval(expr))}catch(e){}}fitHeightToBottom(this.htmlElement,this.options.fitParent?$(this.options.fitParent):null,expr)}this.childrenPanes.invoke("resize")},getDomNode:function(){return this.htmlElement},destroy:function(){if(this.childrenPanes.each(function(e){e.destroy()}),this.htmlElement.update(""),window[this.htmlElement.id])try{delete window[this.htmlElement.id]}catch(e){}this.htmlElement=null},scanChildrenPanes:function(e){e.childNodes&&$A(e.childNodes).each(function(e){e.paneObject?(this.childrenPanes||(this.childrenPanes=$A()),this.childrenPanes.push(e.paneObject)):this.scanChildrenPanes(e)}.bind(this))},showElement:function(e){e?this.htmlElement.show():this.htmlElement.hide()},addPaneHeader:function(e,t){var i=new Element("span",{message_id:e}).update(MessageHash[e]),s=new Element("div",{className:"panelHeader"}).update(i);if(t){n=resolveImageSource(t,"/images/actions/ICON_SIZE",16);s.insert({top:new Element("img",{src:n,className:"panelHeaderIcon"})}),s.addClassName("panelHeaderWithIcon")}if(this.options.headerClose){var n=resolveImageSource(this.options.headerClose.icon,"/images/actions/ICON_SIZE",16),o=new Element("img",{src:n,className:"panelHeaderCloseIcon",title:MessageHash[this.options.headerClose.title]});s.insert({top:o});var a=this.options.headerClose.splitter;o.observe("click",function(){window[a].fold()})}if(this.htmlElement.insert({top:s}),disableTextSelection(s),this.options.headerToolbarOptions){var r=new Element("div",{id:"display_toolbar"});s.insert({top:r});new ActionsToolbar(r,this.options.headerToolbarOptions)}},setFocusBehaviour:function(){this.htmlElement.observe("click",function(){app&&app.focusOn(this)}.bind(this))},getUserPreference:function(e){if(app&&app.user){var t=app.user.getPreference("gui_preferences",!0);if(t&&t[this.htmlElement.id+"_"+this.__className])return t[this.htmlElement.id+"_"+this.__className][e]}},setUserPreference:function(e,t){if(app&&app.user){var i=app.user.getPreference("gui_preferences",!0);i||(i={}),i[this.htmlElement.id+"_"+this.__className]||(i[this.htmlElement.id+"_"+this.__className]={}),i[this.htmlElement.id+"_"+this.__className][e]&&i[this.htmlElement.id+"_"+this.__className][e]==t||(i[this.htmlElement.id+"_"+this.__className][e]=t,app.user.setPreference("gui_preferences",i,!0),app.user.savePreference("gui_preferences"))}}}),Class.create("ManifestNode",{initialize:function(e,t,i,s,n){this._path=e,this._path&&this._path.length&&this._path.length>1&&"/"==this._path[this._path.length-1]&&(this._path=this._path.substring(0,this._path.length-1)),this._metadata=$H(),this._isLeaf=t||!1,this._label=i||"",this._icon=s||"",this._children=$A([]),this._isRoot=!1,this._isLoaded=!1,this.fake=!1,this._iNodeProvider=n},isLoaded:function(){return this._isLoaded},setLoaded:function(e){this._isLoaded=e},load:function(e){if(!this.isLoading){if(e||(e=this._iNodeProvider?this._iNodeProvider:new RemoteNodeProvider),this.isLoading=!0,this.notify("loading"),this._isLoaded)return this.isLoading=!1,void this.notify("loaded");e.loadNode(this,function(e){this._isLoaded=!0,this.isLoading=!1,this.notify("loaded"),this.notify("first_load")}.bind(this))}},reload:function(e){this._children.each(function(e){this.removeChild(e)}.bind(this)),this._isLoaded=!1,this.load(e)},clear:function(){this._children.each(function(e){this.removeChild(e)}.bind(this)),this._isLoaded=!1,this.notify("force_clear")},setRoot:function(){this._isRoot=!0},setChildren:function(e){this._children=$A(e),this._children.invoke("setParent",this)},getChildren:function(){return this._children},addChild:function(e){e.setParent(this),this._iNodeProvider&&(e._iNodeProvider=this._iNodeProvider);var t=this.findChildByPath(e.getPath());t&&!Object.isString(t)?t.replaceBy(e,"override"):(this._children.push(e),this.notify("child_added",e.getPath()))},removeChild:function(e){var t=e.getPath();e.notify("node_removed"),e._parentNode=null,this._children=this._children.without(e),this.notify("child_removed",t)},replaceBy:function(e,t){this._isLeaf=e._isLeaf,e.getPath()&&this._path!=e.getPath()&&(this._path=e.getPath()),e._label&&(this._label=e._label),e._icon&&(this._icon=e._icon),e._iNodeProvider&&(this._iNodeProvider=e._iNodeProvider),this._isRoot=e._isRoot,this._isLoaded=e._isLoaded,this.fake=e.fake,e.getChildren().each(function(e){this.addChild(e)}.bind(this));var i=e.getMetadata();"override"==t&&(this._metadata=$H()),i.each(function(e){if("override"==t)this._metadata.set(e.key,e.value);else{if(this._metadata.get(e.key)&&""===e.value)return;this._metadata.set(e.key,e.value)}}.bind(this)),this.notify("node_replaced",this)},findChildByPath:function(e){return $A(this._children).find(function(t){return t.getPath()==e})},setMetadata:function(e){this._metadata=e},getMetadata:function(){return this._metadata},isLeaf:function(){return this._isLeaf},getPath:function(){return this._path},getLabel:function(){return this._label},getIcon:function(){return this._icon},isRecycle:function(){return"recycle"==this.getMime()},inZip:function(){},hasMimeInBranch:function(e){if(this.getMime()==e.toLowerCase())return!0;for(var t,i=this;t=i._parentNode;){if(t.getMime()==e.toLowerCase())return!0;i=t}return!1},hasMetadataInBranch:function(e,t){if(this.getMetadata().get(e))return!t||this.getMetadata().get(e)==t;for(var i,s=this;i=s._parentNode;){if(i.getMetadata().get(e))return!t||i.getMetadata().get(e)==t;s=i}return!1},setParent:function(e){this._parentNode=e},getParent:function(){return this._parentNode},findInArbo:function(e,t){if(this.getPath()){for(var i,s=this.getPath().split("/"),n=($A(),""),o=e,a=0;a<s.length;a++)if(""!=s[a]){n=n+"/"+s[a];var r=o.findChildByPath(n);if(r&&!Object.isString(r))i=r;else{if(void 0===t)return!1;(i=new ManifestNode(n,!1,getBaseName(n))).fake=!0,t.push(i),o.addChild(i)}o=i}return i}},isRoot:function(){return this._isRoot},isParentOf:function(e){var t=e.getPath(),i=this.getPath();return t.substring(0,i.length)==i},isChildOf:function(e){var t=this.getPath(),i=e.getPath();return t.substring(0,i.length)==i},getMime:function(){return this._metadata&&this._metadata.get("APP_mime")?this._metadata.get("APP_mime").toLowerCase():this._metadata&&this.isLeaf()?getMimeType(this._metadata).toLowerCase():""}}),SelectableElements=Class.create({initialize:function(e,t){null!=e&&this.initSelectableItems(e,t)},initNonSelectableItems:function(e){this._htmlElement=e,this._multiple=!1,this._selectedItems=[],this._fireChange=!0,this.hasFocus=!1},initSelectableItems:function(e,t,i,s){this._htmlElement=e,this._multiple=Boolean(t),this._selectedItems=[],this._fireChange=!0,this.hasFocus=!1,this._onclick=function(t){null==t&&(t=e.ownerDocument.parentWindow.event),this.click(t)}.bind(this),$(this._htmlElement).observe("contextmenu",function(e){this._selectedItems.length>1||this.click(e)}.bind(this)),this._ondblclick=function(t){null==t&&(t=e.ownerDocument.parentWindow.event),this.dblClick(t)}.bind(this),e.addEventListener?e.addEventListener("click",this._onclick,!1):e.attachEvent&&(e.attachEvent("onclick",this._onclick),e.attachEvent("ondblclick",this._ondblclick)),s&&(e.observe("touchstart",function(t){var i=t.changedTouches[0];e.selectableTouchStart=i.clientY}.bind(this)),e.observe("touchend",function(t){if(e.selectableTouchStart){var i=t.changedTouches[0].clientY-e.selectableTouchStart;if(Math.abs(i)>2)return}e.selectableTouchStart=null,this._onclick(t)}.bind(this))),this.eventMouseUp=this.dragEnd.bindAsEventListener(this),this.eventMouseDown=this.dragStart.bindAsEventListener(this),this.eventMouseMove=this.drag.bindAsEventListener(this),this.selectorAdded=!1,this.dragSelectionElement=i?$(i):$(e),Event.observe(this.dragSelectionElement,"mousedown",this.eventMouseDown)},dragStart:function(e){this._htmlElement;this.originalX=e.clientX,this.originalY=e.clientY,this.dSEPosition=Position.cumulativeOffset(this.dragSelectionElement),this.dSEDimension=Element.getDimensions(this.dragSelectionElement);var t=this.dSEDimension.height;this.dragSelectionElement.scrollHeight>t&&this.originalX>this.dSEPosition[0]+this.dSEDimension.width-18||this.dragSelectionElement.scrollWidth>this.dSEDimension.width&&this.originalY>this.dSEPosition[1]+this.dSEDimension.height-18||(Event.observe(document,"mousemove",this.eventMouseMove),Event.observe(document,"mouseup",this.eventMouseUp),this.divSelector||(this.divSelector=new Element("div",{style:"border : 1px dotted #999; background-color:#ddd;\tfilter:alpha(opacity=50);opacity: 0.5;-moz-opacity:0.5;z-index:100000;position:absolute;top:0px;left:0px;height:0px;width:0px;"})),$(this.dragSelectionElement).setStyle({cursor:"move"}))},drag:function(e){this.selectorAdded||(this.body=document.getElementsByTagName("body")[0],this.body.appendChild(this.divSelector),this.selectorAdded=!0);var t=e.clientX,i=e.clientY,s=this.dSEPosition[0],n=this.dSEPosition[1],o=s+this.dSEDimension.width,a=n+this.dSEDimension.height;t=Math.max(t,s),i=Math.max(i,n),t=Math.min(t,o),i=Math.min(i,a);var r,l,d,h;l=Math.min(this.originalX,t),d=Math.abs(this.originalX-t),r=Math.min(this.originalY,i),h=Math.abs(this.originalY-i),this.divSelector.setStyle({top:r+"px",left:l+"px",width:d+"px",height:h+"px"});for(var c=this.getItems(),u=l,m=l+d,p=r,_=r+h,f=0;f<c.length;f++){var g=$(c[f]),b=Position.cumulativeOffset(g);b[0]-=this.dragSelectionElement.scrollLeft,b[1]-=this.dragSelectionElement.scrollTop;var v=Element.getDimensions(g),y=b[0],M=b[0]+v.width,w=b[1],L=b[1]+v.height;(y>=u&&y<=m||M>=u&&M<=m||u>=y&&m<=M)&&(w>=p&&w<=_||L>=p&&L<=_||p>=w&&_<=L)?this.setItemSelected(c[f],!0):e.shiftKey||e.crtlKey||this.setItemSelected(c[f],!1)}},dragEnd:function(e){Event.stopObserving(document,"mousemove",this.eventMouseMove),Event.stopObserving(document,"mouseup",this.eventMouseUp),this.selectorAdded&&(this.body.removeChild(this.divSelector),this.selectorAdded=!1),$(this.dragSelectionElement).setStyle({cursor:"default"})},setItemSelected:function(e,t){if(this._multiple){if(Boolean(e._selected)==Boolean(t))return;if(this.setItemSelectedUi(e,t),t)this._selectedItems[this._selectedItems.length]=e;else{for(var i=[],s=0,n=0;n<this._selectedItems.length;n++)this._selectedItems[n]!=e&&(i[s++]=this._selectedItems[n]);this._selectedItems=i}this.fireChange()}else if(t){var o=this._selectedItems[0];if(e==o)return;null!=o&&this.setItemSelectedUi(o,!1),this.setItemSelectedUi(e,!0),this._selectedItems=[e],this.fireChange()}else this._selectedItems[0]==e&&(this.setItemSelectedUi(e,!1),this._selectedItems=[])},setItemSelectedUi:function(e,t){if(t){if(this.options&&this.options.invisibleSelection||($(e).addClassName("selected"),$(e).addClassName("selected-focus")),!this.skipScroll){var i=this._htmlElement;this._htmlElement.up(".table_rows_container")&&(i=this._htmlElement.up(".table_rows_container"));var s=e.offsetTop,n=i.getHeight(),o=i.scrollTop,a=$(e).getHeight(),r=-1;s+a>n+o?r=s-n+a:s<o&&(r=s-a),-1!=r&&(i.scrollerInstance?i.scrollerInstance.scrollTo(r):i.scrollTop=r)}}else $(e).removeClassName("selected"),$(e).removeClassName("selected-focus");e._selected=t},focus:function(){if(this.hasFocus=!0,!this.options||!this.options.invisibleSelection)for(var e=0;e<this._selectedItems.length;e++)this._selectedItems[e]&&$(this._selectedItems[e]).addClassName("selected-focus")},blur:function(){if(this.hasFocus=!1,!this.options||!this.options.invisibleSelection)for(var e=0;e<this._selectedItems.length;e++)this._selectedItems[e]&&$(this._selectedItems[e]).removeClassName("selected-focus")},selectFirst:function(){this._selectedItems.length||null!=this.getItem(0)&&this.setItemSelected(this.getItem(0),!0)},selectAll:function(){for(var e=this.getItems(),t=0;t<e.length;t++)this.setItemSelected(e[t],!0)},getItemSelected:function(e){return Boolean(e._selected)},fireChange:function(){this._fireChange&&("string"==typeof this.onchange&&(this.onchange=new Function(this.onchange)),"function"==typeof this.onchange&&this.onchange())},fireDblClick:function(){this._fireChange&&("string"==typeof this.ondblclick&&""!=this.ondblclick&&(this.ondblclick=new Funtion(this.ondblclick)),"function"==typeof this.ondblclick&&this.ondblclick())},dblClick:function(e){this.fireDblClick()},click:function(e){e.detail&&e.detail>1&&this.fireDblClick();var t=this._fireChange;this._fireChange=!1;for(var i=e.ctrlKey||e.metaKey,s=this.getSelectedItems(),n=null!=e.target?e.target:e.srcElement;null!=n&&!this.isItem(n);)n=n.parentNode;if(null!=n){var o=n,a=this._anchorIndex;if((0==this._selectedItems.length||i&&!e.shiftKey&&this._multiple)&&(a=this._anchorIndex=o),(i||e.shiftKey)&&this._multiple){if(this._multiple&&i&&!e.shiftKey)this.setItemSelected(n,!n._selected),this._anchorIndex=o;else if(this._multiple&&i&&e.shiftKey){for(var r=this.isBefore(o,a),l=a;null!=l&&l!=o;)l._selected||l==n||this.setItemSelected(l,!0),l=r?this.getPrevious(l):this.getNext(l);n._selected||this.setItemSelected(n,!0)}else if(this._multiple&&!i&&e.shiftKey){for(var r=this.isBefore(o,a),d=this._selectedItems,h=d.length-1;h>=0;h--)this.setItemSelectedUi(d[h],!1);this._selectedItems=[];l=a;for(this.skipScroll=!0;null!=l&&(this.setItemSelected(l,!0),l==o-1&&(this.skipScroll=!1),l!=o);)l=r?this.getPrevious(l):this.getNext(l);this.skipScroll=!1}}else{for(h=(d=this._selectedItems).length-1;h>=0;h--)d[h]._selected&&d[h]!=n&&this.setItemSelectedUi(d[h],!1);this._anchorIndex=o,n._selected||this.setItemSelectedUi(n,!0),this._selectedItems=[n]}var c,u=s.length!=this._selectedItems.length;if(!u)for(h=0;h<s.length;h++){c=!1;for(var m=0;m<this._selectedItems.length;m++)if(s[h]==this._selectedItems[m]){c=!0;break}if(!c){u=!0;break}}this._fireChange=t,u&&this._fireChange&&this.fireChange()}else this._fireChange=t},getSelectedItems:function(){for(var e=this._selectedItems,t=e.length,i=new Array(t),s=0;s<t;s++)i[s]=e[s];return i},getSelectedNodes:function(){for(var e=this._selectedItems,t=$A([]),i=0;i<e.length;i++)e[i].node&&t.push(e[i].node);return t},setSelectedNodes:function(e){for(var t=this.getItems(),i=0;i<t.length;i++)t[i].node&&e.detect(function(e){return e.getPath()==t[i].node.getPath()})?this.setItemSelected(t[i],!0):this.setItemSelected(t[i],!1)},isItem:function(e){return null!=e&&1==e.nodeType&&e.parentNode==this._htmlElement},findSelectableParent:function(e,t){for(;null!=e&&!this.isItem(e);)e=e.parentNode;return null!=e&&t&&this.setItemSelected(e,!0),e},destroy:function(){this._htmlElement.removeEventListener?this._htmlElement.removeEventListener("click",this._onclick,!1):this._htmlElement.detachEvent&&this._htmlElement.detachEvent("onclick",this._onclick),this._htmlElement=null,this._onclick=null,this._selectedItems=null},getNext:function(e){var t=e.nextSibling;return null==t||this.isItem(t)?t:this.getNext(t)},getPrevious:function(e){var t=e.previousSibling;return null==t||this.isItem(t)?t:this.getPrevious(t)},isBefore:function(e,t){for(var i=this.getNext(e);null!=i;){if(i==t)return!0;i=this.getNext(i)}return!1},getItems:function(){for(var e=[],t=0,i=this._htmlElement.childNodes,s=i.length,n=0;n<s;n++)1==i[n].nodeType&&(e[t++]=i[n]);return e},getItem:function(e){for(var t=0,i=this._htmlElement.childNodes,s=i.length,n=0;n<s;n++)if(1==i[n].nodeType){if(t==e)return i[n];t++}return null},getSelectedIndexes:function(){for(var e=this.getSelectedItems(),t=e.length,i=new Array(t),s=0;s<t;s++)i[s]=this.getItemIndex(e[s]);return i},getItemIndex:function(e){for(var t=0,i=this._htmlElement.childNodes,s=i.length,n=0;n<s;n++){if(i[n]==e)return t;1==i[n].nodeType&&t++}return-1}}),SortableTable=Class.create({initialize:function(e,t,i){this.gecko=Prototype.Browser.Gecko,this.msie=Prototype.Browser.IE,this.removeBeforeSort=this.gecko,this.sortTypes=t||[],this.sortColumn=null,this.descending=null,this._headerOnclick=function(e){this.headerOnclick(e)}.bind(this),e&&"table"==e.nodeName.toLowerCase()?(this.setTable(e,i),this.document=e.ownerDocument||e.document):e?(this.container=e,this.document=document):this.document=document;var s=this.document.defaultView||this.document.parentWindow;this._onunload=function(){this.destroy()}.bind(this),s&&void 0!==s.attachEvent&&s.attachEvent("onunload",this._onunload),this.addSortType("Number",Number),this.addSortType("CaseInsensitiveString",this.toUpperCase),this.addSortType("Date",this.toDate),this.addSortType("String")},setMetaSortType:function(e){this.columnsDefs=e,this.sortTypes=[],this.columnsDefs.each(function(e){this.sortTypes.push("NodeMeta")}.bind(this))},onsort:function(){},defaultDescending:!1,_sortTypeInfo:{},setTable:function(e,t){this.tHead&&this.uninitHeader(),this.element=e,this.setTHead(t||e.tHead),this.setTBody(e.tBodies[0])},setTHead:function(e){this.tHead&&this.tHead!=e&&this.uninitHeader(),this.tHead=$(e),this.initHeader(this.sortTypes)},setTBody:function(e){this.tBody=$(e)},setSortTypes:function(e){this.tHead&&this.uninitHeader(),this.sortTypes=e||[],this.tHead&&this.initHeader(this.sortTypes)},getHeaderCells:function(){return!this.headerCells&&this.tHead&&(this.headerCells=this.tHead.select("div.header_cell"),this.headerCells.each(function(e){var t=e.previous("div");t&&t.hasClassName("resizer")&&(e.resizer=t),e.down("span.sort-icon")||e.down("div.header_label").insert('<span class="sort-icon icon-caret-up"></span><span class="sort-icon icon-caret-down"></span>')})),this.headerCells},initHeader:function(e){if(this.tHead){var t=this.getHeaderCells();this.sortTypes=e||[];for(var i,s=t.length,n=0;n<s;n++)(i=t[n]).cellIndex=n,null!=this.sortTypes[n]&&"None"!=this.sortTypes[n]?(null!=this.sortTypes[n]&&(i._sortType=this.sortTypes[n]),i.observe("click",this._headerOnclick.bind(this))):(i.setAttribute("_sortType",e[n]),i._sortType="None");this.updateHeaderArrows()}},onHeaderResize:function(e){},setGridCellWidth:function(e,t){var i=e.down(".text_label");if(i){var s;s=t?parseInt(t):e.getWidth()-3;var n=e.getStyle("paddingLeft")||0,o=e.getStyle("paddingRight")||0,a=i.getStyle("paddingLeft")||0,r=i.getStyle("paddingRight")||0,l=1;i.siblings().each(function(e){l+=e.getWidth()}),i.setStyle({width:s-l-parseInt(n)-parseInt(o)-parseInt(a)-parseInt(r)+"px"}),t&&e.setStyle({width:s+"px"})}else t&&e.setStyle({width:t+"px"})},uninitHeader:function(){try{var e=this.getHeaderCells()}catch(e){return}if(e&&e.length)for(var t,i=e.length,s=0;s<i;s++)null!=(t=e[s])._sortType&&"None"!=t._sortType&&(t.firstChild&&t.removeChild(t.firstChild),void 0!==t.removeEventListener?t.removeEventListener("click",this._headerOnclick,!1):void 0!==t.detachEvent&&t.detachEvent("onclick",this._headerOnclick),t._sortType=null,t.removeAttribute("_sortType"))},updateHeaderArrows:function(){if(this.tHead)for(var e=this.getHeaderCells(),t=e.length,i=0;i<t;i++)null!=e[i]._sortType&&"None"!=e[i]._sortType&&(e[i].removeClassName("descending"),e[i].removeClassName("ascending"),e[i].resizer&&e[i].resizer.removeClassName("resizer_sortable"),i==this.sortColumn&&(e[i].addClassName(this.descending?"descending":"ascending"),e[i].resizer&&e[i].resizer.addClassName("resizer_sortable")))},headerOnclick:function(e){var t=Event.findElement(e);this.sort(t.cellIndex)},getCellIndex:function(e){var t,i=e.parentNode.childNodes,s=i.length;for(t=0;i[t]!=e&&t<s;t++);return t},getSortType:function(e){return this.columnsDefs&&this.columnsDefs[e]&&this.columnsDefs[e].sortType?this.columnsDefs[e].sortType:this.sortTypes[e]||"String"},sort:function(e,t,i){if((this.tBody||this.container)&&(null==i&&(i=this.getSortType(e)),"None"!=i)){null==t?this.sortColumn!=e?this.descending=this.defaultDescending:this.descending=!this.descending:this.descending=t,this.sortColumn=e,"function"==typeof this.onbeforesort&&this.onbeforesort();var s=this.getSortFunction(i,e),n=this.getCache(i,e),o=this.tBody?this.tBody:this.container;if(n.sort(s),this.descending&&n.reverse(),this.removeBeforeSort){var a=o.nextSibling,r=o.parentNode;r.removeChild(o)}for(var l=n.length,d=0;d<l;d++)o.appendChild(n[d].element);this.removeBeforeSort&&r.insertBefore(o,a),this.updateHeaderArrows(),this.destroyCache(n),"function"==typeof this.onsort&&this.onsort()}},asyncSort:function(e,t,i){var s=this;this._asyncsort=function(){s.sort(e,t,i)},window.setTimeout(this._asyncsort,1)},getCache:function(e,t){if(!this.tBody&&!this.container)return[];var i;if(this.tBody)i=this.tBody.rows;else{if(!this.container)return[];i=this.container.select(".nodeProvider")}for(var s,n=i.length,o=new Array(n),a=0;a<n;a++)s=i[a],o[a]={value:this.getRowValue(s,e,t),element:s};return o},destroyCache:function(e){for(var t=e.length,i=0;i<t;i++)e[i].value=null,e[i].element=null,e[i]=null},getRowValue:function(e,t,i){if(this.columnsDefs){var s,n=this.columnsDefs[i].attributeName;return s=this._sortTypeInfo[t].getNodeValue?this._sortTypeInfo[t].getNodeValue(e.node,n):e.node.getMetadata().get(n),this.getValueFromString(s)}if(this._sortTypeInfo[t]&&this._sortTypeInfo[t].getRowValue)return this._sortTypeInfo[t].getRowValue(e,i);var o,a=e.cells[i];return o=a&&void 0!==a.innerText?a.innerText:this.getInnerText(a),this.getValueFromString(o,t)},getInnerText:function(e){for(var t="",i=e.childNodes,s=i.length,n=0;n<s;n++)switch(i[n].nodeType){case 1:t+=this.getInnerText(i[n]);break;case 3:t+=i[n].nodeValue}return t},getValueFromString:function(e,t){return this._sortTypeInfo[t]?this._sortTypeInfo[t].getValueFromString(e):e},getSortFunction:function(e,t){return this._sortTypeInfo[e]?this._sortTypeInfo[e].compare:this.basicCompare},destroy:function(){this.uninitHeader();var e=this.document.parentWindow;e&&void 0!==e.detachEvent&&e.detachEvent("onunload",this._onunload),this._onunload=null,this.element=null,this.tHead=null,this.tBody=null,this.headerCells=null,this.document=null,this._headerOnclick=null,this.sortTypes=null,this._asyncsort=null,this.onsort=null},addSortType:function(e,t,i,s,n){this._sortTypeInfo[e]={type:e,getValueFromString:t||this.idFunction,compare:i||this.basicCompare,getRowValue:s,getNodeValue:n||null}},removeSortType:function(e){delete this._sortTypeInfo[e]},basicCompare:function(e,t){return e.value<t.value?-1:t.value<e.value?1:0},idFunction:function(e){return e},toUpperCase:function(e){return e.toUpperCase()},toDate:function(e){var t=e.split("-"),i=new Date(0);return i.setFullYear(t[0]),i.setDate(t[2]),i.setMonth(t[1]-1),i.valueOf()}}),Object.isUndefined(Proto))var Proto={};Proto.Menu=Class.create({initialize:function(){var e=Prototype.emptyFunction;this.ie=Prototype.Browser.IE&&-1==navigator.userAgent.indexOf("MSIE 10"),this.options=Object.extend({selector:".contextmenu",className:"protoMenu",mouseClick:"right",anchor:"mouse",pageOffset:25,topOffset:0,leftOffset:0,submenuArrow:resourcesFolder+"/images/arrow_right.png",position:"bottom",menuTitle:"",fade:!1,zIndex:100,createAnchor:!1,anchorContainer:null,anchorSrc:"",anchorTitle:"",anchorPosition:"last",beforeShow:e,beforeHide:e,beforeSelect:e,shadowOptions:{distance:4,angle:130,opacity:.3,nestedShadows:3,color:"#000000"}},arguments[0]||{}),this.subMenus=$A(),this.shim=new Element("iframe",{style:"position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);display:none",src:"javascript:false;",frameborder:0}),this.options.createAnchor?this.createAnchor():"string"==typeof this.options.anchor&&"mouse"!=this.options.anchor?this.options.selector='[id="'+this.options.anchor+'"]':"string"!=typeof this.options.anchor&&(this.options.selector=this.options.anchor),this.eventToObserve="right"!=this.options.mouseClick?"click":"contextmenu","over"==this.options.mouseClick&&(this.eventToObserve="mouseover"),this.options.fade=this.options.fade&&!Object.isUndefined(Effect),this.container=new Element("div",{className:this.options.className,style:"display:none"}),"right"==this.options.mouseClick?($(document.body).observe("contextmenu",function(e){Event.stop(e)}),$(document.body).insert(this.container.observe("contextmenu",Event.stop))):$(document.body).insert(this.container),this.ie&&$(document.body).insert(this.shim),"mouseover"==this.eventToObserve&&(this.container.observe("mouseover",this.mouseoverFunction.bind(this)),this.container.observe("mouseout",this.mouseoutFunction.bind(this))),document.observe("click",function(e){this.container.visible()&&!e.isRightClick()&&this.hide()}.bind(this)),this.addElements(this.options.selector)},destroy:function(){try{this.subMenus.length&&this.subMenus.invoke("destroy"),this.ie&&this.shim.remove(),this.container.remove(),this.options.createAnchor&&this.options.anchor&&this.options.anchor.remove()}catch(e){}},observerFunction:function(e){"left"==this.options.mouseClick&&Event.findElement(e,".protomenu_selector")&&Event.findElement(e,".protomenu_selector").hasClassName("disabled")||this.show(e)},mouseoverFunction:function(e){this.timer&&(window.clearTimeout(this.timer),this.timer=null),this.options.parent&&this.options.parent.timer&&(window.clearTimeout(this.options.parent.timer),this.options.parent.timer=null)},mouseoutFunction:function(e){this.timer=window.setTimeout(function(){this.hide(e)}.bind(this),300)},removeElements:function(e){"string"==typeof e?($$(e).invoke("removeClassName","protomenu_selector"),$$(e).invoke("stopObserving",this.eventToObserve,this.observerFunction.bind(this))):($(e).removeClassName("protomenu_selector"),$(e).stopObserving(this.eventToObserve,this.observerFunction.bind(this)))},addElements:function(e){"string"==typeof e?($$(e).invoke("observe",this.eventToObserve,this.observerFunction.bind(this)),$$(e).invoke("addClassName","protomenu_selector"),"mouseover"==this.eventToObserve&&($$(e).invoke("observe","mouseover",this.mouseoverFunction.bind(this)),$$(e).invoke("observe","mouseout",this.mouseoutFunction.bind(this)))):($(e).observe(this.eventToObserve,this.observerFunction.bind(this)),$(e).addClassName("protomenu_selector"),"mouseover"==this.eventToObserve&&($(e).observe("mouseover",this.mouseoverFunction.bind(this)),$(e).observe("mouseout",this.mouseoutFunction.bind(this))))},refreshList:function(){this.container.childElements().invoke("remove");var e=new Element("ul");if(""!=this.options.menuTitle){var t=this.options.menuTitle;e.insert(new Element("li",{text:t,className:"menuTitle"}).update(t))}this.options.menuItems.each(function(t){var i=new Element("li",{className:t.separator?"separator":""});if(t.moreActions){var s=new Element("div",{className:"menuActions moreActions",style:"padding-top:4px;"});t.moreActions.each(function(e){e.icon_class?s.insert(new Element("span",{title:e.name,className:e.icon_class}).observe("click",e.callback)):s.insert(new Element("a",{title:e.name,href:"#"}).writeAttribute("onclick","return false;").observe("click",e.callback).insert('<img src="'+e.image+'" width="16" height="16" border="0">'))}),i.insert(s),i.setStyle({position:"relative"}),s.observe("mouseover",function(){i.select("a.enabled")[0].addClassName("hovered")}),s.observe("mouseout",function(){i.select("a.enabled")[0].removeClassName("hovered")})}if(t.subMenu){var n=new Element("div",{className:"menuActions"+(window.app.currentThemeUsesIconFonts?" icon-caret-right":""),style:"padding-right:7px;"});n.insert(new Element("img",{src:this.options.submenuArrow,width:6,height:10})),i.insert(n),i.setStyle({position:"relative"})}t.action_id&&app&&app.getActionBar()&&app.getActionBar().getActionByName(t.action_id)&&(t.name=app.getActionBar().getActionByName(t.action_id).getKeyedText(),t.title=app.getActionBar().getActionByName(t.action_id).options.title);var o="";t.icon_class&&window.app.currentThemeUsesIconFonts?o=new Element("span",{className:t.icon_class+" icon_span",title:t.alt}):t.image?t.separator||(o=new Element("img",{src:t.image,border:"0",height:16,width:16,align:"absmiddle"})):t.pFactory&&t.node&&(o=t.pFactory.generateBasePreview(t.node)),t.separator&&t.menuTitle?(i.insert(t.menuTitle),i.addClassName("menuTitle")):i.insert(Object.extend(new Element("a",{href:"#",title:t.alt,id:t.action_id?"action_instance_"+t.action_id:"",className:(t.className?t.className+" ":"")+(t.disabled?"disabled":"enabled"),style:t.isDefault?"font-weight:bold":""}),{_callback:t.callback}).writeAttribute("onclick","return false;").observe("click",this.onClick.bind(this)).observe("contextmenu",Event.stop).update(Object.extend(o,{_callback:t.callback})).insert(t.name)),i.down("u")&&(i.down("u")._callback=t.callback),t.overlay&&(i.down("img")&&i.down("img").insert({after:Object.extend(new Element("img",{src:t.overlay,style:"position:relative;margin-left:-12px;top:5px;"}),{_callback:t.callback})}),i.down("span")&&i.down("span").insert({after:Object.extend(new Element("img",{src:t.overlay,style:"position:relative;margin-left:-12px;top:5px;"}),{_callback:t.callback})})),i._callback=t.callback,t.subMenu&&(t.subMenuBeforeShow||(t.subMenuBeforeShow=Prototype.emptyFunction),t.subMenuBeforeHide||(t.subMenuBeforeHide=Prototype.emptyFunction),i.subMenu=new Proto.Menu({mouseClick:"over",anchor:i,className:this.options.className,topOffset:0,leftOffset:-1,menuItems:t.subMenu,fade:!1,zIndex:2010,position:"right",parent:this,beforeShow:function(){var e=i.subMenu;e.options.parent&&e.options.parent.subMenus&&e.options.parent.subMenus.invoke("hide"),e.options.anchor&&e.options.anchor.addClassName("menuAnchorSelected"),window.setTimeout(function(){t.subMenuBeforeShow(e)},0)},beforeHide:function(){var e=i.subMenu;e.options.anchor&&e.options.anchor.removeClassName("menuAnchorSelected"),window.setTimeout(function(){t.subMenuBeforeHide(e)},0)}}),window.setTimeout(function(){t.subMenuBeforeShow(i.subMenu)},0),this.subMenus.push(i.subMenu)),e.insert(i),t.pFactory&&t.node&&o&&(i.IMAGE_ELEMENT=o,t.pFactory.enrichBasePreview(t.node,i))}.bind(this)),this.container.insert(e),e.select("li.separator").each(function(e){var t=e.next("li"),i=e.previous("li");!i||i.hasClassName("separator")||i.hasClassName("menuTitle")?e.remove():(!t||t.hasClassName("separator")||i.hasClassName("menuTitle"))&&e.remove()})},show:function(e){this.options.parent&&this.options.parent.subMenus&&this.options.parent.subMenus.map(function(e){e!=this&&e.hide()}.bind(this)),this.options.beforeShow(e),this.refreshList();var t={},i=this.container.getDimensions();t="mouse"==this.options.anchor?this.computeMouseOffset(e):this.computeAnchorOffset(),this.container.setStyle(t),this.container.setStyle({zIndex:this.options.zIndex}),this.ie&&this.shim.setStyle(Object.extend(Object.extend(i,t),{zIndex:this.options.zIndex-1})).show(),this.options.fade?(this.checkHeight(t.top),this.correctWindowClipping(this.container,t,i),Effect.Appear(this.container,{duration:this.options.fadeTime||.15,afterFinish:function(e){this.checkHeight(t.top),this.correctWindowClipping(this.container,t,i)}.bind(this)})):(this.container.show(),this.checkHeight(t.top),this.correctWindowClipping(this.container,t,i)),this.event=e},correctWindowClipping:function(e,t,i){var s=document.viewport.getDimensions();parseInt(t.left)+i.width>s.width&&(t.left=parseInt(t.left)+(s.width-(parseInt(t.left)+i.width)-5),e.setStyle({left:t.left+"px"}))},checkHeight:function(e){if(e=parseInt(e),"mouse"!=this.options.anchor){var t=getViewPortHeight()-10;this.options.menuMaxHeight&&(t=Math.min(this.options.menuMaxHeight,t));var i=document.viewport.getScrollOffsets(),s=this.container.getDimensions(),n=parseInt(e);n-i.top+s.height>=t?(this.container.setStyle({height:t-(n-i.top)+"px",overflowY:"scroll"}),this.containerShrinked||this.container.setStyle({width:s.width+16+"px"}),this.containerShrinked=!0):this.container.setStyle({height:"auto",overflowY:"hidden"}),attachMobileScroll(this.container,"vertical")}},computeMouseOffset:function(e){var t=Event.pointer(e).x,i=Event.pointer(e).y,s=document.viewport.getDimensions(),n=document.viewport.getScrollOffsets(),o=this.container.getDimensions();return{left:(t+o.width+this.options.pageOffset>s.width?s.width-o.width-this.options.pageOffset:t)+"px",top:(i-n.top+o.height>s.height&&i-n.top>o.height?i-o.height:i)+"px"}},computeAnchorOffset:function(){var e=Position.cumulativeOffset($(this.options.anchor)),t=this.options.anchor.cumulativeScrollOffset();if("bottom"==this.options.position||"bottom right"==this.options.position||"bottom middle"==this.options.position){var i=e[1]+$(this.options.anchor).getHeight()+this.options.topOffset-t[1],s=e[0]+this.options.leftOffset-t[0];"bottom right"==this.options.position?(s=e[0]+$(this.options.anchor).getWidth()+this.options.leftOffset-t[0],s-=this.container.getWidth()):"bottom middle"==this.options.position&&(s=e[0]+$(this.options.anchor).getWidth()/2+this.options.leftOffset-t[0],s-=this.container.getWidth()/2)}else if("right"==this.options.position){var n=document.viewport.getDimensions(),i=e[1]+this.options.topOffset-t[1];(s=e[0]+$(this.options.anchor).getWidth()+this.options.leftOffset-t[0])+this.container.getDimensions().width>n.width&&(s=e[0]-this.container.getDimensions().width)}return this.anchorOffset={top:i+"px",left:s+"px"},this.anchorOffset},createAnchor:function(){this.options.createAnchor&&"mouse"!=this.options.anchor&&(this.options.anchor=new Element("img",{id:this.options.anchor,src:this.options.anchorSrc,alt:this.options.anchorTitle,align:"absmiddle"}).setStyle({cursor:"pointer"}),this.options.anchorContainer.appendChild(this.options.anchor),this.options.selector=this.options.anchor)},onClick:function(e){var t=e.target;!e.target._callback&&e.target.up("li")&&e.target.up("li")._callback&&(t=e.target.up("li")),t._callback&&!t.hasClassName("disabled")&&(this.options.beforeSelect(e),this.options.anchor&&"string"!=typeof this.options.anchor&&this.options.anchor.removeClassName("menuAnchorSelected"),this.ie&&this.shim.hide(),this.container.hide(),t._callback(this.event))},hide:function(e){this.options.beforeHide(e),this.ie&&this.shim.hide(),this.container.setStyle({height:"auto",overflowY:"hidden"}),this.container.hide(),this.subMenus.length&&($A(this.subMenus).invoke("destroy"),this.subMenus=$A())}}),Class.create("Splitter",AppPane,{__implements:["IActionProvider"],initialize:function(e,t){this.options=Object.extend({direction:"vertical",activeClass:"active",fit:null,minSize:16,foldingButton:null,foldingAlternateClose:null,onDrag:Prototype.EmptyFunction,endDrag:Prototype.EmptyFunction,startDrag:Prototype.EmptyFunction},arguments[1]||{});var i={cursor:"e-resize",splitbarClass:"vsplitbar",eventPointer:Event.pointerX,set:"left",adjust:"width",getAdjust:this.getWidth,offsetAdjust:"offsetWidth",adjSide1:"Left",adjSide2:"Right",fixed:"height",getFixed:this.getHeight,offsetFixed:"offsetHeight",fixSide1:"Top",fixSide2:"Bottom"},s={cursor:"n-resize",splitbarClass:"hsplitbar",eventPointer:Event.pointerY,set:"top",adjust:"height",getAdjust:this.getHeight,offsetAdjust:"offsetHeight",adjSide1:"Top",adjSide2:"Bottom",fixed:"width",getFixed:this.getWidth,offsetFixed:"offsetWidth",fixSide1:"Left",fixSide2:"Right"};"vertical"==this.options.direction?Object.extend(this.options,i):Object.extend(this.options,s),this.htmlElement=$(e),this.htmlElement.paneObject=this,this.group=$(e).setStyle({position:"relative"});var n=this.group.childElements();n.each(function(e){e.setStyle({position:"absolute"})}),this.paneA=n[0],this.paneB=n[1],this.initBorderA=parseInt(this.paneA.getStyle("border"+this.options.adjSide1+"Width"))+parseInt(this.paneA.getStyle("border"+this.options.adjSide2+"Width"))||0,this.initBorderA+=parseInt(this.paneA.getStyle("margin"+this.options.adjSide1))+parseInt(this.paneA.getStyle("margin"+this.options.adjSide2)),this.initBorderB=parseInt(this.paneB.getStyle("border"+this.options.adjSide1+"Width"))+parseInt(this.paneB.getStyle("border"+this.options.adjSide2+"Width"))||0,this.initBorderB+=parseInt(this.paneB.getStyle("margin"+this.options.adjSide1))+parseInt(this.paneB.getStyle("margin"+this.options.adjSide2)),this.initBorderA||(this.initBorderA=0),this.initBorderB||(this.initBorderB=0),this.splitbar=new Element("div",{unselectable:"on"}),this.splitbar.addClassName(this.options.splitbarClass).setStyle({position:"absolute",cursor:this.options.cursor,fontSize:"1px"}),this.paneA.insert({after:this.splitbar}),this.startSplitFunc=this.startSplit.bind(this),this.endSplitFunc=this.endSplit.bind(this),this.splitbar.observe("mousedown",this.startSplitFunc),this.splitbar.observe("mouseup",this.endSplitFunc),this.initCaches(),this.paneA._init=(1==this.options.initA?parseInt(this.options.getAdjust(this.paneA)):this.options.initA)||0,this.paneB._init=(1==this.options.initB?parseInt(this.options.getAdjust(this.paneB)):this.options.initB)||0,this.paneB._init&&this.paneB.setStyle(this.makeStyleObject(this.options.adjust,this.paneB._init)),this.paneA._init&&this.paneA.setStyle(this.makeStyleObject(this.options.adjust,this.paneA._init)),this.resizeGroup(null,this.paneB._init||this.paneA._init||Math.round((this.group[this.options.offsetAdjust]-this.group._borderAdjust-this.splitbar._adjust)/2)),this.userLoggedObs=function(){var e=this.getUserPreference("size"),t=this.getUserPreference("folded");e&&(t?this.moveSplitter(parseInt(e)):this.resizeAnimated(parseInt(e))),t&&this.foldWithoutAnim()}.bind(this),document.observe("app:user_logged",this.userLoggedObs),this.compConfigObs=function(e){if(this.htmlElement){if(e.memo.className=="Splitter::"+this.htmlElement.id){var t=e.memo.classConfig.get("all"),i=XPathSelectSingleNode(t,'property[@name="resize"]'),s=XPathSelectSingleNode(t,'property[@name="folded"]');if(i){var n=parseInt(i.getAttribute("value"));i.getAttribute("value").indexOf("%")&&(n=this.htmlElement.getWidth()*n/100),s&&"true"==s.getAttribute("value")?this.moveSplitter(n):(this.effectWorking=!1,this.resizeAnimated(n))}s&&"true"==s.getAttribute("value")&&this.foldWithoutAnim()}}else document.stopObserving("app:component_config_changed",this.compConfigObs)}.bind(this),document.observe("app:component_config_changed",this.compConfigObs),this.doSplitFunc=this.doSplitMouse.bind(this),Event.observe(this.group,"mousemove",this.doSplitFunc),Event.observe(this.group,"mouseup",this.endSplitFunc),this.splitbar.draggable=!1,disableTextSelection(this.group),this.options.startFolded&&this.foldWithoutAnim()},destroy:function($super){Event.stopObserving(this.group,"mousemove",this.doSplitFunc),this.splitbar.stopObserving("mousedown",this.startSplitFunc),this.splitbar.stopObserving("mouseup",this.endSplitFunc),document.stopObserving("app:user_logged",this.userLoggedObs),document.stopObserving("app:component_config_changed",this.compConfigObs),this.splitbar.remove(),this.paneA.paneObject&&(this.paneA.paneObject.destroy(),this.paneA.remove()),this.paneB.paneObject&&(this.paneB.paneObject.destroy(),this.paneB.remove())},getFoldingAction:function(){return app.actionBar.getActionByName(this.htmlElement.id+"_folding_action")},getActions:function(){if(!this.options.foldingButton)return $H();var e=this.options.foldingButton,t=$H(),i=this,s={name:i.htmlElement.id+"_folding_action",src:"view_left_close.png",icon_class:"icon-remove-sign",text_id:416,title_id:415,text:MessageHash[416],title:MessageHash[415],hasAccessKey:!1,subMenu:!1,subMenuUpdateImage:!1,callback:function(){i.toggleFolding("B"==e?i.paneB:i.paneA)},listeners:{init:function(){this.refreshFoldingAction("B"==e?this.paneB:this.paneA)}.bind(this)}},n={selection:!1,dir:!0,actionBar:!0,actionBarGroup:i.htmlElement.id+"-actions",contextMenu:!1,infoPanel:!1},o=new Action(s,n);if(t.set(this.htmlElement.id+"_folding_button",o),this.options.foldingAlternateClose){var a={name:"folding_close_action",src:"view_left_close.png",icon_class:"icon-remove-sign",text_id:416,title_id:415,text:MessageHash[416],title:MessageHash[415],hasAccessKey:!1,subMenu:!1,subMenuUpdateImage:!1,callback:function(){i.toggleFolding("B"==e?i.paneB:i.paneA);i.getFoldingAction().enable()},listeners:{init:function(){"use strict";window.setTimeout(function(){if(!i.splitbar.hasClassName("folded"))try{i.getFoldingAction().disable()}catch(e){}},1500)}}},r={selection:!1,dir:!0,actionBar:!0,actionBarGroup:this.options.foldingAlternateClose,contextMenu:!1,infoPanel:!1},l=new Action(a,r);t.set(this.htmlElement.id+"_folding_close_button",l),this.splitbar.hasClassName("folded")?o.deny=!0:(o.deny=!0,o.disable())}return t},resizeGroup:function(e,t,i){var s=this.group._adjust;this.group._fixed=this.options.getFixed(this.group)-this.group._borderFixed,this.group._adjust=this.group[this.options.offsetAdjust]-this.group._borderAdjust;var n=this.options.fixed,o=this.initBorderA;this.paneA.setStyle(this.makeStyleObject(n,this.group._fixed-this.paneA._padFixed-o+"px"));var a=this.initBorderB;if(this.paneB.setStyle(this.makeStyleObject(n,this.group._fixed-this.paneB._padFixed-a+"px")),this.splitbar.setStyle(this.makeStyleObject(n,this.group._fixed+"px")),this.splitbar.hasClassName("folded")){if(this.foldedPane==this.paneA){var r=parseInt(this.paneA.getStyle(this.options.set));return void this.moveSplitter(0,!0,-r)}this.moveSplitter(this.group._adjust,this.paneB,0)}else t=i&&!t&&s?parseInt(this.paneA[this.options.offsetAdjust]*this.group._adjust/s)+this.initBorderA:t||(this.options.initB?this.group._adjust-this.paneB[this.options.offsetAdjust]-this.splitbar._adjust:this.paneA[this.options.offsetAdjust]),this.moveSplitter(t)},toggleFolding:function(e){return this.splitbar.hasClassName("folded")?(this.unfold(),!1):(this.foldPane(e),!0)},refreshFoldingAction:function(e){e||(e=this.foldedPane);var t=this.splitbar.hasClassName("folded");this.getFoldingAction()&&(this.options.foldingAlternateClose?this.getFoldingAction()[t?"enable":"disable"]():this.getFoldingAction().setIconSrc("view_left_"+(t?"right":"close")+".png",t?e==this.paneA?"icon-caret-right":"icon-caret-left":"icon-remove-sign"),e==this.paneA&&$(this.paneA).paneObject&&$(this.paneA).paneObject.resize(),e==this.paneB&&$(this.paneB).paneObject&&$(this.paneB).paneObject.resize())},fold:function(){this.foldPane(this.paneA)},foldPane:function(e){if(!this.effectWorking){var t;"A"==this.options.foldingButton?t=this.prefoldValue=this.options.getAdjust(this.paneA):(this.prefoldValue=this.options.getAdjust(this.paneB),t=this.group._adjust-this.prefoldValue),this.foldedPane=e,this.effectWorking=!0;var i=e==this.paneA?0:this.group._adjust;new Effect.Tween(null,t,i,{afterFinish:function(){this.splitbar.addClassName("folded"),this.foldedPane.addClassName("folded"),this.effectWorking=!1,this.setUserPreference("folded",!0),this.refreshFoldingAction(e)}.bind(this),duration:.8},function(s){s==i-3&&this.foldedPane.addClassName("folded"),this.moveSplitter(s,!this.options.minA&&e,t)}.bind(this))}},unfold:function(){if(!this.effectWorking){this.prefoldValue||(this.prefoldValue=150);var e="A"==this.options.foldingButton?this.prefoldValue:this.group._adjust-this.prefoldValue,t=this.prefoldValue;"B"==this.options.foldingButton&&(t-=this.paneB._padAdjust+this.splitbar._adjust,this["A"==this.options.foldingButton?"paneA":"paneB"].setStyle(this.makeStyleObject(this.options.adjust,t+"px"))),this.effectWorking=!0,new Effect.Tween(null,this.foldedPane==this.paneA?0:this.group._adjust,e,{afterFinish:function(){this.splitbar.removeClassName("folded"),this.effectWorking=!1,this.setUserPreference("folded",!1),this.refreshFoldingAction(this.foldedPane)}.bind(this),duration:.8},function(t){this.moveSplitter(t,!this.options.minA&&this.foldedPane,e)}.bind(this)),this.foldedPane&&this.foldedPane.removeClassName("folded")}},foldWithoutAnim:function(){"A"==this.options.foldingButton?(this.prefoldValue=this.options.getAdjust(this.paneA),this.moveSplitter(0,!this.options.minA&&this.paneA,this.prefoldValue),this.foldedPane=this.paneA,this.paneA.addClassName("folded")):(this.prefoldValue=this.options.getAdjust(this.paneB),this.moveSplitter(this.group._adjust,this.paneB,this.prefoldValue),this.foldedPane=this.paneB,this.paneB.addClassName("folded")),this.splitbar.addClassName("folded"),this.setUserPreference("folded",!0),this.refreshFoldingAction()},resizeAnimated:function(e){if(!this.effectWorking&&!this.splitbar.hasClassName("folded")){this.effectWorking=!0;var t=this.options.getAdjust(this.paneA)+this.initBorderA;new Effect.Tween(null,t,e,{afterFinish:function(){this.effectWorking=!1}.bind(this)},function(e){this.moveSplitter(e)}.bind(this))}},startSplit:function(e){if(this.splitbar.hasClassName("folded"))return!1;this.splitbar.addClassName(this.options.activeClass),this.paneA._posAdjust=this.options.getAdjust(this.paneA)+this.initBorderA-this.options.eventPointer(e),this.options.startDrag&&this.options.startDrag(this.getCurrentSize())},doSplitMouse:function(e){if(!this.splitbar.hasClassName(this.options.activeClass))return this.endSplit(e);this.moveSplitter(this.paneA._posAdjust+this.options.eventPointer(e))},endSplit:function(e){this.splitbar.hasClassName(this.options.activeClass)&&(this.splitbar.removeClassName(this.options.activeClass),this.options.endDrag&&this.options.endDrag(this.getCurrentSize()),$(this.paneA).paneObject&&$(this.paneA).paneObject.resize(),$(this.paneB).paneObject&&$(this.paneB).paneObject.resize(),this.setUserPreference("size",this.getCurrentSize()))},moveSplitter:function(e,t,i){if(!t&&this.options.minA&&e<this.options.minA+10){e=this.options.minA;var s=!0}e=Math.max(this.paneA._min+this.paneA._padAdjust,this.group._adjust-(this.paneB._max||9999),this.options.minSize,Math.min(e,this.paneA._max||9999,this.group._adjust-this.splitbar._adjust-Math.max(this.paneB._min+this.paneB._padAdjust,this.options.minSize)));this.options.set,this.options.adjust;this.splitbar.setStyle(this.makeStyleObject(this.options.set,e+"px"));var n=0,o=0;this.initBorderA&&(n=this.initBorderA);var a=e-this.paneA._padAdjust-n;t&&t==this.paneA?this.paneA.setStyle(this.makeStyleObject(this.options.set,a-i+"px")):this.paneA.setStyle(this.makeStyleObject(this.options.adjust,a+"px")),this.paneB.setStyle(this.makeStyleObject(this.options.set,e+this.splitbar._adjust+"px")),this.initBorderB&&(o=this.initBorderB);var r=this.group._adjust-this.splitbar._adjust-this.paneB._padAdjust-e-o;r=Math.max(0,r),t&&t==this.paneB||this.paneB.setStyle(this.makeStyleObject(this.options.adjust,r+"px")),Prototype.Browser.IE||(this.paneA.fire("resize"),this.paneB.fire("resize")),this.options.onDrag&&this.options.onDrag(),$(this.paneA).paneObject&&$(this.paneA).paneObject.resize(),$(this.paneB).paneObject&&$(this.paneB).paneObject.resize(),s&&(this.prefoldValue||(this.prefoldValue=150),"A"==this.options.foldingButton?this.paneA.addClassName("folded"):this.paneB.addClassName("folded"),this.splitbar.addClassName("folded"),this.setUserPreference("folded",!0),this.refreshFoldingAction())},cssCache:function(e,t,i,s,n){var o=!Prototype.Browser.IE||"CSS1Compat"==document.compatMode;e[t]=o?(parseInt(e.getStyle(i+s))||0)+(parseInt(e.getStyle(i+n))||0):0},optCache:function(e,t){e._min=Math.max(0,this.options["min"+t]||parseInt(e.getStyle("min-"+this.options.adjust))||0),e._max=Math.max(0,this.options["max"+t]||parseInt(e.getStyle("max-"+this.options.adjust))||0)},initCaches:function(){this.splitbar._adjust=this.splitbar[this.options.offsetAdjust],this.cssCache(this.group,"_borderAdjust","border",this.options.adjSide1,this.options.adjSide2),this.cssCache(this.group,"_borderFixed","border",this.options.fixSide1,this.options.fixSide2),this.cssCache(this.paneA,"_padAdjust","padding",this.options.adjSide1,this.options.adjSide2),this.cssCache(this.paneA,"_padFixed","padding",this.options.fixSide1,this.options.fixSide2),this.cssCache(this.paneB,"_padAdjust","padding",this.options.adjSide1,this.options.adjSide2),this.cssCache(this.paneB,"_padFixed","padding",this.options.fixSide1,this.options.fixSide2),this.optCache(this.paneA,"A"),this.optCache(this.paneB,"B")},getWidth:function(e){return e.offsetWidth},getHeight:function(e){if(void 0!==e.offsetHeight)return parseInt(e.offsetHeight);var t=e.getHeight();return!t&&e.parentNode&&(t=$(e.parentNode).getHeight(),Prototype.Browser.IE||(t-=parseInt(2*$(e.parentNode).paddingHeight))),t},makeStyleObject:function(e,t){var i={};return i[e]=t,i},getCurrentSize:function(){return this.options.getAdjust(this.paneA)},resize:function(){this.options.fit&&"height"==this.options.fit&&fitHeightToBottom(this.htmlElement,this.options.fitParent?$(this.options.fitParent):null),this.resizeGroup(null,null,!0),this.firstResizePassed||(this.userLoggedObs(),this.firstResizePassed=!0)},showElement:function(e){}}),Proto.History=Class.create({historyCurrentHash:void 0,historyCallback:void 0,initialize:function(e){this.historyCallback=e;var t=location.hash;if(this.historyCurrentHash=t,Prototype.Browser.IE){""==this.historyCurrentHash&&(this.historyCurrentHash="#"),bod=document.getElementsByTagName("body")[0];var i=new Element("iframe");i.writeAttribute("id","prototype_history").writeAttribute("style","display:none;"),bod.appendChild(i),(i=$("prototype_history").contentWindow.document).open(),i.close(),i.location.hash=t}else Prototype.Browser.WebKit&&(this.historyBackStack=[],this.historyBackStack.length=history.length,this.historyForwardStack=[],this.isFirst=!0);new PeriodicalExecuter(function(){this.historyCheck()}.bind(this),.2)},historyAddHistory:function(e){this.historyBackStack.push(e),this.historyForwardStack.length=0,this.isFirst=!0},historyCheck:function(){if(Prototype.Browser.IE){(s=($("prototype_history").contentDocument||$("prototype_history").contentWindow.document).location.hash)!=this.historyCurrentHash&&(location.hash=s,this.refreshFavicon(),this.historyCurrentHash=s,this.historyCallback(s.replace(/^#/,"")))}else if(Prototype.Browser.WebKit){if(!this.dontCheck){var e=history.length-this.historyBackStack.length;if(e){if(this.isFirst=!1,e<0)for(t=0;t<Math.abs(e);t++)this.historyForwardStack.unshift(this.historyBackStack.pop());else for(var t=0;t<e;t++)this.historyBackStack.push(this.historyForwardStack.shift());var i=this.historyBackStack[this.historyBackStack.length-1];void 0!=i&&(this.historyCurrentHash=location.hash,this.historyCallback(i))}else if(void 0==this.historyBackStack[this.historyBackStack.length-1]&&!this.isFirst){if(document.URL.indexOf("#")>=0)this.historyCallback(document.URL.split("#")[1]);else{s=location.hash;this.historyCallback("")}this.isFirst=!0}}}else{var s;(s=location.hash)!=this.historyCurrentHash&&(this.historyCurrentHash=s,this.historyCallback(s.replace(/^#/,"")))}},historyLoad:function(e){var t;if(Prototype.Browser.WebKit?t=e:(t="#"+e,location.hash=t,this.refreshFavicon()),this.historyCurrentHash=t,Prototype.Browser.IE){var i=$("prototype_history").contentWindow.document;i.open(),i.close(),i.location.hash=t}else if(Prototype.Browser.WebKit){this.dontCheck=!0,this.historyAddHistory(e);var s=function(){this.dontCheck=!1}.bind(this);window.setTimeout(s,200),location.hash=t,this.refreshFavicon()}},refreshFavicon:function(){if(Prototype.Browser.Gecko){var e=$$('link[type="image/x-png"]')[0].remove();$$("head")[0].insert('<link href="'+e.href+'" type="image/x-png" rel="icon">'),delete e}}});var CookieJar=Class.create();CookieJar.prototype={appendString:"__CJ_",initialize:function(e){if(this.options={expires:3600,path:"",domain:"",secure:""},Object.extend(this.options,e||{}),""!=this.options.expires){var t=new Date;t=new Date(t.getTime()+1e3*this.options.expires),this.options.expires="; expires="+t.toGMTString()}""!=this.options.path&&(this.options.path="; path="+escape(this.options.path)),""!=this.options.domain&&(this.options.domain="; domain="+escape(this.options.domain)),"secure"==this.options.secure?this.options.secure="; secure":this.options.secure=""},put:function(e,t){e=this.appendString+e,cookie=this.options;switch(typeof t){case"undefined":case"function":case"unknown":return!1;case"boolean":case"string":case"number":t=String(t.toString())}var i=e+"="+escape(Object.toJSON(t));try{document.cookie=i+cookie.expires+cookie.path+cookie.domain+cookie.secure}catch(e){return!1}return!0},remove:function(e){e=this.appendString+e,cookie=this.options;try{var t=new Date;t.setTime(t.getTime()-36e5);var i="; expires="+t.toGMTString();document.cookie=e+"="+i+cookie.path+cookie.domain+cookie.secure}catch(e){return!1}return!0},get:function(e){e=this.appendString+e;var t=document.cookie.match(e+"=(.*?)(;|$)");return t?unescape(t[1]).evalJSON():null},empty:function(){for(keys=this.getKeys(),size=keys.size(),i=0;i<size;i++)this.remove(keys[i])},getPack:function(){for(pack={},keys=this.getKeys(),size=keys.size(),i=0;i<size;i++)pack[keys[i]]=this.get(keys[i]);return pack},getKeys:function(){for(keys=$A(),keyRe=/[^=; ]+(?=\=)/g,str=document.cookie,CJRe=new RegExp("^"+this.appendString);void 0!=(match=keyRe.exec(str));)CJRe.test(match[0].strip())&&keys.push(match[0].strip().gsub("^"+this.appendString,""));return keys}};var Protopass=Class.create({initialize:function(e,t){if(this.item=$(e),this.field_name=this.item.id,this.options={messages:["Unsafe password word!","Too short","Very weak","Weak","Medium","Strong","Very strong"],colors:["#f00","#999","#f00","#c06","#f60","#3c0","#2c0"],scores:[10,15,30,40],common:["password","123456","123","1234","mypass","pass","letmein","qwerty","monkey","asdfgh","zxcvbn","pass"],minchar:8,barContainer:this.item,barPosition:"after",labelWidth:39},window.MessageHash){var i=[379,380,381,382,383,384,385];for(var s in i)this.options.messages[s]=window.MessageHash[i[s]]}window._bootstrap&&window._bootstrap.parameters.get("password_min_length")&&(this.options.minchar=window._bootstrap.parameters.get("password_min_length")),Object.extend(this.options,t||{});var n={},o='<div class="password-strength-info" style="float:left; padding-top: 2px; width:'+this.options.labelWidth+'%;text-align:right;" id="'+this.field_name+'_text"></div>';o+='<div style="float:left;width:'+(100-this.options.labelWidth-(Prototype.Browser.IE?7:0))+'%;"><div class="password-strength-bar" id="'+this.field_name+'_bar" style="'+(Prototype.Browser.IE?"":"margin-top:5px;")+'height:0px; width: 0px;"></div></div>',n[this.options.barPosition]=o,this.options.barContainer.insert(n),this.bar=$(this.field_name+"_bar"),this.feedback_text=$(this.field_name+"_text"),this.item.observe("keyup",function(){this.checkUserPasswordStrength()}.bind(this)),modal&&this.observeOnce("strength_change",function(){modal.refreshDialogAppearance()})},checkUserPasswordStrength:function(e){var t=this.options,i=this.item.value;this.field_name;strength=this.getPasswordScore(i,t),this.strength=strength,-200==strength?this.displayPasswordStrengthFeedback(0,0):strength<0&&strength>-199?this.displayPasswordStrengthFeedback(1,10):strength<=t.scores[0]?this.displayPasswordStrengthFeedback(2,10):strength>t.scores[0]&&strength<=t.scores[1]?this.displayPasswordStrengthFeedback(3,25):strength>t.scores[1]&&strength<=t.scores[2]?this.displayPasswordStrengthFeedback(4,55):strength>t.scores[2]&&strength<=t.scores[3]?this.displayPasswordStrengthFeedback(5,80):this.displayPasswordStrengthFeedback(6,98),this.notify("strength_change")},displayPasswordStrengthFeedback:function(e,t){this.feedback_text.innerHTML="<span style='color: "+this.options.colors[e]+";'>"+this.options.messages[e]+" &nbsp;&nbsp; </span>",this.bar.setStyle("height: "+(Prototype.Browser.IE?"5px":"8px;")+"; width:"+t+"%;background-color:"+this.options.colors[e]),this.options.barContainer.show()},getPasswordScore:function(e,t){var i=0;e.length<t.minchar?i-=100:e.length>=t.minchar&&e.length<=t.minchar+2?i+=6:e.length>=t.minchar+3&&e.length<=t.minchar+4?i+=12:e.length>=t.minchar+5&&(i+=18),e.match(/[a-z]/)&&(i+=1),e.match(/[A-Z]/)&&(i+=5),e.match(/\d+/)&&(i+=5),e.match(/(.*[0-9].*[0-9].*[0-9])/)&&(i+=7),e.match(/.[!,@,#,$,%,^,&,*,?,_,~]/)&&(i+=5),e.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)&&(i+=7),e.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(i+=2),e.match(/([a-zA-Z])/)&&e.match(/([0-9])/)&&(i+=3),e.match(/([a-zA-Z0-9].*[!,@,#,$,%,^,&,*,?,_,~])|([!,@,#,$,%,^,&,*,?,_,~].*[a-zA-Z0-9])/)&&(i+=3);for(var s=0;s<t.common.length;s++)e.toLowerCase()==t.common[s]&&(i=-200);return i}});Class.create("Resizable",{initialize:function(e){this.options=Object.extend({onStart:null,onEnd:null,default_style:!0,class_name:"resizableHandle"},arguments[1]||{}),this.options.onStart&&(this.onStart=this.options.onStart),this.options.onEnd&&(this.onEnd=this.options.onEnd),this.c=e,this.c.getStyle("position")||this.c.setStyle({position:"relative"}),this.resizer=new Element("div",{class:this.options.class_name}),this.options.default_style&&this.resizer.writeAttribute({style:"width:10px; height:10px; position:absolute; background-color:grey;"}),this.resizer.toggle(),this.c.insert(this.resizer),this.setResizer(),this.start_count=0,this.resizer.observe("mousedown",function(e){this.onStart&&this.start_count<1&&this.onStart(),this.c.observe("resizer:mousemove",function(e){this.resizing(e.memo)}.bind(this)),this.c.observe("resizer:mouseup",function(e){this.start_count=0,this.onEnd&&this.onEnd(),this.c.stopObserving("resizer:mousemove"),this.c.stopObserving("resizer:mouseup")}.bind(this));var t=Event.pointer(e);this.start_x=t.x,this.start_y=t.y,document.observe("mousemove",function(e){this.c.fire("resizer:mousemove",e)}.bind(this)),document.observe("mouseup",function(e){this.c.fire("resizer:mouseup",e)}.bind(this))}.bind(this)),this.resizer.ondragstart=function(){return!1},this.resizer.toggle()},setResizer:function(){var e=this.resizer.getLayout(),t=this.c.getLayout();Element.setStyle(this.resizer,{position:"absolute",left:t.get("padding-box-width")-e.get("padding-box-width")+"px",top:t.get("padding-box-height")-e.get("padding-box-width")+"px"})},resizing:function(e){var t=Event.pointer(e),i=t.x-this.start_x,s=t.y-this.start_y,n=this.c.getLayout();this.c.setStyle({width:n.get("width")+i+"px"}),this.c.setStyle({height:n.get("height")+s+"px"}),this.start_x=t.x,this.start_y=t.y,this.setResizer()}});var detect=navigator.userAgent.toLowerCase(),OS,browser,version,total,thestring,currentLightBox,currentDraggable;function getBrowserInfo(){checkIt("konqueror")?(browser="Konqueror",OS="Linux"):checkIt("safari")?browser="Safari":checkIt("omniweb")?browser="OmniWeb":checkIt("opera")?browser="Opera":checkIt("webtv")?browser="WebTV":checkIt("icab")?browser="iCab":checkIt("msie")?browser="Internet Explorer":checkIt("compatible")?browser="An unknown browser":(browser="Netscape Navigator",version=detect.charAt(8)),version||(version=detect.charAt(place+thestring.length)),OS||(OS=checkIt("linux")?"Linux":checkIt("x11")?"Unix":checkIt("mac")?"Mac":checkIt("win")?"Windows":"an unknown operating system")}function checkIt(e){return place=detect.indexOf(e)+1,thestring=e,place}Event.observe(window,"load",initialize,!1),Event.observe(window,"load",getBrowserInfo,!1);var lightbox=Class.create();lightbox.prototype={yPos:0,xPos:0,initialize:function(e){this.content=e},activate:function(){"Internet Explorer"==browser&&(this.getScroll(),this.setScroll(0,0)),this.displayLightbox("block")},prepareIE:function(e,t){bod=document.getElementsByTagName("body")[0],bod.style.overflow=t,bod.style.height=e,htm=document.getElementsByTagName("html")[0],htm.style.overflow=t,htm.style.height=e},hideSelects:function(e){for(selects=document.getElementsByTagName("select"),i=0;i<selects.length;i++)selects[i].style.visibility=e},getScroll:function(){self.pageYOffset?this.yPos=self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?this.yPos=document.documentElement.scrollTop:document.body&&(this.yPos=document.body.scrollTop)},setScroll:function(e,t){window.scrollTo(e,t)},displayLightbox:function(e){if($("overlay")||addLightboxMarkup(),"none"==e)$("overlay").fade({duration:.5,afterFinish:function(){this.originalStyle&&$("overlay").setStyle(this.originalStyle)}.bind(this)});else if($("overlay").setAttribute("style",""),$("overlay").style.display=e,this.overlayStyle){this.originalStyle={};for(var t in this.overlayStyle)this.originalStyle[t]=$("overlay").getStyle(t);$("overlay").setStyle(this.overlayStyle)}null!=this.content&&($(this.content).style.display=e,currentDraggable=new Draggable(this.content,{handle:"dialogTitle",zindex:1050,starteffect:function(e){},endeffect:function(e){}}))},actions:function(){for(lbActions=document.getElementsByClassName("lbAction"),i=0;i<lbActions.length;i++)Event.observe(lbActions[i],"click",this[lbActions[i].rel].bindAsEventListener(this),!1),lbActions[i].onclick=function(){return!1}},deactivate:function(){"Internet Explorer"==browser&&this.setScroll(0,this.yPos),this.displayLightbox("none")}};function initialize(){addLightboxMarkup(),Event.observe(document,"keydown",function(e){return null==e&&(e=window.event),27==e.keyCode&&(app.cancelCopyOrMove(),modal.currentLightBoxElement?(removeLightboxFromElement(modal.currentLightBoxElement),modal.currentLightBoxModal.remove(),modal.currentLightBoxElement=null,modal.currentLightBoxModal=null):hideLightBox()),9!=e.keyCode})}function displayLightBoxById(e,t){valid=new lightbox(e),t&&(valid.overlayStyle=t),valid.activate(),currentLightBox=valid}function hideLightBox(e){if(modal.closeValidation){if(!1===modal.closeValidation())return;modal.closeValidation=null}currentLightBox&&(currentLightBox.deactivate(),hideOverlay(),e||(currentLightBox=null),app.enableNavigation(),app.focusLast(),app.enableShortcuts(),document.fire("app:selection_changed")),currentDraggable&&currentDraggable.destroy(),modal.closeFunction&&(modal.closeFunction(),modal.closeFunction=null)}function setOverlay(){(currentLightBox=new lightbox(null)).activate()}function hideOverlay(){currentLightBox&&(currentLightBox.deactivate(),currentLightBox=null)}function addLightboxMarkup(){bod=document.getElementsByTagName("body")[0],overlay=document.createElement("div"),overlay.id="overlay",bod.appendChild(overlay)}function addLightboxMarkupToElement(e,t){overlay=document.createElement("div"),overlay.id="element_overlay";var i,s,n,o;if(Prototype.Browser.IE){i=(a=Position.positionedOffset($(e)))[1],s=0}else{var a=Position.cumulativeOffset($(e));i=a[1],s=a[0]}if(o=e.getWidth(),n=e.getHeight(),t){i=i+parseInt(t.getHeight())+"px",n=n+parseInt(t.getHeight())+"px"}var r={top:parseInt(e.getStyle("borderTopWidth")),bottom:parseInt(e.getStyle("borderBottomWidth")),right:parseInt(e.getStyle("borderRightWidth")),left:parseInt(e.getStyle("borderLeftWidth"))};i+=r.top,n-=r.top+r.bottom,s+=r.left,o-=r.left+r.right,$(overlay).setStyle({top:i,left:s,height:n,width:o}),e.appendChild(overlay)}function removeLightboxFromElement(e){var t=$(e).select("#element_overlay");t.length&&t[0].remove()}var Builder={NODEMAP:{AREA:"map",CAPTION:"table",COL:"table",COLGROUP:"table",LEGEND:"fieldset",OPTGROUP:"select",OPTION:"select",PARAM:"object",TBODY:"table",TD:"table",TFOOT:"table",TH:"table",THEAD:"table",TR:"table"},node:function(e){e=e.toUpperCase();var t=this.NODEMAP[e]||"div",i=document.createElement(t);try{i.innerHTML="<"+e+"></"+e+">"}catch(e){}var s=i.firstChild||null;if(s&&s.tagName.toUpperCase()!=e&&(s=s.getElementsByTagName(e)[0]),s||(s=document.createElement(e)),s){if(arguments[1])if(this._isStringOrNumber(arguments[1])||arguments[1]instanceof Array||arguments[1].tagName)this._children(s,arguments[1]);else{var n=this._attributes(arguments[1]);if(n.length){try{i.innerHTML="<"+e+" "+n+"></"+e+">"}catch(e){}if(!(s=i.firstChild||null)){s=document.createElement(e);for(attr in arguments[1])s["class"==attr?"className":attr]=arguments[1][attr]}s.tagName.toUpperCase()!=e&&(s=i.getElementsByTagName(e)[0])}}return arguments[2]&&this._children(s,arguments[2]),s}},_text:function(e){return document.createTextNode(e)},ATTR_MAP:{className:"class",htmlFor:"for"},_attributes:function(e){var t=[];for(attribute in e)t.push((attribute in this.ATTR_MAP?this.ATTR_MAP[attribute]:attribute)+'="'+e[attribute].toString().escapeHTML().gsub(/"/,"&quot;")+'"');return t.join(" ")},_children:function(e,t){t.tagName?e.appendChild(t):"object"==typeof t?t.flatten().each(function(t){"object"==typeof t?e.appendChild(t):Builder._isStringOrNumber(t)&&e.appendChild(Builder._text(t))}):Builder._isStringOrNumber(t)&&e.appendChild(Builder._text(t))},_isStringOrNumber:function(e){return"string"==typeof e||"number"==typeof e},build:function(e){var t=this.node("div");return $(t).update(e.strip()),t.down()},dump:function(e){"object"!=typeof e&&"function"!=typeof e&&(e=window);"A ABBR ACRONYM ADDRESS APPLET AREA B BASE BASEFONT BDO BIG BLOCKQUOTE BODY BR BUTTON CAPTION CENTER CITE CODE COL COLGROUP DD DEL DFN DIR DIV DL DT EM FIELDSET FONT FORM FRAME FRAMESET H1 H2 H3 H4 H5 H6 HEAD HR HTML I IFRAME IMG INPUT INS ISINDEX KBD LABEL LEGEND LI LINK MAP MENU META NOFRAMES NOSCRIPT OBJECT OL OPTGROUP OPTION P PARAM PRE Q S SAMP SCRIPT SELECT SMALL SPAN STRIKE STRONG STYLE SUB SUP TABLE TBODY TD TEXTAREA TFOOT TH THEAD TITLE TR TT U UL VAR".split(/\s+/).each(function(t){e[t]=function(){return Builder.node.apply(Builder,[t].concat($A(arguments)))}})}};String.prototype.parseColor=function(){var e="#";if("rgb("==this.slice(0,4)){var t=this.slice(4,this.length-1).split(","),i=0;do{e+=parseInt(t[i]).toColorPart()}while(++i<3)}else if("#"==this.slice(0,1)){if(4==this.length)for(i=1;i<4;i++)e+=(this.charAt(i)+this.charAt(i)).toLowerCase();7==this.length&&(e=this.toLowerCase())}return 7==e.length?e:arguments[0]||this},Element.collectTextNodes=function(e){return $A($(e).childNodes).collect(function(e){return 3==e.nodeType?e.nodeValue:e.hasChildNodes()?Element.collectTextNodes(e):""}).flatten().join("")},Element.collectTextNodesIgnoreClass=function(e,t){return $A($(e).childNodes).collect(function(e){return 3==e.nodeType?e.nodeValue:e.hasChildNodes()&&!Element.hasClassName(e,t)?Element.collectTextNodesIgnoreClass(e,t):""}).flatten().join("")},Element.setContentZoom=function(e,t){return(e=$(e)).setStyle({fontSize:t/100+"em"}),Prototype.Browser.WebKit&&window.scrollBy(0,0),e},Element.getInlineOpacity=function(e){return $(e).style.opacity||""},Element.forceRerendering=function(e){try{e=$(e);var t=document.createTextNode(" ");e.appendChild(t),e.removeChild(t)}catch(e){}};var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},Transitions:{linear:Prototype.K,sinoidal:function(e){return-Math.cos(e*Math.PI)/2+.5},reverse:function(e){return 1-e},flicker:function(e){return(e=-Math.cos(e*Math.PI)/4+.75+Math.random()/4)>1?1:e},wobble:function(e){return-Math.cos(e*Math.PI*(9*e))/2+.5},pulse:function(e,t){return t=t||5,0==(e%(1/t)*t).round()?e*t*2-(e*t*2).floor():1-(e*t*2-(e*t*2).floor())},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)},none:function(e){return 0},full:function(e){return 1}},DefaultOptions:{duration:1,fps:100,sync:!1,from:0,to:1,delay:0,queue:"parallel"},tagifyText:function(e){var t="position:relative";Prototype.Browser.IE&&(t+=";zoom:1"),e=$(e),$A(e.childNodes).each(function(i){3==i.nodeType&&(i.nodeValue.toArray().each(function(s){e.insertBefore(new Element("span",{style:t}).update(" "==s?String.fromCharCode(160):s),i)}),Element.remove(i))})},multiple:function(e,t){var i;i=("object"==typeof e||Object.isFunction(e))&&e.length?e:$(e).childNodes;var s=Object.extend({speed:.1,delay:0},arguments[2]||{}),n=s.delay;$A(i).each(function(e,i){new t(e,Object.extend(s,{delay:i*s.speed+n}))})},PAIRS:{slide:["SlideDown","SlideUp"],blind:["BlindDown","BlindUp"],appear:["Appear","Fade"]},toggle:function(e,t){e=$(e),t=(t||"appear").toLowerCase();var i=Object.extend({queue:{position:"end",scope:e.id||"global",limit:1}},arguments[2]||{});Effect[e.visible()?Effect.PAIRS[t][1]:Effect.PAIRS[t][0]](e,i)}};if(Effect.DefaultOptions.transition=Effect.Transitions.sinoidal,Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[],this.interval=null},_each:function(e){this.effects._each(e)},add:function(e){var t=(new Date).getTime();switch(Object.isString(e.options.queue)?e.options.queue:e.options.queue.position){case"front":this.effects.findAll(function(e){return"idle"==e.state}).each(function(t){t.startOn+=e.finishOn,t.finishOn+=e.finishOn});break;case"with-last":t=this.effects.pluck("startOn").max()||t;break;case"end":t=this.effects.pluck("finishOn").max()||t}e.startOn+=t,e.finishOn+=t,(!e.options.queue.limit||this.effects.length<e.options.queue.limit)&&this.effects.push(e),this.interval||(this.interval=setInterval(this.loop.bind(this),15))},remove:function(e){this.effects=this.effects.reject(function(t){return t==e}),0==this.effects.length&&(clearInterval(this.interval),this.interval=null)},loop:function(){for(var e=(new Date).getTime(),t=0,i=this.effects.length;t<i;t++)this.effects[t]&&this.effects[t].loop(e)}}),Effect.Queues={instances:$H(),get:function(e){return Object.isString(e)?this.instances.get(e)||this.instances.set(e,new Effect.ScopedQueue):e}},Effect.Queue=Effect.Queues.get("global"),Effect.Base=Class.create({position:null,start:function(options){function codeForEvent(e,t){return(e[t+"Internal"]?"this.options."+t+"Internal(this);":"")+(e[t]?"this.options."+t+"(this);":"")}options&&!1===options.transition&&(options.transition=Effect.Transitions.linear),this.options=Object.extend(Object.extend({},Effect.DefaultOptions),options||{}),this.currentFrame=0,this.state="idle",this.startOn=1e3*this.options.delay,this.finishOn=this.startOn+1e3*this.options.duration,this.fromToDelta=this.options.to-this.options.from,this.totalTime=this.finishOn-this.startOn,this.totalFrames=this.options.fps*this.options.duration,eval('this.render = function(pos){ if (this.state=="idle"){this.state="running";'+codeForEvent(this.options,"beforeSetup")+(this.setup?"this.setup();":"")+codeForEvent(this.options,"afterSetup")+'};if (this.state=="running"){pos=this.options.transition(pos)*'+this.fromToDelta+"+"+this.options.from+";this.position=pos;"+codeForEvent(this.options,"beforeUpdate")+(this.update?"this.update(pos);":"")+codeForEvent(this.options,"afterUpdate")+"}}"),this.event("beforeStart"),this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).add(this)},loop:function(e){if(e>=this.startOn){if(e>=this.finishOn)return this.render(1),this.cancel(),this.event("beforeFinish"),this.finish&&this.finish(),void this.event("afterFinish");var t=(e-this.startOn)/this.totalTime,i=(t*this.totalFrames).round();i>this.currentFrame&&(this.render(t),this.currentFrame=i)}},cancel:function(){this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).remove(this),this.state="finished"},event:function(e){this.options[e+"Internal"]&&this.options[e+"Internal"](this),this.options[e]&&this.options[e](this)},inspect:function(){var e=$H();for(property in this)Object.isFunction(this[property])||e.set(property,this[property]);return"#<Effect:"+e.inspect()+",options:"+$H(this.options).inspect()+">"}}),Effect.Parallel=Class.create(Effect.Base,{initialize:function(e){this.effects=e||[],this.start(arguments[1])},update:function(e){this.effects.invoke("render",e)},finish:function(e){this.effects.each(function(t){t.render(1),t.cancel(),t.event("beforeFinish"),t.finish&&t.finish(e),t.event("afterFinish")})}}),Effect.Tween=Class.create(Effect.Base,{initialize:function(e,t,i){e=Object.isString(e)?$(e):e;var s=$A(arguments),n=s.last(),o=5==s.length?s[3]:null;this.method=Object.isFunction(n)?n.bind(e):Object.isFunction(e[n])?e[n].bind(e):function(t){e[n]=t},this.start(Object.extend({from:t,to:i},o||{}))},update:function(e){this.method(e)}}),Effect.Event=Class.create(Effect.Base,{initialize:function(){this.start(Object.extend({duration:0},arguments[0]||{}))},update:Prototype.emptyFunction}),Effect.Opacity=Class.create(Effect.Base,{initialize:function(e){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});var t=Object.extend({from:this.element.getOpacity()||0,to:1},arguments[1]||{});this.start(t)},update:function(e){this.element.setOpacity(e)}}),Effect.Move=Class.create(Effect.Base,{initialize:function(e){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;var t=Object.extend({x:0,y:0,mode:"relative"},arguments[1]||{});this.start(t)},setup:function(){this.element.makePositioned(),this.originalLeft=parseFloat(this.element.getStyle("left")||"0"),this.originalTop=parseFloat(this.element.getStyle("top")||"0"),"absolute"==this.options.mode&&(this.options.x=this.options.x-this.originalLeft,this.options.y=this.options.y-this.originalTop)},update:function(e){this.element.setStyle({left:(this.options.x*e+this.originalLeft).round()+"px",top:(this.options.y*e+this.originalTop).round()+"px"})}}),Effect.MoveBy=function(e,t,i){return new Effect.Move(e,Object.extend({x:i,y:t},arguments[3]||{}))},Effect.Scale=Class.create(Effect.Base,{initialize:function(e,t){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;var i=Object.extend({scaleX:!0,scaleY:!0,scaleContent:!0,scaleFromCenter:!1,scaleMode:"box",scaleFrom:100,scaleTo:t},arguments[2]||{});this.start(i)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||!1,this.elementPositioning=this.element.getStyle("position"),this.originalStyle={},["top","left","width","height","fontSize"].each(function(e){this.originalStyle[e]=this.element.style[e]}.bind(this)),this.originalTop=this.element.offsetTop,this.originalLeft=this.element.offsetLeft;var e=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(t){e.indexOf(t)>0&&(this.fontSize=parseFloat(e),this.fontSizeType=t)}.bind(this)),this.factor=(this.options.scaleTo-this.options.scaleFrom)/100,this.dims=null,"box"==this.options.scaleMode&&(this.dims=[this.element.offsetHeight,this.element.offsetWidth]),/^content/.test(this.options.scaleMode)&&(this.dims=[this.element.scrollHeight,this.element.scrollWidth]),this.dims||(this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth])},update:function(e){var t=this.options.scaleFrom/100+this.factor*e;this.options.scaleContent&&this.fontSize&&this.element.setStyle({fontSize:this.fontSize*t+this.fontSizeType}),this.setDimensions(this.dims[0]*t,this.dims[1]*t)},finish:function(e){this.restoreAfterFinish&&this.element.setStyle(this.originalStyle)},setDimensions:function(e,t){var i={};if(this.options.scaleX&&(i.width=t.round()+"px"),this.options.scaleY&&(i.height=e.round()+"px"),this.options.scaleFromCenter){var s=(e-this.dims[0])/2,n=(t-this.dims[1])/2;"absolute"==this.elementPositioning?(this.options.scaleY&&(i.top=this.originalTop-s+"px"),this.options.scaleX&&(i.left=this.originalLeft-n+"px")):(this.options.scaleY&&(i.top=-s+"px"),this.options.scaleX&&(i.left=-n+"px"))}this.element.setStyle(i)}}),Effect.Highlight=Class.create(Effect.Base,{initialize:function(e){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;var t=Object.extend({startcolor:"#ffff99"},arguments[1]||{});this.start(t)},setup:function(){"none"!=this.element.getStyle("display")?(this.oldStyle={},this.options.keepBackgroundImage||(this.oldStyle.backgroundImage=this.element.getStyle("background-image"),this.element.setStyle({backgroundImage:"none"})),this.options.endcolor||(this.options.endcolor=this.element.getStyle("background-color").parseColor("#ffffff")),this.options.restorecolor||(this.options.restorecolor=this.element.getStyle("background-color")),this._base=$R(0,2).map(function(e){return parseInt(this.options.startcolor.slice(2*e+1,2*e+3),16)}.bind(this)),this._delta=$R(0,2).map(function(e){return parseInt(this.options.endcolor.slice(2*e+1,2*e+3),16)-this._base[e]}.bind(this))):this.cancel()},update:function(e){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(t,i,s){return t+(this._base[s]+this._delta[s]*e).round().toColorPart()}.bind(this))})},finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}}),Effect.ScrollTo=function(e){var t=arguments[1]||{},i=document.viewport.getScrollOffsets(),s=$(e).cumulativeOffset(),n=(window.height||document.body.scrollHeight)-document.viewport.getHeight();return t.offset&&(s[1]+=t.offset),new Effect.Tween(null,i.top,s[1]>n?n:s[1],t,function(e){scrollTo(i.left,e.round())})},Effect.Fade=function(e){var t=(e=$(e)).getInlineOpacity(),i=Object.extend({from:e.getOpacity()||1,to:0,afterFinishInternal:function(e){0==e.options.to&&e.element.hide().setStyle({opacity:t})}},arguments[1]||{});return new Effect.Opacity(e,i)},Effect.Appear=function(e){e=$(e);var t=Object.extend({from:"none"==e.getStyle("display")?0:e.getOpacity()||0,to:1,afterFinishInternal:function(e){e.element.forceRerendering()},beforeSetup:function(e){e.element.setOpacity(e.options.from).show()}},arguments[1]||{});return new Effect.Opacity(e,t)},Effect.Puff=function(e){var t={opacity:(e=$(e)).getInlineOpacity(),position:e.getStyle("position"),top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height};return new Effect.Parallel([new Effect.Scale(e,200,{sync:!0,scaleFromCenter:!0,scaleContent:!0,restoreAfterFinish:!0}),new Effect.Opacity(e,{sync:!0,to:0})],Object.extend({duration:1,beforeSetupInternal:function(e){Position.absolutize(e.effects[0].element)},afterFinishInternal:function(e){e.effects[0].element.hide().setStyle(t)}},arguments[1]||{}))},Effect.BlindUp=function(e){return(e=$(e)).makeClipping(),new Effect.Scale(e,0,Object.extend({scaleContent:!1,scaleX:!1,restoreAfterFinish:!0,afterFinishInternal:function(e){e.element.hide().undoClipping()}},arguments[1]||{}))},Effect.BlindDown=function(e){var t=(e=$(e)).getDimensions();return new Effect.Scale(e,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:0,scaleMode:{originalHeight:t.height,originalWidth:t.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(e){e.element.undoClipping()}},arguments[1]||{}))},Effect.SwitchOff=function(e){var t=(e=$(e)).getInlineOpacity();return new Effect.Appear(e,Object.extend({duration:.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(e){new Effect.Scale(e.element,1,{duration:.3,scaleFromCenter:!0,scaleX:!1,scaleContent:!1,restoreAfterFinish:!0,beforeSetup:function(e){e.element.makePositioned().makeClipping()},afterFinishInternal:function(e){e.element.hide().undoClipping().undoPositioned().setStyle({opacity:t})}})}},arguments[1]||{}))},Effect.DropOut=function(e){var t={top:(e=$(e)).getStyle("top"),left:e.getStyle("left"),opacity:e.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(e,{x:0,y:100,sync:!0}),new Effect.Opacity(e,{sync:!0,to:0})],Object.extend({duration:.5,beforeSetup:function(e){e.effects[0].element.makePositioned()},afterFinishInternal:function(e){e.effects[0].element.hide().undoPositioned().setStyle(t)}},arguments[1]||{}))},Effect.Shake=function(e){e=$(e);var t=Object.extend({distance:20,duration:.5},arguments[1]||{}),i=parseFloat(t.distance),s=parseFloat(t.duration)/10,n={top:e.getStyle("top"),left:e.getStyle("left")};return new Effect.Move(e,{x:i,y:0,duration:s,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*-i,y:0,duration:2*s,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*i,y:0,duration:2*s,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*-i,y:0,duration:2*s,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*i,y:0,duration:2*s,afterFinishInternal:function(e){new Effect.Move(e.element,{x:-i,y:0,duration:s,afterFinishInternal:function(e){e.element.undoPositioned().setStyle(n)}})}})}})}})}})}})},Effect.SlideDown=function(e){var t=(e=$(e).cleanWhitespace()).down().getStyle("bottom"),i=e.getDimensions();return new Effect.Scale(e,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:i.height,originalWidth:i.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makePositioned(),e.element.down().makePositioned(),window.opera&&e.element.setStyle({top:""}),e.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(e){e.element.down().setStyle({bottom:e.dims[0]-e.element.clientHeight+"px"})},afterFinishInternal:function(e){e.element.undoClipping().undoPositioned(),e.element.down().undoPositioned().setStyle({bottom:t})}},arguments[1]||{}))},Effect.SlideUp=function(e){var t=(e=$(e).cleanWhitespace()).down().getStyle("bottom"),i=e.getDimensions();return new Effect.Scale(e,window.opera?0:1,Object.extend({scaleContent:!1,scaleX:!1,scaleMode:"box",scaleFrom:100,scaleMode:{originalHeight:i.height,originalWidth:i.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makePositioned(),e.element.down().makePositioned(),window.opera&&e.element.setStyle({top:""}),e.element.makeClipping().show()},afterUpdateInternal:function(e){e.element.down().setStyle({bottom:e.dims[0]-e.element.clientHeight+"px"})},afterFinishInternal:function(e){e.element.hide().undoClipping().undoPositioned(),e.element.down().undoPositioned().setStyle({bottom:t})}},arguments[1]||{}))},Effect.Squish=function(e){return new Effect.Scale(e,window.opera?1:0,{restoreAfterFinish:!0,beforeSetup:function(e){e.element.makeClipping()},afterFinishInternal:function(e){e.element.hide().undoClipping()}})},Effect.Grow=function(e){e=$(e);var t,i,s,n,o=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},arguments[1]||{}),a={top:e.style.top,left:e.style.left,height:e.style.height,width:e.style.width,opacity:e.getInlineOpacity()},r=e.getDimensions();switch(o.direction){case"top-left":t=i=s=n=0;break;case"top-right":t=r.width,i=n=0,s=-r.width;break;case"bottom-left":t=s=0,i=r.height,n=-r.height;break;case"bottom-right":t=r.width,i=r.height,s=-r.width,n=-r.height;break;case"center":t=r.width/2,i=r.height/2,s=-r.width/2,n=-r.height/2}return new Effect.Move(e,{x:t,y:i,duration:.01,beforeSetup:function(e){e.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(e){new Effect.Parallel([new Effect.Opacity(e.element,{sync:!0,to:1,from:0,transition:o.opacityTransition}),new Effect.Move(e.element,{x:s,y:n,sync:!0,transition:o.moveTransition}),new Effect.Scale(e.element,100,{scaleMode:{originalHeight:r.height,originalWidth:r.width},sync:!0,scaleFrom:window.opera?1:0,transition:o.scaleTransition,restoreAfterFinish:!0})],Object.extend({beforeSetup:function(e){e.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(e){e.effects[0].element.undoClipping().undoPositioned().setStyle(a)}},o))}})},Effect.Shrink=function(e){e=$(e);var t,i,s=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},arguments[1]||{}),n={top:e.style.top,left:e.style.left,height:e.style.height,width:e.style.width,opacity:e.getInlineOpacity()},o=e.getDimensions();switch(s.direction){case"top-left":t=i=0;break;case"top-right":t=o.width,i=0;break;case"bottom-left":t=0,i=o.height;break;case"bottom-right":t=o.width,i=o.height;break;case"center":t=o.width/2,i=o.height/2}return new Effect.Parallel([new Effect.Opacity(e,{sync:!0,to:0,from:1,transition:s.opacityTransition}),new Effect.Scale(e,window.opera?1:0,{sync:!0,transition:s.scaleTransition,restoreAfterFinish:!0}),new Effect.Move(e,{x:t,y:i,sync:!0,transition:s.moveTransition})],Object.extend({beforeStartInternal:function(e){e.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(e){e.effects[0].element.hide().undoClipping().undoPositioned().setStyle(n)}},s))},Effect.Pulsate=function(e){e=$(e);var t=arguments[1]||{},i=e.getInlineOpacity(),s=t.transition||Effect.Transitions.sinoidal,n=function(e){return s(1-Effect.Transitions.pulse(e,t.pulses))};return n.bind(s),new Effect.Opacity(e,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(e){e.element.setStyle({opacity:i})}},t),{transition:n}))},Effect.Fold=function(e){var t={top:(e=$(e)).style.top,left:e.style.left,width:e.style.width,height:e.style.height};return e.makeClipping(),new Effect.Scale(e,5,Object.extend({scaleContent:!1,scaleX:!1,afterFinishInternal:function(i){new Effect.Scale(e,1,{scaleContent:!1,scaleY:!1,afterFinishInternal:function(e){e.element.hide().undoClipping().setStyle(t)}})}},arguments[1]||{}))},Effect.Morph=Class.create(Effect.Base,{initialize:function(e){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;var t=Object.extend({style:{}},arguments[1]||{});if(Object.isString(t.style))if(t.style.include(":"))this.style=t.style.parseStyle();else{this.element.addClassName(t.style),this.style=$H(this.element.getStyles()),this.element.removeClassName(t.style);var i=this.element.getStyles();this.style=this.style.reject(function(e){return e.value==i[e.key]}),t.afterFinishInternal=function(e){e.element.addClassName(e.options.style),e.transforms.each(function(t){e.element.style[t.style]=""})}}else this.style=$H(t.style);this.start(t)},setup:function(){function e(e){return e&&!["rgba(0, 0, 0, 0)","transparent"].include(e)||(e="#ffffff"),e=e.parseColor(),$R(0,2).map(function(t){return parseInt(e.slice(2*t+1,2*t+3),16)})}this.transforms=this.style.map(function(t){var i=t[0],s=t[1],n=null;if("#zzzzzz"!=s.parseColor("#zzzzzz"))s=s.parseColor(),n="color";else if("opacity"==i)s=parseFloat(s),Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});else if(Element.CSS_LENGTH.test(s)){var o=s.match(/^([\+\-]?[0-9\.]+)(.*)$/);s=parseFloat(o[1]),n=3==o.length?o[2]:null}var a=this.element.getStyle(i);return{style:i.camelize(),originalValue:"color"==n?e(a):parseFloat(a||0),targetValue:"color"==n?e(s):s,unit:n}}.bind(this)).reject(function(e){return e.originalValue==e.targetValue||"color"!=e.unit&&(isNaN(e.originalValue)||isNaN(e.targetValue))})},update:function(e){for(var t,i={},s=this.transforms.length;s--;)i[(t=this.transforms[s]).style]="color"==t.unit?"#"+Math.round(t.originalValue[0]+(t.targetValue[0]-t.originalValue[0])*e).toColorPart()+Math.round(t.originalValue[1]+(t.targetValue[1]-t.originalValue[1])*e).toColorPart()+Math.round(t.originalValue[2]+(t.targetValue[2]-t.originalValue[2])*e).toColorPart():(t.originalValue+(t.targetValue-t.originalValue)*e).toFixed(3)+(null===t.unit?"":t.unit);this.element.setStyle(i,!0)}}),Effect.Transform=Class.create({initialize:function(e){this.tracks=[],this.options=arguments[1]||{},this.addTracks(e)},addTracks:function(e){return e.each(function(e){var t=(e=$H(e)).values().first();this.tracks.push($H({ids:e.keys().first(),effect:Effect.Morph,options:{style:t}}))}.bind(this)),this},play:function(){return new Effect.Parallel(this.tracks.map(function(e){var t=e.get("ids"),i=e.get("effect"),s=e.get("options");return[$(t)||$$(t)].flatten().map(function(e){return new i(e,Object.extend({sync:!0},s))})}).flatten(),this.options)}}),Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex"),Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$/,String.__parseStyleElement=document.createElement("div"),String.prototype.parseStyle=function(){var e,t=$H();return Prototype.Browser.WebKit?e=new Element("div",{style:this}).style:(String.__parseStyleElement.innerHTML='<div style="'+this+'"></div>',e=String.__parseStyleElement.childNodes[0].style),Element.CSS_PROPERTIES.each(function(i){e[i]&&t.set(i,e[i])}),Prototype.Browser.IE&&this.include("opacity")&&t.set("opacity",this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1]),t},document.defaultView&&document.defaultView.getComputedStyle?Element.getStyles=function(e){var t=document.defaultView.getComputedStyle($(e),null);return Element.CSS_PROPERTIES.inject({},function(e,i){return e[i]=t[i],e})}:Element.getStyles=function(e){var t,i=(e=$(e)).currentStyle;return(t=Element.CSS_PROPERTIES.inject({},function(e,t){return e.set(t,i[t]),e})).opacity||t.set("opacity",e.getOpacity()),t},Effect.Methods={morph:function(e,t){return e=$(e),new Effect.Morph(e,Object.extend({style:t},arguments[2]||{})),e},visualEffect:function(e,t,i){e=$(e);var s=t.dasherize().camelize(),n=s.charAt(0).toUpperCase()+s.substring(1);return new Effect[n](e,i),e},highlight:function(e,t){return e=$(e),new Effect.Highlight(e,t),e}},$w("fade appear grow shrink fold blindUp blindDown slideUp slideDown pulsate shake puff squish switchOff dropOut").each(function(e){Effect.Methods[e]=function(t,i){return t=$(t),Effect[e.charAt(0).toUpperCase()+e.substring(1)](t,i),t}}),$w("getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles").each(function(e){Effect.Methods[e]=Element[e]}),Element.addMethods(Effect.Methods),Object.isUndefined(Effect))throw"dragdrop.js requires including script.aculo.us' effects.js library";var Droppables={drops:[],remove:function(e){this.drops=this.drops.reject(function(t){return t.element==$(e)})},add:function(e){e=$(e);var t=Object.extend({greedy:!0,hoverclass:null,tree:!1},arguments[1]||{});if(t.containment){t._containers=[];var i=t.containment;Object.isArray(i)?i.each(function(e){t._containers.push($(e))}):t._containers.push($(i))}t.accept&&(t.accept=[t.accept].flatten()),Element.makePositioned(e),t.element=e,this.drops.push(t)},findDeepestChild:function(e){for(deepest=e[0],i=1;i<e.length;++i)Element.isParent(e[i].element,deepest.element)&&(deepest=e[i]);return deepest},isContained:function(e,t){var i;return i=t.tree?e.treeNode:e.parentNode,t._containers.detect(function(e){return i==e})},isAffected:function(e,t,i){return i.element&&i.element!=t&&(!i._containers||this.isContained(t,i))&&(!i.accept||Element.classNames(t).detect(function(e){return i.accept.include(e)}))&&Position.within(i.element,e[0],e[1])},deactivate:function(e){e.hoverclass&&Element.removeClassName(e.element,e.hoverclass),e.onOut&&e.onOut(e.element),this.last_active=null},activate:function(e){e.hoverclass&&Element.addClassName(e.element,e.hoverclass),this.last_active=e},show:function(e,t){if(this.drops.length){var i,s=[];$A(this.drops).each(function(i){Droppables.isAffected(e,t,i)&&s.push(i)}),s.length>0&&(i=Droppables.findDeepestChild(s)),this.last_active&&this.last_active!=i&&this.deactivate(this.last_active),i&&(Position.within(i.element,e[0],e[1]),i.onHover&&i.onHover(t,i.element,Position.overlap(i.overlap,i.element)),i!=this.last_active&&Droppables.activate(i))}},fire:function(e,t){if(this.last_active)return Position.prepare(),Position.includeScrollOffsets=!0,this.isAffected([Event.pointerX(e),Event.pointerY(e)],t,this.last_active)&&this.last_active.onDrop?(this.last_active.onDrop(t,this.last_active.element,e),!0):void 0},reset:function(){this.last_active&&this.deactivate(this.last_active)}},Draggables={drags:[],observers:[],register:function(e){0==this.drags.length&&(this.eventMouseUp=this.endDrag.bindAsEventListener(this),this.eventMouseMove=this.updateDrag.bindAsEventListener(this),this.eventKeypress=this.keyPress.bindAsEventListener(this),Event.observe(document,"mouseup",this.eventMouseUp),Event.observe(document,"mousemove",this.eventMouseMove),Event.observe(document,"keypress",this.eventKeypress)),this.drags.push(e)},unregister:function(e){this.drags=this.drags.reject(function(t){return t==e}),0==this.drags.length&&(Event.stopObserving(document,"mouseup",this.eventMouseUp),Event.stopObserving(document,"mousemove",this.eventMouseMove),Event.stopObserving(document,"keypress",this.eventKeypress))},activate:function(e){e.options.delay?this._timeout=setTimeout(function(){Draggables._timeout=null,window.focus(),Draggables.activeDraggable=e}.bind(this),e.options.delay):(window.focus(),this.activeDraggable=e)},deactivate:function(){this.activeDraggable=null},updateDrag:function(e){if(this.activeDraggable){var t=[Event.pointerX(e),Event.pointerY(e)];this._lastPointer&&this._lastPointer.inspect()==t.inspect()||(this._lastPointer=t,this.activeDraggable.updateDrag(e,t))}},endDrag:function(e){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.activeDraggable&&(this._lastPointer=null,this.activeDraggable.endDrag(e),this.activeDraggable=null)},keyPress:function(e){this.activeDraggable&&this.activeDraggable.keyPress(e)},addObserver:function(e){this.observers.push(e),this._cacheObserverCallbacks()},removeObserver:function(e){this.observers=this.observers.reject(function(t){return t.element==e}),this._cacheObserverCallbacks()},notify:function(e,t,i){this[e+"Count"]>0&&this.observers.each(function(s){s[e]&&s[e](e,t,i)}),t.options[e]&&t.options[e](t,i)},_cacheObserverCallbacks:function(){["onStart","onEnd","onDrag"].each(function(e){Draggables[e+"Count"]=Draggables.observers.select(function(t){return t[e]}).length})}},Draggable=Class.create({initialize:function(e){var t={handle:!1,reverteffect:function(e,t,i){var s=.02*Math.sqrt(Math.abs(2^t)+Math.abs(2^i));new Effect.Move(e,{x:-i,y:-t,duration:s,queue:{scope:"_draggable",position:"end"}})},endeffect:function(e){var t=Object.isNumber(e._opacity)?e._opacity:1;new Effect.Opacity(e,{duration:.2,from:.7,to:t,queue:{scope:"_draggable",position:"end"},afterFinish:function(){Draggable._dragging[e]=!1}})},zindex:1e3,revert:!1,quiet:!1,scroll:!1,scrollSensitivity:20,scrollSpeed:15,snap:!1,delay:0};arguments[1]&&!Object.isUndefined(arguments[1].endeffect)||Object.extend(t,{starteffect:function(e){e._opacity=Element.getOpacity(e),Draggable._dragging[e]=!0,new Effect.Opacity(e,{duration:.2,from:e._opacity,to:.7})}});var i=Object.extend(t,arguments[1]||{});this.element=$(e),i.handle&&Object.isString(i.handle)&&(this.handle=this.element.down("."+i.handle,0)),this.handle||(this.handle=$(i.handle)),this.handle||(this.handle=this.element),!i.scroll||i.scroll.scrollTo||i.scroll.outerHTML||(i.scroll=$(i.scroll),this._isScrollChild=Element.childOf(this.element,i.scroll)),Element.makePositioned(this.element),this.options=i,this.dragging=!1,this.eventMouseDown=this.initDrag.bindAsEventListener(this),Event.observe(this.handle,"mousedown",this.eventMouseDown),Draggables.register(this)},destroy:function(){Event.stopObserving(this.handle,"mousedown",this.eventMouseDown),Draggables.unregister(this)},currentDelta:function(){return[parseInt(Element.getStyle(this.element,"left")||"0"),parseInt(Element.getStyle(this.element,"top")||"0")]},initDrag:function(e){if((Object.isUndefined(Draggable._dragging[this.element])||!Draggable._dragging[this.element])&&Event.isLeftClick(e)){var t=Event.element(e);if((tag_name=t.tagName.toUpperCase())&&("INPUT"==tag_name||"SELECT"==tag_name||"OPTION"==tag_name||"BUTTON"==tag_name||"TEXTAREA"==tag_name))return;var i=[Event.pointerX(e),Event.pointerY(e)],s=Position.cumulativeOffset(this.element);this.offset=[0,1].map(function(e){return i[e]-s[e]}),Draggables.activate(this),Event.stop(e)}},startDrag:function(e){if(this.dragging=!0,this.delta||(this.delta=this.currentDelta()),this.options.zindex&&(this.originalZ=parseInt(Element.getStyle(this.element,"z-index")||0),this.element.style.zIndex=this.options.zindex),this.options.ghosting&&(this._clone=this.element.cloneNode(!0),this.element._originallyAbsolute="absolute"==this.element.getStyle("position"),this.element._originallyAbsolute||Position.absolutize(this.element),this.element.parentNode.insertBefore(this._clone,this.element)),this.options.scroll)if(this.options.scroll==window){var t=this._getWindowScroll(this.options.scroll);this.originalScrollLeft=t.left,this.originalScrollTop=t.top}else this.originalScrollLeft=this.options.scroll.scrollLeft,this.originalScrollTop=this.options.scroll.scrollTop;Draggables.notify("onStart",this,e),this.options.starteffect&&this.options.starteffect(this.element)},updateDrag:function(event,pointer){if(this.dragging||this.startDrag(event),this.options.quiet||(Position.prepare(),Position.includeScrollOffsets=!0,Droppables.show(pointer,this.element)),Draggables.notify("onDrag",this,event),this.draw(pointer),this.options.change&&this.options.change(this),this.options.scroll){this.stopScrolling();var p;if(this.options.scroll==window)with(this._getWindowScroll(this.options.scroll))p=[left,top,left+width,top+height];else p=Position.page(this.options.scroll),p[0]+=this.options.scroll.scrollLeft+Position.deltaX,p[1]+=this.options.scroll.scrollTop+Position.deltaY,p[2]=p[0]+this.options.scroll.offsetWidth,p[3]=p[1]+this.options.scroll.offsetHeight;var speed=[0,0];pointer[0]<p[0]+this.options.scrollSensitivity&&(speed[0]=pointer[0]-(p[0]+this.options.scrollSensitivity)),pointer[1]<p[1]+this.options.scrollSensitivity&&(speed[1]=pointer[1]-(p[1]+this.options.scrollSensitivity)),pointer[0]>p[2]-this.options.scrollSensitivity&&(speed[0]=pointer[0]-(p[2]-this.options.scrollSensitivity)),pointer[1]>p[3]-this.options.scrollSensitivity&&(speed[1]=pointer[1]-(p[3]-this.options.scrollSensitivity)),this.startScrolling(speed)}Prototype.Browser.WebKit&&window.scrollBy(0,0),Event.stop(event)},finishDrag:function(e,t){if(this.dragging=!1,this.options.quiet){Position.prepare(),Position.includeScrollOffsets=!0;var i=[Event.pointerX(e),Event.pointerY(e)];Droppables.show(i,this.element)}this.options.ghosting&&(this.element._originallyAbsolute||Position.relativize(this.element),delete this.element._originallyAbsolute,Element.remove(this._clone),this._clone=null);var s=!1;t&&((s=Droppables.fire(e,this.element))||(s=!1)),s&&this.options.onDropped&&this.options.onDropped(this.element),Draggables.notify("onEnd",this,e);var n=this.options.revert;n&&Object.isFunction(n)&&(n=n(this.element));var o=this.currentDelta();n&&this.options.reverteffect?0!=s&&"failure"==n||this.options.reverteffect(this.element,o[1]-this.delta[1],o[0]-this.delta[0]):this.delta=o,this.options.zindex&&(this.element.style.zIndex=this.originalZ),this.options.endeffect&&this.options.endeffect(this.element),Draggables.deactivate(this),Droppables.reset()},keyPress:function(e){e.keyCode==Event.KEY_ESC&&(this.finishDrag(e,!1),Event.stop(e))},endDrag:function(e){this.dragging&&(this.stopScrolling(),this.finishDrag(e,!0),Event.stop(e))},draw:function(e){var t=Position.cumulativeOffset(this.element);if(this.options.ghosting){var i=Position.realOffset(this.element);t[0]+=i[0]-Position.deltaX,t[1]+=i[1]-Position.deltaY}var s=this.currentDelta();t[0]-=s[0],t[1]-=s[1],this.options.scroll&&this.options.scroll!=window&&this._isScrollChild&&(t[0]-=this.options.scroll.scrollLeft-this.originalScrollLeft,t[1]-=this.options.scroll.scrollTop-this.originalScrollTop);var n=[0,1].map(function(i){return e[i]-t[i]-this.offset[i]}.bind(this));this.options.snap&&(n=Object.isFunction(this.options.snap)?this.options.snap(n[0],n[1],this):Object.isArray(this.options.snap)?n.map(function(e,t){return(e/this.options.snap[t]).round()*this.options.snap[t]}.bind(this)):n.map(function(e){return(e/this.options.snap).round()*this.options.snap}.bind(this)));var o=this.element.style;this.options.constraint&&"horizontal"!=this.options.constraint||(o.left=n[0]+"px"),this.options.constraint&&"vertical"!=this.options.constraint||(o.top=n[1]+"px"),"hidden"==o.visibility&&(o.visibility="")},stopScrolling:function(){this.scrollInterval&&(clearInterval(this.scrollInterval),this.scrollInterval=null,Draggables._lastScrollPointer=null)},startScrolling:function(e){(e[0]||e[1])&&(this.scrollSpeed=[e[0]*this.options.scrollSpeed,e[1]*this.options.scrollSpeed],this.lastScrolled=new Date,this.scrollInterval=setInterval(this.scroll.bind(this),10))},scroll:function(){var current=new Date,delta=current-this.lastScrolled;if(this.lastScrolled=current,this.options.scroll==window){with(this._getWindowScroll(this.options.scroll))if(this.scrollSpeed[0]||this.scrollSpeed[1]){var d=delta/1e3;this.options.scroll.scrollTo(left+d*this.scrollSpeed[0],top+d*this.scrollSpeed[1])}}else this.options.scroll.scrollLeft+=this.scrollSpeed[0]*delta/1e3,this.options.scroll.scrollTop+=this.scrollSpeed[1]*delta/1e3;Position.prepare(),Position.includeScrollOffsets=!0,Droppables.show(Draggables._lastPointer,this.element),Draggables.notify("onDrag",this),this._isScrollChild&&(Draggables._lastScrollPointer=Draggables._lastScrollPointer||$A(Draggables._lastPointer),Draggables._lastScrollPointer[0]+=this.scrollSpeed[0]*delta/1e3,Draggables._lastScrollPointer[1]+=this.scrollSpeed[1]*delta/1e3,Draggables._lastScrollPointer[0]<0&&(Draggables._lastScrollPointer[0]=0),Draggables._lastScrollPointer[1]<0&&(Draggables._lastScrollPointer[1]=0),this.draw(Draggables._lastScrollPointer)),this.options.change&&this.options.change(this)},_getWindowScroll:function(w){var T,L,W,H;with(w.document)w.document.documentElement&&documentElement.scrollTop?(T=documentElement.scrollTop,L=documentElement.scrollLeft):w.document.body&&(T=body.scrollTop,L=body.scrollLeft),w.innerWidth?(W=w.innerWidth,H=w.innerHeight):w.document.documentElement&&documentElement.clientWidth?(W=documentElement.clientWidth,H=documentElement.clientHeight):(W=body.offsetWidth,H=body.offsetHeight);return{top:T,left:L,width:W,height:H}}});Draggable._dragging={};var SortableObserver=Class.create({initialize:function(e,t){this.element=$(e),this.observer=t,this.lastValue=Sortable.serialize(this.element)},onStart:function(){this.lastValue=Sortable.serialize(this.element)},onEnd:function(){Sortable.unmark(),this.lastValue!=Sortable.serialize(this.element)&&this.observer(this.element)}}),Sortable={SERIALIZE_RULE:/^[^_\-](?:[A-Za-z0-9\-\_]*)[_](.*)$/,sortables:{},_findRootElement:function(e){for(;"BODY"!=e.tagName.toUpperCase();){if(e.id&&Sortable.sortables[e.id])return e;e=e.parentNode}},options:function(e){if(e=Sortable._findRootElement($(e)))return Sortable.sortables[e.id]},destroy:function(e){var t=Sortable.options(e);t&&(Draggables.removeObserver(t.element),t.droppables.each(function(e){Droppables.remove(e)}),t.draggables.invoke("destroy"),delete Sortable.sortables[t.element.id])},create:function(e){e=$(e);var t=Object.extend({element:e,tag:"li",dropOnEmpty:!1,tree:!1,treeTag:"ul",overlap:"vertical",constraint:"vertical",containment:e,handle:!1,only:!1,delay:0,hoverclass:null,ghosting:!1,quiet:!1,scroll:!1,scrollSensitivity:20,scrollSpeed:15,format:this.SERIALIZE_RULE,elements:!1,handles:!1,onChange:Prototype.emptyFunction,onUpdate:Prototype.emptyFunction},arguments[1]||{});this.destroy(e);var i={revert:!0,quiet:t.quiet,scroll:t.scroll,scrollSpeed:t.scrollSpeed,scrollSensitivity:t.scrollSensitivity,delay:t.delay,ghosting:t.ghosting,constraint:t.constraint,handle:t.handle};t.starteffect&&(i.starteffect=t.starteffect),t.reverteffect?i.reverteffect=t.reverteffect:t.ghosting&&(i.reverteffect=function(e){e.style.top=0,e.style.left=0}),t.endeffect&&(i.endeffect=t.endeffect),t.zindex&&(i.zindex=t.zindex);var s={overlap:t.overlap,containment:t.containment,tree:t.tree,hoverclass:t.hoverclass,onHover:Sortable.onHover},n={onHover:Sortable.onEmptyHover,overlap:t.overlap,containment:t.containment,hoverclass:t.hoverclass};Element.cleanWhitespace(e),t.draggables=[],t.droppables=[],(t.dropOnEmpty||t.tree)&&(Droppables.add(e,n),t.droppables.push(e)),(t.elements||this.findElements(e,t)||[]).each(function(n,o){var a=t.handles?$(t.handles[o]):t.handle?$(n).select("."+t.handle)[0]:n;t.draggables.push(new Draggable(n,Object.extend(i,{handle:a}))),Droppables.add(n,s),t.tree&&(n.treeNode=e),t.droppables.push(n)}),t.tree&&(Sortable.findTreeElements(e,t)||[]).each(function(i){Droppables.add(i,n),i.treeNode=e,t.droppables.push(i)}),this.sortables[e.id]=t,Draggables.addObserver(new SortableObserver(e,t.onUpdate))},findElements:function(e,t){return Element.findChildren(e,t.only,!!t.tree,t.tag)},findTreeElements:function(e,t){return Element.findChildren(e,t.only,!!t.tree,t.treeTag)},onHover:function(e,t,i){if(!(Element.isParent(t,e)||i>.33&&i<.66&&Sortable.options(t).tree))if(i>.5){if(Sortable.mark(t,"before"),t.previousSibling!=e){n=e.parentNode;e.style.visibility="hidden",t.parentNode.insertBefore(e,t),t.parentNode!=n&&Sortable.options(n).onChange(e),Sortable.options(t.parentNode).onChange(e)}}else{Sortable.mark(t,"after");var s=t.nextSibling||null;if(s!=e){var n=e.parentNode;e.style.visibility="hidden",t.parentNode.insertBefore(e,s),t.parentNode!=n&&Sortable.options(n).onChange(e),Sortable.options(t.parentNode).onChange(e)}}},onEmptyHover:function(e,t,i){var s=e.parentNode,n=Sortable.options(t);if(!Element.isParent(t,e)){var o,a=Sortable.findElements(t,{tag:n.tag,only:n.only}),r=null;if(a){var l=Element.offsetSize(t,n.overlap)*(1-i);for(o=0;o<a.length;o+=1){if(!(l-Element.offsetSize(a[o],n.overlap)>=0)){if(l-Element.offsetSize(a[o],n.overlap)/2>=0){r=o+1<a.length?a[o+1]:null;break}r=a[o];break}l-=Element.offsetSize(a[o],n.overlap)}}t.insertBefore(e,r),Sortable.options(s).onChange(e),n.onChange(e)}},unmark:function(){Sortable._marker&&Sortable._marker.hide()},mark:function(e,t){var i=Sortable.options(e.parentNode);if(!i||i.ghosting){Sortable._marker||(Sortable._marker=($("dropmarker")||Element.extend(document.createElement("DIV"))).hide().addClassName("dropmarker").setStyle({position:"absolute"}),document.getElementsByTagName("body").item(0).appendChild(Sortable._marker));var s=Position.cumulativeOffset(e);Sortable._marker.setStyle({left:s[0]+"px",top:s[1]+"px"}),"after"==t&&("horizontal"==i.overlap?Sortable._marker.setStyle({left:s[0]+e.clientWidth+"px"}):Sortable._marker.setStyle({top:s[1]+e.clientHeight+"px"})),Sortable._marker.show()}},_tree:function(e,t,i){for(var s=Sortable.findElements(e,t)||[],n=0;n<s.length;++n){var o=s[n].id.match(t.format);if(o){var a={id:encodeURIComponent(o?o[1]:null),element:e,parent:i,children:[],position:i.children.length,container:$(s[n]).down(t.treeTag)};a.container&&this._tree(a.container,t,a),i.children.push(a)}}return i},tree:function(e){e=$(e);var t=this.options(e),i=Object.extend({tag:t.tag,treeTag:t.treeTag,only:t.only,name:e.id,format:t.format},arguments[1]||{}),s={id:null,parent:null,children:[],container:e,position:0};return Sortable._tree(e,i,s)},_constructIndex:function(e){var t="";do{e.id&&(t="["+e.position+"]"+t)}while(null!=(e=e.parent));return t},sequence:function(e){e=$(e);var t=Object.extend(this.options(e),arguments[1]||{});return $(this.findElements(e,t)||[]).map(function(e){return e.id.match(t.format)?e.id.match(t.format)[1]:""})},setSequence:function(e,t){e=$(e);var i=Object.extend(this.options(e),arguments[2]||{}),s={};this.findElements(e,i).each(function(e){e.id.match(i.format)&&(s[e.id.match(i.format)[1]]=[e,e.parentNode]),e.parentNode.removeChild(e)}),t.each(function(e){var t=s[e];t&&(t[1].appendChild(t[0]),delete s[e])})},serialize:function(e){e=$(e);var t=Object.extend(Sortable.options(e),arguments[1]||{}),i=encodeURIComponent(arguments[1]&&arguments[1].name?arguments[1].name:e.id);return t.tree?Sortable.tree(e,arguments[1]).children.map(function(e){return[i+Sortable._constructIndex(e)+"[id]="+encodeURIComponent(e.id)].concat(e.children.map(arguments.callee))}).flatten().join("&"):Sortable.sequence(e,arguments[1]).map(function(e){return i+"[]="+encodeURIComponent(e)}).join("&")}};if(Element.isParent=function(e,t){return!(!e.parentNode||e==t)&&(e.parentNode==t||Element.isParent(e.parentNode,t))},Element.findChildren=function(e,t,i,s){if(!e.hasChildNodes())return null;s=s.toUpperCase(),t&&(t=[t].flatten());var n=[];return $A(e.childNodes).each(function(e){if(!e.tagName||e.tagName.toUpperCase()!=s||t&&!Element.classNames(e).detect(function(e){return t.include(e)})||n.push(e),i){var o=Element.findChildren(e,t,i,s);o&&n.push(o)}}),n.length>0?n.flatten():[]},Element.offsetSize=function(e,t){return e["offset"+("vertical"==t||"height"==t?"Height":"Width")]},void 0===Effect)throw"controls.js requires including script.aculo.us' effects.js library";var Autocompleter={};if(Autocompleter.Base=Class.create({baseInitialize:function(e,t,i){e=$(e),this.element=e,this.update=$(t),this.hasFocus=!1,this.changed=!1,this.active=!1,this.index=0,this.entryCount=0,this.oldElementValue=this.element.value,this.setOptions?this.setOptions(i):this.options=i||{},this.options.paramName=this.options.paramName||this.element.name,this.options.tokens=this.options.tokens||[],this.options.frequency=this.options.frequency||.4,this.options.minChars=this.options.minChars||1,this.options.onShow=this.options.onShow||function(e,t){t.style.position&&"absolute"!=t.style.position||(t.style.position="absolute",Position.clone(e,t,{setHeight:!1,offsetTop:e.offsetHeight})),Effect.Appear(t,{duration:.15})},this.options.onHide=this.options.onHide||function(e,t){new Effect.Fade(t,{duration:.15})},"string"==typeof this.options.tokens&&(this.options.tokens=new Array(this.options.tokens)),this.options.tokens.include("\n")||this.options.tokens.push("\n"),this.observer=null,this.element.setAttribute("autocomplete","off"),Element.hide(this.update),Event.observe(this.element,"blur",this.onBlur.bindAsEventListener(this)),Event.observe(this.element,"keypress",this.onKeyPress.bindAsEventListener(this))},show:function(){"none"==Element.getStyle(this.update,"display")&&this.options.onShow(this.element,this.update),!this.iefix&&Prototype.Browser.IE&&"absolute"==Element.getStyle(this.update,"position")&&(new Insertion.After(this.update,'<iframe id="'+this.update.id+'_iefix" style="display:none;position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);" src="javascript:false;" frameborder="0" scrolling="no"></iframe>'),this.iefix=$(this.update.id+"_iefix")),this.iefix&&setTimeout(this.fixIEOverlapping.bind(this),50)},fixIEOverlapping:function(){Position.clone(this.update,this.iefix,{setTop:!this.update.style.height}),this.iefix.style.zIndex=3e3,this.update.style.zIndex=3001,Element.show(this.iefix)},hide:function(){this.stopIndicator(),"none"!=Element.getStyle(this.update,"display")&&this.options.onHide(this.element,this.update),this.iefix&&Element.hide(this.iefix)},startIndicator:function(){this.options.indicator&&Element.show(this.options.indicator)},stopIndicator:function(){this.options.indicator&&Element.hide(this.options.indicator)},onKeyPress:function(e){if(this.active)switch(e.keyCode){case Event.KEY_TAB:case Event.KEY_RETURN:this.selectEntry(),Event.stop(e);case Event.KEY_ESC:return this.hide(),this.active=!1,void Event.stop(e);case Event.KEY_LEFT:case Event.KEY_RIGHT:return;case Event.KEY_UP:return this.markPrevious(),this.render(),void(Prototype.Browser.WebKit&&Event.stop(e));case Event.KEY_DOWN:return this.markNext(),this.render(),void(Prototype.Browser.WebKit&&Event.stop(e))}else if(e.keyCode==Event.KEY_TAB||e.keyCode==Event.KEY_RETURN||Prototype.Browser.WebKit>0&&0==e.keyCode)return;this.changed=!0,this.hasFocus=!0,this.observer&&clearTimeout(this.observer),this.observer=setTimeout(this.onObserverEvent.bind(this),1e3*this.options.frequency)},activate:function(){this.changed=!1,this.hasFocus=!0,this.getUpdatedChoices()},onHover:function(e){var t=Event.findElement(e,"LI");this.index!=t.autocompleteIndex&&(this.index=t.autocompleteIndex,this.render()),Event.stop(e)},onClick:function(e){var t=Event.findElement(e,"LI");t&&(this.index=t.autocompleteIndex,this.selectEntry(),this.hide())},onBlur:function(e){this.hasFocus=!1},onMouseup:function(e){this.hasFocus||(this.hideTimeout=setTimeout(this.hide.bind(this),250),this.hasFocus=!1,this.active=!1)},render:function(){if(this.entryCount>0){for(var e=0;e<this.entryCount;e++)this.index==e?Element.addClassName(this.getEntry(e),"selected"):Element.removeClassName(this.getEntry(e),"selected");this.hasFocus&&(this.show(),this.active=!0)}else this.active=!1,this.hide()},markPrevious:function(){this.index>0?this.index--:this.index=this.entryCount-1,this.getEntry(this.index).scrollIntoView(!0)},markNext:function(){this.index<this.entryCount-1?this.index++:this.index=0,this.getEntry(this.index).scrollIntoView(!1)},getEntry:function(e){return this.update.firstChild.childNodes[e]},getCurrentEntry:function(){return this.getEntry(this.index)},selectEntry:function(){this.active=!1,this.updateElement(this.getCurrentEntry())},updateElement:function(e){if(this.options.updateElement)this.options.updateElement(e);else{var t="";if(this.options.select){var i=$(e).select("."+this.options.select)||[];i.length>0&&(t=Element.collectTextNodes(i[0],this.options.select))}else t=Element.collectTextNodesIgnoreClass(e,"informal");var s=this.getTokenBounds();if(-1!=s[0]){var n=this.element.value.substr(0,s[0]),o=this.element.value.substr(s[0]).match(/^\s+/);o&&(n+=o[0]),this.element.value=n+t+this.element.value.substr(s[1])}else this.element.value=t;this.oldElementValue=this.element.value,this.element.focus(),this.options.afterUpdateElement&&this.options.afterUpdateElement(this.element,e)}},updateChoices:function(e){if(!this.changed&&this.hasFocus){if(this.update.innerHTML=e,Element.cleanWhitespace(this.update),Element.cleanWhitespace(this.update.down()),this.update.firstChild&&this.update.down().childNodes){this.entryCount=this.update.down().childNodes.length;for(var t=0;t<this.entryCount;t++){var i=this.getEntry(t);i.autocompleteIndex=t,this.addObservers(i)}}else this.entryCount=0;this.stopIndicator(),this.index=0,1==this.entryCount&&this.options.autoSelect?(this.selectEntry(),this.hide()):this.render()}},addObservers:function(e){Event.observe(e,"mouseover",this.onHover.bindAsEventListener(this)),Event.observe(e,"click",this.onClick.bindAsEventListener(this)),Event.observe($(document),"mouseup",this.onMouseup.bindAsEventListener(this))},onObserverEvent:function(){this.changed=!1,this.tokenBounds=null,this.getToken().length>=this.options.minChars?this.getUpdatedChoices():(this.active=!1,this.hide()),this.oldElementValue=this.element.value},getToken:function(){var e=this.getTokenBounds();return this.element.value.substring(e[0],e[1]).strip()},getTokenBounds:function(){if(null!=this.tokenBounds)return this.tokenBounds;var e=this.element.value;if(e.strip().empty())return[-1,0];for(var t,i=arguments.callee.getFirstDifferencePos(e,this.oldElementValue),s=i==this.oldElementValue.length?1:0,n=-1,o=e.length,a=0,r=this.options.tokens.length;a<r;++a)(t=e.lastIndexOf(this.options.tokens[a],i+s-1))>n&&(n=t),-1!=(t=e.indexOf(this.options.tokens[a],i+s))&&t<o&&(o=t);return this.tokenBounds=[n+1,o]}}),Autocompleter.Base.prototype.getTokenBounds.getFirstDifferencePos=function(e,t){for(var i=Math.min(e.length,t.length),s=0;s<i;++s)if(e[s]!=t[s])return s;return i},Ajax.Autocompleter=Class.create(Autocompleter.Base,{initialize:function(e,t,i,s){this.baseInitialize(e,t,s),this.options.asynchronous=!0,this.options.onComplete=this.onComplete.bind(this),this.options.defaultParams=this.options.parameters||null,this.url=i},getUpdatedChoices:function(){this.startIndicator();var e=encodeURIComponent(this.options.paramName)+"="+encodeURIComponent(this.getToken());this.options.parameters=this.options.callback?this.options.callback(this.element,e):e,this.options.defaultParams&&(this.options.parameters+="&"+this.options.defaultParams),new Ajax.Request(this.url,this.options)},onComplete:function(e){this.updateChoices(e.responseText)}}),Autocompleter.Local=Class.create(Autocompleter.Base,{initialize:function(e,t,i,s){this.baseInitialize(e,t,s),this.options.array=i},getUpdatedChoices:function(){this.updateChoices(this.options.selector(this))},setOptions:function(e){this.options=Object.extend({choices:10,partialSearch:!0,partialChars:2,ignoreCase:!0,fullSearch:!1,selector:function(e){for(var t=[],i=[],s=e.getToken(),n=0;n<e.options.array.length&&t.length<e.options.choices;n++)for(var o=e.options.array[n],a=e.options.ignoreCase?o.toLowerCase().indexOf(s.toLowerCase()):o.indexOf(s);-1!=a;){if(0==a&&o.length!=s.length){t.push("<li><strong>"+o.substr(0,s.length)+"</strong>"+o.substr(s.length)+"</li>");break}if(s.length>=e.options.partialChars&&e.options.partialSearch&&-1!=a&&(e.options.fullSearch||/\s/.test(o.substr(a-1,1)))){i.push("<li>"+o.substr(0,a)+"<strong>"+o.substr(a,s.length)+"</strong>"+o.substr(a+s.length)+"</li>");break}a=e.options.ignoreCase?o.toLowerCase().indexOf(s.toLowerCase(),a+1):o.indexOf(s,a+1)}return i.length&&(t=t.concat(i.slice(0,e.options.choices-t.length))),"<ul>"+t.join("")+"</ul>"}},e||{})}}),Field.scrollFreeActivate=function(e){setTimeout(function(){Field.activate(e)},1)},Ajax.InPlaceEditor=Class.create({initialize:function(e,t,i){this.url=t,this.element=e=$(e),this.prepareOptions(),this._controls={},arguments.callee.dealWithDeprecatedOptions(i),Object.extend(this.options,i||{}),!this.options.formId&&this.element.id&&(this.options.formId=this.element.id+"-inplaceeditor",$(this.options.formId)&&(this.options.formId="")),this.options.externalControl&&(this.options.externalControl=$(this.options.externalControl)),this.options.externalControl||(this.options.externalControlOnly=!1),this._originalBackground=this.element.getStyle("background-color")||"transparent",this.element.title=this.options.clickToEditText,this._boundCancelHandler=this.handleFormCancellation.bind(this),this._boundComplete=(this.options.onComplete||Prototype.emptyFunction).bind(this),this._boundFailureHandler=this.handleAJAXFailure.bind(this),this._boundSubmitHandler=this.handleFormSubmission.bind(this),this._boundWrapperHandler=this.wrapUp.bind(this),this.registerListeners()},checkForEscapeOrReturn:function(e){!this._editing||e.ctrlKey||e.altKey||e.shiftKey||(Event.KEY_ESC==e.keyCode?this.handleFormCancellation(e):Event.KEY_RETURN==e.keyCode&&this.handleFormSubmission(e))},createControl:function(e,t,i){var s=this.options[e+"Control"],n=this.options[e+"Text"];if("button"==s){var o=document.createElement("input");o.type="submit",o.value=n,o.className="editor_"+e+"_button","cancel"==e&&(o.onclick=this._boundCancelHandler),this._form.appendChild(o),this._controls[e]=o}else if("link"==s){var a=document.createElement("a");a.href="#",a.appendChild(document.createTextNode(n)),a.onclick="cancel"==e?this._boundCancelHandler:this._boundSubmitHandler,a.className="editor_"+e+"_link",i&&(a.className+=" "+i),this._form.appendChild(a),this._controls[e]=a}},createEditField:function(){var e,t=this.options.loadTextURL?this.options.loadingText:this.getText();if(1>=this.options.rows&&!/\r|\n/.test(this.getText())){(e=document.createElement("input")).type="text";var i=this.options.size||this.options.cols||0;0<i&&(e.size=i)}else(e=document.createElement("textarea")).rows=1>=this.options.rows?this.options.autoRows:this.options.rows,e.cols=this.options.cols||40;e.name=this.options.paramName,e.value=t,e.className="editor_field",this.options.submitOnBlur&&(e.onblur=this._boundSubmitHandler),this._controls.editor=e,this.options.loadTextURL&&this.loadExternalText(),this._form.appendChild(this._controls.editor)},createForm:function(){var e=this;function t(t,i){var s=e.options["text"+t+"Controls"];s&&!1!==i&&e._form.appendChild(document.createTextNode(s))}this._form=$(document.createElement("form")),this._form.id=this.options.formId,this._form.addClassName(this.options.formClassName),this._form.onsubmit=this._boundSubmitHandler,this.createEditField(),"textarea"==this._controls.editor.tagName.toLowerCase()&&this._form.appendChild(document.createElement("br")),this.options.onFormCustomization&&this.options.onFormCustomization(this,this._form),t("Before",this.options.okControl||this.options.cancelControl),this.createControl("ok",this._boundSubmitHandler),t("Between",this.options.okControl&&this.options.cancelControl),this.createControl("cancel",this._boundCancelHandler,"editor_cancel"),t("After",this.options.okControl||this.options.cancelControl)},destroy:function(){this._oldInnerHTML&&(this.element.innerHTML=this._oldInnerHTML),this.leaveEditMode(),this.unregisterListeners()},enterEditMode:function(e){this._saving||this._editing||(this._editing=!0,this.triggerCallback("onEnterEditMode"),this.options.externalControl&&this.options.externalControl.hide(),this.element.hide(),this.createForm(),this.element.parentNode.insertBefore(this._form,this.element),this.options.loadTextURL||this.postProcessEditField(),e&&Event.stop(e))},enterHover:function(e){this.options.hoverClassName&&this.element.addClassName(this.options.hoverClassName),this._saving||this.triggerCallback("onEnterHover")},getText:function(){return this.element.innerHTML},handleAJAXFailure:function(e){this.triggerCallback("onFailure",e),this._oldInnerHTML&&(this.element.innerHTML=this._oldInnerHTML,this._oldInnerHTML=null)},handleFormCancellation:function(e){this.wrapUp(),e&&Event.stop(e)},handleFormSubmission:function(e){var t=this._form,i=$F(this._controls.editor);this.prepareSubmission();var s=this.options.callback(t,i)||"";if(Object.isString(s)&&(s=s.toQueryParams()),s.editorId=this.element.id,this.options.htmlResponse){n=Object.extend({evalScripts:!0},this.options.ajaxOptions);Object.extend(n,{parameters:s,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler}),new Ajax.Updater({success:this.element},this.url,n)}else{var n=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(n,{parameters:s,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler}),new Ajax.Request(this.url,n)}e&&Event.stop(e)},leaveEditMode:function(){this.element.removeClassName(this.options.savingClassName),this.removeForm(),this.leaveHover(),this.element.style.backgroundColor=this._originalBackground,this.element.show(),this.options.externalControl&&this.options.externalControl.show(),this._saving=!1,this._editing=!1,this._oldInnerHTML=null,this.triggerCallback("onLeaveEditMode")},leaveHover:function(e){this.options.hoverClassName&&this.element.removeClassName(this.options.hoverClassName),this._saving||this.triggerCallback("onLeaveHover")},loadExternalText:function(){this._form.addClassName(this.options.loadingClassName),this._controls.editor.disabled=!0;var e=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(e,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(e){this._form.removeClassName(this.options.loadingClassName);var t=e.responseText;this.options.stripLoadedTextTags&&(t=t.stripTags()),this._controls.editor.value=t,this._controls.editor.disabled=!1,this.postProcessEditField()}.bind(this),onFailure:this._boundFailureHandler}),new Ajax.Request(this.options.loadTextURL,e)},postProcessEditField:function(){var e=this.options.fieldPostCreation;e&&$(this._controls.editor)["focus"==e?"focus":"activate"]()},prepareOptions:function(){this.options=Object.clone(Ajax.InPlaceEditor.DefaultOptions),Object.extend(this.options,Ajax.InPlaceEditor.DefaultCallbacks),[this._extraDefaultOptions].flatten().compact().each(function(e){Object.extend(this.options,e)}.bind(this))},prepareSubmission:function(){this._saving=!0,this.removeForm(),this.leaveHover(),this.showSaving()},registerListeners:function(){this._listeners={};var e;$H(Ajax.InPlaceEditor.Listeners).each(function(t){e=this[t.value].bind(this),this._listeners[t.key]=e,this.options.externalControlOnly||this.element.observe(t.key,e),this.options.externalControl&&this.options.externalControl.observe(t.key,e)}.bind(this))},removeForm:function(){this._form&&(this._form.remove(),this._form=null,this._controls={})},showSaving:function(){this._oldInnerHTML=this.element.innerHTML,this.element.innerHTML=this.options.savingText,this.element.addClassName(this.options.savingClassName),this.element.style.backgroundColor=this._originalBackground,this.element.show()},triggerCallback:function(e,t){"function"==typeof this.options[e]&&this.options[e](this,t)},unregisterListeners:function(){$H(this._listeners).each(function(e){this.options.externalControlOnly||this.element.stopObserving(e.key,e.value),this.options.externalControl&&this.options.externalControl.stopObserving(e.key,e.value)}.bind(this))},wrapUp:function(e){this.leaveEditMode(),this._boundComplete(e,this.element)}}),Object.extend(Ajax.InPlaceEditor.prototype,{dispose:Ajax.InPlaceEditor.prototype.destroy}),Ajax.InPlaceCollectionEditor=Class.create(Ajax.InPlaceEditor,{initialize:function($super,e,t,i){this._extraDefaultOptions=Ajax.InPlaceCollectionEditor.DefaultOptions,$super(e,t,i)},createEditField:function(){var e=document.createElement("select");e.name=this.options.paramName,e.size=1,this._controls.editor=e,this._collection=this.options.collection||[],this.options.loadCollectionURL?this.loadCollection():this.checkForExternalText(),this._form.appendChild(this._controls.editor)},loadCollection:function(){this._form.addClassName(this.options.loadingClassName),this.showLoadingText(this.options.loadingCollectionText);var options=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(options,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(transport){var js=transport.responseText.strip();if(!/^\[.*\]$/.test(js))throw"Server returned an invalid collection representation.";this._collection=eval(js),this.checkForExternalText()}.bind(this),onFailure:this.onFailure}),new Ajax.Request(this.options.loadCollectionURL,options)},showLoadingText:function(e){this._controls.editor.disabled=!0;var t=this._controls.editor.firstChild;t||((t=document.createElement("option")).value="",this._controls.editor.appendChild(t),t.selected=!0),t.update((e||"").stripScripts().stripTags())},checkForExternalText:function(){this._text=this.getText(),this.options.loadTextURL?this.loadExternalText():this.buildOptionList()},loadExternalText:function(){this.showLoadingText(this.options.loadingText);var e=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(e,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(e){this._text=e.responseText.strip(),this.buildOptionList()}.bind(this),onFailure:this.onFailure}),new Ajax.Request(this.options.loadTextURL,e)},buildOptionList:function(){this._form.removeClassName(this.options.loadingClassName),this._collection=this._collection.map(function(e){return 2===e.length?e:[e,e].flatten()});var e="value"in this.options?this.options.value:this._text,t=this._collection.any(function(t){return t[0]==e}.bind(this));this._controls.editor.update("");var i;this._collection.each(function(s,n){(i=document.createElement("option")).value=s[0],i.selected=t?s[0]==e:0==n,i.appendChild(document.createTextNode(s[1])),this._controls.editor.appendChild(i)}.bind(this)),this._controls.editor.disabled=!1,Field.scrollFreeActivate(this._controls.editor)}}),Ajax.InPlaceEditor.prototype.initialize.dealWithDeprecatedOptions=function(e){e&&(t("cancelControl",e.cancelLink?"link":e.cancelButton?"button":e.cancelLink==e.cancelButton!=0&&void 0),t("okControl",e.okLink?"link":e.okButton?"button":e.okLink==e.okButton!=0&&void 0),t("highlightColor",e.highlightcolor),t("highlightEndColor",e.highlightendcolor));function t(t,i){t in e||void 0===i||(e[t]=i)}},Object.extend(Ajax.InPlaceEditor,{DefaultOptions:{ajaxOptions:{},autoRows:3,cancelControl:"link",cancelText:"cancel",clickToEditText:"Click to edit",externalControl:null,externalControlOnly:!1,fieldPostCreation:"activate",formClassName:"inplaceeditor-form",formId:null,highlightColor:"#ffff99",highlightEndColor:"#ffffff",hoverClassName:"",htmlResponse:!0,loadingClassName:"inplaceeditor-loading",loadingText:"Loading...",okControl:"button",okText:"ok",paramName:"value",rows:1,savingClassName:"inplaceeditor-saving",savingText:"Saving...",size:0,stripLoadedTextTags:!1,submitOnBlur:!1,textAfterControls:"",textBeforeControls:"",textBetweenControls:""},DefaultCallbacks:{callback:function(e){return Form.serialize(e)},onComplete:function(e,t){new Effect.Highlight(t,{startcolor:this.options.highlightColor,keepBackgroundImage:!0})},onEnterEditMode:null,onEnterHover:function(e){e.element.style.backgroundColor=e.options.highlightColor,e._effect&&e._effect.cancel()},onFailure:function(e,t){alert("Error communication with the server: "+e.responseText.stripTags())},onFormCustomization:null,onLeaveEditMode:null,onLeaveHover:function(e){e._effect=new Effect.Highlight(e.element,{startcolor:e.options.highlightColor,endcolor:e.options.highlightEndColor,restorecolor:e._originalBackground,keepBackgroundImage:!0})}},Listeners:{click:"enterEditMode",keydown:"checkForEscapeOrReturn",mouseover:"enterHover",mouseout:"leaveHover"}}),Ajax.InPlaceCollectionEditor.DefaultOptions={loadingCollectionText:"Loading options..."},Form.Element.DelayedObserver=Class.create({initialize:function(e,t,i){this.delay=t||.5,this.element=$(e),this.callback=i,this.timer=null,this.lastValue=$F(this.element),Event.observe(this.element,"keyup",this.delayedListener.bindAsEventListener(this))},delayedListener:function(e){this.lastValue!=$F(this.element)&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.onTimerEvent.bind(this),1e3*this.delay),this.lastValue=$F(this.element))},onTimerEvent:function(){this.timer=null,this.callback(this.element,$F(this.element))}}),!Control)var Control={};if(Control.Slider=Class.create({initialize:function(e,t,i){var s=this;Object.isArray(e)?this.handles=e.collect(function(e){return $(e)}):this.handles=[$(e)],this.track=$(t),this.options=i||{},this.axis=this.options.axis||"horizontal",this.increment=this.options.increment||1,this.step=parseInt(this.options.step||"1"),this.range=this.options.range||$R(0,1),this.value=0,this.values=this.handles.map(function(){return 0}),this.spans=!!this.options.spans&&this.options.spans.map(function(e){return $(e)}),this.options.startSpan=$(this.options.startSpan||null),this.options.endSpan=$(this.options.endSpan||null),this.restricted=this.options.restricted||!1,this.maximum=this.options.maximum||this.range.end,this.minimum=this.options.minimum||this.range.start,this.alignX=parseInt(this.options.alignX||"0"),this.alignY=parseInt(this.options.alignY||"0"),this.trackLength=this.maximumOffset()-this.minimumOffset(),this.handleLength=this.isVertical()?0!=this.handles[0].offsetHeight?this.handles[0].offsetHeight:this.handles[0].style.height.replace(/px$/,""):0!=this.handles[0].offsetWidth?this.handles[0].offsetWidth:this.handles[0].style.width.replace(/px$/,""),this.active=!1,this.dragging=!1,this.disabled=!1,this.options.disabled&&this.setDisabled(),this.allowedValues=!!this.options.values&&this.options.values.sortBy(Prototype.K),this.allowedValues&&(this.minimum=this.allowedValues.min(),this.maximum=this.allowedValues.max()),this.eventMouseDown=this.startDrag.bindAsEventListener(this),this.eventMouseUp=this.endDrag.bindAsEventListener(this),this.eventMouseMove=this.update.bindAsEventListener(this),this.handles.each(function(e,t){t=s.handles.length-1-t,s.setValue(parseFloat((Object.isArray(s.options.sliderValue)?s.options.sliderValue[t]:s.options.sliderValue)||s.range.start),t),e.makePositioned().observe("mousedown",s.eventMouseDown)}),this.track.observe("mousedown",this.eventMouseDown),document.observe("mouseup",this.eventMouseUp),document.observe("mousemove",this.eventMouseMove),this.initialized=!0},dispose:function(){var e=this;Event.stopObserving(this.track,"mousedown",this.eventMouseDown),Event.stopObserving(document,"mouseup",this.eventMouseUp),Event.stopObserving(document,"mousemove",this.eventMouseMove),this.handles.each(function(t){Event.stopObserving(t,"mousedown",e.eventMouseDown)})},setDisabled:function(){this.disabled=!0},setEnabled:function(){this.disabled=!1},getNearestValue:function(e){if(this.allowedValues){if(e>=this.allowedValues.max())return this.allowedValues.max();if(e<=this.allowedValues.min())return this.allowedValues.min();var t=Math.abs(this.allowedValues[0]-e),i=this.allowedValues[0];return this.allowedValues.each(function(s){var n=Math.abs(s-e);n<=t&&(i=s,t=n)}),i}return e>this.range.end?this.range.end:e<this.range.start?this.range.start:e},setValue:function(e,t){this.active||(this.activeHandleIdx=t||0,this.activeHandle=this.handles[this.activeHandleIdx],this.updateStyles()),t=t||this.activeHandleIdx||0,this.initialized&&this.restricted&&(t>0&&e<this.values[t-1]&&(e=this.values[t-1]),t<this.handles.length-1&&e>this.values[t+1]&&(e=this.values[t+1])),e=this.getNearestValue(e),this.values[t]=e,this.value=this.values[0],this.handles[t].style[this.isVertical()?"top":"left"]=this.translateToPx(e),this.drawSpans(),this.dragging&&this.event||this.updateFinished()},setValueBy:function(e,t){this.setValue(this.values[t||this.activeHandleIdx||0]+e,t||this.activeHandleIdx||0)},translateToPx:function(e){return Math.round((this.trackLength-this.handleLength)/(this.range.end-this.range.start)*(e-this.range.start))+"px"},translateToValue:function(e){return e/(this.trackLength-this.handleLength)*(this.range.end-this.range.start)+this.range.start},getRange:function(e){var t=this.values.sortBy(Prototype.K);return e=e||0,$R(t[e],t[e+1])},minimumOffset:function(){return this.isVertical()?this.alignY:this.alignX},maximumOffset:function(){return this.isVertical()?(0!=this.track.offsetHeight?this.track.offsetHeight:this.track.style.height.replace(/px$/,""))-this.alignY:(0!=this.track.offsetWidth?this.track.offsetWidth:this.track.style.width.replace(/px$/,""))-this.alignX},isVertical:function(){return"vertical"==this.axis},drawSpans:function(){var e=this;this.spans&&$R(0,this.spans.length-1).each(function(t){e.setSpan(e.spans[t],e.getRange(t))}),this.options.startSpan&&this.setSpan(this.options.startSpan,$R(0,this.values.length>1?this.getRange(0).min():this.value)),this.options.endSpan&&this.setSpan(this.options.endSpan,$R(this.values.length>1?this.getRange(this.spans.length-1).max():this.value,this.maximum))},setSpan:function(e,t){this.isVertical()?(e.style.top=this.translateToPx(t.start),e.style.height=this.translateToPx(t.end-t.start+this.range.start)):(e.style.left=this.translateToPx(t.start),e.style.width=this.translateToPx(t.end-t.start+this.range.start))},updateStyles:function(){this.handles.each(function(e){Element.removeClassName(e,"selected")}),Element.addClassName(this.activeHandle,"selected")},startDrag:function(e){if(Event.isLeftClick(e)){if(!this.disabled){this.active=!0;var t=Event.element(e),i=[Event.pointerX(e),Event.pointerY(e)];if(t==this.track){s=Position.cumulativeOffset(this.track);this.event=e,this.setValue(this.translateToValue((this.isVertical()?i[1]-s[1]:i[0]-s[0])-this.handleLength/2));s=Position.cumulativeOffset(this.activeHandle);this.offsetX=i[0]-s[0],this.offsetY=i[1]-s[1]}else{for(;-1==this.handles.indexOf(t)&&t.parentNode;)t=t.parentNode;if(-1!=this.handles.indexOf(t)){this.activeHandle=t,this.activeHandleIdx=this.handles.indexOf(this.activeHandle),this.updateStyles();var s=Position.cumulativeOffset(this.activeHandle);this.offsetX=i[0]-s[0],this.offsetY=i[1]-s[1]}}}Event.stop(e)}},update:function(e){this.active&&(this.dragging||(this.dragging=!0),this.draw(e),Prototype.Browser.WebKit&&window.scrollBy(0,0),Event.stop(e))},draw:function(e){var t=[Event.pointerX(e),Event.pointerY(e)],i=Position.cumulativeOffset(this.track);t[0]-=this.offsetX+i[0],t[1]-=this.offsetY+i[1],this.event=e,this.setValue(this.translateToValue(this.isVertical()?t[1]:t[0])),this.initialized&&this.options.onSlide&&this.options.onSlide(this.values.length>1?this.values:this.value,this)},endDrag:function(e){this.active&&this.dragging&&(this.finishDrag(e,!0),Event.stop(e)),this.active=!1,this.dragging=!1},finishDrag:function(e,t){this.active=!1,this.dragging=!1,this.updateFinished()},updateFinished:function(){this.initialized&&this.options.onChange&&this.options.onChange(this.values.length>1?this.values:this.value,this),this.event=null}}),"undefined"==typeof Prototype)throw"Control.ScrollBar requires Prototype to be loaded.";if(void 0===Control.Slider)throw"Control.ScrollBar requires Control.Slider to be loaded.";if(void 0===Object.Event)throw"Control.ScrollBar requires Object.Event to be loaded.";Control.ScrollBar=Class.create({initialize:function(e,t,i){Control.ScrollBar.instances.push(this),this.enabled=!1,this.notificationTimeout=!1,this.container=$(e),this.container.scrollerInstance=this,this.boundMouseWheelEvent=this.onMouseWheel.bindAsEventListener(this),this.boundResizeObserver=this.onWindowResize.bind(this),this.track=$(t),this.handle=this.track.firstDescendant(),this.options=Object.extend({active_class_name:"scrolling",apply_active_class_name_to:this.container,notification_timeout_length:125,handle_minimum_length:25,scroll_to_smoothing:.01,scroll_to_steps:15,scroll_to_precision:100,proportional:!0,custom_event:null,custom_event_handler:null,scroll_axis:"vertical",fixed_scroll_distance:-1,slider_options:{}},i||{}),this.slider=new Control.Slider(this.handle,this.track,Object.extend({axis:this.options.scroll_axis,onSlide:this.onChange.bind(this),onChange:this.onChange.bind(this)},this.options.slider_options)),this.recalculateLayout(),Event.observe(window,"resize",this.boundResizeObserver),this.options.custom_event&&(Object.isFunction(this.options.custom_event_handler)?this.container.observe(this.options.custom_event,this.options.custom_event_handler):this.container.observe(this.options.custom_event,this.boundResizeObserver)),this.handle.observe("mousedown",function(){this.auto_sliding_executer&&this.auto_sliding_executer.stop()}.bind(this))},destroy:function(){Event.stopObserving(window,"resize",this.boundResizeObserver),this.options.active_class_name&&$(this.options.apply_active_class_name_to).removeClassName(this.options.active_class_name),this.options.custom_event&&this.container.stopObserving(this.options.custom_event)},scrollLength:function(){return"vertical"==this.options.scroll_axis?this.container.scrollHeight:this.container.scrollWidth},offsetLength:function(){return"vertical"==this.options.scroll_axis?this.container.offsetHeight:this.container.offsetWidth},enable:function(){this.enabled=!0,this.container.observe("mouse:wheel",this.boundMouseWheelEvent),this.slider.setEnabled(),this.track.show(),this.options.active_class_name&&$(this.options.apply_active_class_name_to).addClassName(this.options.active_class_name),this.notify("enabled")},disable:function(){this.enabled=!1,this.container.stopObserving("mouse:wheel",this.boundMouseWheelEvent),this.slider.setDisabled(),this.track.hide(),this.options.active_class_name&&$(this.options.apply_active_class_name_to).removeClassName(this.options.active_class_name),this.notify("disabled"),this.reset()},reset:function(){this.slider.setValue(0)},recalculateLayout:function(){if(this.scrollLength()<=this.offsetLength())this.disable();else{if(this.enable(),this.slider.trackLength=this.slider.maximumOffset()-this.slider.minimumOffset(),this.options.proportional&&(this.slider.handleLength=Math.max(this.offsetLength()*(this.offsetLength()/this.scrollLength()),this.options.handle_minimum_length),"vertical"==this.options.scroll_axis?this.handle.style.height=this.slider.handleLength+"px":this.handle.style.width=this.slider.handleLength+"px"),"vertical"==this.options.scroll_axis&&parseInt(this.handle.style.height)>this.offsetLength()||parseInt(this.handle.style.width)>this.offsetLength())return void this.disable();this.scrollBy(0)}},onWindowResize:function(){this.recalculateLayout(),this.scrollBy(0)},onMouseWheel:function(e){return this.auto_sliding_executer&&this.auto_sliding_executer.stop(),this.options.fixed_scroll_distance>0?this.slider.setValueBy(-this.options.fixed_scroll_distance*e.memo.delta/(this.scrollLength()-this.slider.trackLength)):this.slider.setValueBy(-e.memo.delta/8),e.stop(),!1},onChange:function(e){var t=Math.round(e/this.slider.maximum*(this.scrollLength()-this.offsetLength()));if("vertical"==this.options.scroll_axis)try{this.container.scrollTop=t}catch(e){}else this.container.scrollLeft=t;this.notification_timeout&&window.clearTimeout(this.notificationTimeout),this.notificationTimeout=window.setTimeout(function(){this.notify("change",e)}.bind(this),this.options.notification_timeout_length)},getCurrentMaximumDelta:function(){return this.slider.maximum*(this.scrollLength()-this.offsetLength())},getContainerOffset:function(e){for(var t=e.positionedOffset();e.getOffsetParent()!=this.container;)e=e.getOffsetParent(),t[0]+=e.positionedOffset()[0],t[1]+=e.positionedOffset()[1],t.top+=e.positionedOffset().top,t.left+=e.positionedOffset().left;return t},getDeltaToElement:function(e){return"vertical"==this.options.scroll_axis?this.slider.maximum*(this.getContainerOffset(e).top+e.getHeight()/2-this.container.getHeight()/2):this.slider.maximum*(this.getContainerOffset(e).left+e.getWidth()/2-this.container.getWidth()/2)},scrollTo:function(e,t){var i=this.options.scroll_to_precision,s=this.getCurrentMaximumDelta();if("auto"==i&&(i=Math.pow(10,Math.ceil(Math.log(s)/Math.log(10)))),"top"==e?e=0:"bottom"==e?e=s:"number"!=typeof e&&(e=this.getDeltaToElement($(e))),this.enabled){e=Math.max(0,Math.min(e,s)),this.auto_sliding_executer&&this.auto_sliding_executer.stop();var n=e/s,o=this.slider.value,a=(n-o)*s;t?this.auto_sliding_executer=new PeriodicalExecuter(function(){Math.round(this.slider.value*i)/i<Math.round(n*i)/i||Math.round(this.slider.value*i)/i>Math.round(n*i)/i?this.scrollBy(a/this.options.scroll_to_steps):(this.auto_sliding_executer.stop(),this.auto_sliding_executer=null,"function"==typeof t&&t())}.bind(this),this.options.scroll_to_smoothing):this.scrollBy(a)}else"function"==typeof t&&t()},scrollBy:function(e){if(!this.enabled)return!1;this.slider.setValueBy(e/(0==this.getCurrentMaximumDelta()?1:this.getCurrentMaximumDelta()))},destroy:function(){this.container.scrollerInstance=null}}),Object.extend(Control.ScrollBar,{instances:[],findByElementId:function(e){return Control.ScrollBar.instances.find(function(t){return t.container.id&&t.container.id==e})}}),Object.Event.extend(Control.ScrollBar),Carousel=Class.create(Abstract,{initialize:function(e,t,i,s){if(this.scrolling=!1,this.scroller=$(e),this.slides=t,this.controls=i,this.options=Object.extend({duration:1,auto:!1,frequency:3,visibleSlides:1,controlClassName:"carousel-control",jumperClassName:"carousel-jumper",disabledClassName:"carousel-disabled",selectedClassName:"carousel-selected",circular:!1,wheel:!0,effect:"scroll",transition:"sinoidal"},s||{}),"fade"==this.options.effect&&(this.options.circular=!0),this.slides.each(function(e,t){e._index=t}),this.controls&&this.controls.invoke("observe","click",this.click.bind(this)),this.options.wheel&&this.scroller.observe("mousewheel",this.wheel.bindAsEventListener(this)).observe("DOMMouseScroll",this.wheel.bindAsEventListener(this)),this.options.auto&&this.start(),this.options.initial){var n=this.slides.indexOf($(this.options.initial));n>this.options.visibleSlides-1&&this.options.visibleSlides>1&&n>this.slides.length-(this.options.visibleSlides+1)&&(n=this.slides.length-this.options.visibleSlides),this.moveTo(this.slides[n])}},refreshSlides:function(e){if(this.slides=e,this.slides.each(function(e,t){e._index=t}),this.current)var t=this.slides.find(function(e){return e.id==this.current.id}.bind(this));t?this.moveTo(t):this.first()},click:function(event){this.stop();var element=event.findElement("a");element.hasClassName(this.options.disabledClassName)||(element.hasClassName(this.options.controlClassName)?eval("this."+element.rel+"()"):element.hasClassName(this.options.jumperClassName)&&(this.moveTo(element.rel),this.options.selectedClassName&&(this.controls.invoke("removeClassName",this.options.selectedClassName),element.addClassName(this.options.selectedClassName)))),this.deactivateControls(),event.stop()},moveTo:function(e){if(this.options.beforeMove&&"function"==typeof this.options.beforeMove&&this.options.beforeMove(),this.previous=this.current?this.current:this.slides[0],this.current=$(e),this.current){var t=this.scroller.cumulativeOffset(),i=this.current.cumulativeOffset(),s=this.current.previous();switch(s&&s.hasClassName("separator")&&(i=s.cumulativeOffset()),this.scrolling&&this.scrolling.cancel(),this.options.effect){case"fade":this.scrolling=new Effect.Opacity(this.scroller,{from:1,to:0,duration:this.options.duration,afterFinish:function(){this.scroller.scrollLeft=i[0]-t[0],this.scroller.scrollTop=i[1]-t[1],new Effect.Opacity(this.scroller,{from:0,to:1,duration:this.options.duration,afterFinish:function(){this.controls&&this.activateControls(),this.options.afterMove&&"function"==typeof this.options.afterMove&&this.options.afterMove()}.bind(this)})}.bind(this)});break;case"scroll":default:var n;switch(this.options.transition){case"spring":n=Effect.Transitions.spring;break;case"sinoidal":default:n=Effect.Transitions.sinoidal}this.scrolling=new Effect.SmoothScroll(this.scroller,{duration:this.options.duration,x:i[0]-t[0],y:i[1]-t[1],transition:n,afterFinish:function(){this.controls&&this.activateControls(),this.options.afterMove&&"function"==typeof this.options.afterMove&&this.options.afterMove(),this.scrolling=!1}.bind(this)})}return!1}},prev:function(){if(this.current)var e=this.current._index,t=0==e?this.options.circular?this.slides.length-1:0:e-1;else t=this.options.circular?this.slides.length-1:0;t==this.slides.length-1&&this.options.circular&&"fade"!=this.options.effect&&(this.scroller.scrollLeft=(this.slides.length-1)*this.slides.first().getWidth(),this.scroller.scrollTop=(this.slides.length-1)*this.slides.first().getHeight(),t=this.slides.length-2),this.moveTo(this.slides[t])},next:function(){if(this.current)var e=this.current._index,t=this.slides.length-1==e?this.options.circular?0:e:e+1;else t=1;0==t&&this.options.circular&&"fade"!=this.options.effect&&(this.scroller.scrollLeft=0,this.scroller.scrollTop=0,t=1),t>this.slides.length-(this.options.visibleSlides+1)&&(t=this.slides.length-this.options.visibleSlides),this.slides[t]&&this.slides[t].visible()||t++,this.moveTo(this.slides[t])},first:function(){this.moveTo(this.slides[0])},last:function(){this.moveTo(this.slides[this.slides.length-1])},toggle:function(){if(!this.previous)return!1;this.moveTo(this.slides[this.previous._index])},stop:function(){this.timer&&clearTimeout(this.timer)},start:function(){this.periodicallyUpdate()},pause:function(){this.stop(),this.activateControls()},resume:function(e){if(e){var t=e.relatedTarget||e.toElement;t&&(this.slides.include(t)||this.slides.any(function(e){return t.descendantOf(e)}))||this.start()}else this.start()},periodicallyUpdate:function(){null!=this.timer&&(clearTimeout(this.timer),this.next()),this.timer=setTimeout(this.periodicallyUpdate.bind(this),1e3*this.options.frequency)},wheel:function(e){e.cancelBubble=!0,e.stop();var t=0;return e||(e=window.event),e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),this.scrolling||(this.deactivateControls(),t>0?this.prev():this.next()),Math.round(t)},deactivateControls:function(){this.controls.invoke("addClassName",this.options.disabledClassName)},activateControls:function(){this.controls.invoke("removeClassName",this.options.disabledClassName)}}),Effect.SmoothScroll=Class.create(),Object.extend(Object.extend(Effect.SmoothScroll.prototype,Effect.Base.prototype),{initialize:function(e){this.element=$(e);var t=Object.extend({x:0,y:0,mode:"absolute"},arguments[1]||{});this.start(t)},setup:function(){this.options.continuous&&!this.element._ext&&(this.element.cleanWhitespace(),this.element._ext=!0,this.element.appendChild(this.element.firstChild)),this.originalLeft=this.element.scrollLeft,this.originalTop=this.element.scrollTop,"absolute"==this.options.mode&&(this.options.x-=this.originalLeft,this.options.y-=this.originalTop)},update:function(e){this.element.scrollLeft=this.options.x*e+this.originalLeft,this.element.scrollTop=this.options.y*e+this.originalTop}}),Class.create("accordion",{showAccordion:null,currentAccordion:null,duration:null,effects:[],animating:!1,initialize:function(e,t){if(!$(e))throw e+" doesn't exist!";this.container=$(e),this.options=Object.extend({resizeSpeed:8,classNames:{toggle:"accordion_toggle",toggleActive:"accordion_toggle_active",content:"accordion_content"},defaultSize:{height:null,width:null},direction:"vertical",onEvent:"click"},t||{}),this.duration=.15*(11-this.options.resizeSpeed);this.container.select("div."+this.options.classNames.toggle).each(function(e){if(Event.observe(e,this.options.onEvent,this.activate.bind(this,e),!1),"click"==this.options.onEvent&&(e.onclick=function(){return!1}),"horizontal"==this.options.direction)t=$H({width:"0px"});else var t=$H({height:"0px"});t=t.merge({display:"none"}),this.currentAccordion=$(e.next(0)).setStyle(t._object)}.bind(this))},openAll:function(){this.container.select("div."+this.options.classNames.toggle).each(function(e){e.stopObserving("click"),e.stopObserving("focus")}),this.container.select("div."+this.options.classNames.content).each(function(e){e.setStyle({display:"block",height:"auto"})})},activate:function(e){if(this.animating)return!1;this.effects=[],this.currentAccordion=$(e.next(0)),this.currentAccordion.setStyle({display:"block"}),this.currentAccordion.previous(0).addClassName(this.options.classNames.toggleActive),"horizontal"==this.options.direction?this.scaling=$H({scaleX:!0,scaleY:!1}):this.scaling=$H({scaleX:!1,scaleY:!0}),this.currentAccordion==this.showAccordion?this.deactivate():this._handleAccordion()},deactivate:function(){var e=$H({duration:this.duration,scaleContent:!1,transition:Effect.Transitions.sinoidal,queue:{position:"end",scope:"accordionAnimation"},scaleMode:{originalHeight:this.options.defaultSize.height?this.options.defaultSize.height:this.currentAccordion.scrollHeight,originalWidth:this.options.defaultSize.width?this.options.defaultSize.width:this.currentAccordion.scrollWidth},afterFinish:function(){this.showAccordion.setStyle({height:"auto",display:"none"}),this.showAccordion.previous(0).removeClassName(this.options.classNames.toggleActive),this.showAccordion=null,this.animating=!1,this.notify("animation-finished")}.bind(this)});e=e.merge(this.scaling),new Effect.Scale(this.showAccordion,0,e._object)},_handleAccordion:function(){var e=$H({sync:!0,scaleFrom:0,scaleContent:!1,transition:Effect.Transitions.sinoidal,scaleMode:{originalHeight:this.options.defaultSize.height?this.options.defaultSize.height:this.currentAccordion.scrollHeight,originalWidth:this.options.defaultSize.width?this.options.defaultSize.width:this.currentAccordion.scrollWidth}});e=e.merge(this.scaling),this.effects.push(new Effect.Scale(this.currentAccordion,100,e._object)),this.showAccordion&&(e=(e=$H({sync:!0,scaleContent:!1,transition:Effect.Transitions.sinoidal})).merge(this.scaling),this.effects.push(new Effect.Scale(this.showAccordion,0,e._object))),new Effect.Parallel(this.effects,{duration:this.duration,queue:{position:"end",scope:"accordionAnimation"},beforeStart:function(){this.animating=!0,this.notify("animation-started")}.bind(this),afterFinish:function(){this.showAccordion&&(this.showAccordion.setStyle({display:"none"}),this.showAccordion.previous(0).removeClassName(this.options.classNames.toggleActive)),$(this.currentAccordion).setStyle({height:"auto"}),this.showAccordion=this.currentAccordion,this.animating=!1,this.notify("animation-finished")}.bind(this)})}}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e;function t(){return e.apply(null,arguments)}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function s(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function n(e){return void 0===e}function o(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function a(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function r(e,t){var i,s=[];for(i=0;i<e.length;++i)s.push(t(e[i],i));return s}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){for(var i in t)l(t,i)&&(e[i]=t[i]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t,i,s){return xt(e,t,i,s,!0).utc()}function c(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}var u,m=u=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),i=t.length>>>0,s=0;s<i;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};function p(e){if(null==e._isValid){var t=c(e),i=m.call(t.parsedDateParts,function(e){return null!=e}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict&&(s=s&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return s;e._isValid=s}return e._isValid}function _(e){var t=h(NaN);return null!=e?d(c(t),e):c(t).userInvalidated=!0,t}var f=t.momentProperties=[];function g(e,t){var i,s,o;if(n(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),n(t._i)||(e._i=t._i),n(t._f)||(e._f=t._f),n(t._l)||(e._l=t._l),n(t._strict)||(e._strict=t._strict),n(t._tzm)||(e._tzm=t._tzm),n(t._isUTC)||(e._isUTC=t._isUTC),n(t._offset)||(e._offset=t._offset),n(t._pf)||(e._pf=c(t)),n(t._locale)||(e._locale=t._locale),f.length>0)for(i=0;i<f.length;i++)n(o=t[s=f[i]])||(e[s]=o);return e}var b=!1;function v(e){g(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===b&&(b=!0,t.updateOffset(this),b=!1)}function y(e){return e instanceof v||null!=e&&null!=e._isAMomentObject}function M(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function w(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=M(t)),i}function L(e,t,i){var s,n=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(s=0;s<n;s++)(i&&e[s]!==t[s]||!i&&w(e[s])!==w(t[s]))&&a++;return a+o}function S(e){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function k(e,i){var s=!0;return d(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),s){for(var n,o=[],a=0;a<arguments.length;a++){if(n="","object"==typeof arguments[a]){n+="\n["+a+"] ";for(var r in arguments[0])n+=r+": "+arguments[0][r]+", ";n=n.slice(0,-2)}else n=arguments[a];o.push(n)}S(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),s=!1}return i.apply(this,arguments)},i)}var T={};function x(e,i){null!=t.deprecationHandler&&t.deprecationHandler(e,i),T[e]||(S(i),T[e]=!0)}t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;function Y(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function D(e,t){var i,n=d({},e);for(i in t)l(t,i)&&(s(e[i])&&s(t[i])?(n[i]={},d(n[i],e[i]),d(n[i],t[i])):null!=t[i]?n[i]=t[i]:delete n[i]);for(i in e)l(e,i)&&!l(t,i)&&s(e[i])&&(n[i]=d({},n[i]));return n}function E(e){null!=e&&this.set(e)}var C,N=C=Object.keys?Object.keys:function(e){var t,i=[];for(t in e)l(e,t)&&i.push(t);return i};var O={};function I(e,t){var i=e.toLowerCase();O[i]=O[i+"s"]=O[t]=e}function A(e){return"string"==typeof e?O[e]||O[e.toLowerCase()]:void 0}function H(e){var t,i,s={};for(i in e)l(e,i)&&(t=A(i))&&(s[t]=e[i]);return s}var P={};function F(e,t){P[e]=t}function j(e,i){return function(s){return null!=s?(R(this,e,s),t.updateOffset(this,i),this):B(this,e)}}function B(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function R(e,t,i){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](i)}function z(e,t,i){var s=""+Math.abs(e),n=t-s.length;return(e>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+s}var W=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,$=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,X={},U={};function V(e,t,i,s){var n=s;"string"==typeof s&&(n=function(){return this[s]()}),e&&(U[e]=n),t&&(U[t[0]]=function(){return z(n.apply(this,arguments),t[1],t[2])}),i&&(U[i]=function(){return this.localeData().ordinal(n.apply(this,arguments),e)})}function G(e,t){return e.isValid()?(t=K(t,e.localeData()),X[t]=X[t]||function(e){var t,i,s=e.match(W);for(t=0,i=s.length;t<i;t++)U[s[t]]?s[t]=U[s[t]]:s[t]=function(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}(s[t]);return function(t){var n,o="";for(n=0;n<i;n++)o+=Y(s[n])?s[n].call(t,e):s[n];return o}}(t),X[t](e)):e.localeData().invalidDate()}function K(e,t){var i=5;for($.lastIndex=0;i>=0&&$.test(e);)e=e.replace($,function(e){return t.longDateFormat(e)||e}),$.lastIndex=0,i-=1;return e}var J=/\d/,q=/\d\d/,Z=/\d{3}/,Q=/\d{4}/,ee=/[+-]?\d{6}/,te=/\d\d?/,ie=/\d\d\d\d?/,se=/\d\d\d\d\d\d?/,ne=/\d{1,3}/,oe=/\d{1,4}/,ae=/[+-]?\d{1,6}/,re=/\d+/,le=/[+-]?\d+/,de=/Z|[+-]\d\d:?\d\d/gi,he=/Z|[+-]\d\d(?::?\d\d)?/gi,ce=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ue={};function me(e,t,i){ue[e]=Y(t)?t:function(e,s){return e&&i?i:t}}function pe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var _e={};function fe(e,t){var i,s=t;for("string"==typeof e&&(e=[e]),o(t)&&(s=function(e,i){i[t]=w(e)}),i=0;i<e.length;i++)_e[e[i]]=s}function ge(e,t){fe(e,function(e,i,s,n){s._w=s._w||{},t(e,s._w,s,n)})}function be(e,t,i){null!=t&&l(_e,e)&&_e[e](t,i._a,i,e)}var ve,ye=0,Me=1,we=2,Le=3,Se=4,ke=5,Te=6,xe=7,Ye=8,De=ve=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Ee(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}V("M",["MM",2],"Mo",function(){return this.month()+1}),V("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),V("MMMM",0,0,function(e){return this.localeData().months(this,e)}),I("month","M"),F("month",8),me("M",te),me("MM",te,q),me("MMM",function(e,t){return t.monthsShortRegex(e)}),me("MMMM",function(e,t){return t.monthsRegex(e)}),fe(["M","MM"],function(e,t){t[Me]=w(e)-1}),fe(["MMM","MMMM"],function(e,t,i,s){var n=i._locale.monthsParse(e,s,i._strict);null!=n?t[Me]=n:c(i).invalidMonth=e});var Ce=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ne="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Oe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Ie(e,t){var i;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=w(t);else if(t=e.localeData().monthsParse(t),!o(t))return e;return i=Math.min(e.date(),Ee(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function Ae(e){return null!=e?(Ie(this,e),t.updateOffset(this,!0),this):B(this,"Month")}var He=ce;var Pe=ce;function Fe(){function e(e,t){return t.length-e.length}var t,i,s=[],n=[],o=[];for(t=0;t<12;t++)i=h([2e3,t]),s.push(this.monthsShort(i,"")),n.push(this.months(i,"")),o.push(this.months(i,"")),o.push(this.monthsShort(i,""));for(s.sort(e),n.sort(e),o.sort(e),t=0;t<12;t++)s[t]=pe(s[t]),n[t]=pe(n[t]);for(t=0;t<24;t++)o[t]=pe(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}V("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),V(0,["YY",2],0,function(){return this.year()%100}),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),I("year","y"),F("year",1),me("Y",le),me("YY",te,q),me("YYYY",oe,Q),me("YYYYY",ae,ee),me("YYYYYY",ae,ee),fe(["YYYYY","YYYYYY"],ye),fe("YYYY",function(e,i){i[ye]=2===e.length?t.parseTwoDigitYear(e):w(e)}),fe("YY",function(e,i){i[ye]=t.parseTwoDigitYear(e)}),fe("Y",function(e,t){t[ye]=parseInt(e,10)});function je(e){return Be(e)?366:365}function Be(e){return e%4==0&&e%100!=0||e%400==0}t.parseTwoDigitYear=function(e){return w(e)+(w(e)>68?1900:2e3)};var Re=j("FullYear",!0);function ze(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function We(e,t,i){var s=7+t-i;return-((7+ze(e,0,s).getUTCDay()-t)%7)+s-1}function $e(e,t,i,s,n){var o,a,r=1+7*(t-1)+(7+i-s)%7+We(e,s,n);return r<=0?a=je(o=e-1)+r:r>je(e)?(o=e+1,a=r-je(e)):(o=e,a=r),{year:o,dayOfYear:a}}function Xe(e,t,i){var s,n,o=We(e.year(),t,i),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?s=a+Ue(n=e.year()-1,t,i):a>Ue(e.year(),t,i)?(s=a-Ue(e.year(),t,i),n=e.year()+1):(n=e.year(),s=a),{week:s,year:n}}function Ue(e,t,i){var s=We(e,t,i),n=We(e+1,t,i);return(je(e)-s+n)/7}V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),F("week",5),F("isoWeek",5),me("w",te),me("ww",te,q),me("W",te),me("WW",te,q),ge(["w","ww","W","WW"],function(e,t,i,s){t[s.substr(0,1)]=w(e)});V("d",0,"do","day"),V("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),V("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),V("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),F("day",11),F("weekday",11),F("isoWeekday",11),me("d",te),me("e",te),me("E",te),me("dd",function(e,t){return t.weekdaysMinRegex(e)}),me("ddd",function(e,t){return t.weekdaysShortRegex(e)}),me("dddd",function(e,t){return t.weekdaysRegex(e)}),ge(["dd","ddd","dddd"],function(e,t,i,s){var n=i._locale.weekdaysParse(e,s,i._strict);null!=n?t.d=n:c(i).invalidWeekday=e}),ge(["d","e","E"],function(e,t,i,s){t[s]=w(e)});var Ve="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var Ge="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var Ke="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var Je=ce;var qe=ce;var Ze=ce;function Qe(){function e(e,t){return t.length-e.length}var t,i,s,n,o,a=[],r=[],l=[],d=[];for(t=0;t<7;t++)i=h([2e3,1]).day(t),s=this.weekdaysMin(i,""),n=this.weekdaysShort(i,""),o=this.weekdays(i,""),a.push(s),r.push(n),l.push(o),d.push(s),d.push(n),d.push(o);for(a.sort(e),r.sort(e),l.sort(e),d.sort(e),t=0;t<7;t++)r[t]=pe(r[t]),l[t]=pe(l[t]),d[t]=pe(d[t]);this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function et(){return this.hours()%12||12}V("H",["HH",2],0,"hour"),V("h",["hh",2],0,et),V("k",["kk",2],0,function(){return this.hours()||24}),V("hmm",0,0,function(){return""+et.apply(this)+z(this.minutes(),2)}),V("hmmss",0,0,function(){return""+et.apply(this)+z(this.minutes(),2)+z(this.seconds(),2)}),V("Hmm",0,0,function(){return""+this.hours()+z(this.minutes(),2)}),V("Hmmss",0,0,function(){return""+this.hours()+z(this.minutes(),2)+z(this.seconds(),2)});function tt(e,t){V(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}tt("a",!0),tt("A",!1),I("hour","h"),F("hour",13);function it(e,t){return t._meridiemParse}me("a",it),me("A",it),me("H",te),me("h",te),me("k",te),me("HH",te,q),me("hh",te,q),me("kk",te,q),me("hmm",ie),me("hmmss",se),me("Hmm",ie),me("Hmmss",se),fe(["H","HH"],Le),fe(["k","kk"],function(e,t,i){var s=w(e);t[Le]=24===s?0:s}),fe(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),fe(["h","hh"],function(e,t,i){t[Le]=w(e),c(i).bigHour=!0}),fe("hmm",function(e,t,i){var s=e.length-2;t[Le]=w(e.substr(0,s)),t[Se]=w(e.substr(s)),c(i).bigHour=!0}),fe("hmmss",function(e,t,i){var s=e.length-4,n=e.length-2;t[Le]=w(e.substr(0,s)),t[Se]=w(e.substr(s,2)),t[ke]=w(e.substr(n)),c(i).bigHour=!0}),fe("Hmm",function(e,t,i){var s=e.length-2;t[Le]=w(e.substr(0,s)),t[Se]=w(e.substr(s))}),fe("Hmmss",function(e,t,i){var s=e.length-4,n=e.length-2;t[Le]=w(e.substr(0,s)),t[Se]=w(e.substr(s,2)),t[ke]=w(e.substr(n))});var st,nt=j("Hours",!0),ot={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ne,monthsShort:Oe,week:{dow:0,doy:6},weekdays:Ve,weekdaysMin:Ke,weekdaysShort:Ge,meridiemParse:/[ap]\.?m?\.?/i},at={},rt={};function lt(e){return e?e.toLowerCase().replace("_","-"):e}function dt(e){var t=null;if(!at[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=st._abbr,require("./locale/"+e),ht(t)}catch(e){}return at[e]}function ht(e,t){var i;return e&&(i=n(t)?ut(e):ct(e,t))&&(st=i),st._abbr}function ct(e,t){if(null!==t){var i=ot;if(t.abbr=e,null!=at[e])x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=at[e]._config;else if(null!=t.parentLocale){if(null==at[t.parentLocale])return rt[t.parentLocale]||(rt[t.parentLocale]=[]),rt[t.parentLocale].push({name:e,config:t}),null;i=at[t.parentLocale]._config}return at[e]=new E(D(i,t)),rt[e]&&rt[e].forEach(function(e){ct(e.name,e.config)}),ht(e),at[e]}return delete at[e],null}function ut(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return st;if(!i(e)){if(t=dt(e))return t;e=[e]}return function(e){for(var t,i,s,n,o=0;o<e.length;){for(t=(n=lt(e[o]).split("-")).length,i=(i=lt(e[o+1]))?i.split("-"):null;t>0;){if(s=dt(n.slice(0,t).join("-")))return s;if(i&&i.length>=t&&L(n,i,!0)>=t-1)break;t--}o++}return null}(e)}function mt(e){var t,i=e._a;return i&&-2===c(e).overflow&&(t=i[Me]<0||i[Me]>11?Me:i[we]<1||i[we]>Ee(i[ye],i[Me])?we:i[Le]<0||i[Le]>24||24===i[Le]&&(0!==i[Se]||0!==i[ke]||0!==i[Te])?Le:i[Se]<0||i[Se]>59?Se:i[ke]<0||i[ke]>59?ke:i[Te]<0||i[Te]>999?Te:-1,c(e)._overflowDayOfYear&&(t<ye||t>we)&&(t=we),c(e)._overflowWeeks&&-1===t&&(t=xe),c(e)._overflowWeekday&&-1===t&&(t=Ye),c(e).overflow=t),e}var pt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_t=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ft=/Z|[+-]\d\d(?::?\d\d)?/,gt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],bt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],vt=/^\/?Date\((\-?\d+)/i;function yt(e){var t,i,s,n,o,a,r=e._i,l=pt.exec(r)||_t.exec(r);if(l){for(c(e).iso=!0,t=0,i=gt.length;t<i;t++)if(gt[t][1].exec(l[1])){n=gt[t][0],s=!1!==gt[t][2];break}if(null==n)return void(e._isValid=!1);if(l[3]){for(t=0,i=bt.length;t<i;t++)if(bt[t][1].exec(l[3])){o=(l[2]||" ")+bt[t][0];break}if(null==o)return void(e._isValid=!1)}if(!s&&null!=o)return void(e._isValid=!1);if(l[4]){if(!ft.exec(l[4]))return void(e._isValid=!1);a="Z"}e._f=n+(o||"")+(a||""),kt(e)}else e._isValid=!1}var Mt=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;function wt(e){var t,i,s,n,o,a,r,l,d={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"};if(t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,""),i=Mt.exec(t)){if(s=i[1]?"ddd"+(5===i[1].length?", ":" "):"",n="D MMM "+(i[2].length>10?"YYYY ":"YY "),o="HH:mm"+(i[4]?":ss":""),i[1]){var h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(i[2]).getDay()];if(i[1].substr(0,3)!==h)return c(e).weekdayMismatch=!0,void(e._isValid=!1)}switch(i[5].length){case 2:r=0===l?" +0000":((l="YXWVUTSRQPONZABCDEFGHIKLM".indexOf(i[5][1].toUpperCase())-12)<0?" -":" +")+(""+l).replace(/^-?/,"0").match(/..$/)[0]+"00";break;case 4:r=d[i[5]];break;default:r=d[" GMT"]}i[5]=r,e._i=i.splice(1).join(""),a=" ZZ",e._f=s+n+o+a,kt(e),c(e).rfc2822=!0}else e._isValid=!1}t.createFromInputFallback=k("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Lt(e,t,i){return null!=e?e:null!=t?t:i}function St(e){var i,s,n,o,a=[];if(!e._d){for(n=function(e){var i=new Date(t.now());return e._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}(e),e._w&&null==e._a[we]&&null==e._a[Me]&&function(e){var t,i,s,n,o,a,r,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)o=1,a=4,i=Lt(t.GG,e._a[ye],Xe(Yt(),1,4).year),s=Lt(t.W,1),((n=Lt(t.E,1))<1||n>7)&&(l=!0);else{o=e._locale._week.dow,a=e._locale._week.doy;var d=Xe(Yt(),o,a);i=Lt(t.gg,e._a[ye],d.year),s=Lt(t.w,d.week),null!=t.d?((n=t.d)<0||n>6)&&(l=!0):null!=t.e?(n=t.e+o,(t.e<0||t.e>6)&&(l=!0)):n=o}s<1||s>Ue(i,o,a)?c(e)._overflowWeeks=!0:null!=l?c(e)._overflowWeekday=!0:(r=$e(i,s,n,o,a),e._a[ye]=r.year,e._dayOfYear=r.dayOfYear)}(e),null!=e._dayOfYear&&(o=Lt(e._a[ye],n[ye]),(e._dayOfYear>je(o)||0===e._dayOfYear)&&(c(e)._overflowDayOfYear=!0),s=ze(o,0,e._dayOfYear),e._a[Me]=s.getUTCMonth(),e._a[we]=s.getUTCDate()),i=0;i<3&&null==e._a[i];++i)e._a[i]=a[i]=n[i];for(;i<7;i++)e._a[i]=a[i]=null==e._a[i]?2===i?1:0:e._a[i];24===e._a[Le]&&0===e._a[Se]&&0===e._a[ke]&&0===e._a[Te]&&(e._nextDay=!0,e._a[Le]=0),e._d=(e._useUTC?ze:function(e,t,i,s,n,o,a){var r=new Date(e,t,i,s,n,o,a);return e<100&&e>=0&&isFinite(r.getFullYear())&&r.setFullYear(e),r}).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Le]=24)}}t.ISO_8601=function(){},t.RFC_2822=function(){};function kt(e){if(e._f!==t.ISO_8601)if(e._f!==t.RFC_2822){e._a=[],c(e).empty=!0;var i,s,n,o,a,r=""+e._i,d=r.length,h=0;for(n=K(e._f,e._locale).match(W)||[],i=0;i<n.length;i++)o=n[i],(s=(r.match(function(e,t){return l(ue,e)?ue[e](t._strict,t._locale):new RegExp(pe(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,s,n){return t||i||s||n})))}(o,e))||[])[0])&&((a=r.substr(0,r.indexOf(s))).length>0&&c(e).unusedInput.push(a),r=r.slice(r.indexOf(s)+s.length),h+=s.length),U[o]?(s?c(e).empty=!1:c(e).unusedTokens.push(o),be(o,s,e)):e._strict&&!s&&c(e).unusedTokens.push(o);c(e).charsLeftOver=d-h,r.length>0&&c(e).unusedInput.push(r),e._a[Le]<=12&&!0===c(e).bigHour&&e._a[Le]>0&&(c(e).bigHour=void 0),c(e).parsedDateParts=e._a.slice(0),c(e).meridiem=e._meridiem,e._a[Le]=function(e,t,i){var s;if(null==i)return t;return null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?((s=e.isPM(i))&&t<12&&(t+=12),s||12!==t||(t=0),t):t}(e._locale,e._a[Le],e._meridiem),St(e),mt(e)}else wt(e);else yt(e)}function Tt(e){var l=e._i,h=e._f;return e._locale=e._locale||ut(e._l),null===l||void 0===h&&""===l?_({nullInput:!0}):("string"==typeof l&&(e._i=l=e._locale.preparse(l)),y(l)?new v(mt(l)):(a(l)?e._d=l:i(h)?function(e){var t,i,s,n,o;if(0===e._f.length)return c(e).invalidFormat=!0,void(e._d=new Date(NaN));for(n=0;n<e._f.length;n++)o=0,t=g({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[n],kt(t),p(t)&&(o+=c(t).charsLeftOver,o+=10*c(t).unusedTokens.length,c(t).score=o,(null==s||o<s)&&(s=o,i=t));d(e,i||t)}(e):h?kt(e):function(e){var l=e._i;n(l)?e._d=new Date(t.now()):a(l)?e._d=new Date(l.valueOf()):"string"==typeof l?function(e){var i=vt.exec(e._i);null===i?(yt(e),!1===e._isValid&&(delete e._isValid,wt(e),!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e)))):e._d=new Date(+i[1])}(e):i(l)?(e._a=r(l.slice(0),function(e){return parseInt(e,10)}),St(e)):s(l)?function(e){if(!e._d){var t=H(e._i);e._a=r([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),St(e)}}(e):o(l)?e._d=new Date(l):t.createFromInputFallback(e)}(e),p(e)||(e._d=null),e))}function xt(e,t,n,o,a){var r={};return!0!==n&&!1!==n||(o=n,n=void 0),(s(e)&&function(e){var t;for(t in e)return!1;return!0}(e)||i(e)&&0===e.length)&&(e=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=a,r._l=n,r._i=e,r._f=t,r._strict=o,function(e){var t=new v(mt(Tt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}(r)}function Yt(e,t,i,s){return xt(e,t,i,s,!1)}var Dt=k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Yt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:_()}),Et=k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Yt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:_()});function Ct(e,t){var s,n;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return Yt();for(s=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](s)||(s=t[n]);return s}var Nt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ot(e){var t=H(e),i=t.year||0,s=t.quarter||0,n=t.month||0,o=t.week||0,a=t.day||0,r=t.hour||0,l=t.minute||0,d=t.second||0,h=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Nt.indexOf(t)||null!=e[t]&&isNaN(e[t]))return!1;for(var i=!1,s=0;s<Nt.length;++s)if(e[Nt[s]]){if(i)return!1;parseFloat(e[Nt[s]])!==w(e[Nt[s]])&&(i=!0)}return!0}(t),this._milliseconds=+h+1e3*d+6e4*l+1e3*r*60*60,this._days=+a+7*o,this._months=+n+3*s+12*i,this._data={},this._locale=ut(),this._bubble()}function It(e){return e instanceof Ot}function At(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ht(e,t){V(e,0,0,function(){var e=this.utcOffset(),i="+";return e<0&&(e=-e,i="-"),i+z(~~(e/60),2)+t+z(~~e%60,2)})}Ht("Z",":"),Ht("ZZ",""),me("Z",he),me("ZZ",he),fe(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=Ft(he,e)});var Pt=/([\+\-]|\d\d)/gi;function Ft(e,t){var i=(t||"").match(e);if(null===i)return null;var s=((i[i.length-1]||[])+"").match(Pt)||["-",0,0],n=60*s[1]+w(s[2]);return 0===n?0:"+"===s[0]?n:-n}function jt(e,i){var s,n;return i._isUTC?(s=i.clone(),n=(y(e)||a(e)?e.valueOf():Yt(e).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+n),t.updateOffset(s,!1),s):Yt(e).local()}function Bt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}t.updateOffset=function(){};function Rt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}var zt=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Wt=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function $t(e,t){var i,s,n,a=e,r=null;return It(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:o(e)?(a={},t?a[t]=e:a.milliseconds=e):(r=zt.exec(e))?(i="-"===r[1]?-1:1,a={y:0,d:w(r[we])*i,h:w(r[Le])*i,m:w(r[Se])*i,s:w(r[ke])*i,ms:w(At(1e3*r[Te]))*i}):(r=Wt.exec(e))?(i="-"===r[1]?-1:1,a={y:Xt(r[2],i),M:Xt(r[3],i),w:Xt(r[4],i),d:Xt(r[5],i),h:Xt(r[6],i),m:Xt(r[7],i),s:Xt(r[8],i)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(n=function(e,t){var i;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=jt(t,e),e.isBefore(t)?i=Ut(e,t):((i=Ut(t,e)).milliseconds=-i.milliseconds,i.months=-i.months);return i}(Yt(a.from),Yt(a.to)),(a={}).ms=n.milliseconds,a.M=n.months),s=new Ot(a),It(e)&&l(e,"_locale")&&(s._locale=e._locale),s}$t.fn=Ot.prototype,$t.invalid=function(){return $t(NaN)};function Xt(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Ut(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Vt(e,t){return function(i,s){var n,o;return null===s||isNaN(+s)||(x(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=i,i=s,s=o),i="string"==typeof i?+i:i,n=$t(i,s),Gt(this,n,e),this}}function Gt(e,i,s,n){var o=i._milliseconds,a=At(i._days),r=At(i._months);e.isValid()&&(n=null==n||n,o&&e._d.setTime(e._d.valueOf()+o*s),a&&R(e,"Date",B(e,"Date")+a*s),r&&Ie(e,B(e,"Month")+r*s),n&&t.updateOffset(e,a||r))}var Kt=Vt(1,"add"),Jt=Vt(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function qt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ut(e))&&(this._locale=t),this)}var Zt=k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Qt(){return this._locale}V(0,["gg",2],0,function(){return this.weekYear()%100}),V(0,["GG",2],0,function(){return this.isoWeekYear()%100});function ei(e,t){V(0,[e,e.length],0,t)}ei("gggg","weekYear"),ei("ggggg","weekYear"),ei("GGGG","isoWeekYear"),ei("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),F("weekYear",1),F("isoWeekYear",1),me("G",le),me("g",le),me("GG",te,q),me("gg",te,q),me("GGGG",oe,Q),me("gggg",oe,Q),me("GGGGG",ae,ee),me("ggggg",ae,ee),ge(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,s){t[s.substr(0,2)]=w(e)}),ge(["gg","GG"],function(e,i,s,n){i[n]=t.parseTwoDigitYear(e)});function ti(e,t,i,s,n){var o;return null==e?Xe(this,s,n).year:(o=Ue(e,s,n),t>o&&(t=o),function(e,t,i,s,n){var o=$e(e,t,i,s,n),a=ze(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,i,s,n))}V("Q",0,"Qo","quarter"),I("quarter","Q"),F("quarter",7),me("Q",J),fe("Q",function(e,t){t[Me]=3*(w(e)-1)});V("D",["DD",2],"Do","date"),I("date","D"),F("date",9),me("D",te),me("DD",te,q),me("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),fe(["D","DD"],we),fe("Do",function(e,t){t[we]=w(e.match(te)[0])});var ii=j("Date",!0);V("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),F("dayOfYear",4),me("DDD",ne),me("DDDD",Z),fe(["DDD","DDDD"],function(e,t,i){i._dayOfYear=w(e)});V("m",["mm",2],0,"minute"),I("minute","m"),F("minute",14),me("m",te),me("mm",te,q),fe(["m","mm"],Se);var si=j("Minutes",!1);V("s",["ss",2],0,"second"),I("second","s"),F("second",15),me("s",te),me("ss",te,q),fe(["s","ss"],ke);var ni=j("Seconds",!1);V("S",0,0,function(){return~~(this.millisecond()/100)}),V(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,function(){return 10*this.millisecond()}),V(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),V(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),V(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),V(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),V(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),I("millisecond","ms"),F("millisecond",16),me("S",ne,J),me("SS",ne,q),me("SSS",ne,Z);var oi;for(oi="SSSS";oi.length<=9;oi+="S")me(oi,re);for(oi="S";oi.length<=9;oi+="S")fe(oi,function(e,t){t[Te]=w(1e3*("0."+e))});var ai=j("Milliseconds",!1);V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var ri=v.prototype;ri.add=Kt,ri.calendar=function(e,i){var s=e||Yt(),n=jt(s,this).startOf("day"),o=t.calendarFormat(this,n)||"sameElse",a=i&&(Y(i[o])?i[o].call(this,s):i[o]);return this.format(a||this.localeData().calendar(o,this,Yt(s)))},ri.clone=function(){return new v(this)},ri.diff=function(e,t,i){var s,n,o,a;return this.isValid()&&(s=jt(e,this)).isValid()?(n=6e4*(s.utcOffset()-this.utcOffset()),"year"===(t=A(t))||"month"===t||"quarter"===t?(a=function(e,t){var i,s,n=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(n,"months");return t-o<0?(i=e.clone().add(n-1,"months"),s=(t-o)/(o-i)):(i=e.clone().add(n+1,"months"),s=(t-o)/(i-o)),-(n+s)||0}(this,s),"quarter"===t?a/=3:"year"===t&&(a/=12)):(o=this-s,a="second"===t?o/1e3:"minute"===t?o/6e4:"hour"===t?o/36e5:"day"===t?(o-n)/864e5:"week"===t?(o-n)/6048e5:o),i?a:M(a)):NaN},ri.endOf=function(e){return void 0===(e=A(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},ri.format=function(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=G(this,e);return this.localeData().postformat(i)},ri.from=function(e,t){return this.isValid()&&(y(e)&&e.isValid()||Yt(e).isValid())?$t({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ri.fromNow=function(e){return this.from(Yt(),e)},ri.to=function(e,t){return this.isValid()&&(y(e)&&e.isValid()||Yt(e).isValid())?$t({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ri.toNow=function(e){return this.to(Yt(),e)},ri.get=function(e){return e=A(e),Y(this[e])?this[e]():this},ri.invalidAt=function(){return c(this).overflow},ri.isAfter=function(e,t){var i=y(e)?e:Yt(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=A(n(t)?"millisecond":t))?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf())},ri.isBefore=function(e,t){var i=y(e)?e:Yt(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=A(n(t)?"millisecond":t))?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf())},ri.isBetween=function(e,t,i,s){return("("===(s=s||"()")[0]?this.isAfter(e,i):!this.isBefore(e,i))&&(")"===s[1]?this.isBefore(t,i):!this.isAfter(t,i))},ri.isSame=function(e,t){var i,s=y(e)?e:Yt(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=A(t||"millisecond"))?this.valueOf()===s.valueOf():(i=s.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()))},ri.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},ri.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},ri.isValid=function(){return p(this)},ri.lang=Zt,ri.locale=qt,ri.localeData=Qt,ri.max=Et,ri.min=Dt,ri.parsingFlags=function(){return d({},c(this))},ri.set=function(e,t){if("object"==typeof e)for(var i=function(e){var t=[];for(var i in e)t.push({unit:i,priority:P[i]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=H(e)),s=0;s<i.length;s++)this[i[s].unit](e[i[s].unit]);else if(e=A(e),Y(this[e]))return this[e](t);return this},ri.startOf=function(e){switch(e=A(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},ri.subtract=Jt,ri.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},ri.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},ri.toDate=function(){return new Date(this.valueOf())},ri.toISOString=function(){if(!this.isValid())return null;var e=this.clone().utc();return e.year()<0||e.year()>9999?G(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Y(Date.prototype.toISOString)?this.toDate().toISOString():G(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},ri.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var i="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=t+'[")]';return this.format(i+s+"-MM-DD[T]HH:mm:ss.SSS"+n)},ri.toJSON=function(){return this.isValid()?this.toISOString():null},ri.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ri.unix=function(){return Math.floor(this.valueOf()/1e3)},ri.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ri.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ri.year=Re,ri.isLeapYear=function(){return Be(this.year())},ri.weekYear=function(e){return ti.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ri.isoWeekYear=function(e){return ti.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},ri.quarter=ri.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},ri.month=Ae,ri.daysInMonth=function(){return Ee(this.year(),this.month())},ri.week=ri.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},ri.isoWeek=ri.isoWeeks=function(e){var t=Xe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},ri.weeksInYear=function(){var e=this.localeData()._week;return Ue(this.year(),e.dow,e.doy)},ri.isoWeeksInYear=function(){return Ue(this.year(),1,4)},ri.date=ii,ri.day=ri.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},ri.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},ri.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},ri.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},ri.hour=ri.hours=nt,ri.minute=ri.minutes=si,ri.second=ri.seconds=ni,ri.millisecond=ri.milliseconds=ai,ri.utcOffset=function(e,i,s){var n,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Ft(he,e)))return this}else Math.abs(e)<16&&!s&&(e*=60);return!this._isUTC&&i&&(n=Bt(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),o!==e&&(!i||this._changeInProgress?Gt(this,$t(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Bt(this)},ri.utc=function(e){return this.utcOffset(0,e)},ri.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Bt(this),"m")),this},ri.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Ft(de,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},ri.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Yt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},ri.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ri.isLocal=function(){return!!this.isValid()&&!this._isUTC},ri.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ri.isUtc=Rt,ri.isUTC=Rt,ri.zoneAbbr=function(){return this._isUTC?"UTC":""},ri.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ri.dates=k("dates accessor is deprecated. Use date instead.",ii),ri.months=k("months accessor is deprecated. Use month instead",Ae),ri.years=k("years accessor is deprecated. Use year instead",Re),ri.zone=k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),ri.isDSTShifted=k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!n(this._isDSTShifted))return this._isDSTShifted;var e={};if(g(e,this),(e=Tt(e))._a){var t=e._isUTC?h(e._a):Yt(e._a);this._isDSTShifted=this.isValid()&&L(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});function li(e){return e}var di=E.prototype;di.calendar=function(e,t,i){var s=this._calendar[e]||this._calendar.sameElse;return Y(s)?s.call(t,i):s},di.longDateFormat=function(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},di.invalidDate=function(){return this._invalidDate},di.ordinal=function(e){return this._ordinal.replace("%d",e)},di.preparse=li,di.postformat=li,di.relativeTime=function(e,t,i,s){var n=this._relativeTime[i];return Y(n)?n(e,t,i,s):n.replace(/%d/i,e)},di.pastFuture=function(e,t){var i=this._relativeTime[e>0?"future":"past"];return Y(i)?i(t):i.replace(/%s/i,t)},di.set=function(e){var t,i;for(i in e)Y(t=e[i])?this[i]=t:this["_"+i]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},di.months=function(e,t){return e?i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ce).test(t)?"format":"standalone"][e.month()]:i(this._months)?this._months:this._months.standalone},di.monthsShort=function(e,t){return e?i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ce.test(t)?"format":"standalone"][e.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},di.monthsParse=function(e,t,i){var s,n,o;if(this._monthsParseExact)return function(e,t,i){var s,n,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)o=h([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(o,"").toLocaleLowerCase();return i?"MMM"===t?-1!==(n=De.call(this._shortMonthsParse,a))?n:null:-1!==(n=De.call(this._longMonthsParse,a))?n:null:"MMM"===t?-1!==(n=De.call(this._shortMonthsParse,a))?n:-1!==(n=De.call(this._longMonthsParse,a))?n:null:-1!==(n=De.call(this._longMonthsParse,a))?n:-1!==(n=De.call(this._shortMonthsParse,a))?n:null}.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(n=h([2e3,s]),i&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),i||this._monthsParse[s]||(o="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[s]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(i&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!i&&this._monthsParse[s].test(e))return s}},di.monthsRegex=function(e){return this._monthsParseExact?(l(this,"_monthsRegex")||Fe.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Pe),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},di.monthsShortRegex=function(e){return this._monthsParseExact?(l(this,"_monthsRegex")||Fe.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=He),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},di.week=function(e){return Xe(e,this._week.dow,this._week.doy).week},di.firstDayOfYear=function(){return this._week.doy},di.firstDayOfWeek=function(){return this._week.dow},di.weekdays=function(e,t){return e?i(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:i(this._weekdays)?this._weekdays:this._weekdays.standalone},di.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},di.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},di.weekdaysParse=function(e,t,i){var s,n,o;if(this._weekdaysParseExact)return function(e,t,i){var s,n,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)o=h([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(o,"").toLocaleLowerCase();return i?"dddd"===t?-1!==(n=De.call(this._weekdaysParse,a))?n:null:"ddd"===t?-1!==(n=De.call(this._shortWeekdaysParse,a))?n:null:-1!==(n=De.call(this._minWeekdaysParse,a))?n:null:"dddd"===t?-1!==(n=De.call(this._weekdaysParse,a))?n:-1!==(n=De.call(this._shortWeekdaysParse,a))?n:-1!==(n=De.call(this._minWeekdaysParse,a))?n:null:"ddd"===t?-1!==(n=De.call(this._shortWeekdaysParse,a))?n:-1!==(n=De.call(this._weekdaysParse,a))?n:-1!==(n=De.call(this._minWeekdaysParse,a))?n:null:-1!==(n=De.call(this._minWeekdaysParse,a))?n:-1!==(n=De.call(this._weekdaysParse,a))?n:-1!==(n=De.call(this._shortWeekdaysParse,a))?n:null}.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(n=h([2e3,1]).day(s),i&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(n,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(n,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(n,"").replace(".",".?")+"$","i")),this._weekdaysParse[s]||(o="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[s]=new RegExp(o.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(i&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(i&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!i&&this._weekdaysParse[s].test(e))return s}},di.weekdaysRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Je),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},di.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=qe),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},di.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ze),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},di.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},di.meridiem=function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"};function hi(e,t,i,s){var n=ut(),o=h().set(s,t);return n[i](o,e)}function ci(e,t,i){if(o(e)&&(t=e,e=void 0),e=e||"",null!=t)return hi(e,t,i,"month");var s,n=[];for(s=0;s<12;s++)n[s]=hi(e,s,i,"month");return n}function ui(e,t,i,s){"boolean"==typeof e?(o(t)&&(i=t,t=void 0),t=t||""):(i=t=e,e=!1,o(t)&&(i=t,t=void 0),t=t||"");var n=ut(),a=e?n._week.dow:0;if(null!=i)return hi(t,(i+a)%7,s,"day");var r,l=[];for(r=0;r<7;r++)l[r]=hi(t,(r+a)%7,s,"day");return l}ht("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===w(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),t.lang=k("moment.lang is deprecated. Use moment.locale instead.",ht),t.langData=k("moment.langData is deprecated. Use moment.localeData instead.",ut);var mi=Math.abs;function pi(e,t,i,s){var n=$t(t,i);return e._milliseconds+=s*n._milliseconds,e._days+=s*n._days,e._months+=s*n._months,e._bubble()}function _i(e){return e<0?Math.floor(e):Math.ceil(e)}function fi(e){return 4800*e/146097}function gi(e){return 146097*e/4800}function bi(e){return function(){return this.as(e)}}var vi=bi("ms"),yi=bi("s"),Mi=bi("m"),wi=bi("h"),Li=bi("d"),Si=bi("w"),ki=bi("M"),Ti=bi("y");function xi(e){return function(){return this.isValid()?this._data[e]:NaN}}var Yi=xi("milliseconds"),Di=xi("seconds"),Ei=xi("minutes"),Ci=xi("hours"),Ni=xi("days"),Oi=xi("months"),Ii=xi("years");var Ai=Math.round,Hi={ss:44,s:45,m:45,h:22,d:26,M:11};var Pi=Math.abs;function Fi(){if(!this.isValid())return this.localeData().invalidDate();var e,t,i,s=Pi(this._milliseconds)/1e3,n=Pi(this._days),o=Pi(this._months);t=M((e=M(s/60))/60),s%=60,e%=60;var a=i=M(o/12),r=o%=12,l=n,d=t,h=e,c=s,u=this.asSeconds();return u?(u<0?"-":"")+"P"+(a?a+"Y":"")+(r?r+"M":"")+(l?l+"D":"")+(d||h||c?"T":"")+(d?d+"H":"")+(h?h+"M":"")+(c?c+"S":""):"P0D"}var ji=Ot.prototype;ji.isValid=function(){return this._isValid},ji.abs=function(){var e=this._data;return this._milliseconds=mi(this._milliseconds),this._days=mi(this._days),this._months=mi(this._months),e.milliseconds=mi(e.milliseconds),e.seconds=mi(e.seconds),e.minutes=mi(e.minutes),e.hours=mi(e.hours),e.months=mi(e.months),e.years=mi(e.years),this},ji.add=function(e,t){return pi(this,e,t,1)},ji.subtract=function(e,t){return pi(this,e,t,-1)},ji.as=function(e){if(!this.isValid())return NaN;var t,i,s=this._milliseconds;if("month"===(e=A(e))||"year"===e)return t=this._days+s/864e5,i=this._months+fi(t),"month"===e?i:i/12;switch(t=this._days+Math.round(gi(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}},ji.asMilliseconds=vi,ji.asSeconds=yi,ji.asMinutes=Mi,ji.asHours=wi,ji.asDays=Li,ji.asWeeks=Si,ji.asMonths=ki,ji.asYears=Ti,ji.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12):NaN},ji._bubble=function(){var e,t,i,s,n,o=this._milliseconds,a=this._days,r=this._months,l=this._data;return o>=0&&a>=0&&r>=0||o<=0&&a<=0&&r<=0||(o+=864e5*_i(gi(r)+a),a=0,r=0),l.milliseconds=o%1e3,e=M(o/1e3),l.seconds=e%60,t=M(e/60),l.minutes=t%60,i=M(t/60),l.hours=i%24,a+=M(i/24),n=M(fi(a)),r+=n,a-=_i(gi(n)),s=M(r/12),r%=12,l.days=a,l.months=r,l.years=s,this},ji.get=function(e){return e=A(e),this.isValid()?this[e+"s"]():NaN},ji.milliseconds=Yi,ji.seconds=Di,ji.minutes=Ei,ji.hours=Ci,ji.days=Ni,ji.weeks=function(){return M(this.days()/7)},ji.months=Oi,ji.years=Ii,ji.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),i=function(e,t,i){var s=$t(e).abs(),n=Ai(s.as("s")),o=Ai(s.as("m")),a=Ai(s.as("h")),r=Ai(s.as("d")),l=Ai(s.as("M")),d=Ai(s.as("y")),h=n<=Hi.ss&&["s",n]||n<Hi.s&&["ss",n]||o<=1&&["m"]||o<Hi.m&&["mm",o]||a<=1&&["h"]||a<Hi.h&&["hh",a]||r<=1&&["d"]||r<Hi.d&&["dd",r]||l<=1&&["M"]||l<Hi.M&&["MM",l]||d<=1&&["y"]||["yy",d];return h[2]=t,h[3]=+e>0,h[4]=i,function(e,t,i,s,n){return n.relativeTime(t||1,!!i,e,s)}.apply(null,h)}(this,!e,t);return e&&(i=t.pastFuture(+this,i)),t.postformat(i)},ji.toISOString=Fi,ji.toString=Fi,ji.toJSON=Fi,ji.locale=qt,ji.localeData=Qt,ji.toIsoString=k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Fi),ji.lang=Zt,V("X",0,0,"unix"),V("x",0,0,"valueOf"),me("x",le),me("X",/[+-]?\d+(\.\d{1,3})?/),fe("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))}),fe("x",function(e,t,i){i._d=new Date(w(e))}),t.version="2.18.1",function(t){e=t}(Yt),t.fn=ri,t.min=function(){return Ct("isBefore",[].slice.call(arguments,0))},t.max=function(){return Ct("isAfter",[].slice.call(arguments,0))},t.now=function(){return Date.now?Date.now():+new Date},t.utc=h,t.unix=function(e){return Yt(1e3*e)},t.months=function(e,t){return ci(e,t,"months")},t.isDate=a,t.locale=ht,t.invalid=_,t.duration=$t,t.isMoment=y,t.weekdays=function(e,t,i){return ui(e,t,i,"weekdays")},t.parseZone=function(){return Yt.apply(null,arguments).parseZone()},t.localeData=ut,t.isDuration=It,t.monthsShort=function(e,t){return ci(e,t,"monthsShort")},t.weekdaysMin=function(e,t,i){return ui(e,t,i,"weekdaysMin")},t.defineLocale=ct,t.updateLocale=function(e,t){if(null!=t){var i,s=ot;null!=at[e]&&(s=at[e]._config),(i=new E(t=D(s,t))).parentLocale=at[e],at[e]=i,ht(e)}else null!=at[e]&&(null!=at[e].parentLocale?at[e]=at[e].parentLocale:null!=at[e]&&delete at[e]);return at[e]},t.locales=function(){return N(at)},t.weekdaysShort=function(e,t,i){return ui(e,t,i,"weekdaysShort")},t.normalizeUnits=A,t.relativeTimeRounding=function(e){return void 0===e?Ai:"function"==typeof e&&(Ai=e,!0)},t.relativeTimeThreshold=function(e,t){return void 0!==Hi[e]&&(void 0===t?Hi[e]:(Hi[e]=t,"s"===e&&(Hi.ss=t-1),!0))},t.calendarFormat=function(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"},t.prototype=ri,t.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,i){return e<12?i?"vm":"VM":i?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}}),t.defineLocale("ar-dz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:0,doy:4}}),t.defineLocale("ar-kw",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:0,doy:12}});var Bi={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},Ri=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},zi={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},Wi=function(e){return function(t,i,s,n){var o=Ri(t),a=zi[e][Ri(t)];return 2===o&&(a=a[i?0:1]),a.replace(/%d/i,t)}},$i=["","","","","","","","","","","",""];t.defineLocale("ar-ly",{months:$i,monthsShort:$i,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:Wi("s"),m:Wi("m"),mm:Wi("m"),h:Wi("h"),hh:Wi("h"),d:Wi("d"),dd:Wi("d"),M:Wi("M"),MM:Wi("M"),y:Wi("y"),yy:Wi("y")},preparse:function(e){return e.replace(/\u200f/g,"").replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return Bi[e]}).replace(/,/g,"")},week:{dow:6,doy:12}}),t.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}});var Xi={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},Ui={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return Ui[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return Xi[e]}).replace(/,/g,"")},week:{dow:0,doy:6}}),t.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}});var Vi={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},Gi={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Ki=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},Ji={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},qi=function(e){return function(t,i,s,n){var o=Ki(t),a=Ji[e][Ki(t)];return 2===o&&(a=a[i?0:1]),a.replace(/%d/i,t)}},Zi=["  "," "," "," "," "," "," "," "," ","  ","  ","  "];t.defineLocale("ar",{months:Zi,monthsShort:Zi,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:qi("s"),m:qi("m"),mm:qi("m"),h:qi("h"),hh:qi("h"),d:qi("d"),dd:qi("d"),M:qi("M"),MM:qi("M"),y:qi("y"),yy:qi("y")},preparse:function(e){return e.replace(/\u200f/g,"").replace(/[]/g,function(e){return Gi[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return Vi[e]}).replace(/,/g,"")},week:{dow:6,doy:12}});var Qi={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};t.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"birne saniyy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(e){return/^(gndz|axam)$/.test(e)},meridiem:function(e,t,i){return e<4?"gec":e<12?"shr":e<17?"gndz":"axam"},dayOfMonthOrdinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(e){if(0===e)return e+"-nc";var t=e%10;return e+(Qi[t]||Qi[e%100-t]||Qi[e>=100?100:null])},week:{dow:1,doy:7}});function es(e,t,i){return"m"===i?t?"":"":"h"===i?t?"":"":e+" "+function(e,t){var i=e.split("_");return t%10==1&&t%100!=11?i[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?i[1]:i[2]}({mm:t?"__":"__",hh:t?"__":"__",dd:"__",MM:"__",yy:"__"}[i],+e)}t.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:es,mm:es,h:es,hh:es,d:"",dd:es,M:"",MM:es,y:"",yy:es},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,i){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-":e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}}),t.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,i=e%100;return 0===e?e+"-":0===i?e+"-":i>10&&i<20?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}});var ts={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},is={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return is[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return ts[e]})},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||""===t&&e<5||""===t?e+12:e},meridiem:function(e,t,i){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}});var ss={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},ns={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("bo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return ns[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return ss[e]})},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||""===t&&e<5||""===t?e+12:e},meridiem:function(e,t,i){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}});function os(e,t,i){return e+" "+function(e,t){if(2===t)return function(e){var t={m:"v",b:"v",d:"z"};if(void 0===t[e.charAt(0)])return e;return t[e.charAt(0)]+e.substring(1)}(e);return e}({mm:"munutenn",MM:"miz",dd:"devezh"}[i],e)}function as(e){return e>9?as(e%10):e}t.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno",m:"ur vunutenn",mm:os,h:"un eur",hh:"%d eur",d:"un devezh",dd:os,M:"ur miz",MM:os,y:"ur bloaz",yy:function(e){switch(as(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}},dayOfMonthOrdinalParse:/\d{1,2}(a|vet)/,ordinal:function(e){return e+(1===e?"a":"vet")},week:{dow:1,doy:4}});function rs(e,t,i){var s=e+" ";switch(i){case"m":return t?"jedna minuta":"jedne minute";case"mm":return s+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return s+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return s+=1===e?"dan":"dana";case"MM":return s+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return s+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}t.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:rs,mm:rs,h:rs,hh:rs,d:"dan",dd:rs,M:"mjesec",MM:rs,y:"godinu",yy:rs},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),t.defineLocale("ca",{months:{standalone:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de mar_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"[el] D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"[el] D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"[el] dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(e,t){var i=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"";return"w"!==t&&"W"!==t||(i="a"),e+i},week:{dow:1,doy:4}});var ls="leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),ds="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_");function hs(e){return e>1&&e<5&&1!=~~(e/10)}function cs(e,t,i,s){var n=e+" ";switch(i){case"s":return t||s?"pr sekund":"pr sekundami";case"m":return t?"minuta":s?"minutu":"minutou";case"mm":return t||s?n+(hs(e)?"minuty":"minut"):n+"minutami";case"h":return t?"hodina":s?"hodinu":"hodinou";case"hh":return t||s?n+(hs(e)?"hodiny":"hodin"):n+"hodinami";case"d":return t||s?"den":"dnem";case"dd":return t||s?n+(hs(e)?"dny":"dn"):n+"dny";case"M":return t||s?"msc":"mscem";case"MM":return t||s?n+(hs(e)?"msce":"msc"):n+"msci";case"y":return t||s?"rok":"rokem";case"yy":return t||s?n+(hs(e)?"roky":"let"):n+"lety"}}t.defineLocale("cs",{months:ls,monthsShort:ds,monthsParse:function(e,t){var i,s=[];for(i=0;i<12;i++)s[i]=new RegExp("^"+e[i]+"$|^"+t[i]+"$","i");return s}(ls,ds),shortMonthsParse:function(e){var t,i=[];for(t=0;t<12;t++)i[t]=new RegExp("^"+e[t]+"$","i");return i}(ds),longMonthsParse:function(e){var t,i=[];for(t=0;t<12;t++)i[t]=new RegExp("^"+e[t]+"$","i");return i}(ls),weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:cs,m:cs,mm:cs,h:cs,hh:cs,d:cs,dd:cs,M:cs,MM:cs,y:cs,yy:cs},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),t.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(e){return e+(/$/i.exec(e)?"":/$/i.exec(e)?"":"")},past:"%s ",s:"- ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}}),t.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t=e,i="";return t>20?i=40===t||50===t||60===t||80===t||100===t?"fed":"ain":t>0&&(i=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][t]),e+i},week:{dow:1,doy:4}}),t.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"p dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});function us(e,t,i,s){var n={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?n[i][0]:n[i][1]}t.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:us,mm:"%d Minuten",h:us,hh:"%d Stunden",d:us,dd:us,M:us,MM:us,y:us,yy:us},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});function ms(e,t,i,s){var n={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?n[i][0]:n[i][1]}t.defineLocale("de-ch",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz_April_Mai_Juni_Juli_Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH.mm",LLLL:"dddd, D. MMMM YYYY HH.mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:ms,mm:"%d Minuten",h:ms,hh:"%d Stunden",d:ms,dd:ms,M:ms,MM:ms,y:ms,yy:ms},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});function ps(e,t,i,s){var n={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?n[i][0]:n[i][1]}t.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:ps,mm:"%d Minuten",h:ps,hh:"%d Stunden",d:ps,dd:ps,M:ps,MM:ps,y:ps,yy:ps},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var _s=["","","","","","","","","","","",""],fs=["","","","","","",""];t.defineLocale("dv",{months:_s,monthsShort:_s,weekdays:fs,weekdaysShort:fs,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:7,doy:12}}),t.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(e,t){return e?/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]:this._monthsNominativeEl},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(e,t,i){return e>11?i?"":"":i?"":""},isPM:function(e){return""===(e+"").toLowerCase()[0]},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ ] dddd [{}] LT";default:return"[ ] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,t){var i=this._calendarEl[e],s=t&&t.hours();return Y(i)&&(i=i.apply(t)),i.replace("{}",s%12==1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),t.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),t.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),t.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),t.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),t.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),t.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec".split("_"),weekdays:"dimano_lundo_mardo_merkredo_ado_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_a_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_a_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-a de] MMMM, YYYY",LLL:"D[-a de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-a de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,i){return e>11?i?"p.t.m.":"P.T.M.":i?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"anta %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}});var gs="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),bs="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");t.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?bs[e.month()]:gs[e.month()]:gs},monthsParseExact:!0,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});var vs="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),ys="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");t.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?ys[e.month()]:vs[e.month()]:vs},monthsParseExact:!0,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});function Ms(e,t,i,s){var n={s:["mne sekundi","mni sekund","paar sekundit"],m:["he minuti","ks minut"],mm:[e+" minuti",e+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[e+" tunni",e+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[e+" kuu",e+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[e+" aasta",e+" aastat"]};return t?n[i][2]?n[i][2]:n[i][1]:s?n[i][0]:n[i][1]}t.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:Ms,m:Ms,mm:Ms,h:Ms,hh:Ms,d:Ms,dd:"%d peva",M:Ms,MM:Ms,y:Ms,yy:Ms},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),t.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var ws={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},Ls={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/  |  /,isPM:function(e){return/  /.test(e)},meridiem:function(e,t,i){return e<12?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[-]/g,function(e){return Ls[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return ws[e]}).replace(/,/g,"")},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}});var Ss="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),ks=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",Ss[7],Ss[8],Ss[9]];function Ts(e,t,i,s){var n="";switch(i){case"s":return s?"muutaman sekunnin":"muutama sekunti";case"m":return s?"minuutin":"minuutti";case"mm":n=s?"minuutin":"minuuttia";break;case"h":return s?"tunnin":"tunti";case"hh":n=s?"tunnin":"tuntia";break;case"d":return s?"pivn":"piv";case"dd":n=s?"pivn":"piv";break;case"M":return s?"kuukauden":"kuukausi";case"MM":n=s?"kuukauden":"kuukautta";break;case"y":return s?"vuoden":"vuosi";case"yy":n=s?"vuoden":"vuotta"}return n=function(e,t){return e<10?t?ks[e]:Ss[e]:e}(e,s)+" "+n}t.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:Ts,m:Ts,mm:Ts,h:Ts,hh:Ts,d:Ts,dd:Ts,M:Ts,MM:Ts,y:Ts,yy:Ts},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),t.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnai",MM:"%d mnair",y:"eitt r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),t.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}}}),t.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}}),t.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,t){switch(t){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}});var xs="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),Ys="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");t.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?Ys[e.month()]:xs[e.month()]:xs},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}});t.defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"],monthsShort:["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"],monthsParseExact:!0,weekdays:["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["D","Lu","M","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}}),t.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuo_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xu._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mrcores_xoves_venres_sbado".split("_"),weekdaysShort:"dom._lun._mar._mr._xov._ven._sb.".split("_"),weekdaysMin:"do_lu_ma_m_xo_ve_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});function Ds(e,t,i,s){var n={s:["thodde secondanim","thodde second"],m:["eka mintan","ek minute"],mm:[e+" mintanim",e+" mintam"],h:["eka horan","ek hor"],hh:[e+" horanim",e+" hor"],d:["eka disan","ek dis"],dd:[e+" disanim",e+" dis"],M:["eka mhoinean","ek mhoino"],MM:[e+" mhoineanim",e+" mhoine"],y:["eka vorsan","ek voros"],yy:[e+" vorsanim",e+" vorsam"]};return t?n[i][0]:n[i][1]}t.defineLocale("gom-latn",{months:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budvar_Brestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM[achea] Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Ieta to] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fatlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:Ds,m:Ds,mm:Ds,h:Ds,hh:Ds,d:Ds,dd:Ds,M:Ds,MM:Ds,y:Ds,yy:Ds},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(e,t){switch(t){case"D":return e+"er";default:case"M":case"Q":case"DDD":case"d":case"w":case"W":return e}},week:{dow:1,doy:4},meridiemParse:/rati|sokalli|donparam|sanje/,meridiemHour:function(e,t){return 12===e&&(e=0),"rati"===t?e<4?e:e+12:"sokalli"===t?e:"donparam"===t?e>12?e:e+12:"sanje"===t?e+12:void 0},meridiem:function(e,t,i){return e<4?"rati":e<12?"sokalli":e<16?"donparam":e<20?"sanje":"rati"}}),t.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:function(e){return 2===e?"":e+" "},d:"",dd:function(e){return 2===e?"":e+" "},M:"",MM:function(e){return 2===e?"":e+" "},y:"",yy:function(e){return 2===e?"":e%10==0&&10!==e?e+" ":e+" "}},meridiemParse:/"|"| | | ||/i,isPM:function(e){return/^("| |)$/.test(e)},meridiem:function(e,t,i){return e<5?" ":e<10?"":e<12?i?'"':" ":e<18?i?'"':" ":""}});var Es={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},Cs={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("hi",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return Cs[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Es[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,i){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}});function Ns(e,t,i){var s=e+" ";switch(i){case"m":return t?"jedna minuta":"jedne minute";case"mm":return s+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return s+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return s+=1===e?"dan":"dana";case"MM":return s+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return s+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}t.defineLocale("hr",{months:{format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:Ns,mm:Ns,h:Ns,hh:Ns,d:"dan",dd:Ns,M:"mjesec",MM:Ns,y:"godinu",yy:Ns},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var Os="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");function Is(e,t,i,s){var n=e;switch(i){case"s":return s||t?"nhny msodperc":"nhny msodperce";case"m":return"egy"+(s||t?" perc":" perce");case"mm":return n+(s||t?" perc":" perce");case"h":return"egy"+(s||t?" ra":" rja");case"hh":return n+(s||t?" ra":" rja");case"d":return"egy"+(s||t?" nap":" napja");case"dd":return n+(s||t?" nap":" napja");case"M":return"egy"+(s||t?" hnap":" hnapja");case"MM":return n+(s||t?" hnap":" hnapja");case"y":return"egy"+(s||t?" v":" ve");case"yy":return n+(s||t?" v":" ve")}return""}function As(e){return(e?"":"[mlt] ")+"["+Os[this.day()]+"] LT[-kor]"}t.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,i){return e<12?!0===i?"de":"DE":!0===i?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return As.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return As.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:Is,m:Is,mm:Is,h:Is,hh:Is,d:Is,dd:Is,M:Is,MM:Is,y:Is,yy:Is},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),t.defineLocale("hy-am",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-":e+"-";default:return e}},week:{dow:1,doy:7}}),t.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,i){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}});function Hs(e){return e%100==11||e%10!=1}function Ps(e,t,i,s){var n=e+" ";switch(i){case"s":return t||s?"nokkrar sekndur":"nokkrum sekndum";case"m":return t?"mnta":"mntu";case"mm":return Hs(e)?n+(t||s?"mntur":"mntum"):t?n+"mnta":n+"mntu";case"hh":return Hs(e)?n+(t||s?"klukkustundir":"klukkustundum"):n+"klukkustund";case"d":return t?"dagur":s?"dag":"degi";case"dd":return Hs(e)?t?n+"dagar":n+(s?"daga":"dgum"):t?n+"dagur":n+(s?"dag":"degi");case"M":return t?"mnuur":s?"mnu":"mnui";case"MM":return Hs(e)?t?n+"mnuir":n+(s?"mnui":"mnuum"):t?n+"mnuur":n+(s?"mnu":"mnui");case"y":return t||s?"r":"ri";case"yy":return Hs(e)?n+(t||s?"r":"rum"):n+(t||s?"r":"ri")}}t.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:Ps,m:Ps,mm:Ps,h:"klukkustund",hh:Ps,d:Ps,dd:Ps,M:Ps,MM:Ps,y:Ps,yy:Ps},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),t.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),t.defineLocale("ja",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMD HH:mm dddd",l:"YYYY/MM/DD",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMD HH:mm dddd"},meridiemParse:/|/i,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}}),t.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){return 12===e&&(e=0),"enjing"===t?e:"siyang"===t?e>=11?e:e+12:"sonten"===t||"ndalu"===t?e+12:void 0},meridiem:function(e,t,i){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}}),t.defineLocale("ka",{months:{standalone:"___________".split("_"),format:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(|)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(e){return/(|||)/.test(e)?e.replace(/$/,""):e+""},past:function(e){return/(||||)/.test(e)?e.replace(/(|)$/," ")://.test(e)?e.replace(/$/," "):void 0},s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(e){return 0===e?e:1===e?e+"-":e<20||e<=100&&e%20==0||e%100==0?"-"+e:e+"-"},week:{dow:1,doy:7}});var Fs={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};t.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e){return e+(Fs[e]||Fs[e%10]||Fs[e>=100?100:null])},week:{dow:1,doy:7}}),t.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}});var js={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},Bs={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("kn",{months:"___________".split("_"),monthsShort:"___________".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return Bs[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return js[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,i){return e<4?"":e<10?"":e<17?"":e<20?"":""},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(e){return e+""},week:{dow:0,doy:6}}),t.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm",l:"YYYY.MM.DD",ll:"YYYY MMMM D",lll:"YYYY MMMM D A h:mm",llll:"YYYY MMMM D dddd A h:mm"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d",m:"1",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""}});var Rs={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};t.defineLocale("ky",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||)/,ordinal:function(e){return e+(Rs[e]||Rs[e%10]||Rs[e>=100?100:null])},week:{dow:1,doy:7}});function zs(e,t,i,s){var n={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?n[i][0]:n[i][1]}function Ws(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10;return Ws(0===t?e/10:t)}if(e<1e4){for(;e>=10;)e/=10;return Ws(e)}return e/=1e3,Ws(e)}t.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(e){return Ws(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e},past:function(e){return Ws(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e},s:"e puer Sekonnen",m:zs,mm:"%d Minutten",h:zs,hh:"%d Stonnen",d:zs,dd:"%d Deeg",M:zs,MM:"%d Mint",y:zs,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),t.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},dayOfMonthOrdinalParse:/()\d{1,2}/,ordinal:function(e){return""+e}});var $s={m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"};function Xs(e,t,i,s){return t?Vs(i)[0]:s?Vs(i)[1]:Vs(i)[2]}function Us(e){return e%10==0||e>10&&e<20}function Vs(e){return $s[e].split("_")}function Gs(e,t,i,s){var n=e+" ";return 1===e?n+Xs(0,t,i[0],s):t?n+(Us(e)?Vs(i)[1]:Vs(i)[0]):s?n+Vs(i)[1]:n+(Us(e)?Vs(i)[1]:Vs(i)[2])}t.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:function(e,t,i,s){return t?"kelios sekunds":s?"keli sekundi":"kelias sekundes"},m:Xs,mm:Gs,h:Xs,hh:Gs,d:Xs,dd:Gs,M:Xs,MM:Gs,y:Xs,yy:Gs},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}});var Ks={m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function Js(e,t,i){return i?t%10==1&&t%100!=11?e[2]:e[3]:t%10==1&&t%100!=11?e[0]:e[1]}function qs(e,t,i){return e+" "+Js(Ks[i],e,t)}function Zs(e,t,i){return Js(Ks[i],e,t)}t.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:function(e,t){return t?"daas sekundes":"dam sekundm"},m:Zs,mm:qs,h:Zs,hh:qs,d:Zs,dd:qs,M:Zs,MM:qs,y:Zs,yy:qs},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var Qs={words:{m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,t,i){var s=Qs.words[i];return 1===i.length?t?s[0]:s[1]:e+" "+Qs.correctGrammaticalCase(e,s)}};t.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",m:Qs.translate,mm:Qs.translate,h:Qs.translate,hh:Qs.translate,d:"dan",dd:Qs.translate,M:"mjesec",MM:Qs.translate,y:"godinu",yy:Qs.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),t.defineLocale("mi",{months:"Kohi-tte_Hui-tanguru_Pout-te-rangi_Paenga-whwh_Haratua_Pipiri_Hngoingoi_Here-turi-kk_Mahuru_Whiringa--nuku_Whiringa--rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rtapu_Mane_Trei_Wenerei_Tite_Paraire_Htarei".split("_"),weekdaysShort:"Ta_Ma_T_We_Ti_Pa_H".split("_"),weekdaysMin:"Ta_Ma_T_We_Ti_Pa_H".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hkona ruarua",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),t.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,i=e%100;return 0===e?e+"-":0===i?e+"-":i>10&&i<20?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}}),t.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||" "===t||""===t?e+12:e},meridiem:function(e,t,i){return e<4?"":e<12?"":e<17?" ":e<20?"":""}});var en={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},tn={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};function sn(e,t,i,s){var n="";if(t)switch(i){case"s":n=" ";break;case"m":n=" ";break;case"mm":n="%d ";break;case"h":n=" ";break;case"hh":n="%d ";break;case"d":n=" ";break;case"dd":n="%d ";break;case"M":n=" ";break;case"MM":n="%d ";break;case"y":n=" ";break;case"yy":n="%d "}else switch(i){case"s":n=" ";break;case"m":n=" ";break;case"mm":n="%d ";break;case"h":n=" ";break;case"hh":n="%d ";break;case"d":n=" ";break;case"dd":n="%d ";break;case"M":n=" ";break;case"MM":n="%d ";break;case"y":n=" ";break;case"yy":n="%d "}return n.replace(/%d/i,e)}t.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:sn,m:sn,mm:sn,h:sn,hh:sn,d:sn,dd:sn,M:sn,MM:sn,y:sn,yy:sn},preparse:function(e){return e.replace(/[]/g,function(e){return tn[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return en[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,i){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}}),t.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,i){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),t.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,i){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}});var nn={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},on={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return on[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return nn[e]})},week:{dow:1,doy:4}}),t.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var an={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},rn={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(e){return e.replace(/[]/g,function(e){return rn[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return an[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,i){return e<3?"":e<12?"":e<16?"":e<20?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}});var ln="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),dn="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),hn=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],cn=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;t.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?dn[e.month()]:ln[e.month()]:ln},monthsRegex:cn,monthsShortRegex:cn,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:hn,longMonthsParse:hn,shortMonthsParse:hn,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}});var un="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),mn="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),pn=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],_n=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;t.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?mn[e.month()]:un[e.month()]:un},monthsRegex:_n,monthsShortRegex:_n,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:pn,longMonthsParse:pn,shortMonthsParse:pn,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}}),t.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mn_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m_ty_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var fn={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},gn={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("pa-in",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return gn[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return fn[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,i){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}});var bn="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),vn="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_");function yn(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function Mn(e,t,i){var s=e+" ";switch(i){case"m":return t?"minuta":"minut";case"mm":return s+(yn(e)?"minuty":"minut");case"h":return t?"godzina":"godzin";case"hh":return s+(yn(e)?"godziny":"godzin");case"MM":return s+(yn(e)?"miesice":"miesicy");case"yy":return s+(yn(e)?"lata":"lat")}}t.defineLocale("pl",{months:function(e,t){return e?""===t?"("+vn[e.month()]+"|"+bn[e.month()]+")":/D MMMM/.test(t)?vn[e.month()]:bn[e.month()]:bn},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:Mn,mm:Mn,h:Mn,hh:Mn,d:"1 dzie",dd:"%d dni",M:"miesic",MM:Mn,y:"rok",yy:Mn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),t.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Do_2_3_4_5_6_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrs",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d"}),t.defineLocale("pt",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Tera-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Do_2_3_4_5_6_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});function wn(e,t,i){var s=" ";return(e%100>=20||e>=100&&e%100==0)&&(s=" de "),e+s+{mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[i]}t.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",m:"un minut",mm:wn,h:"o or",hh:wn,d:"o zi",dd:wn,M:"o lun",MM:wn,y:"un an",yy:wn},week:{dow:1,doy:7}});function Ln(e,t,i){return"m"===i?t?"":"":e+" "+function(e,t){var i=e.split("_");return t%10==1&&t%100!=11?i[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?i[1]:i[2]}({mm:t?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"}[i],+e)}var Sn=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];t.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:Sn,longMonthsParse:Sn,shortMonthsParse:Sn,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT";switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT";switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:Ln,mm:Ln,h:"",hh:Ln,d:"",dd:Ln,M:"",MM:Ln,y:"",yy:Ln},meridiemParse:/|||/i,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,i){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-";case"D":return e+"-";case"w":case"W":return e+"-";default:return e}},week:{dow:1,doy:7}});var kn=["","","","","","","","","","","",""],Tn=["","","","","","",""];t.defineLocale("sd",{months:kn,monthsShort:kn,weekdays:Tn,weekdaysShort:Tn,weekdaysMin:Tn,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd [  ] LT",lastDay:"[] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:4}}),t.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),t.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(e){return e+" "},meridiemParse:/ | |.|../,isPM:function(e){return".."===e||" "===e},meridiem:function(e,t,i){return e>11?i?"..":" ":i?"..":" "}});var xn="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),Yn="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");function Dn(e){return e>1&&e<5}function En(e,t,i,s){var n=e+" ";switch(i){case"s":return t||s?"pr seknd":"pr sekundami";case"m":return t?"minta":s?"mintu":"mintou";case"mm":return t||s?n+(Dn(e)?"minty":"mint"):n+"mintami";case"h":return t?"hodina":s?"hodinu":"hodinou";case"hh":return t||s?n+(Dn(e)?"hodiny":"hodn"):n+"hodinami";case"d":return t||s?"de":"dom";case"dd":return t||s?n+(Dn(e)?"dni":"dn"):n+"dami";case"M":return t||s?"mesiac":"mesiacom";case"MM":return t||s?n+(Dn(e)?"mesiace":"mesiacov"):n+"mesiacmi";case"y":return t||s?"rok":"rokom";case"yy":return t||s?n+(Dn(e)?"roky":"rokov"):n+"rokmi"}}t.defineLocale("sk",{months:xn,monthsShort:Yn,weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 4:case 5:return"[minul] dddd [o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:En,m:En,mm:En,h:En,hh:En,d:En,dd:En,M:En,MM:En,y:En,yy:En},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});function Cn(e,t,i,s){var n=e+" ";switch(i){case"s":return t||s?"nekaj sekund":"nekaj sekundami";case"m":return t?"ena minuta":"eno minuto";case"mm":return n+=1===e?t?"minuta":"minuto":2===e?t||s?"minuti":"minutama":e<5?t||s?"minute":"minutami":t||s?"minut":"minutami";case"h":return t?"ena ura":"eno uro";case"hh":return n+=1===e?t?"ura":"uro":2===e?t||s?"uri":"urama":e<5?t||s?"ure":"urami":t||s?"ur":"urami";case"d":return t||s?"en dan":"enim dnem";case"dd":return n+=1===e?t||s?"dan":"dnem":2===e?t||s?"dni":"dnevoma":t||s?"dni":"dnevi";case"M":return t||s?"en mesec":"enim mesecem";case"MM":return n+=1===e?t||s?"mesec":"mesecem":2===e?t||s?"meseca":"mesecema":e<5?t||s?"mesece":"meseci":t||s?"mesecev":"meseci";case"y":return t||s?"eno leto":"enim letom";case"yy":return n+=1===e?t||s?"leto":"letom":2===e?t||s?"leti":"letoma":e<5?t||s?"leta":"leti":t||s?"let":"leti"}}t.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:Cn,m:Cn,mm:Cn,h:Cn,hh:Cn,d:Cn,dd:Cn,M:Cn,MM:Cn,y:Cn,yy:Cn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),t.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,i){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var Nn={words:{m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,t,i){var s=Nn.words[i];return 1===i.length?t?s[0]:s[1]:e+" "+Nn.correctGrammaticalCase(e,s)}};t.defineLocale("sr-cyrl",{months:"___________".split("_"),monthsShort:"._._._.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){return["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"][this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:Nn.translate,mm:Nn.translate,h:Nn.translate,hh:Nn.translate,d:"",dd:Nn.translate,M:"",MM:Nn.translate,y:"",yy:Nn.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var On={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,t,i){var s=On.words[i];return 1===i.length?t?s[0]:s[1]:e+" "+On.correctGrammaticalCase(e,s)}};t.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:On.translate,mm:On.translate,h:On.translate,hh:On.translate,d:"dan",dd:On.translate,M:"mesec",MM:On.translate,y:"godinu",yy:On.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),t.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,i){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,t){return 12===e&&(e=0),"ekuseni"===t?e:"emini"===t?e>=11?e:e+12:"entsambama"===t||"ebusuku"===t?0===e?0:e+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),t.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}(e|a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"e":1===t?"a":2===t?"a":"e")},week:{dow:1,doy:4}}),t.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}});var In={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},An={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e+""},preparse:function(e){return e.replace(/[]/g,function(e){return An[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return In[e]})},meridiemParse:/|||||/,meridiem:function(e,t,i){return e<2?" ":e<6?" ":e<10?" ":e<14?" ":e<18?" ":e<22?" ":" "},meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<2?e:e+12:""===t||""===t?e:""===t&&e>=10?e:e+12},week:{dow:0,doy:6}}),t.defineLocale("te",{months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,i){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}}),t.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juniu_Juliu_Augustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Aug_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sexta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sext_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Sex_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"minutu balun",m:"minutu ida",mm:"minutus %d",h:"horas ida",hh:"horas %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),t.defineLocale("th",{months:"___________".split("_"),monthsShort:".._.._.._.._.._.._.._.._.._.._.._..".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H:mm",LLLL:"dddd D MMMM YYYY  H:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}}),t.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}});var Hn="pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function Pn(e,t,i,s){var n=function(e){var t=Math.floor(e%1e3/100),i=Math.floor(e%100/10),s=e%10,n="";t>0&&(n+=Hn[t]+"vatlh");i>0&&(n+=(""!==n?" ":"")+Hn[i]+"maH");s>0&&(n+=(""!==n?" ":"")+Hn[s]);return""===n?"pagh":n}(e);switch(i){case"mm":return n+" tup";case"hh":return n+" rep";case"dd":return n+" jaj";case"MM":return n+" jar";case"yy":return n+" DIS"}}t.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"leS":-1!==e.indexOf("jar")?t.slice(0,-3)+"waQ":-1!==e.indexOf("DIS")?t.slice(0,-3)+"nem":t+" pIq"},past:function(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"Hu":-1!==e.indexOf("jar")?t.slice(0,-3)+"wen":-1!==e.indexOf("DIS")?t.slice(0,-3)+"ben":t+" ret"},s:"puS lup",m:"wa tup",mm:Pn,h:"wa rep",hh:Pn,d:"wa jaj",dd:Pn,M:"wa jar",MM:Pn,y:"wa DIS",yy:Pn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var Fn={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};t.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},dayOfMonthOrdinalParse:/\d{1,2}'(inci|nci|nc|nc|uncu|nc)/,ordinal:function(e){if(0===e)return e+"'nc";var t=e%10;return e+(Fn[t]||Fn[e%100-t]||Fn[e>=100?100:null])},week:{dow:1,doy:7}}),t.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,i){return e>11?i?"d'o":"D'O":i?"d'a":"D'A"},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:jn,m:jn,mm:jn,h:jn,hh:jn,d:jn,dd:jn,M:jn,MM:jn,y:jn,yy:jn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});function jn(e,t,i,s){var n={s:["viensas secunds","'iensas secunds"],m:["'n mut","'iens mut"],mm:[e+" muts",e+" muts"],h:["'n ora","'iensa ora"],hh:[e+" oras",e+" oras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",e+" ars"]};return s?n[i][0]:t?n[i][0]:n[i][1]}t.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}}),t.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}});function Bn(e,t,i){return"m"===i?t?"":"":"h"===i?t?"":"":e+" "+function(e,t){var i=e.split("_");return t%10==1&&t%100!=11?i[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?i[1]:i[2]}({mm:t?"__":"__",hh:t?"__":"__",dd:"__",MM:"__",yy:"__"}[i],+e)}function Rn(e){return function(){return e+""+(11===this.hours()?"":"")+"] LT"}}t.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:function(e,t){var i={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")};return e?i[/(\[[]\]) ?dddd/.test(t)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]:i.nominative},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:Rn("[ "),nextDay:Rn("[ "),lastDay:Rn("[ "),nextWeek:Rn("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return Rn("[] dddd [").call(this);case 1:case 2:case 4:return Rn("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:Bn,mm:Bn,h:"",hh:Bn,d:"",dd:Bn,M:"",MM:Bn,y:"",yy:Bn},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,i){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}});var zn=["","","","","","","","","","","",""],Wn=["","","","","","",""];return t.defineLocale("ur",{months:zn,monthsShort:zn,weekdays:Wn,weekdaysShort:Wn,weekdaysMin:Wn,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[  ] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:4}}),t.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}}),t.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}}),t.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:!0,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,i){return e<12?i?"sa":"SA":i?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun ri lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}}),t.defineLocale("x-pseudo",{months:"J~~r_F~br~r_~Mrc~h_p~rl_~M_~J~_Jl~_~gst~_Sp~tmb~r_~ctb~r_~vm~br_~Dc~mbr".split("_"),monthsShort:"J~_~Fb_~Mr_~pr_~M_~J_~Jl_~g_~Sp_~ct_~v_~Dc".split("_"),monthsParseExact:!0,weekdays:"S~d~_M~d~_T~sd~_Wd~sd~_T~hrs~d_~Frd~_S~tr~d".split("_"),weekdaysShort:"S~_~M_~T_~Wd_~Th_~Fr_~St".split("_"),weekdaysMin:"S~_M~_T_~W_T~h_Fr~_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~d~ t] LT",nextDay:"[T~m~rr~w t] LT",nextWeek:"dddd [t] LT",lastDay:"[~st~rd~ t] LT",lastWeek:"[L~st] dddd [t] LT",sameElse:"L"},relativeTime:{future:"~ %s",past:"%s ~g",s:" ~fw ~sc~ds",m:" ~m~t",mm:"%d m~~ts",h:"~ h~r",hh:"%d h~rs",d:" ~d",dd:"%d d~s",M:" ~m~th",MM:"%d m~t~hs",y:" ~r",yy:"%d ~rs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),t.defineLocale("yo",{months:"Sr_Erele_rna_Igbe_Ebibi_Okudu_Agmo_Ogun_Owewe_wara_Belu_p".split("_"),monthsShort:"Sr_Erl_rn_Igb_Ebi_Oku_Ag_Ogu_Owe_wa_Bel_p".split("_"),weekdays:"Aiku_Aje_Isgun_jru_jb_ti_Abamta".split("_"),weekdaysShort:"Aik_Aje_Is_jr_jb_ti_Aba".split("_"),weekdaysMin:"Ai_Aj_Is_r_b_t_Ab".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Oni ni] LT",nextDay:"[la ni] LT",nextWeek:"dddd [s ton'b] [ni] LT",lastDay:"[Ana ni] LT",lastWeek:"dddd [s tol] [ni] LT",sameElse:"L"},relativeTime:{future:"ni %s",past:"%s kja",s:"isju aaya die",m:"isju kan",mm:"isju %d",h:"wakati kan",hh:"wakati %d",d:"j kan",dd:"j %d",M:"osu kan",MM:"osu %d",y:"dun kan",yy:"dun %d"},dayOfMonthOrdinalParse:/j\s\d{1,2}/,ordinal:"j %d",week:{dow:1,doy:4}}),t.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMD HH:mm",llll:"YYYYMMMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t||""===t?e+12:e>=11?e:e+12},meridiem:function(e,t,i){var s=100*e+t;return s<600?"":s<900?"":s<1130?"":s<1230?"":s<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}}),t.defineLocale("zh-hk",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMD HH:mm",LLLL:"YYYYMMMDdddd HH:mm",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMD HH:mm",llll:"YYYYMMMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,i){var s=100*e+t;return s<600?"":s<900?"":s<1130?"":s<1230?"":s<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}}),t.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMD HH:mm",LLLL:"YYYYMMMDdddd HH:mm",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMD HH:mm",llll:"YYYYMMMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,i){var s=100*e+t;return s<600?"":s<900?"":s<1130?"":s<1230?"":s<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}}),t.locale("en"),t});var webFXTreeConfig={rootIcon:"/images/foldericon.png",openRootIcon:"/images/openfoldericon.png",folderIcon:"/images/foldericon.png",openFolderIcon:"/images/openfoldericon.png",fileIcon:"/images/foldericon.png",iIcon:"/images/I.png",lIcon:"/images/L.png",lMinusIcon:"/images/Lminus.png",lPlusIcon:"/images/Lplus.png",lMinusIconActive:"/images/Lminus-active.png",lPlusIconActive:"/images/Lplus-active.png",tIcon:"/images/T.png",tMinusIcon:"/images/Tminus.png",tPlusIcon:"/images/Tplus.png",tMinusIconActive:"/images/Tminus-active.png",tPlusIconActive:"/images/Tplus-active.png",blankIcon:"/images/blank.png",defaultText:"Tree Item",defaultAction:function(e){},defaultBehavior:"classic",zipRegexp:new RegExp(/\.zip$/),usePersistence:!1};Event.observe(document,"app:boot_loaded",function(){var e=window.resourcesFolder;webFXTreeConfig.rootIcon=e+"/images/foldericon.png",webFXTreeConfig.openRootIcon=e+"/images/openfoldericon.png",webFXTreeConfig.folderIcon=e+"/images/foldericon.png",webFXTreeConfig.openFolderIcon=e+"/images/openfoldericon.png",webFXTreeConfig.fileIcon=e+"/images/foldericon.png",webFXTreeConfig.iIcon=e+"/images/I.png",webFXTreeConfig.lIcon=e+"/images/L.png",webFXTreeConfig.lMinusIcon=e+"/images/Lminus.png",webFXTreeConfig.lPlusIcon=e+"/images/Lplus.png",webFXTreeConfig.lMinusIconActive=e+"/images/Lminus-active.png",webFXTreeConfig.lPlusIconActive=e+"/images/Lplus-active.png",webFXTreeConfig.tIcon=e+"/images/T.png",webFXTreeConfig.tMinusIcon=e+"/images/Tminus.png",webFXTreeConfig.tPlusIcon=e+"/images/Tplus.png",webFXTreeConfig.tMinusIconActive=e+"/images/Tminus-active.png",webFXTreeConfig.tPlusIconActive=e+"/images/Tplus-active.png",webFXTreeConfig.blankIcon=e+"/images/blank.png"});var webFXTreeHandler={idCounter:0,idPrefix:"webfx-tree-object-",all:{},behavior:null,selected:null,contextMenu:null,onSelect:null,getId:function(){return this.idPrefix+this.idCounter++},toggle:function(e){this.all[e.id.replace("-plus","")].toggle()},select:function(e){this.all[e.id].select()},hasFocus:!1,focus:function(e){this.all[e.id.replace("-anchor","")]&&this.all[e.id.replace("-anchor","")].focus()},blur:function(e){this.all[e.id.replace("-anchor","")]&&this.all[e.id.replace("-anchor","")].blur()},setFocus:function(e){this.hasFocus=e},keydown:function(e,t){return this.all[e.id].keydown(t.keyCode)},linkKeyPress:function(e,t){return!(!this.hasFocus||9==t.keyCode)},cookies:new WebFXCookie,insertHTMLBeforeEnd:function(e,t){if(e)if(e&&e.insertAdjacentHTML)e.insertAdjacentHTML("BeforeEnd",t);else{var i,s=e.ownerDocument.createRange();s.selectNodeContents(e),s.collapse(!1),i=s.createContextualFragment(t),e.appendChild(i)}}};function WebFXCookie(){document.cookie.length&&(this.cookies=" "+document.cookie)}WebFXCookie.prototype.setCookie=function(e,t){document.cookie=e+"="+escape(t)},WebFXCookie.prototype.getCookie=function(e){if(this.cookies){var t=this.cookies.indexOf(" "+e+"=");if(-1==t)return null;var i=this.cookies.indexOf(";",t);-1==i&&(i=this.cookies.length),i-=t;var s=this.cookies.substr(t,i);return unescape(s.substr(s.indexOf("=")+1,s.length-s.indexOf("=")+1))}return null};function WebFXTreeAbstractNode(e,t){this.childNodes=[],this.id=webFXTreeHandler.getId(),this.text=e||webFXTreeConfig.defaultText,this.action=t||null,this.url="/",this._last=!1,webFXTreeHandler.all[this.id]=this}WebFXTreeAbstractNode.prototype.add=function(e,t){e.parentNode=this;e.parentNode.url;e.parentNode.inZip?e.inZip=!0:!1!==webFXTreeConfig.zipRegexp.test(e.text)&&(e.inZip=!0),!e.action&&e.parentNode.action&&(e.action=e.parentNode.action),this.childNodes[this.childNodes.length]=e;var i=this;for(this.childNodes.length>=2&&(this.childNodes[this.childNodes.length-2]._last=!1);i.parentNode;)i=i.parentNode;if(i.rendered){this.childNodes.length>=2&&($(this.childNodes[this.childNodes.length-2].id+"-plus").src=this.childNodes[this.childNodes.length-2].folder?this.childNodes[this.childNodes.length-2].open?webFXTreeConfig.tMinusIcon:webFXTreeConfig.tPlusIcon:webFXTreeConfig.tIcon,this.childNodes[this.childNodes.length-2].plusIcon=webFXTreeConfig.tPlusIcon,this.childNodes[this.childNodes.length-2].minusIcon=webFXTreeConfig.tMinusIcon,this.childNodes[this.childNodes.length-2]._last=!1),this._last=!0;for(var s=this;s.parentNode;){for(var n=0;n<s.parentNode.childNodes.length&&s.id!=s.parentNode.childNodes[n].id;n++);n==s.parentNode.childNodes.length-1?s.parentNode._last=!0:s.parentNode._last=!1,s=s.parentNode}$(this.id+"-cont").insert(e.toString()),$(e.id).node=e.node,e.inZip||AppDroppables.add(e.id,e.node),webFXTreeHandler.contextMenu&&(Event.observe(e.id+"","contextmenu",function(e){this.select(),this.action(),Event.stop(e)}.bind(e)),webFXTreeHandler.contextMenu.addElements("#"+e.id)),Event.observe(e.id,"click",function(e){this.select(),this.action(),Event.stop(e)}.bind(e)),Event.observe(e.id,"dblclick",function(e){this.toggle(),Event.stop(e)}.bind(e)),Event.observe(e.id+"-plus","click",function(e){this.toggle(),Event.stop(e)}.bind(e)),this.folder||this.openIcon||(this.icon=webFXTreeConfig.folderIcon,this.openIcon=webFXTreeConfig.openFolderIcon),this.folder||(this.folder=!0,this.collapse(!0)),t||this.indent(),this.node&&this.node.fake&&(this.parentNode&&this.parentNode.expand(),this.expand()),(Prototype.Browser.IE||Prototype.Browser.Opera)&&window.setTimeout(function(){var t=0;$(e.id)&&$(e.id).childElements().each(function(e){t+=e.getWidth()}),t&&$(e.id).setStyle({width:Math.max(t+50,$(e.id).parentNode.getWidth())+"px"})},100)}return document.fire("app:tree_change"),e},WebFXTreeAbstractNode.prototype.updateLabel=function(e){$(this.id+"-label")&&$(this.id+"-label").update(e)},WebFXTreeAbstractNode.prototype.setLabelIcon=function(e){var t="url('"+e+"')",i="4px 1px";if(this.overlayIcon){switch(this.overlayIcon.length){case 1:i="14px 11px, 4px 1px",t='url("'+this.overlayIcon[0]+'"), ';break;case 2:i="2px 11px, 14px 11px, 4px 1px",t='url("'+this.overlayIcon[0]+'"), url("'+this.overlayIcon[1]+'"), ';break;case 3:i="14px 2px, 2px 11px, 14px 11px, 4px 1px",t='url("'+this.overlayIcon[0]+'"), url("'+this.overlayIcon[1]+'"), url("'+this.overlayIcon[2]+'"), ';break;case 4:default:i="2px 2px, 14px 2px, 2px 11px, 14px 11px, 4px 1px",t='url("'+this.overlayIcon[0]+'"), url("'+this.overlayIcon[1]+'"), url("'+this.overlayIcon[2]+'"), url("'+this.overlayIcon[3]+'"), '}t+=" url('"+e+"')"}$(this.id+"-label")&&$(this.id+"-label").setStyle({backgroundImage:t,backgroundPosition:i})},WebFXTreeAbstractNode.prototype.toggle=function(){this.folder&&(this.open?this.collapse():this.expand())},WebFXTreeAbstractNode.prototype.select=function(){if($(this.id+"-anchor")){$(this.id+"-anchor").focus(),webFXTreeHandler.focus(this);try{if(!this.scrollContainer){for(var e=this;e.parentNode;)e=e.parentNode;this.rootOffset=$(e.id).offsetTop,this.scrollContainer=$(e.id).parentNode}if(this.scrollContainer.scrollerInstance){this.scrollContainer.scrollerInstance.scrollTo(this.scrollContainer.scrollTop);var t=$(this.id),i=$(t).getHeight(),s=t.offsetTop-this.rootOffset,n=this.scrollContainer.getHeight(),o=this.scrollContainer.scrollTop,a=-1;s+i>n+o?a=s-n+i:s<o&&(a=s-i),-1!=a&&this.scrollContainer.scrollerInstance.scrollTo(a)}}catch(e){console&&console.log(e)}}},WebFXTreeAbstractNode.prototype.deSelect=function(){$(this.id+"-anchor")&&($(this.id+"-anchor").className=""),webFXTreeHandler.selected=null,$(this.id)&&($(this.id).className="webfx-tree-item")},WebFXTreeAbstractNode.prototype.focus=function(){webFXTreeHandler.selected&&webFXTreeHandler.selected!=this&&webFXTreeHandler.selected.deSelect(),webFXTreeHandler.selected=this,this.openIcon&&"classic"!=webFXTreeHandler.behavior&&this.setLabelIcon(this.openIcon);try{$(this.id+"-anchor")&&$(this.id+"-anchor").focus()}catch(e){}$(this.id).className="webfx-tree-item selected-webfx-tree-item",webFXTreeHandler.onSelect&&webFXTreeHandler.onSelect(this)},WebFXTreeAbstractNode.prototype.blur=function(){$(this.id)&&(this.openIcon&&"classic"!=webFXTreeHandler.behavior&&this.setLabelIcon(this.icon),webFXTreeHandler.selected==this?$(this.id).className="webfx-tree-item selected-webfx-tree-item-inactive":$(this.id).className="webfx-tree-item",Prototype.Browser.IE&&$(this.id+"-anchor")&&$(this.id+"-anchor").blur())},WebFXTreeAbstractNode.prototype.doExpand=function(){"classic"==webFXTreeHandler.behavior&&this.setLabelIcon(this.openIcon),this.childNodes.length&&$(this.id+"-cont")&&($(this.id+"-cont").style.display="block"),this.open=!0,webFXTreeConfig.usePersistence&&webFXTreeHandler.cookies.setCookie(this.id.substr(18,this.id.length-18),"1"),document.fire("app:tree_change")},WebFXTreeAbstractNode.prototype.doCollapse=function(){"classic"==webFXTreeHandler.behavior&&this.setLabelIcon(this.icon),this.childNodes.length&&($(this.id+"-cont").style.display="none"),this.open=!1,webFXTreeConfig.usePersistence&&webFXTreeHandler.cookies.setCookie(this.id.substr(18,this.id.length-18),"0"),document.fire("app:tree_change")},WebFXTreeAbstractNode.prototype.expandAll=function(){this.expandChildren(),this.folder&&!this.open&&this.expand()},WebFXTreeAbstractNode.prototype.expandChildren=function(){for(var e=0;e<this.childNodes.length;e++)this.childNodes[e].expandAll()},WebFXTreeAbstractNode.prototype.collapseAll=function(){this.collapseChildren(),this.folder&&this.open&&this.collapse(!0)},WebFXTreeAbstractNode.prototype.collapseChildren=function(){for(var e=0;e<this.childNodes.length;e++)this.childNodes[e].collapseAll()},WebFXTreeAbstractNode.prototype.indent=function(e,t,i,s,n){null==e&&(e=-2);for(var o=this.childNodes.length-1;o>=0;o--)if(this.childNodes[o].indent(e+1,t,i,s))return;if(t&&s>=this._level&&$(this.id+"-plus"))return this.folder?($(this.id+"-plus").src=this.open?webFXTreeConfig.lMinusIcon:webFXTreeConfig.lPlusIcon,this.plusIcon=webFXTreeConfig.lPlusIcon,this.minusIcon=webFXTreeConfig.lMinusIcon):n&&($(this.id+"-plus").src=webFXTreeConfig.lIcon),1;var a=$(this.id+"-indent-"+e);return a&&(a._last||t&&i?a.src=webFXTreeConfig.blankIcon:a.src=webFXTreeConfig.iIcon),0};function WebFXTree(e,t,i,s,n){this.base=WebFXTreeAbstractNode,this.base(e,t),this.icon=s||webFXTreeConfig.rootIcon,this.openIcon=n||webFXTreeConfig.openRootIcon,webFXTreeConfig.usePersistence?this.open="0"!=webFXTreeHandler.cookies.getCookie(this.id.substr(18,this.id.length-18)):this.open=!0,this.folder=!0,this.rendered=!1,this.onSelect=null,webFXTreeHandler.behavior||(webFXTreeHandler.behavior=i||webFXTreeConfig.defaultBehavior)}WebFXTree.prototype=new WebFXTreeAbstractNode,WebFXTree.prototype.setBehavior=function(e){webFXTreeHandler.behavior=e},WebFXTree.prototype.getBehavior=function(e){return webFXTreeHandler.behavior},WebFXTree.prototype.getSelected=function(){return webFXTreeHandler.selected?webFXTreeHandler.selected:null},WebFXTree.prototype.remove=function(){},WebFXTree.prototype.expand=function(){this.doExpand()},WebFXTree.prototype.collapse=function(e){e||this.focus(),this.doCollapse()},WebFXTree.prototype.getFirst=function(){return null},WebFXTree.prototype.getLast=function(){return null},WebFXTree.prototype.getNextSibling=function(){return null},WebFXTree.prototype.getPreviousSibling=function(){return null},WebFXTree.prototype.keydown=function(e){if(!webFXTreeHandler.hasFocus)return!0;if(9==e)return!1;if(39==e)return this.open?this.childNodes.length&&this.childNodes[0].select():this.expand(),!1;if(37==e)return this.collapse(),!1;if(40==e&&this.open&&this.childNodes.length){this.childNodes[0].select();var t=this.childNodes[0];return WebFXtimer&&clearTimeout(WebFXtimer),WebFXtimer=window.setTimeout(t.action.bind(t),1e3),!1}return!0},WebFXTree.prototype.toString=function(){for(var e='<div id="'+this.id+'" ondblclick="webFXTreeHandler.toggle(this);" class="webfx-tree-item" onkeydown="return webFXTreeHandler.keydown(this, event)"><a href="/" id="'+this.id+'-anchor" onkeydown="return webFXTreeHandler.linkKeyPress(this, event);"  onfocus="webFXTreeHandler.focus(this);" onblur="webFXTreeHandler.blur(this);"'+(this.target?' target="'+this.target+'"':"")+'><span id="'+this.id+'-label" style="background-image:url(\''+("classic"==webFXTreeHandler.behavior&&this.open?this.openIcon:this.icon)+"');\">"+this.text+'</span></a></div><div id="'+this.id+'-cont" class="webfx-tree-container first_container" style="display: '+(this.open?"block":"none")+';">',t=[],i=0;i<this.childNodes.length;i++)t[i]=this.childNodes[i].toString(i,this.childNodes.length);return this.rendered=!0,e+t.join("")+"</div>"};function WebFXTreeItem(e,t,i,s,n,o){this.base=WebFXTreeAbstractNode,this.base(e,t),webFXTreeConfig.usePersistence?this.open="1"==webFXTreeHandler.cookies.getCookie(this.id.substr(18,this.id.length-18)):this.open=!1,s&&(this.icon=s),n&&(this.openIcon=n),o&&(this.overlayIcon=o),i&&i.add(this)}WebFXTreeItem.prototype=new WebFXTreeAbstractNode,WebFXTreeItem.prototype.updateIcon=function(e,t){this.openIcon=t||e,this.icon=e,this.setLabelIcon(this.open&&"classic"!=webFXTreeHandler.behavior?this.openIcon:e)},WebFXTreeItem.prototype.remove=function(){if($(this.id+"-plus")){var e=$(this.id+"-plus").src,t=this.parentNode,i=this.getPreviousSibling(!0),s=this.getNextSibling(!0),n=(this.parentNode.folder,!s||!s.parentNode||s.parentNode.id!=t.id);this._remove(),Droppables.remove($(this.id)),webFXTreeHandler.contextMenu&&webFXTreeHandler.contextMenu.removeElements("#"+this.id),0==t.childNodes.length&&($(t.id+"-cont").style.display="none",t.doCollapse(),t.folder=!1,t.open=!1),s&&!n||t.indent(null,!0,n,this._level,t.childNodes.length),i!=t||t.childNodes.length||(i.folder=!1,i.open=!1,$(i.id+"-plus")&&(e=(e=$(i.id+"-plus").src).replace("minus","").replace("plus",""),$(i.id+"-plus").src=e,i.setLabelIcon(webFXTreeHandler.all[i.id].icon?webFXTreeHandler.all[i.id].icon:webFXTreeConfig.fileIcon))),$(i.id+"-plus")&&t==i.parentNode&&(e=e.replace("minus","").replace("plus",""),$(i.id+"-plus").src=e)}},WebFXTreeItem.prototype._remove=function(){for(e=this.childNodes.length-1;e>=0;e--)this.childNodes[e]._remove();for(var e=0;e<this.parentNode.childNodes.length;e++)if(this==this.parentNode.childNodes[e]){for(var t=e;t<this.parentNode.childNodes.length;t++)this.parentNode.childNodes[t]=this.parentNode.childNodes[t+1];this.parentNode.childNodes.length-=1,e+1==this.parentNode.childNodes.length&&(this.parentNode._last=!0);break}delete webFXTreeHandler.all[this.id];var i=$(this.id);i&&i.parentNode.removeChild(i),(i=$(this.id+"-cont"))&&i.parentNode.removeChild(i)},WebFXTreeItem.prototype.expand=function(){this.doExpand(),$(this.id+"-plus")&&($(this.id+"-plus").src=this.minusIcon)},WebFXTreeItem.prototype.collapse=function(e){e||this.focus(),this.doCollapse(),$(this.id+"-plus")&&($(this.id+"-plus").src=this.plusIcon)},WebFXTreeItem.prototype.getFirst=function(){return this.childNodes[0]},WebFXTreeItem.prototype.getLast=function(){return this.childNodes[this.childNodes.length-1].open?this.childNodes[this.childNodes.length-1].getLast():this.childNodes[this.childNodes.length-1]},WebFXTreeItem.prototype.getNextSibling=function(){for(var e=0;e<this.parentNode.childNodes.length&&this!=this.parentNode.childNodes[e];e++);return++e==this.parentNode.childNodes.length?this.parentNode.getNextSibling():this.parentNode.childNodes[e]},WebFXTreeItem.prototype.getPreviousSibling=function(e){for(var t=0;t<this.parentNode.childNodes.length&&this!=this.parentNode.childNodes[t];t++);return 0==t?this.parentNode:this.parentNode.childNodes[--t].open||e&&this.parentNode.childNodes[t].folder?this.parentNode.childNodes[t].getLast():this.parentNode.childNodes[t]},WebFXTreeItem.prototype.getCurrentPlusIcon=function(){return this.folder?this.open?this.parentNode._last?"lMinusIcon":"tMinusIcon":this.parentNode._last?"lPlusIcon":"tPlusIcon":this.parentNode._last?"lIcon":"tIcon"};var WebFXtimer;WebFXTreeItem.prototype.keydown=function(e){if(!webFXTreeHandler.hasFocus)return!0;if(9==e)return!1;if(39==e&&this.folder)return this.open?this.getFirst().select():this.expand(),!1;if(37==e)return this.open?this.collapse():this.parentNode.select(),!1;if(40==e){if(this.open){this.getFirst().select();var t=this.getFirst();WebFXtimer&&clearTimeout(WebFXtimer),WebFXtimer=window.setTimeout(t.action.bind(t),1e3)}else{(i=this.getNextSibling())&&(i.select(),WebFXtimer&&clearTimeout(WebFXtimer),WebFXtimer=window.setTimeout(i.action.bind(i),1e3))}return!1}if(38==e){var i=this.getPreviousSibling();return i.select(),WebFXtimer&&clearTimeout(WebFXtimer),WebFXtimer=window.setTimeout(i.action.bind(i),1e3),!1}return!0},WebFXTreeItem.prototype.toString=function(e,t){var i=this.parentNode,s="";e+1==t&&(this.parentNode._last=!0);for(d=0;i.parentNode;)i=i.parentNode,s='<img id="'+this.id+"-indent-"+d+'" src="'+(i._last?webFXTreeConfig.blankIcon:webFXTreeConfig.iIcon)+'" width="19" height="25">'+s,d++;this._level=d,this.childNodes.length?this.folder=1:this.open=!1,this.folder||"classic"!=webFXTreeHandler.behavior?(this.icon||(this.icon=webFXTreeConfig.folderIcon),this.openIcon||(this.openIcon=webFXTreeConfig.openFolderIcon)):this.icon||(this.icon=webFXTreeConfig.fileIcon);var n="",o="4px 1px";if(this.overlayIcon)switch(this.overlayIcon.length){case 1:o="14px 11px, 4px 1px",n="url('"+this.overlayIcon[0]+"'), ";break;case 2:o="2px 11px, 14px 11px, 4px 1px",n="url('"+this.overlayIcon[0]+"'), url('"+this.overlayIcon[1]+"'), ";break;case 3:o="14px 2px, 2px 11px, 14px 11px, 4px 1px",n="url('"+this.overlayIcon[0]+"'), url('"+this.overlayIcon[1]+"'), url('"+this.overlayIcon[2]+"'), ";break;case 4:default:o="2px 2px, 14px 2px, 2px 11px, 14px 11px, 4px 1px",n="url('"+this.overlayIcon[0]+"'), url('"+this.overlayIcon[1]+"'), url('"+this.overlayIcon[2]+"'), url('"+this.overlayIcon[3]+"'), "}for(var a=this.text.replace(/</g,"&lt;").replace(/>/g,"&gt;"),r='<div id="'+this.id+'" class="webfx-tree-item" onkeydown="return webFXTreeHandler.keydown(this, event)">'+s+'<img  width="19" height="25" id="'+this.id+'-plus" src="'+(this.folder?this.open?this.parentNode._last?webFXTreeConfig.lMinusIcon:webFXTreeConfig.tMinusIcon:this.parentNode._last?webFXTreeConfig.lPlusIcon:webFXTreeConfig.tPlusIcon:this.parentNode._last?webFXTreeConfig.lIcon:webFXTreeConfig.tIcon)+'"><a href="'+this.url+'" id="'+this.id+'-anchor" onkeydown="return webFXTreeHandler.linkKeyPress(this, event);" onfocus="webFXTreeHandler.focus(this);" onblur="webFXTreeHandler.blur(this);"'+(this.target?' target="'+this.target+'"':"")+'><span id="'+this.id+'-label" style="background-position:'+o+";background-image:"+n+"url('"+("classic"==webFXTreeHandler.behavior&&this.open?this.openIcon:this.icon)+"');\">"+a+'</span></a></div><div id="'+this.id+'-cont" class="webfx-tree-container" style="display: '+(this.open?"block":"none")+';">',l=[],d=0;d<this.childNodes.length;d++)l[d]=this.childNodes[d].toString(d,this.childNodes.length);return this.plusIcon=this.parentNode._last?webFXTreeConfig.lPlusIcon:webFXTreeConfig.tPlusIcon,this.minusIcon=this.parentNode._last?webFXTreeConfig.lMinusIcon:webFXTreeConfig.tMinusIcon,r+l.join("")+"</div>"},webFXTreeConfig.loadingText="Loading...";function splitOverlayIcons(e){if(!e.getMetadata().get("overlay_icon")||!Modernizr.multiplebgs)return!1;var t=[];return $A(e.getMetadata().get("overlay_icon").split(",")).each(function(e){t.push(resolveImageSource(e,"/images/overlays/ICON_SIZE",8))}),t}function CustomXTree(e,t,i){this.WebFXTree=WebFXTree,this.loaded=!0,this.node=e;var s=e.getIcon();0!=s.indexOf(resourcesFolder+"/")&&(s=resolveImageSource(s,"/images/mimes/ICON_SIZE",16));var n=e.getMetadata().get("openicon");n?0!=n.indexOf(resourcesFolder+"/")&&(n=resolveImageSource(n,"/images/mimes/ICON_SIZE",16)):n=s,this.WebFXTree(e.getLabel(),t,"explorer",s,n),this.loading=!1,this.loaded=!1,this.errorText="",i&&(this.filter=i),this.overlayIcon=splitOverlayIcons(e),this._loadingItem=new WebFXTreeItem(MessageHash?MessageHash[466]:webFXTreeConfig.loadingText),this.open?this.node.load():this.add(this._loadingItem)}CustomXTree.prototype=new WebFXTree,CustomXTree.prototype._webfxtree_expand=WebFXTree.prototype.expand,CustomXTree.prototype.expand=function(){this.node.fake||this.node.load(),this._webfxtree_expand()},CustomXTree.prototype.destroy=function(){this.node&&this.node.stopObserving()},CustomXTree.prototype.setRootNode=function(e){if(this.node)var t=this.node;this.node=e;var i=function(){for(this.open=!1;this.childNodes.length>0;)this.childNodes[this.childNodes.length-1].remove();this.loaded=!1};this.node.observe("force_clear",i.bind(this)),this.node.observe("node_replaced",i.bind(this)),this.attachListeners(this,e),t&&t.notify("node_replaced")},CustomXTree.prototype.attachListeners=function(e,t){t.observe("child_added",function(e){if(t.getMetadata().get("paginationData")){var i=t.getMetadata().get("paginationData");this.paginated||(this.paginated=!0,"0"!=i.get("dirsCount")&&this.updateLabel(this.text+" ("+MessageHash[i.get("overflowMessage")]+")"))}else this.paginated&&(this.paginated=!1,this.updateLabel(this.text));var s=t.findChildByPath(e);if(s){var n=_nodeToTree(s,this);n&&this.attachListeners(n,s)}}.bind(e)),t.observe("node_replaced",function(i){if(e.updateIcon){var s=resolveImageSource(t.getIcon(),"/images/mimes/ICON_SIZE",16),n=s;t.getMetadata().get("openicon")&&(n=resolveImageSource(t.getMetadata().get("openicon"),"/images/mimes/ICON_SIZE",16)),e.overlayIcon=splitOverlayIcons(t),e.updateIcon(s,n)}e.updateLabel&&e.updateLabel(t.getLabel())}.bind(e));var i=function(s){e.remove(),window.setTimeout(function(){t.stopObserving("node_removed",i)},200)};t.observe("node_removed",i),t.observe("loading",function(){}.bind(e)),t.observe("loaded",function(){this._loadingItem.remove(),this.childNodes.length&&this._webfxtree_expand()}.bind(e))};function CustomXTreeItem(e,t,i){this.WebFXTreeItem=WebFXTreeItem,this.node=e;var s=e.getIcon();0!=s.indexOf(resourcesFolder+"/")&&(s=resolveImageSource(s,"/images/mimes/ICON_SIZE",16));var n=e.getMetadata().get("openicon");n?0!=n.indexOf(resourcesFolder+"/")&&(n=resolveImageSource(n,"/images/mimes/ICON_SIZE",16)):n=s,this.folder=!0,this.WebFXTreeItem(e.getLabel(),t,i,s,n||resolveImageSource("folder_open.png","/images/mimes/ICON_SIZE",16),splitOverlayIcons(e)),this.loading=!1,this.loaded=!1,this.errorText="",this._loadingItem=new WebFXTreeItem(MessageHash?MessageHash[466]:webFXTreeConfig.loadingText),this.open?this.node.load():this.add(this._loadingItem),webFXTreeHandler.all[this.id]=this}CustomXTreeItem.prototype=new WebFXTreeItem,CustomXTreeItem.prototype._webfxtree_expand=WebFXTreeItem.prototype.expand,CustomXTreeItem.prototype.expand=function(){this.node.load(),this._webfxtree_expand()},CustomXTreeItem.prototype.attachListeners=CustomXTree.prototype.attachListeners;function _nodeToTree(e,t){if(t.filter&&!t.filter(e))return!1;var i=new CustomXTreeItem(e,null,t);return e.isLoaded()&&(i.loaded=!0),i.filename=e.getPath(),t.filter&&(i.filter=t.filter),i.overlayIcon=splitOverlayIcons(e),e.getChildren().each(function(e){var t=_nodeToTree(e,i);t&&(i.filter&&(t.filter=i.filter),t.overlayIcon=splitOverlayIcons(e),i.add(t,!1))}),i}Class.create("User",{id:void 0,activeRepository:void 0,read:!1,write:!1,crossRepositoryCopy:!1,preferences:void 0,repositories:void 0,crossRepositories:void 0,repoIcons:void 0,repoSearchEngines:void 0,isAdmin:!1,lock:!1,initialize:function(e,t){this.id=e,this.preferences=new Hash,this.repositories=new Hash,this.crossRepositories=new Hash,this.repoIcon=new Hash,this.repoSearchEngines=new Hash,t&&this.loadFromXml(t)},setActiveRepository:function(e,t,i){this.activeRepository=e,this.read="1"==t,this.write="1"==i,this.repositories.get(e)&&(this.crossRepositoryCopy=this.repositories.get(e).allowCrossRepositoryCopy),this.crossRepositories.get(e)&&this.crossRepositories.unset(e)},getActiveRepository:function(){return this.activeRepository},canRead:function(){return this.read},canWrite:function(){return this.write},canCrossRepositoryCopy:function(){return this.crossRepositoryCopy},getPreference:function(e,t){var i=this.preferences.get(e);if(t&&i)try{return"object"==typeof i?i:i.evalJSON()}catch(t){console?console.log("Error parsing JSON in preferences ("+e+"). You should contact system admin and clear user preferences."):alert("Error parsing JSON in preferences. You should contact system admin and clear user preferences.")}return i},getRepositoriesList:function(){return this.repositories},setPreference:function(e,t,i){i&&(t=Object.toJSON(t)),this.preferences.set(e,t)},setRepositoriesList:function(e){this.repositories=e,this.crossRepositories=new Hash,this.repositories.each(function(e){e.value.allowCrossRepositoryCopy&&this.crossRepositories.set(e.key,e.value)}.bind(this))},hasCrossRepositories:function(){return this.crossRepositories.size()},getCrossRepositories:function(){return this.crossRepositories},getRepositoryIcon:function(e){return this.repoIcon.get(e)},getRepoSearchEngine:function(e){return this.repoSearchEngines.get(e)},savePreference:function(e){if(this.preferences.get(e)){var t=new Connexion;t.setMethod("post"),t.discrete=!0,t.addParameter("get_action","save_user_pref"),t.addParameter("pref_name_0",e),t.addParameter("pref_value_0",this.preferences.get(e)),window.setTimeout(t.sendAsync.bind(t),250)}},savePreferences:function(e,t,i,s){var n=new Connexion;n.addParameter("get_action","save_user_pref");var o=0;this.preferences.each(function(e){n.addParameter("pref_name_"+o,e.key),n.addParameter("pref_value_"+o,e.value),o++}),e&&t&&(n.addParameter("pref_name_"+o,"password"),n.addParameter("pref_value_"+o,t),n.addParameter("crt",e),n.addParameter("pass_seed",i)),n.onComplete=s,n.sendAsync()},loadFromXml:function(e){for(var t=new Hash,i=0;i<e.length;i++)if("active_repo"==e[i].nodeName)var s=e[i];else if("repositories"==e[i].nodeName){for(j=0;j<e[i].childNodes.length;j++){var n=e[i].childNodes[j];if("repo"==n.nodeName){var o=new Repository(n.getAttribute("id"),n);t.set(n.getAttribute("id"),o)}}this.setRepositoriesList(t)}else if("preferences"==e[i].nodeName)for(j=0;j<e[i].childNodes.length;j++){var a=e[i].childNodes[j];if("pref"==a.nodeName){var r=a.getAttribute("value");!r&&a.firstChild&&(r=a.firstChild.nodeValue),this.setPreference(a.getAttribute("name"),r)}}else if("special_rights"==e[i].nodeName){var l=e[i].getAttribute("is_admin");l&&"1"==l&&(this.isAdmin=!0),e[i].getAttribute("lock")&&(this.lock=e[i].getAttribute("lock"))}s&&this.setActiveRepository(s.getAttribute("id"),s.getAttribute("read"),s.getAttribute("write"))}}),Class.create("ResourcesManager",{initialize:function(){this.mainFormContainerId="all_forms",this.resources={},this.loaded=!1},addJSResource:function(e,t){this.resources.js||(this.resources.js=[]),this.resources.js.push({fileName:e,className:t})},addCSSResource:function(e){this.resources.css||(this.resources.css=[]),this.resources.css.push(e)},addGuiForm:function(e,t){this.resources.forms||(this.resources.forms={}),this.resources.forms[e]=t},addDependency:function(e){this.resources.dependencies||(this.resources.dependencies=[]),this.resources.dependencies.push(e)},hasDependencies:function(){return this.resources.dependencies||!1},load:function(e){this.loaded||(this.hasDependencies()&&this.resources.dependencies.each(function(t){e[t]&&e[t].load(e)}.bind(this)),this.resources.forms&&$H(this.resources.forms).each(function(e){this.loadGuiForm(e.key,e.value)}.bind(this)),this.resources.js&&this.resources.js.each(function(e){this.loadJSResource(e.fileName,e.className)}.bind(this)),this.resources.css&&this.resources.css.each(function(e){this.loadCSSResource(e)}.bind(this)),this.loaded=!0)},loadJSResource:function(fileName,className){try{eval("window.testTemporaryObject = "+className),delete window.testTemporaryObject}catch(e){if("function"!=typeof className||"object"!=typeof className.prototype){var conn=new Connexion;conn._libUrl=!1,window._bootstrap.parameters.get("SERVER_PREFIX_URI")&&(conn._libUrl=window._bootstrap.parameters.get("SERVER_PREFIX_URI")),conn.loadLibrary(fileName)}}},loadCSSResource:function(e){var t=$$("head")[0];window._bootstrap.parameters.get("SERVER_PREFIX_URI")&&(e=window._bootstrap.parameters.get("SERVER_PREFIX_URI")+e);var i=new Element("link",{type:"text/css",rel:"stylesheet",href:e+"?v="+window._bootstrap.parameters.get("appVersion"),media:"screen"});t.insert(i)},loadGuiForm:function(e,t){$(this.mainFormContainerId).select('[id="'+e+'"]').length||(t.evalScripts(),$(this.mainFormContainerId).insert(t.stripScripts()))},loadFromXmlNode:function(e){var t={};if("resources"==e.nodeName)for(i=0;i<e.childNodes.length;i++)"js"==e.childNodes[i].nodeName?this.addJSResource(e.childNodes[i].getAttribute("file"),e.childNodes[i].getAttribute("className")):"css"==e.childNodes[i].nodeName?this.addCSSResource(e.childNodes[i].getAttribute("file")):"img_library"==e.childNodes[i].nodeName&&addImageLibrary(e.childNodes[i].getAttribute("alias"),e.childNodes[i].getAttribute("path"));else if("dependencies"==e.nodeName)for(var i=0;i<e.childNodes.length;i++)"pluginResources"==e.childNodes[i].nodeName&&this.addDependency(e.childNodes[i].getAttribute("pluginName"));else"clientForm"==e.nodeName&&(e.getAttribute("theme")&&e.getAttribute("theme")!=window._bootstrap.parameters.get("theme")||(t={formId:e.getAttribute("id"),formCode:e.firstChild.nodeValue}));t.formId&&this.addGuiForm(t.formId,t.formCode)},loadAutoLoadResources:function(e){var t=XPathSelectNodes(e,'//client_settings/resources/js[@autoload="true"]');t.length&&t.each(function(e){this.loadJSResource(e.getAttribute("file"),e.getAttribute("className"))}.bind(this));XPathSelectNodes(e,"//client_settings/resources/img_library").each(function(e){addImageLibrary(e.getAttribute("alias"),e.getAttribute("path"))}.bind(this));XPathSelectNodes(e,'//client_settings/resources/css[@autoload="true"]').each(function(e){this.loadCSSResource(e.getAttribute("file"))}.bind(this))}}),Class.create("RemoteNodeProvider",{__implements:"IManifestNodeProvider",discrete:!1,initialize:function(){},initProvider:function(e){this.properties=$H(e),this.properties&&this.properties.get("connexion_discrete")&&(this.discrete=!0,this.properties.unset("connexion_discrete"))},loadNode:function(e,t,i){var s=new Connexion;this.discrete&&(s.discrete=!0),s.addParameter("get_action","ls"),s.addParameter("options","al");var n=e.getPath();e.getMetadata().get("paginationData")&&(n+="%23"+e.getMetadata().get("paginationData").get("current")),s.addParameter("dir",n),this.properties&&$H(this.properties).each(function(e){s.addParameter(e.key,e.value)}),s.onComplete=function(s){try{this.parseNodes(e,s,t,i)}catch(e){app?app.displayMessage("ERROR","Loading error :"+e.message):alert("Loading error :"+e.message)}}.bind(this),s.sendAsync()},loadLeafNodeSync:function(e,t){var i=new Connexion;i.addParameter("get_action","ls"),i.addParameter("options","al"),i.addParameter("dir",getRepName(e.getPath())),i.addParameter("file",getBaseName(e.getPath())),this.properties&&$H(this.properties).each(function(e){i.addParameter(e.key,e.value)}),i.onComplete=function(i){try{this.parseNodes(e,i,null,t,!0)}catch(e){app?app.displayMessage("ERROR","Loading error :"+e.message):alert("Loading error :"+e.message)}}.bind(this),i.sendSync()},refreshNodeAndReplace:function(e,t){var i=new Connexion;i.addParameter("get_action","ls"),i.addParameter("options","al"),i.addParameter("dir",getRepName(e.getPath())),i.addParameter("file",getBaseName(e.getPath())),this.properties&&$H(this.properties).each(function(e){i.addParameter(e.key,e.value)});i.onComplete=function(i){try{this.parseNodes(e,i,null,function(i){e.replaceBy(i,"override"),t&&t(e)},!0)}catch(e){app?app.displayMessage("ERROR",e.message):alert(e.message)}}.bind(this),i.sendAsync()},parseNodes:function(e,t,i,s,n){if(!t.responseXML||!t.responseXML.documentElement)throw console&&console.log(t.responseText),i(e),e.setLoaded(!1),new Error("Invalid XML Document (see console)");var o=t.responseXML.documentElement;o.childNodes;if(!n){var a=this.parseManifestNode(o);e.replaceBy(a,"merge")}var r=XPathSelectSingleNode(o,"error|message");r&&("message"==r.nodeName&&(type=r.getAttribute("type")),"ERROR"==type&&e.notify("error",r.firstChild.nodeValue+"(Source:"+e.getPath()+")"));var l=XPathSelectSingleNode(o,"pagination");if(l){var d=new Hash;$A(l.attributes).each(function(e){d.set(e.nodeName,e.nodeValue)}.bind(this)),e.getMetadata().set("paginationData",d)}else e.getMetadata().get("paginationData")&&e.getMetadata().unset("paginationData");var h=XPathSelectSingleNode(o,"client_configs");h&&e.getMetadata().set("client_configs",h);XPathSelectNodes(o,"tree").each(function(t){var i=this.parseManifestNode(t);n||e.addChild(i),s&&s(i)}.bind(this)),i&&i(e)},parseManifestNode:function(e){for(var t=new ManifestNode(e.getAttribute("filename"),"1"==e.getAttribute("is_file")||"true"==e.getAttribute("is_file"),e.getAttribute("text"),e.getAttribute("icon")),i=new Hash,s=0;s<e.attributes.length;s++)i.set(e.attributes[s].nodeName,e.attributes[s].nodeValue),Prototype.Browser.IE&&"ID"==e.attributes[s].nodeName&&i.set("sql_"+e.attributes[s].nodeName,e.attributes[s].nodeValue);return t.setMetadata(i),t}}),Class.create("Repository",{id:void 0,label:"No Repository",icon:"",accessType:"",nodeProviderDef:null,resourcesManager:void 0,allowCrossRepositoryCopy:!1,userEditable:!1,slug:"",owner:"",description:"",initialize:function(e,t){MessageHash&&(this.label=MessageHash[391]),this.id=e,this.icon=resourcesFolder+"/images/actions/16/network-wired.png",this.resourcesManager=new ResourcesManager,t&&this.loadFromXml(t)},getId:function(){return this.id},getLabel:function(){return this.label},setLabel:function(e){this.label=e},getDescription:function(){return this.description},getIcon:function(){return this.icon},setIcon:function(e){this.icon=e},getOwner:function(){return this.owner},getAccessType:function(){return this.accessType},setAccessType:function(e){this.accessType=e},loadResources:function(){this.resourcesManager.load()},getNodeProviderDef:function(){return this.nodeProviderDef},setSlug:function(e){this.slug=e},getSlug:function(){return this.slug},getOverlay:function(){return this.getOwner()?resolveImageSource("shared.png","/images/overlays/ICON_SIZE",8):""},loadFromXml:function(e){e.getAttribute("allowCrossRepositoryCopy")&&"true"==e.getAttribute("allowCrossRepositoryCopy")&&(this.allowCrossRepositoryCopy=!0),e.getAttribute("user_editable_repository")&&"true"==e.getAttribute("user_editable_repository")&&(this.userEditable=!0),e.getAttribute("access_type")&&this.setAccessType(e.getAttribute("access_type")),e.getAttribute("repositorySlug")&&this.setSlug(e.getAttribute("repositorySlug")),e.getAttribute("owner")&&(this.owner=e.getAttribute("owner"));for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];if("label"==i.nodeName)this.setLabel(i.firstChild.nodeValue);else if("description"==i.nodeName)this.description=i.firstChild.nodeValue;else if("client_settings"==i.nodeName){i.getAttribute("icon_tpl_id")?this.setIcon(window.appServerAccessPath+"&get_action=get_user_template_logo&template_id="+i.getAttribute("icon_tpl_id")+"&icon_format=small"):this.setIcon(i.getAttribute("icon"));for(var s=0;s<i.childNodes.length;s++){var n=i.childNodes[s];if("resources"==n.nodeName)this.resourcesManager.loadFromXmlNode(n);else if("node_provider"==n.nodeName){var o=n.getAttribute("appClass"),a=n.getAttribute("appOptions").evalJSON();this.nodeProviderDef={name:o,options:a}}}}}}});var timerClearObserver={onEnd:function(){WebFXtimer&&clearTimeout(WebFXtimer)}};document.observe("app:loaded",function(){Draggables.addObserver(timerClearObserver),Draggables.addObserver({onDrag:function(e,t,i){t.updateCtrlKey&&t.updateCtrlKey(i)}})});var AllDraggables=$A([]),AllDroppables=$A([]);Event.observe(window,"unload",function(){Draggables.removeObserver(timerClearObserver),AllDraggables.each(function(e){e.destroy()}),AllDroppables.each(function(e){Droppables.remove(e)})}),Class.create("ExtDraggable",Draggable,{initialize:function($super,e,t,i,s){(e=$(e)).addClassName("draggable"),t.zindex||(t.zindex=900),$super(e,t),this.options.reverteffect=function(e,t,i){new Effect.Move(e,{x:-i,y:-t,duration:0,queue:{scope:"_draggable",position:"end"}})},this.options.delay=Prototype.Browser.IE?350:200,this.component=i,this.componentType=s,AllDraggables.push(this)},destroy:function(){Event.stopObserving(this.handle,"mousedown",this.eventMouseDown),this.element.removeClassName("draggable"),this.element=null,Draggables.unregister(this)},initDrag:function(e){if((Object.isUndefined(Draggable._dragging[this.element])||!Draggable._dragging[this.element])&&Event.isLeftClick(e)){var t=Event.element(e);if((tag_name=t.tagName.toUpperCase())&&("INPUT"==tag_name||"SELECT"==tag_name||"OPTION"==tag_name||"BUTTON"==tag_name||"TEXTAREA"==tag_name))return;var i=[Event.pointerX(e),Event.pointerY(e)],s=Position.cumulativeOffset(this.element);this.offset=[0,1].map(function(e){return Math.min(15,i[e]-s[e])}),Draggables.activate(this),Event.stop(e)}},startDrag:function(e){if(this.delta||(this.delta=this.currentDelta()),this.dragging=!0,this._draggingMultiple=!1,this.options.zindex&&(this.originalZ=parseInt(Element.getStyle(this.element,"z-index")||0),this.element.setStyle({zIndex:this.options.zindex})),this.options.ghosting){var t=app.getUserSelection();if(this.component.findSelectableParent)if(t.isEmpty())this.component.findSelectableParent(this.element,!0);else{var i=this.component.getSelectedItems(),s=this.component.findSelectableParent(this.element,!1);$A(i).include(s)||(this.component.setSelectedNodes([]),this.component.findSelectableParent(this.element,!0))}var n=t.getSelectedNodes();this._draggingMultiple=!0,this._clone=new Element("div"),$(this._clone).addClassName("draggable"),$(this._clone).addClassName("multiple_selection_draggable"),this._clone.setAttribute("user_selection","true"),$(window._bootstrap.parameters.get("MAIN_ELEMENT")).insert(this._clone),this.original=this.element,this.element=this._clone;for(var o=Math.min(n.length,5),a=0,r=0;r<o;r++){var l=n[r].getLabel()+(r<o-1?",<br>":"");a=Math.max(a,testStringWidth(l)),this._clone.insert(l)}o<n.length&&this._clone.insert(",<br> "+(n.length-o)+" "+MessageHash[334]+"..."),this.element.setStyle({height:"auto",width:a+"px"}),Position.absolutize(this._clone);var d=1e4;this.element.getStyle("zIndex")&&(d=this.element.getStyle("zIndex")+100),this.element.setStyle({zIndex:d})}if(this.options.scroll)if(this.options.scroll==window){var h=this._getWindowScroll(this.options.scroll);this.originalScrollLeft=h.left,this.originalScrollTop=h.top}else this.originalScrollLeft=this.options.scroll.scrollLeft,this.originalScrollTop=this.options.scroll.scrollTop;Draggables.notify("onStart",this,e),this.options.starteffect&&this.options.starteffect(this.element),this.dndAction=app.getActionBar().getDefaultAction("dragndrop"),this.ctrlDndAction=app.getActionBar().getDefaultAction("ctrldragndrop")},updateDrag:function(event,pointer){if(this.dragging||this.startDrag(event),this.options.quiet||(Position.prepare(),Position.includeScrollOffsets=!0,Droppables.show(pointer,this.element)),Draggables.notify("onDrag",this,event),this.draw(pointer),this.options.change&&this.options.change(this),this.options.scroll){this.stopScrolling();var p;if(this.options.scroll==window)with(this._getWindowScroll(this.options.scroll))p=[left,top,left+width,top+height];else p=Position.page(this.options.scroll),p[0]+=Position.deltaX,p[1]+=Position.deltaY,p[2]=p[0]+this.options.scroll.offsetWidth,p[3]=p[1]+this.options.scroll.offsetHeight;var speed=[0,0];pointer[0]<p[0]+this.options.scrollSensitivity&&(speed[0]=pointer[0]-(p[0]+this.options.scrollSensitivity)),pointer[1]<p[1]+this.options.scrollSensitivity&&(speed[1]=pointer[1]-(p[1]+this.options.scrollSensitivity)),pointer[0]>p[2]-this.options.scrollSensitivity&&(speed[0]=pointer[0]-(p[2]-this.options.scrollSensitivity)),pointer[1]>p[3]-this.options.scrollSensitivity&&(speed[1]=pointer[1]-(p[3]-this.options.scrollSensitivity)),this.startScrolling(speed)}Prototype.Browser.WebKit&&window.scrollBy(0,0),Event.stop(event)},draw:function(e){var t=Position.cumulativeOffset(this.element);if(this.options.ghosting){var i=Position.realOffset(this.element);t[0]+=i[0]-Position.deltaX,t[1]+=i[1]-Position.deltaY}var s=this.currentDelta();t[0]-=s[0],t[1]-=s[1],this.options.scroll&&this.options.scroll!=window&&this._isScrollChild&&(t[0]-=this.options.scroll.scrollLeft-this.originalScrollLeft,t[1]-=this.options.scroll.scrollTop-this.originalScrollTop),this.options.containerScroll&&this.options.containerScroll!=window&&(t[0]+=this.options.containerScroll.scrollLeft,t[1]+=this.options.containerScroll.scrollTop);var n=[0,1].map(function(i){return e[i]-t[i]-this.offset[i]}.bind(this));this.options.snap&&(n=Object.isFunction(this.options.snap)?this.options.snap(n[0],n[1],this):Object.isArray(this.options.snap)?n.map(function(e,t){return(e/this.options.snap[t]).round()*this.options.snap[t]}.bind(this)):n.map(function(e){return(e/this.options.snap).round()*this.options.snap}.bind(this)));var o=this.element.style;this.options.constraint&&"horizontal"!=this.options.constraint||(o.left=n[0]+"px"),this.options.constraint&&"vertical"!=this.options.constraint||(o.top=n[1]+"px"),"hidden"==o.visibility&&(o.visibility="")},finishDrag:function(e,t){if(this.dragging=!1,this.options.quiet){Position.prepare();var i=[Event.pointerX(e),Event.pointerY(e)];Droppables.show(i,this.element)}var s=!1;t&&((s=Droppables.fire(e,this.element))||(s=!1)),s&&this.options.onDropped&&this.options.onDropped(this.element),Draggables.notify("onEnd",this,e);var n=this.options.revert;n&&"function"==typeof n&&(n=n(this.element));var o=this.currentDelta();if(n&&this.options.reverteffect?0!=s&&"failure"==n||this._draggingMultiple||this.options.reverteffect(this.element,o[1]-this.delta[1],o[0]-this.delta[0]):this.delta=o,this.options.zindex&&this.element.setStyle({zIndex:this.originalZ}),this.options.endeffect&&this.options.endeffect(this.element),this._draggingMultiple){var a=this.element;this.element=this.original,Element.remove(a)}Draggables.deactivate(this),Droppables.reset()},scroll:function(){var current=new Date,delta=current-this.lastScrolled;if(this.lastScrolled=current,this.options.scroll==window){with(this._getWindowScroll(this.options.scroll))if(this.scrollSpeed[0]||this.scrollSpeed[1]){var d=delta/1e3;this.options.scroll.scrollTo(left+d*this.scrollSpeed[0],top+d*this.scrollSpeed[1])}}else if(this.options.scroll.scrollerInstance){var pos=this.options.scroll.scrollTop+this.scrollSpeed[1]*delta/1e3;this.options.scroll.scrollerInstance.scrollTo(pos)}else this.options.scroll.scrollLeft+=this.scrollSpeed[0]*delta/1e3,this.options.scroll.scrollTop+=this.scrollSpeed[1]*delta/1e3;Position.prepare(),Position.includeScrollOffsets=!0,Droppables.show(Draggables._lastPointer,this.element),Draggables.notify("onDrag",this),this._isScrollChild&&(Draggables._lastScrollPointer=Draggables._lastScrollPointer||$A(Draggables._lastPointer),Draggables._lastScrollPointer[0]+=this.scrollSpeed[0]*delta/1e3,Draggables._lastScrollPointer[1]+=this.scrollSpeed[1]*delta/1e3,Draggables._lastScrollPointer[0]<0&&(Draggables._lastScrollPointer[0]=0),Draggables._lastScrollPointer[1]<0&&(Draggables._lastScrollPointer[1]=0),this.draw(Draggables._lastScrollPointer)),this.options.change&&this.options.change(this)},updateCtrlKey:function(e){if(e){var t=e.ctrlKey;this.ctrlDndAction&&(t||this.dndAction.deny)?this.addCopyClass():this.removeCopyClass()}},addCopyClass:function(){$(this.element).addClassName("selection_ctrl_key")},removeCopyClass:function(){$(this.element).removeClassName("selection_ctrl_key")}});var AppDroppables={options:{hoverclass:"droppableZone",accept:"draggable",onDrop:function(e,t,i){if((e.node||e.getAttribute("user_selection"))&&t.node){var s=t.node.getPath();if(e.node)var n=e.node.getPath();WebFXtimer&&clearTimeout(WebFXtimer);var o=null;t.id&&webFXTreeHandler.all[t.id]&&(o=t.id);var a=e.hasClassName("selection_ctrl_key");app.actionBar.applyDragMove(n,s,o,a)}},onHover:function(e,t,i){if(WebFXtimer&&clearTimeout(WebFXtimer),t.id&&webFXTreeHandler.all[t.id]){WebFXtimer=window.setTimeout(function(){var e=webFXTreeHandler.all[t.id];e&&e.folder&&!e.open&&e.expand()},500)}},onOut:function(e){WebFXtimer&&clearTimeout(WebFXtimer)}},add:function(e,t){t&&t.hasMetadataInBranch("readonly","true")||(Droppables.add(e,this.options),AllDroppables.push($(e)))}};Class.create("ExtSortable",SortableTable,{initialize:function($super,e,t,i){$super(e,t,i),this.addSortType("NumberK",this.replace8a8),this.addSortType("NumberKo",this.replace8oa8),this.addSortType("MyDate",null,!1,this.sortTimes),this.addSortType("CellSorterValue",null,!1,this.cellSorterValue),this.addSortType("StringDirFile",this.toUpperCase,!1,this.splitDirsAndFiles.bind(this),this.splitDirsAndFilesNodes.bind(this))},setPaginationBehaviour:function(e,t,i,s){this.paginationLoaderFunc=e,this.columnsDefs=t;for(var n=-1,o=0;o<t.length;o++)if(t[o].field_name==i){n=o;break}this.sortColumn=n,this.descending="desc"==s,this.updateHeaderArrows()},headerOnclick:function(e){var t=Event.findElement(e,"div.header_cell").cellIndex;if(this.paginationLoaderFunc){var i=$H({});this.sortColumn!=t?this.descending=this.defaultDescending:this.descending=!this.descending;var s=this.columnsDefs[t];i.set("order_column",s.field_name||t),i.set("order_direction",this.descending?"desc":"asc"),this.paginationLoaderFunc(i)}else this.sort(t)},replace8a8:function(e){var t=(e=e.toUpperCase()).replace(/(([0-9]*\.)?[0-9]+([eE][-+]?[0-9]+)?)(.*)/,"$1____$4").split("____"),i=Number(t[0]).valueOf();if(t[1]){var s=t[1].replace(/\s*([KMGB])\s*/,"$1");"K"==s?i*=1024:"M"==s?i*=1048576:"G"==s?i*=1073741824:"T"==s&&(i*=1099511627776)}return i},replace8oa8:function(e){if("-"==(e=e.toUpperCase()))return 0;var t=e.replace(/(([0-9]*\.)?[0-9]+([eE][-+]?[0-9]+)?)(.*)/,"$1____$4").split("____"),i=Number(t[0]).valueOf();if(t[1]){var s=t[1].replace(/\s*(KO|MO|GO|T|KB|MB|GB)\s*/,"$1");"KO"==s||"KB"==s?i*=1024:"MO"==s||"MB"==s?i*=1048576:"GO"==s||"GB"==s?i*=1073741824:"T"==s&&(i*=1099511627776)}return i},replaceDate:function(e){var t=e.split(" "),i=t[0].split("/"),s=new Date(0);s.setFullYear(i[2]),s.setDate(i[0]),s.setMonth(i[1]-1);var n=t[1].split(":");return s.setHours(n[0]),s.setMinutes(n[1]),s.getTime()},splitDirsAndFiles:function(e,t){var i,s=e.cells[t];return" "==(i=void 0!==s.innerText?s.innerText:this.getInnerText(s))[0]&&(i=i.substr(1,i.length-1)),e.node.isLeaf()||(i="000"+i),i.toUpperCase()},splitDirsAndFilesNodes:function(e,t){var i;return"APP_label"==t&&(t="text")," "==(i=e.getMetadata().get(t))[0]&&(i=i.substr(1,i.length-1)),e.isLeaf()||(i="000"+i),i.toUpperCase()},cellSorterValue:function(e,t){var i=e.select("td");if(i[t]&&i[t].getAttribute("data-sorter_value"))return parseInt(i[t].getAttribute("data-sorter_value"))},sortTimes:function(e,t){if(e.node&&e.node.getMetadata().get("modiftime"))return e.node.getMetadata().get("modiftime")}}),Class.create("Tabulator",AppPane,{initialize:function($super,e,t){$super(e,t),this.tabulatorData=t.tabInfos;var i=new Element("div",{className:"tabulatorContainer panelHeader"});if($(this.htmlElement).insert({top:i}),this.tabulatorData.each(function(e){var t=new Element("span",{className:"toggleHeader",title:MessageHash[e.title]||MessageHash[e.label].stripTags()});e.icon&&t.insert('<img width="16" height="16" align="absmiddle" src="'+resolveImageSource(e.icon,"/images/actions/ICON_SIZE",16)+'">'),e.iconClass&&t.insert(new Element("span",{className:e.iconClass})),t.insert('<span class="tab_label" message_id="'+e.label+'">'+MessageHash[e.label]+"</span>"),t.observe("click",function(){this.switchTabulator(e.id)}.bind(this)),i.insert(t),e.headerElement=t,disableTextSelection(t),this.selectedTabInfo=e}.bind(this)),this.options.headerToolbarOptions){var s=new Element("div",{id:"display_toolbar"});i.insert({top:s});new ActionsToolbar(s,this.options.headerToolbarOptions)}t.defaultTabId&&this.switchTabulator(t.defaultTabId)},switchTabulator:function(e){var t;if(this.tabulatorData.each(function(i){var s=this.getAndSetAppObject(i);i.id==e?(i.headerElement.removeClassName("toggleInactive"),i.headerElement.down("img")&&i.headerElement.down("img").show(),s&&(t=s),this.selectedTabInfo=i):(i.headerElement.addClassName("toggleInactive"),i.headerElement.down("img")&&i.headerElement.down("img").hide(),s&&s.showElement(!1))}.bind(this)),t){if(t.showElement(!0),this.htmlElement.up('div[appClass="Splitter"]')&&this.htmlElement.up('div[appClass="Splitter"]').paneObject){var i=this.htmlElement.up('div[appClass="Splitter"]').paneObject;i.splitbar.hasClassName("folded")&&i.unfold()}t.resize()}this.resize(),this.notify("switch",e)},resize:function(){if(this.selectedTabInfo){var e=this.getAndSetAppObject(this.selectedTabInfo);if(e){e.resize();var t,i=0,s=this.htmlElement.down("div.tabulatorContainer"),n=parseInt(this.htmlElement.getWidth())-parseInt(s.getStyle("paddingLeft"))-parseInt(s.getStyle("paddingRight"));if(this.options.headerToolbarOptions&&(n-=parseInt(this.htmlElement.down("div#display_toolbar").getWidth())),s.removeClassName("icons_only"),this.htmlElement.removeClassName("tabulator-vertical"),this.tabulatorData.each(function(e){var s=e.headerElement;s.setStyle({width:"auto"});var o=parseInt(s.getWidth());e==this.selectedTabInfo&&(t=n-o),i+=o}.bind(this)),i>=n){var o=parseInt(t/(this.tabulatorData.length-1));o<14&&s.addClassName("icons_only"),n<30&&this.htmlElement.addClassName("tabulator-vertical"),this.tabulatorData.each(function(e){var t=e.headerElement;e!=this.selectedTabInfo&&t.setStyle({width:o-(parseInt(t.getStyle("paddingRight"))+parseInt(t.getStyle("paddingLeft")))+"px"})}.bind(this))}}}},getDomNode:function(){return this.htmlElement},destroy:function(){if(this.tabulatorData.each(function(e){var t=this.getAndSetAppObject(e);e.headerElement.stopObserving("click"),t.destroy()}.bind(this)),this.htmlElement.update(""),window[this.htmlElement.id])try{delete window[this.htmlElement.id]}catch(e){}this.htmlElement=null},getAndSetAppObject:function(e){var t=e.appObject||null;return!$(e.element)||!$(e.element).paneObject||t&&t==$(e.element).paneObject||(t=e.appObject=$(e.element).paneObject),t}}),Class.create("SimpleTabs",AppPane,{panes:null,tabRow:null,initialize:function($super,e,t){$super(e),e.down("div.tabpanes")||e.insert(new Element("div",{className:"tabpanes"})),this.panes=e.down("div.tabpanes"),fitHeightToBottom(this.panes,this.element),e.down("ul.tabrow")?(this.tabRow=e.down("ul.tabrow"),e.down("ul.tabrow").select("li").each(function(t){var i=t.getAttribute("data-PaneID");e.down("#"+i)?this.addTab(t,e.down("#"+i)):this.addTab(t)}.bind(this)),window.setTimeout(function(){this.selectTabByIndex(0)}.bind(this),100)):(e.insert(new Element("ul",{className:"tabrow"})),this.tabRow=e.down("ul.tabrow"))},addTab:function(e,t,i,s){"string"==typeof e&&(e=new Element("li",{className:""}).update(e),this.tabRow.insert(e)),t||(t=new Element("div")),t.addClassName("tabPane"),e.tabPANE=t,this.panes.insert(t),fitHeightToBottom(t,this.panes),t.setStyle({overflowY:"auto"}),e.setSelected=function(){this.panes.childElements("div.tabPane").invoke("hide"),e.tabPANE.show(),this.tabRow.select("li").invoke("removeClassName","selected"),e.addClassName("selected"),t.setStyle({height:parseInt(this.panes.getHeight())+"px"}),e.tabPANE.resizeOnShow&&e.tabPANE.resizeOnShow(e,e.tabPANE)}.bind(this),e.observe("click",function(){e.setSelected()}.bind(this)),i&&e.setSelected()},selectTabByIndex:function(e){try{this.tabRow.select("li")[e].setSelected()}catch(e){}},resize:function(){fitHeightToBottom(this.panes,this.element),this.tabRow.select("li").each(function(e){e.tabPANE&&(fitHeightToBottom(e.tabPANE,this.panes),e.hasClassName("selected")&&e.tabPANE.resizeOnShow&&e.tabPANE.resizeOnShow(e,e.tabPANE))}.bind(this))},getDomNode:function(){return this.htmlElement},destroy:function(){this.htmlElement=null}}),Class.create("RepositorySelect",{__implements:"IAppWidget",_defaultString:"No Repository",_defaultIcon:"network-wired.png",options:{},initialize:function(e,t){this.element=e,this.element.paneObject=this,this.show=!0,t&&(this.options=t),this.createGui(),document.observe("app:repository_list_refreshed",function(e){this.refreshRepositoriesMenu(e.memo.list,e.memo.active)}.bind(this))},getDomNode:function(){return this.element},destroy:function(){this.element=null},createGui:function(){MessageHash&&(this._defaultString=MessageHash[391]),this.options.simpleLabel?this.element.insert(this.options.simpleLabel):(this.icon=new Element("img",{id:"repo_icon",src:resolveImageSource(this._defaultIcon,"/images/actions/ICON_SIZE",16),width:16,height:16,align:"absmiddle"}),this.label=new Element("input",{type:"text",name:"repo_path",value:this._defaultString,id:"repo_path"}),this.currentRepositoryLabel=new Element("div",{id:"repository_form"}),this.currentRepositoryLabel.insert(this.icon),this.currentRepositoryLabel.insert(this.label),this.element.insert(this.currentRepositoryLabel),this.button=simpleButton("repository_goto","inlineBarButton",200,200,resourcesFolder+"/images/arrow_down.png",16,"inline_hover",null,!0),this.button.setStyle({marginRight:"7px"}),this.button.select("img")[0].setStyle({height:"6px",width:"10px",marginLeft:"1px",marginRight:"1px",marginTop:"8px"}),this.element.insert(this.button))},refreshRepositoriesMenu:function(e,t){var i;(i=this.options.simpleLabel?this.element:this.button).addClassName("disabled");var s=$A([]),n=$A([]),o=$A([]);e&&e.size()?e.each(function(e){var i=e.value,a=e.key,r=a==t;if("boaconf"!=i.getAccessType()&&"shared"!=i.getAccessType()){var l='<span class="menu_label">'+i.getLabel()+"</span>";i.getDescription()&&(l+='<span class="menu_description">'+i.getDescription()+"</span>");var d={name:l,alt:i.getLabel()+(i.getOwner()?" ("+MessageHash[413]+" "+i.getOwner()+")":""),image:i.getIcon(),icon_class:"icon-hdd",overlay:i.getOverlay(),className:"edit",disabled:r,callback:function(e){this.onRepoSelect(""+a)}.bind(this)};i.userEditable&&(d.moreActions=this.getContextActions(a)),"shared"==i.getAccessType()?n.push(d):i.getOwner()?o.push(d):s.push(d),a==t&&(this.label&&this.label.setValue(i.getLabel()),this.icon&&(this.icon.src=i.getIcon()))}}.bind(this)):(this.label&&this.label.setValue(this._defaultString),this.icon&&(this.icon.src=resolveImageSource(this._defaultIcon,"/images/actions/ICON_SIZE",16)));var a=function(e,t){var i=e.name.toLowerCase(),s=t.name.toLowerCase();return i<s?-1:i>s?1:0};if(s.sort(a),o.length&&(o.sort(a),s.push({separator:!0,menuTitle:MessageHash[469]}),s=s.concat(o)),n.length&&(n.sort(a),s.push({separator:!0,menuTitle:"Other Actions"}),s=s.concat(n)),s.length){var r=$A();this.loadedOnce||(app.actionBar.loadActionsFromRegistry(app.getXmlRegistry()),this.loadedOnce=!0);app.actionBar.getActionsForAppWidget("RepositorySelect",this.element.id).each(function(e){r.push({name:e.getKeyedText(),alt:e.options.title,action_id:e.options.name,icon_class:e.options.icon_class,className:"edit",image:resolveImageSource(e.options.src,"/images/actions/ICON_SIZE",16),callback:function(e){this.apply()}.bind(e)})});r.length&&(s.push({separator:!0}),s=s.concat(r)),this.repoMenu?(this.repoMenu.options.menuItems=s,this.repoMenu.refreshList()):(this.repoMenu=new Proto.Menu({className:"menu rootDirChooser menuDetails",mouseClick:this.options.menuEvent?this.options.menuEvent:"left",anchor:i,position:this.options.menuPosition?this.options.menuPosition:"bottom",createAnchor:!1,anchorContainer:$("dir_chooser"),anchorSrc:resourcesFolder+"/images/arrow_down.png",anchorTitle:MessageHash[200],topOffset:void 0!==this.options.menuOffsetTop?this.options.menuOffsetTop:2,leftOffset:void 0!==this.options.menuOffsetLeft?this.options.menuOffsetLeft:-127,menuTitle:MessageHash[468],menuItems:s,menuMaxHeight:this.options.menuMaxHeight,fade:!0,zIndex:1500}),this.notify("createMenu")),s.length&&i.removeClassName("disabled")}else this.repoMenu&&(this.repoMenu.options.menuItems=s,this.repoMenu.refreshList())},onRepoSelect:function(e){app.triggerRepositoryChange(e)},resize:function(){if(this.currentRepositoryLabel){this.element.getOffsetParent().getWidth()<3.5*this.currentRepositoryLabel.getWidth()?this.showElement(!1):this.showElement(!0)}},getContextActions:function(e){var t={name:MessageHash[423],alt:MessageHash[423],image:resourcesFolder+"/images/actions/16/delete_bookmark.png",icon_class:"icon-remove",disabled:!1,className:"edit",callback:function(t){if(window.confirm(MessageHash[424])){var i=new Connexion;i.setParameters({get_action:"user_delete_repository",repository_id:e}),i.onComplete=function(e){app.actionBar.parseXmlMessage(e.responseXML)},i.sendAsync()}}.bind(this)};return new Array(t)},showElement:function(e){this.show=e,e?(this.currentRepositoryLabel.show(),this.repoMenu&&(this.repoMenu.options.leftOffset=-127)):(this.currentRepositoryLabel.hide(),this.repoMenu&&(this.repoMenu.options.leftOffset=0)),this.repoMenu||this.observeOnce("createMenu",function(){this.showElement(this.show)}.bind(this))},getActualWidth:function(){return this.options.simpleLabel?this.element.getWidth():this.currentRepositoryLabel.visible()?this.element.getWidth():this.button.getWidth()+10}}),Class.create("RepositorySimpleLabel",AppPane,{_defaultString:"",_defaultIcon:"network-wired.png",options:{},initialize:function($super,e,t){$super(e,t),this.htmlElement.update('<div class="repository_legend">Workspace</div>'),this.htmlElement.insert('<div class="repository_title"></div>'),document.observe("app:repository_list_refreshed",function(e){this.htmlElement.down("div.repository_title").update(this._defaultString);var t=e.memo.list,i=e.memo.active;t&&t.size()&&t.each(function(e){var t=e.value;e.key==i&&this.htmlElement.down("div.repository_title").update(t.getLabel())}.bind(this))}.bind(this))}}),Class.create("Breadcrumb",{__implements:["IAppWidget"],currentPath:"",initialize:function(e,t){this.element=e,this.element.paneObject=this,this.options=t||{},this.element.update("Files"),document.observe("app:context_changed",function(e){var t=e.memo;Object.isString(t)&&(t=new ManifestNode(t));var i=t.getPath(),s=$H(),n="";$A(i.split("/")).each(function(e){e&&(n+="/"+e,s.set(n,e))}),getBaseName(i)!=t.getLabel()&&s.set(i,t.getLabel());var o="<span class='icon-home goto-link' data-goTo='/' title='"+MessageHash[459]+"'></span>",a=s.values().last();s.each(function(e){var t="";e.value==a&&(t='<span class="icon-refresh goto-link-refresh" title="'+MessageHash[149]+'"></span>'),o+="<span class='icon-chevron-right'></span><span class='goto-link' data-goTo='"+e.key+"'>"+e.value+t+"</span>"}),this.element.update("<div class='inner_bread'>"+o+"</div>"),this.element.select("span.goto-link").invoke("observe","click",function(e){"use strict";var t=e.target.getAttribute("data-goTo");e.target.setAttribute("title","Go to "+t),e.target.down("span.goto-link-refresh")?window.app.fireContextRefresh():window.app.goTo(t)})}.bind(this))},resize:function(){if(this.element&&this.options.flexTo){var e=$(this.options.flexTo).getWidth(),t=0;this.element.siblings().each(function(e){e.paneObject&&e.paneObject.getActualWidth?t+=e.paneObject.getActualWidth():t+=e.getWidth()});var i=0;this.element.select("div.inlineBarButton,div.inlineBarButtonLeft,div.inlineBarButtonRight").each(function(e){i+=e.getWidth()});var s=e-t-30;s<5?this.element.hide():(this.element.show(),this.element.setStyle({width:s+"px"}))}},getDomNode:function(){return this.element},destroy:function(){this.element=null},showElement:function(e){}}),Class.create("LocationBar",{__implements:["IAppWidget","IFocusable"],_defaultGotoIcon:"media-playback-start.png",_reloadGotoIcon:"reload.png",_modified:!1,_beforeModified:"",initialize:function(e,t){this.element=e,this.element.paneObject=this,this.realPath="/",this.options=t||{},this.createGui(),document.observe("app:user_logged",this.resize.bind(this))},createGui:function(){this.parentButton=simpleButton("goto_parent","inlineBarButtonRight",24,24,"goto_parent.png",16,"inline_hover",function(){app.actionBar.fireAction("up_dir")}),this.element.insert(this.parentButton);var e=new Element("div",{id:"location_form"});this.initCurrentPath(),this.element.insert(e),e.insert(this.currentPath);this.currentPath.getDimensions();this.currentPath.hide(),this.label=new Element("div",{className:"location_bar_label"}).update("/test"),this.label.setStyle({marginTop:1,fontSize:"11px",height:Prototype.Browser.IE?"18px":"15px",fontFamily:"Trebuchet MS,sans-serif,Nimbus Sans L",zIndex:1e4,backgroundColor:"white",whiteSpace:"nowrap",overflow:"hidden"}),e.insert(this.label),this.label.observe("click",function(){this.label.hide(),this.currentPath.show(),this.currentPath.focus()}.bind(this)),this.gotoButton=simpleButton("location_goto","inlineBarButton",104,104,this._reloadGotoIcon,16,"inline_hover",this.submitPath.bind(this)),this.element.insert(this.gotoButton),this.options.searchButton&&(this.searchButton=simpleButton("search_panel_button","inlineBarButtonLeft",87,184,this.options.searchIcon,16,"inline_hover",function(){window[this.options.searchButton].toggleFolding()||$(this.options.searchFocus).focus()}.bind(this),!1,!0),this.element.insert(this.searchButton)),this.bmButton=simpleButton("bookmarks_goto","inlineBarButtonLeft",145,145,"bookmark.png",16,"inline_hover",null,!1,!0),this.element.insert(this.bmButton),this.initBookmarksBar()},initCurrentPath:function(){this.currentPath=new Element("input",{id:"current_path",type:"text",value:"/"});var e={afterUpdateElement:function(e,t){this.currentPath.value!=this.realPath&&(this.setModified(!0),this.submitPath())}.bind(this)};this.autoComp=new AutoCompleter(this.currentPath,"autocomplete_choices",null,e),this.currentPath.observe("keydown",function(e){if(9==e.keyCode)return!1;if(this._modified||this._beforeModified==this.currentPath.getValue()||this.setModified(!0),13==e.keyCode){if(this.autoComp.active)return;this.submitPath(),Event.stop(e)}}.bind(this)),this.currentPath.observe("focus",function(e){return app.disableShortcuts(),this.hasFocus=!0,this.currentPath.select(),!1}.bind(this)),this.currentPath.observe("blur",function(e){this.currentPath.hide(),this.label.show(),currentLightBox||(app.enableShortcuts(),this.hasFocus=!1)}.bind(this)),document.observe("app:context_changed",function(e){window.setTimeout(function(){this.updateLocationBar(e.memo)}.bind(this),0)}.bind(this))},initBookmarksBar:function(){this.bookmarkBar=new BookmarksBar(this.bmButton)},submitPath:function(){if(this._modified){var e=this.currentPath.value.stripScripts();if(""==e)return!1;var t=new ManifestNode(e,!1),i=e.split("##");if(2==i.length){var s=new Hash;s.set("new_page",i[1]),e=i[0],(t=new ManifestNode(e)).getMetadata().set("paginationData",s)}app.pathExists(e)?app.actionBar.fireDefaultAction("dir",t):(modal.displayMessage("ERROR","Cannot find : "+e),this.currentPath.setValue(this._beforeModified))}else app.actionBar.fireAction("refresh");return!1},updateLocationBar:function(e){Object.isString(e)&&(e=new ManifestNode(e));var t=e.getPath();e.getMetadata().get("paginationData")&&(t+="##"+e.getMetadata().get("paginationData").get("current")),this.realPath=t,this.currentLabel=this.realPath,getBaseName(t)!=e.getLabel()&&(this.currentLabel=getRepName(t)+"/"+e.getLabel()),this.label.update(this.currentLabel),this.currentPath.value=this.realPath,this.setModified(!1)},setModified:function(e){this._modified=e,this.gotoButton.setSrc(resolveImageSource(e?this._defaultGotoIcon:this._reloadGotoIcon,"/images/actions/ICON_SIZE",16)),this._beforeModified=this.currentPath.getValue()},resize:function(){if(this.options.flexTo){var e=$(this.options.flexTo).getWidth(),t=0;this.element.siblings().each(function(e){e.paneObject&&e.paneObject.getActualWidth?t+=e.paneObject.getActualWidth():t+=e.getWidth()});var i=20;this.element.select("div.inlineBarButton,div.inlineBarButtonLeft,div.inlineBarButtonRight").each(function(e){i+=e.getWidth()});var s=Math.min(e-t-i,320);s<5?this.element.hide():(this.element.show(),this.currentPath.setStyle({width:s+"px"}),this.label.setStyle({width:s+"px"}))}},getDomNode:function(){return this.element},destroy:function(){this.element=null},showElement:function(e){},setFocusBehaviour:function(){},focus:function(){this.label.hide(),this.currentPath.show(),this.currentPath.focus(),this.hasFocus=!0},blur:function(){this.currentPath.blur(),this.currentPath.hide(),this.label.show(),this.hasFocus=!1}}),Class.create("UserWidget",{__implements:["IAppWidget"],options:{},initialize:function(e,t){this.element=e,this.element.paneObject=this,t&&(this.options=t),this.mObs1=function(){this.element.select("div").invoke("addClassName","user_widget_hover")}.bind(this),this.mObs2=function(){var e=this.element.select("div");e.length&&(e[0].hasClassName("inline_hover_light")||this.element.select("div").invoke("removeClassName","user_widget_hover"))}.bind(this),this.uLoggedObs=this.updateGui.bind(this),this.actLoaded=this.updateActions.bind(this),this.element.observe("mouseover",this.mObs1),this.element.observe("mouseout",this.mObs2),document.observe("app:user_logged",this.uLoggedObs),document.observe("app:actions_loaded",this.actLoaded),Prototype.Browser.IE&&document.observe("app:actions_refreshed",this.actLoaded)},updateGui:function(){var e="",t=app.user;if(null!=t)if("guest"!=t.id){var i='<gui:message message_id="142">'+MessageHash[142]+'</gui:message><i message_title_id="189" title="'+MessageHash[189]+'">'+t.id+" </i>";if(t.getPreference("USER_DISPLAY_NAME")){var s="";if(t.getPreference("avatar")){s='<img src="'+((new Connexion)._baseUrl+"&get_action=get_binary_param&binary_id="+t.getPreference("avatar")+"&user_id="+t.id)+'" alt="avatar" class="user_widget_mini">'}i='<i message_title_id="189" title="'+MessageHash[189]+'">'+s+t.getPreference("USER_DISPLAY_NAME")+"</i>"}e='<div class="user_widget_label '+(s?"withImage":"")+'">'+i+'</div><div class="inlineBarButtonLeft" style="-moz-border-radius: 0pt 5px 5px 0pt;border-radius: 0pt 5px 5px 0pt;border-left-style:none; border-width:1px;"><img width="16" height="16" style="height: 6px; width: 10px; margin-top: 9px; margin-left: 3px; margin-right: 3px;" message_title="189" title="'+MessageHash[189]+'" src="'+resourcesFolder+'/images/arrow_down.png"></div>',this.element.removeClassName("disabled"),t.lock||null==t.getPreference("lang")||""==t.getPreference("lang")||t.getPreference("lang")==app.currentLanguage||app.loadI18NMessages(t.getPreference("lang"))}else e='<div style="padding:3px 0 3px 7px;"><gui:message message_id="143">'+MessageHash[143]+"</gui:message></div>",this.element.addClassName("disabled");else e='<div style="padding:3px 0 3px 7px;"><gui:message message_id="142">'+MessageHash[144]+"</gui:message></div>",this.element.addClassName("disabled");this.element.update(e)},updateActions:function(){var e=$A(),t={};app.actionBar.getActionsForAppWidget("UserWidget",this.element.id).each(function(e){var i;try{i=e.context.actionBarGroup}catch(e){}i||(i="default"),t[i]||(t[i]=$A()),t[i].push({name:e.getKeyedText(),action_id:e.options.name,alt:e.options.title,image:resolveImageSource(e.options.src,"/images/actions/ICON_SIZE",16),icon_class:e.options.icon_class,callback:function(e){this.apply()}.bind(e)})});for(var i in t)e=e.concat(t[i],{separator:!0});e.pop(),this.menu?(this.menu.options.menuItems=e,this.menu.refreshList()):(this.menu=new Proto.Menu({className:"menu rootDirChooser rightAlignMenu",mouseClick:this.options.menuEvent?this.options.menuEvent:"left",position:"bottom right",anchor:this.element,createAnchor:!1,topOffset:2,leftOffset:-3,menuItems:e,fade:!0,zIndex:1500,beforeShow:function(e){this.element.select("div").invoke("addClassName","inline_hover_light"),this.element.select("div").invoke("addClassName","user_widget_hover")}.bind(this),beforeHide:function(e){this.element.select("div").invoke("removeClassName","inline_hover_light"),this.element.select("div").invoke("removeClassName","user_widget_hover")}.bind(this),beforeSelect:function(e){this.element.select("div").invoke("removeClassName","inline_hover_light"),this.element.select("div").invoke("removeClassName","user_widget_hover")}.bind(this)}),this.notify("createMenu"))},resize:function(){},showElement:function(e){this.element.select(".user_widget_label").invoke(e?"show":"hide")},getDomNode:function(){return this.element},destroy:function(){this.element.stopObserving("mouseover",this.mObs1),this.element.stopObserving("mouseout",this.mObs2),document.stopObserving("app:user_logged",this.uLoggedObs),document.stopObserving("app:actions_loaded",this.actLoaded),Prototype.Browser.IE&&document.stopObserving("app:actions_refreshed",this.actLoaded),this.element=null}}),Class.create("LogoWidget",AppPane,{initialize:function($super,e,t){$super(e,t);var i=app.getPluginConfigs("guidriver");this.updateConfig(i)},updateConfig:function(e){if(e.get("CUSTOM_TOP_TITLE")?(this.titleDiv?this.titleDiv.update(e.get("CUSTOM_TOP_TITLE")):(this.titleDiv=new Element("div",{className:"custom_top_title"}).update(e.get("CUSTOM_TOP_TITLE")),this.htmlElement.insert(this.titleDiv)),e.get("CUSTOM_TOP_LOGO")&&"remove-original"!=e.get("CUSTOM_TOP_LOGO")||(this.image&&(this.image.remove(),this.image=null),this.resizeImage(e,!0))):this.titleDiv&&(this.titleDiv.remove(),this.titleDiv=null),e.get("CUSTOM_TOP_LOGO")&&"remove-original"!=e.get("CUSTOM_TOP_LOGO")){var t="binary_id";e.get("CUSTOM_TOP_LOGO_ISTMP")&&(t="tmp_file");var i=window.appServerAccessPath+"&get_action=get_global_binary_param&"+t+"="+e.get("CUSTOM_TOP_LOGO");0===e.get("CUSTOM_TOP_LOGO").indexOf("plugins/")&&(i=e.get("CUSTOM_TOP_LOGO")),this.image?this.image.src!=i&&(this.image.src=i,this.image.onload=function(){this.resizeImage(e,!1)}.bind(this)):(this.image=new Image,this.image.src=i,this.image.onload=function(){this.resizeImage(e,!0)}.bind(this))}else"remove-original"==e.get("CUSTOM_TOP_LOGO")&&this.image&&(this.image.remove(),this.image=null,this.htmlElement.setAttribute("style",""))},resizeImage:function(e,t){var i,s;if(this.image){var n=this.image.width,o=this.image.height;e.get("CUSTOM_TOP_LOGO_H")?(i=parseInt(e.get("CUSTOM_TOP_LOGO_H"))||o,s=parseInt(i*n/o)):e.get("CUSTOM_TOP_LOGO_W")&&(s=parseInt(e.get("CUSTOM_TOP_LOGO_W")),i=parseInt(s*o/n)),s||(s=n,i=o);var a=parseInt(e.get("CUSTOM_TOP_LOGO_T"))||0,r=parseInt(e.get("CUSTOM_TOP_LOGO_L"))||0;this.image.setStyle({position:"absolute",height:i+"px",width:s+"px",top:a+"px",left:r+"px"})}else s=-3,i=0;if(this.htmlElement.setStyle({paddingTop:"9px"}),i>parseInt(this.htmlElement.getHeight())){var l=parseInt(this.htmlElement.getStyle("paddingTop"))+(i-parseInt(this.htmlElement.getHeight()));this.htmlElement.setStyle({paddingTop:l+"px"})}var d=parseInt(this.htmlElement.getHeight());e.set("SKIP_BY_LOGO",!0),e.get("SKIP_BY_LOGO")||this.htmlElement.setStyle({backgroundImage:"url("+window.resourcesFolder+"/images/white_by.png)",backgroundSize:"66px",backgroundPosition:s+10+"px "+(d-14)+"px"}),this.titleDiv&&this.titleDiv.setStyle({position:"absolute",left:s+8+"px",top:d-37+"px",fontSize:"19px"}),t&&this.htmlElement.insert(this.image)}}),Class.create("AutoCompleter",Autocompleter.Base,{initialize:function(e,t,i,s){Object.isString(t)&&!$(t)&&document.getElementsByTagName("body")[0].appendChild(new Element("div",{id:t,className:"autocomplete",style:"position:absolute; display:none;"})),this.baseInitialize(e,t,s),this.options.asynchronous=!0,this.options.onComplete=this.onComplete.bind(this),this.options.defaultParams=this.options.parameters||null,this.url=appServerAccessPath+"&get_action=ls&options=dz",this.options.paramName="dir",this.options.minChars=1},getUpdatedChoices:function(){this.startIndicator();var e=this.getToken(),t=encodeURIComponent(this.options.paramName)+"="+encodeURIComponent(e.substring(0,e.lastIndexOf("/")+1));this.options.parameters=this.options.callback?this.options.callback(this.element,t):t,this.options.defaultParams&&(this.options.parameters+="&"+this.options.defaultParams),new Ajax.Request(this.url,this.options)},onComplete:function(e){var t=e.responseXML,i=this.getToken(),s=new Array;if(null!=t&&null!=t.documentElement){for(var n=t.documentElement.childNodes,o=n.length,a=0;a<o;a++)if("tree"==n[a].tagName){var r=getBaseName(n[a].getAttribute("filename"));if(i.lastIndexOf("/")<i.length-1){var l=i.substring(i.lastIndexOf("/")+1,i.length);0==r.indexOf(l)&&(s[s.length]=r)}else s[s.length]=r}if(s.length){var d="<ul>";s.each(function(e){value=i.substring(0,i.lastIndexOf("/")+1),d+="<li>"+value+e+"</li>"}),d+="</ul>",this.updateChoices(d)}else this.updateChoices("")}else this.updateChoices("")}}),Class.create("UsersCompleter",Ajax.Autocompleter,{createUserEntry:function(e,t,i,s,n){var o=new Element("span",{className:"user_entry_label"}).update(s),a=new Element("div",{className:"user_entry"}).update(o);return e?a.addClassName("group_entry"):t&&a.addClassName("user_entry_temp"),a.writeAttribute("data-entry_id",i),a.insert({bottom:'<span style="display: none;" class="delete_user_entry">&nbsp;</span>'}),n||(a.setStyle({opacity:0}),a.observe("mouseover",function(e){a.down("span.delete_user_entry").show()}),a.observe("mouseout",function(e){a.down("span.delete_user_entry").hide()}),a.down("span.delete_user_entry").observe("click",function(){Effect.Fade(a,{duration:.3,afterFinish:a.remove.bind(a)})}),a.appendToList=function(e){e.insert({bottom:a}),Effect.Appear(a,{duration:.3})}),a},initialize:function(e,t,i,s){var n=this.createUserEntry.bind(this);if(s.indicator,s.minChars||(s.minChars=3),s.tmpUsersPrefix)var o=s.tmpUsersPrefix;if(s.updateUserEntryAfterCreate)var a=s.updateUserEntryAfterCreate;if(s.createUserPanel)var r=s.createUserPanel.panel,l=s.createUserPanel.pass,d=s.createUserPanel.confirmPass;s=Object.extend({paramName:"value",tokens:[",","\n"],frequency:.1,tmpUsersPrefix:"",updateUserEntryAfterCreate:null,createUserPanel:null,afterUpdateElement:function(e,i){Math.random();var s=i.getAttribute("data-label"),h=i.getAttribute("data-entry_id");i.getAttribute("data-temporary")&&o&&!s.startsWith(o)&&(s=o+s);var c=n(!!i.getAttribute("data-group"),!!i.getAttribute("data-temporary"),i.getAttribute("data-group")?i.getAttribute("data-group"):h||s,s);a&&a(c),i.getAttribute("data-temporary")&&null!=r?(e.readOnly=!0,l.setValue(""),d.setValue(""),e.setValue(MessageHash[449].replace("%s",s)),r.select("div.dialogButtons>input").invoke("addClassName","dialogButtons"),r.select("div.dialogButtons>input").invoke("stopObserving","click"),r.select("div.dialogButtons>input").invoke("observe","click",function(i){Event.stop(i);var s=!1;"ok"==i.target.name?!l.value||l.value.length<window._bootstrap.parameters.get("password_min_length")?alert(MessageHash[378]):l.getValue()==d.getValue()&&(c.NEW_USER_PASSWORD=l.getValue(),c.appendToList(t),s=!0):i.target.name.startsWith("can")&&(s=!0),s&&(e.setValue(""),e.readOnly=!1,Effect.BlindUp("create_shared_user",{duration:.4}),r.select("div.dialogButtons>input").invoke("removeClassName","dialogButtons"))}),Effect.BlindDown(r,{duration:.6,transition:Effect.Transitions.spring,afterFinish:function(){l.focus()}})):(e.setValue(""),c.appendToList(t))}},s),this.baseInitialize(e,i,s),this.options.asynchronous=!0,this.options.onComplete=this.onComplete.bind(this),this.options.defaultParams=this.options.parameters||null,this.url=this.options.url||window.appServerAccessPath+"&get_action=user_list_authorized_users",this.options.onComplete=function(e){var i=new Element("div");i.update(e.responseText),t.select("div.user_entry").each(function(e){var t=i.down('[data-label="'+e.getAttribute("data-entry_id")+'"]');t&&t.remove()}),this.updateChoices(i.innerHTML)}.bind(this),Prototype.Browser.IE&&$(document.body).insert(i),e.observe("click",function(){this.activate()}.bind(this))}}),Class.create("TreeSelector",{initialize:function(e,t){this.htmlElement=e,this.options=Object.extend({filterSelectorId:'select[id="external_repository"]',targetField:'input[name="dest"]',targetNode:'input[name="dest_node"]',treeContainer:".treeCopyContainer",nodeFilter:function(e){return!e.isLeaf()}},t||{})},load:function(e){webFXTreeHandler&&webFXTreeHandler.selected&&(this.__initialWebFXSelection=webFXTreeHandler.selected),this.filterSelector=this.htmlElement.select(this.options.filterSelectorId)[0];var t=this.targetField=this.htmlElement.select(this.options.targetField)[0],i=this.targetNode=this.htmlElement.select(this.options.targetNode)[0];this.treeContainer=this.htmlElement.select(this.options.treeContainer)[0],this.filterSelector.hide(),this._nodeActionCallback=function(e){t.value=this.node.getPath(),i.value=this.node.getPath(),this.select()},e||(e=new ManifestNode("/",!1,MessageHash[373],"folder.png")),this.treeCopy=new CustomXTree(e,this._nodeActionCallback,this.options.nodeFilter),this.treeContainer.update(this.treeCopy.toString()),$(this.treeCopy.id).observe("click",function(e){this.action(),Event.stop(e)}.bind(this.treeCopy)),this.treeCopy.focus(),this.treeCopy.setRootNode(e)},unload:function(){this.__initialWebFXSelection&&this.__initialWebFXSelection.select(),this.treeCopy.remove()},getSelectedNode:function(){return this.targetNode.getValue()},getSelectedLabel:function(){return this.target.getValue()},setFilterShow:function(e){e?this.filterSelector.show():this.filterSelector.hide()},getFilterActive:function(e){return!!this.filterSelector.visible()&&(!e||this.filterSelector.getValue()!=e)},appendFilterValue:function(e,t,i){var s,n=new Element("option",{value:e}).update(t);s="top"==i?{top:n}:n,this.filterSelector.insert(s)},setFilterSelectedIndex:function(e){this.filterSelector.selectedIndex=e},setFilterChangeCallback:function(e){this.filterSelector.observe("change",e.bind(this))},resetRootNode:function(e){this.treeCopy.node.clear(),this.treeCopy.setRootNode(e),this.treeCopy.node.load()}}),Class.create("SliderInput",{initialize:function(e,t){this.input=$(e),this.options=Object.extend({format:"",axis:"vertical",onChange:Prototype.emptyFunction,onSlide:Prototype.emptyFunction,topOffset:2,leftOffset:3,range:$R(0,1),alignY:6,anchorActiveClass:"slider-anchor-active"},t||{});var i=this.options.onSlide;this.options.onSlide=function(e){this.input.value=e,i(e),this.delay()}.bind(this),this.options.sliderValue&&(this.input.value=this.options.sliderValue),this.buildGui()},buildGui:function(){this.holder=new Element("div",{className:"slider-pane"}),this.trackerTop=new Element("div",{className:"slider-tracker-top",style:"width:10px;height:2px;font-size:1px;"}).update(""),this.tracker=new Element("div",{className:"slider-tracker",style:"width:10px;height:90px;"}),this.cursor=new Element("div",{className:"slider-handle"}),this.holder.insert(this.trackerTop),this.holder.insert(this.tracker),this.tracker.insert(this.cursor),this.holder.hide(),$(document.body).insert(this.holder),this.slider=new Control.Slider(this.cursor,this.tracker,this.options),this.showObserver=this.show.bind(this),this.input.getAttribute("type")&&"image"==this.input.getAttribute("type")||"input"!=this.input.nodeName?this.input.observe("click",this.showObserver):this.input.observe("focus",this.showObserver),this.docObserver=function(e){var t=Event.findElement(e);!t.descendantOf||t.descendantOf(this.holder)||t.descendantOf(this.input)||t==this.holder||t==this.input||this.hide()}.bind(this),document.observe("click",this.docObserver)},destroy:function(){try{this.input.stopObserving("click",this.showObserver),this.input.stopObserving("focus",this.showObserver),document.stopObserving("click",this.docObserver),this.holder.remove()}catch(e){}},setValue:function(e){var t=this.slider.options.onChange;this.slider.options.onChange=Prototype.emptyFunction,this.slider&&this.slider.setValue(e),this.input&&(this.input.value=e),this.slider.options.onChange=t},show:function(e){var t=this.computeAnchorPosition(this.input);e&&!e.target&&(t=this.computeAnchorPosition(e)),this.holder.setStyle(t),this.slider.setValue(parseFloat(this.input.value)),this.holder.show(),this.input.addClassName(this.options.anchorActiveClass),e&&!e.target&&e.addClassName(this.options.anchorActiveClass),this.delay()},hide:function(){this.holder.hide(),this.timer&&window.clearTimeout(this.timer);try{this.input.blur()}catch(e){}this.input.removeClassName(this.options.anchorActiveClass)},delay:function(){this.timer&&window.clearTimeout(this.timer)},computeAnchorPosition:function(e){var t=Position.cumulativeOffset($(e)),i=e.cumulativeScrollOffset();return{top:t[1]+e.getHeight()+this.options.topOffset-i[1]+"px",left:t[0]+this.options.leftOffset-i[0]+"px"}}}),Class.create("Action",{__DEFAULT_ICON_PATH:"/images/actions/ICON_SIZE",initialize:function(){this.options=Object.extend({name:"",src:"",icon_class:"",text:"",title:"",text_id:"",title_id:"",hasAccessKey:!1,accessKey:"",subMenu:!1,subMenuUpdateImage:!1,subMenuUpdateTitle:!1,callbackCode:"",callbackDialogNode:null,callback:Prototype.emptyFunction,prepareModal:!1,listeners:[],formId:void 0,formCode:void 0},arguments[0]||{}),this.context=Object.extend({selection:!0,dir:!1,allowedMimes:$A([]),evalMetadata:"",root:!0,onlyRoot:!1,minPathDepth:0,inZip:!0,recycle:!1,behaviour:"hidden",actionBar:!1,actionBarGroup:"default",contextMenu:!1,appWidgets:null,infoPanel:!1,customFn:null},arguments[1]||{}),this.selectionContext=Object.extend({dir:!1,file:!0,recycle:!1,behaviour:"disabled",allowedMimes:$A([]),evalMetadata:"",unique:!0,multipleOnly:!1,customFn:null},arguments[2]||{}),this.rightsContext=Object.extend({noUser:!0,userLogged:!0,guestLogged:!1,read:!1,write:!1,adminOnly:!1},arguments[3]||{}),this.subMenuItems=Object.extend({staticItems:null,dynamicItems:null,dynamicBuilderCode:null},arguments[4]||{}),this.elements=new Array,this.contextHidden=!1,this.deny=!1,this.context.subMenu&&(this.options.actionBar||alert("Warning, wrong action definition. Cannot use a subMenu if not displayed in the actionBar!"))},setManager:function(e){if(this.manager=e,this.options.subMenu&&(this.subMenuItems.staticItems&&this.buildSubmenuStaticItems(),(this.subMenuItems.dynamicItems||this.subMenuItems.dynamicBuilderCode)&&this.prepareSubmenuDynamicBuilder()),this.options.listeners.init)try{window.listenerContext=this,Object.isString(this.options.listeners.init)?this.options.listeners.init.evalScripts():this.options.listeners.init()}catch(e){alert(e)}},apply:function(){if(!this.deny){if(document.fire("app:beforeApply-"+this.options.name),this.options.prepareModal&&modal.prepareHeader(this.options.title,resolveImageSource(this.options.src,this.__DEFAULT_ICON_PATH,16),this.options.icon_class),window.actionArguments=$A([]),arguments[0]&&(window.actionArguments=$A(arguments[0])),this.options.callbackCode)try{this.options.callbackCode.evalScripts()}catch(e){app.displayMessage("ERROR",e.message)}else if(this.options.callbackDialogNode){var e=this.options.callbackDialogNode,t=e.getAttribute("dialogOpenForm"),i="true"===e.getAttribute("dialogOkButtonOnly"),s="true"===e.getAttribute("dialogSkipButtons"),n=null,o=null,a=null,r=XPathSelectSingleNode(e,"dialogOnOpen");if(r&&r.firstChild)n=new Function("oForm",r.firstChild.nodeValue);var l=XPathSelectSingleNode(e,"dialogOnComplete");if(l&&l.firstChild){var d=l.firstChild.nodeValue;"true"===l.getAttribute("hideDialog")&&(d+="hideLightBox(true);");o=new Function("oForm",d)}var h=XPathSelectSingleNode(e,"dialogOnCancel");if(h&&h.firstChild)a=new Function("oForm",h.firstChild.nodeValue);this.options.callback=function(){modal.showDialogForm("Dialog",t,n,o,a,i,s)},this.options.callback(),this.options.callbackDialogNode=null}else this.options.callback&&this.options.callback();this.options.subMenu&&arguments[0]&&arguments[0][0]&&this.notify("submenu_active",arguments[0][0]),window.actionArguments=null,document.fire("app:afterApply-"+this.options.name)}},fireContextChange:function(){if(!(arguments.length<3)){var e=arguments[0],t=arguments[1],i=!1,s=!1,n=!1,o="",a=!1,r=!1,l="",d=0,h=arguments[2];h&&(i="recycle"==h.getMime(),s=h.hasMimeInBranch("browsable_archive"),n=h.isRoot(),o=h.getMime(),a=h.hasMetadataInBranch("readonly","true"),r="/"==(l=h.getPath()),d=(l.match(/\//g)||[]).length),this.options.listeners.contextChange&&(window.listenerContext=this,this.options.listeners.contextChange.evalScripts());var c=this.rightsContext;if(!c.noUser&&!e)return this.hideForContext();if("only"==c.userLogged&&null==t||c.guestLogged&&"hidden"==c.guestLogged&null!=t&&"guest"==t.id)return this.hideForContext();if("hidden"==c.userLogged&&null!=t&&("guest"!=t.id||!c.guestLogged||"show"!=c.guestLogged))return this.hideForContext();if(c.adminOnly&&(null==t||!t.isAdmin))return this.hideForContext();if(c.read&&null!=t&&!t.canRead())return this.hideForContext();if(c.write&&null!=t&&!t.canWrite())return this.hideForContext();if(c.write&&a)return this.hideForContext();if(this.context.allowedMimes.length){if(!this.context.allowedMimes.include("*")&&!this.context.allowedMimes.include(o))return this.hideForContext();if(this.context.allowedMimes.include("^"+o))return this.hideForContext()}if(this.context.recycle){if("only"==this.context.recycle&&!i)return this.hideForContext();if("hidden"==this.context.recycle&&i)return this.hideForContext()}return!this.context.inZip&&s?this.hideForContext():(this.context.root||!n&&!r)&&(!this.context.onlyRoot||n||r)?this.context.minPathDepth&&d<parseInt(this.context.minPathDepth)?this.hideForContext():void this.showForContext():this.hideForContext()}},fireSelectionChange:function(){if(this.options.listeners.selectionChange&&(window.listenerContext=this,this.options.listeners.selectionChange.evalScripts()),!this.contextHidden&&this.context.selection){var userSelection=arguments[0],bSelection=!1;if(null!=userSelection){bSelection=!userSelection.isEmpty();var bUnique=userSelection.isUnique(),bFile=userSelection.hasFile(),bDir=userSelection.hasDir(),bRecycle=userSelection.isRecycle()}var selectionContext=this.selectionContext;if(selectionContext.allowedMimes.size()&&("hidden"==selectionContext.behaviour?this.hide():this.disable()),selectionContext.evalMetadata&&userSelection&&userSelection.isUnique()){var metadata=userSelection.getUniqueNode().getMetadata(),result=eval(selectionContext.evalMetadata);if(!result)return void("hidden"==selectionContext.behaviour?this.hide():this.disable())}if(selectionContext.custom){var result=!1;try{result=eval(selectionContext.custom)}catch(e){}if(!result)return void("hidden"==selectionContext.behaviour?this.hide():this.disable())}if(selectionContext.unique&&!bUnique)return this.disable();if((selectionContext.file||selectionContext.dir)&&!bFile&&!bDir)return this.disable();if(selectionContext.dir&&!selectionContext.file&&bFile||!selectionContext.dir&&selectionContext.file&&bDir)return this.disable();if(!selectionContext.recycle&&bRecycle)return this.disable();if(this.rightsContext.write&&userSelection.hasReadOnly())return this.disable();if(selectionContext.allowedMimes.size()&&userSelection&&!selectionContext.allowedMimes.include("*")&&!userSelection.hasMime(selectionContext.allowedMimes))return"hidden"==selectionContext.behaviour?this.hide():this.disable();if(selectionContext.allowedMimes.size()&&userSelection&&-1!==Object.toJSON(selectionContext.allowedMimes).indexOf("^")){var forbiddenValueFound=!1;if(selectionContext.allowedMimes.each(function(e){if(-1!=e.indexOf("^")&&userSelection.hasMime([e.replace("^","")]))throw forbiddenValueFound=!0,$break}),forbiddenValueFound)return"hidden"==selectionContext.behaviour?this.hide():this.disable()}this.show(),this.enable()}},createFromXML:function(e){this.options.name=e.getAttribute("name");for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];if($H({dir:"dirDefault",file:"fileDefault",dragndrop:"dragndropDefault",ctrldragndrop:"ctrlDragndropDefault",expire:"expireDefault"}).each(function(t){e.getAttribute(t.value)&&"true"==e.getAttribute(t.value)&&(this.defaults||(this.defaults={}),this.defaults[t.key]=!0)}.bind(this)),"processing"==i.nodeName){for(var s={},n=0;n<i.childNodes.length;n++){var o=i.childNodes[n];"clientForm"==o.nodeName?o.getAttribute("theme")&&window._bootstrap.parameters.get("theme")!=o.getAttribute("theme")||(s.formId=o.getAttribute("id"),s.formCode=o.firstChild.nodeValue):"clientCallback"==o.nodeName?(o.getAttribute("prepareModal")&&"true"==o.getAttribute("prepareModal")&&(this.options.prepareModal=!0),o.getAttribute("dialogOpenForm")?this.options.callbackDialogNode=o:o.firstChild&&(this.options.callbackCode="<script>"+o.firstChild.nodeValue+"<\/script>")):"clientListener"==o.nodeName&&o.firstChild&&(this.options.listeners[o.getAttribute("name")]="<script>"+o.firstChild.nodeValue+"<\/script>")}s.formId&&(this.options.formId=s.formId,this.options.formCode=s.formCode,this.insertForm())}else if("gui"==i.nodeName){this.options.text_id=i.getAttribute("text"),this.options.title_id=i.getAttribute("title"),this.options.text=MessageHash[i.getAttribute("text")]||"not_found",this.options.title=MessageHash[i.getAttribute("title")]||"not_found",this.options.src=i.getAttribute("src"),this.options.icon_class=i.getAttribute("iconClass"),i.getAttribute("hasAccessKey")&&"true"==i.getAttribute("hasAccessKey")&&(this.options.accessKey=i.getAttribute("accessKey"),this.options.hasAccessKey=!0),i.getAttribute("specialAccessKey")&&(this.options.specialAccessKey=i.getAttribute("specialAccessKey"));for(n=0;n<i.childNodes.length;n++)"context"==i.childNodes[n].nodeName?(this.attributesToObject(this.context,i.childNodes[n]),this.context.appWidgets?this.context.appWidgets=$A(this.context.appWidgets.split(",")):this.context.appWidgets=$A(),this.context.infoPanel&&this.context.appWidgets.push("InfoPanel"),this.context.actionBar&&this.context.appWidgets.push("ActionsToolbar")):"selectionContext"==i.childNodes[n].nodeName&&this.attributesToObject(this.selectionContext,i.childNodes[n])}else if("rightsContext"==i.nodeName)this.attributesToObject(this.rightsContext,i);else if("subMenu"==i.nodeName){this.options.subMenu=!0,i.getAttribute("updateImageOnSelect")&&"true"==i.getAttribute("updateImageOnSelect")&&(this.options.subMenuUpdateImage=!0),i.getAttribute("updateTitleOnSelect")&&"true"==i.getAttribute("updateTitleOnSelect")&&(this.options.subMenuUpdateTitle=!0);for(n=0;n<i.childNodes.length;n++)if("staticItems"==i.childNodes[n].nodeName||"dynamicItems"==i.childNodes[n].nodeName){this.subMenuItems[i.childNodes[n].nodeName]=[];for(var a=0;a<i.childNodes[n].childNodes.length;a++)if(i.childNodes[n].childNodes[a].nodeName.startsWith("item")){for(var r={},l=0;l<i.childNodes[n].childNodes[a].attributes.length;l++){var d=i.childNodes[n].childNodes[a].attributes[l];r[d.nodeName]=d.nodeValue}this.subMenuItems[i.childNodes[n].nodeName].push(r)}}else"dynamicBuilder"==i.childNodes[n].nodeName&&(this.subMenuItems.dynamicBuilderCode="<script>"+i.childNodes[n].firstChild.nodeValue+"<\/script>")}}this.options.hasAccessKey&&(""!=this.options.accessKey&&MessageHash[this.options.accessKey]&&-1!=this.options.text.indexOf(MessageHash[this.options.accessKey])?this.options.accessKey=MessageHash[this.options.accessKey]:(this.options.accessKey,this.options.text.charAt(0)))},buildSubmenuStaticItems:function(){var e=[];this.subMenuItems.staticItems&&this.subMenuItems.staticItems.each(function(t){var i=MessageHash[t.text];t.hasAccessKey&&("true"==t.hasAccessKey||!0===t.hasAccessKey)&&MessageHash[t.accessKey]&&(i=this.getKeyedText(MessageHash[t.text],!0,MessageHash[t.accessKey]),this.subMenuItems.accessKeys||(this.subMenuItems.accessKeys=[]),this.manager.registerKey(MessageHash[t.accessKey],this.options.name,t.command)),e.push({name:i,alt:MessageHash[t.title],image:resolveImageSource(t.src,"/images/actions/ICON_SIZE",22),icon_class:t.icon_class,isDefault:!!t.isDefault,callback:function(e){this.apply([t])}.bind(this)})},this),this.subMenuItems.staticOptions=e},prepareSubmenuDynamicBuilder:function(){this.subMenuItems.dynamicBuilder=function(e){setTimeout(function(){if(this.subMenuItems.dynamicBuilderCode){window.builderContext=this,window.builderProtoMenu=e,this.subMenuItems.dynamicBuilderCode.evalScripts();t=this.builderMenuItems||[]}else{var t=[];this.subMenuItems.dynamicItems.each(function(e){if(e.separator)t.push(e);else{var i=this.manager.actions.get(e.actionId);if(!i.deny){var s={name:i.getKeyedText(),alt:i.options.title,icon_class:i.options.icon_class,image:resolveImageSource(i.options.src,"/images/actions/ICON_SIZE",16),callback:function(e){this.apply()}.bind(i)};i.options.subMenu&&(s.subMenu=[],i.subMenuItems.staticOptions&&(s.subMenu=i.subMenuItems.staticOptions),i.subMenuItems.dynamicBuilder&&(s.subMenuBeforeShow=i.subMenuItems.dynamicBuilder)),t.push(s)}}},this)}e.options.menuItems=t,e.refreshList()}.bind(this),0)}.bind(this)},setIconSrc:function(e,t){this.options.src=e;var i;t&&(i=this.options.icon_class,this.options.icon_class=t,t&&$(this.options.name+"_button")&&$(this.options.name+"_button").down("span.icon_span")&&($(this.options.name+"_button").down("span.icon_span").removeClassName(i),$(this.options.name+"_button").down("span.icon_span").addClassName(t))),$(this.options.name+"_button_icon")&&($(this.options.name+"_button_icon").src=resolveImageSource(this.options.src,this.__DEFAULT_ICON_PATH,22))},setLabel:function(e,t){this.options.text=MessageHash[e],$(this.options.name+"_button_label")&&$(this.options.name+"_button_label").update(this.getKeyedText()),t&&(this.options.title=MessageHash[t],$(this.options.name+"_button_icon")&&($(this.options.name+"_button_icon").title=this.options.title))},refreshInstances:function(){$$("#action_instance_"+this.options.name).each(function(e){var t;e.firstChild.nodeType==Node.ELEMENT_NODE&&"img"==e.firstChild.nodeName.toLowerCase()&&(t=e.firstChild.cloneNode(!0)),e.update(this.getKeyedText()),t&&e.insert({top:t})}.bind(this))},refreshFromI18NHash:function(){this.setLabel(this.options.text_id,this.options.title_id)},toInfoPanel:function(){return this.options},toContextMenu:function(){return this.options},hideForContext:function(){this.hide(),this.contextHidden=!0},showForContext:function(){this.contextHidden=!1,this.show(),this.selectionContext&&this.fireSelectionChange()},hide:function(){this.deny_before=this.deny,this.deny=!0,this.notify("hide")},resetHide:function(){this.deny=this.deny_before||this.deny,this.notify("hide")},show:function(){this.deny=!1,this.notify("show")},disable:function(){this.deny=!0,this.notify("disable")},enable:function(){this.deny=!1,this.notify("enable")},remove:function(){this.elements.each(function(e){$(e).remove()}.bind(this)),this.elements=new Array,this.options.formId&&$("all_forms").select('[id="'+this.options.formId+'"]').length&&$("all_forms").select('[id="'+this.options.formId+'"]')[0].remove()},getKeyedText:function(e,t,i){if(e||(e=this.options.text),t||(t=this.options.hasAccessKey),i||(i=this.options.accessKey),!t)return e;var s=e.toLowerCase().indexOf(i.toLowerCase());return-1==s?e+" (<u>"+i+"</u>)":(e.charAt(s)!=i&&(i=e.charAt(s)),returnString=e.substring(0,e.indexOf(i)),returnString+="<u>"+i+"</u>",returnString+=e.substring(e.indexOf(i)+1,e.length),returnString)},insertForm:function(){this.options.formCode&&this.options.formId&&($("all_forms").select('[id="'+this.options.formId+'"]').length||$("all_forms").insert(this.options.formCode))},attributesToObject:function(e,t){Object.keys(e).each(function(e){t.getAttribute(e)&&(value=t.getAttribute(e),"true"==value?value=!0:"false"==value&&(value=!1),"allowedMimes"==e&&(value&&value.split(",").length?value=$A(value.split(",")):value=$A([])),this[e]=value)}.bind(e))},setContext:function(e){for(var t,i=["selection","dir","allowedMimes","root","onlyRoot","minPathDepth","inZip","recycle","behaviour","actionBar","actionBarGroup","contextMenu","appWidgets","infoPanel","customFn"],s=0;s<i.length;s++)(t=i[s])in e&&(this.context[t]=e[t])}}),Class.create("ActionsManager",{initialize:function(e){this._registeredKeys=new Hash,this._actions=new Hash,this.usersEnabled=e,this.bgManager=new BackgroundManager(this),this.subMenus=[],this.actions=new Hash,this.defaultActions=new Hash,this.toolbars=new Hash,document.observe("app:context_changed",function(e){window.setTimeout(function(){this.fireContextChange()}.bind(this),0)}.bind(this)),document.observe("app:selection_changed",function(e){window.setTimeout(function(){this.fireSelectionChange()}.bind(this),0)}.bind(this)),document.observe("app:user_logged",function(e){e.memo&&e.memo.getPreference?this.setUser(e.memo):this.setUser(null)}.bind(this))},setUser:function(e){this.oUser=e,null!=e&&app&&"guest"!=e.id&&null!=e.getPreference("lang")&&""!=e.getPreference("lang")&&e.getPreference("lang")!=app.currentLanguage&&!e.lock&&app.loadI18NMessages(e.getPreference("lang"))},getContextActions:function(e,t){var i="selectionContext";e.id&&(e.hasClassName("table_rows_container")||e.hasClassName("selectable_div"))&&(i="genericContext");var s,n=new Array,o={};this.actions.each(function(e){var t=e.value;if(t.context.contextMenu&&("selectionContext"!=i||t.context.selection)&&("directoryContext"!=i||t.context.dir)&&!("genericContext"==i&&t.context.selection||t.contextHidden||t.deny)){$A(t.context.actionBarGroup.split(",")).each(function(e){o[e]||(o[e]=$A())});var n=!1;if("selectionContext"==i){var a=app.getUserSelection();if(!a.isEmpty()){var r="file";a.isUnique()&&(a.hasDir()||a.hasMime(["browsable_archive"]))&&(r="dir"),this.defaultActions.get(r)&&t.options.name==this.defaultActions.get(r)&&(n=!0)}}$A(t.context.actionBarGroup.split(",")).each(function(e){var i={name:t.getKeyedText(),alt:t.options.title,action_id:t.options.name,image:resolveImageSource(t.options.src,"/images/actions/ICON_SIZE",16),isDefault:n,callback:function(e){this.apply()}.bind(t)};t.options.icon_class&&(i.icon_class=t.options.icon_class),t.options.subMenu&&(i.subMenu=[],t.subMenuItems.staticOptions&&(i.subMenu=t.subMenuItems.staticOptions),t.subMenuItems.dynamicBuilder&&(i.subMenuBeforeShow=t.subMenuItems.dynamicBuilder)),o[e].push(i),n&&(s=e)})}}.bind(this));var a=!0;return o=$H(o),(o=o.sortBy(function(e){return s&&e.key==s?"aaaa":e.key})).each(function(e){a||n.push({separator:!0}),t&&-1!=t.indexOf(e.key)||(a=!1,e.value.each(function(e){n.push(e)}))}),n},getInfoPanelActions:function(){var e=$A([]);return this.actions.each(function(t){var i=t.value;i.context.infoPanel&&!i.deny&&e.push(i)}),e},getActionsForAppWidget:function(e,t){var i=$A([]);return this.actions.each(function(s){var n=s.value;n.context.appWidgets&&(n.context.appWidgets.include(e+"::"+t)||n.context.appWidgets.include(e))&&!n.deny&&i.push(n)}),i},fireDefaultAction:function(e){var t=this.defaultActions.get(e);if(null!=t){if(arguments[0]=t,"ls"==t){var i=this.actions.get(t);i&&i.enable()}this.fireAction.apply(this,arguments)}},fireAction:function(e){var t=this.actions.get(e);if(null!=t){var i=$A(arguments);return i.shift(),void t.apply(i)}},registerKey:function(e,t,i){i&&(t=t+"::"+i),this._registeredKeys.set(e.toLowerCase(),t)},clearRegisteredKeys:function(){this._registeredKeys=new Hash},fireActionByKey:function(e,t){if(this._registeredKeys.get(t)&&!app.blockShortcuts){if(!1!==this._registeredKeys.get(t).indexOf("::")){var i=this._registeredKeys.get(t).split("::");this.fireAction(i[0],i[1])}else this.fireAction(this._registeredKeys.get(t));Event.stop(e)}},applyDragMove:function(e,t,i,s){if((s||this.defaultActions.get("dragndrop")&&!this.getDefaultAction("dragndrop").deny)&&(!s||this.defaultActions.get("ctrldragndrop")&&!this.getDefaultAction("ctrldragndrop").deny))if(fileNames=null==e?app.getUserSelection().getFileNames():[e],null!=i&&this.checkDestIsChildOfSource(fileNames,i))app.displayMessage("ERROR",MessageHash[202]);else{for(o=0;o<fileNames.length;o++)if(fileNames[o]==t)return void(null!=i&&app.displayMessage("ERROR",MessageHash[202]));if(t!=app.getContextNode().getPath()){var n=new Connexion;if(s?n.addParameter("get_action",this.defaultActions.get("ctrldragndrop")):n.addParameter("get_action",this.defaultActions.get("dragndrop")),null!=e)n.addParameter("file",e);else for(var o=0;o<fileNames.length;o++)n.addParameter("file_"+o,fileNames[o]);n.addParameter("dest",t),n.addParameter("dir",app.getContextNode().getPath()),n.onComplete=function(e){this.parseXmlMessage(e.responseXML)}.bind(this),n.sendAsync()}else null!=i&&app.displayMessage("ERROR",MessageHash[203])}},getDefaultAction:function(e){return this.defaultActions.get(e)?this.actions.get(this.defaultActions.get(e)):null},checkDestIsChildOfSource:function(e,t){"string"==typeof e&&(e=[e]);for(var i=webFXTreeHandler.all[t];i.parentNode;){for(var s=0;s<e.length;s++)if(i.filename==e[s])return!0;i=i.parentNode}return!1},submitForm:function(e,t,i){var s=new Connexion;t&&s.setMethod("POST"),$(e).getElements().each(function(e){var t=e.getValue();"get_action"==e.name&&"http"==t.substr(0,4)&&(t=getBaseName(t)),("radio"!=e.type||e.checked)&&s.addParameter(e.name,t)}),app.getContextNode()&&s.addParameter("dir",app.getContextNode().getPath()),s.onComplete=i||function(e){this.parseXmlMessage(e.responseXML)}.bind(this),s.sendAsync()},parseXmlMessage:function(e){app.messageBox;if(null!=e&&null!=e.documentElement){for(var t=e.documentElement.childNodes,i=[],s=!1,n=0;n<t.length;n++)if("message"==t[n].tagName){var o="No message";t[n].firstChild&&(o=t[n].firstChild.nodeValue),app.displayMessage(t[n].getAttribute("type"),o),"ERROR"==t[n].getAttribute("type")&&(s=!0)}else if("reload_instruction"==t[n].tagName){var a=t[n].getAttribute("object");if("data"==a){var r=t[n].getAttribute("node");if(r)i.push(r);else{var l=t[n].getAttribute("file");l&&app.getContextHolder().setPendingSelection(l),i.push(app.getContextNode())}}else"repository_list"==a&&app.reloadRepositoriesList()}else if("nodes_diff"==t[n].nodeName){var d=app.getContextHolder(),h=XPathSelectNodes(t[n],"remove/tree"),c=XPathSelectNodes(t[n],"add/tree"),u=XPathSelectNodes(t[n],"update/tree");h&&h.length&&h.each(function(e){var t=e.getAttribute("filename"),i=new ManifestNode(t).findInArbo(d.getRootNode(),void 0);i&&i.getParent().removeChild(i)}),c&&c.length&&d.getManifestNodeProvider().parseManifestNode&&c.each(function(e){var t=d.getManifestNodeProvider().parseManifestNode(e),i=new ManifestNode(getRepName(t.getPath())).findInArbo(d.getRootNode(),void 0);i||""!=getRepName(t.getPath())||(i=d.getRootNode()),i&&(i.addChild(t),d.setSelectedNodes([t],{}))}),u&&u.length&&d.getManifestNodeProvider().parseManifestNode&&u.each(function(e){var t=d.getManifestNodeProvider().parseManifestNode(e),i=t.getMetadata().get("original_path"),s=t.getPath(),n=getRepName(s);if(i&&i!=s&&getRepName(i)!=n){(r=(a=new ManifestNode(i)).findInArbo(d.getRootNode(),void 0))&&r.getParent().removeChild(r);var o=new ManifestNode(n).findInArbo(d.getRootNode(),void 0);o||""!=n||(o=d.getRootNode()),o&&(t.getMetadata().set("original_path",void 0),o.addChild(t))}else{var a=new ManifestNode(i),r=a.findInArbo(d.getRootNode(),void 0);r&&(t._isLoaded=r._isLoaded,r.replaceBy(t,"override"),d.setSelectedNodes([r],{}))}i&&i!=s&&document.fire("app:file_renamed",{old:i,new:s})})}else if("logging_result"==t[n].tagName){if(t[n].getAttribute("secure_token")){Connexion.SECURE_TOKEN=t[n].getAttribute("secure_token");var m=window.appServerAccessPath.split("?secure_token");window.appServerAccessPath=m[0]+"?secure_token="+Connexion.SECURE_TOKEN,window._bootstrap.parameters.set("appServerAccess",window.appServerAccessPath)}$("generic_dialog_box")&&$("generic_dialog_box").down(".login_error")&&$("generic_dialog_box").down(".login_error").remove();var p=t[n].getAttribute("value"),_=!1;if("1"==p){if(modal.setCloseValidation(null),hideLightBox(!0),t[n].getAttribute("remember_login")&&t[n].getAttribute("remember_pass")){var f=t[n].getAttribute("remember_login"),g=t[n].getAttribute("remember_pass");storeRememberData(f,g)}app.loadXmlRegistry()}else if("0"==p||"-1"==p)_=285;else if("2"==p)app.loadXmlRegistry();else if("-2"==p)_=285;else if("-3"==p)_=366;else if("-4"==p)_=386;_&&(s=!0,$("generic_dialog_box")&&$("generic_dialog_box").visible()&&$("generic_dialog_box").down("div.dialogLegend")?($("generic_dialog_box").down("div.dialogLegend").insert({bottom:'<div class="login_error" style="background-color: #D33131;display: block;font-size: 9px;color: white;border-radius: 3px;padding: 2px 6px;">'+MessageHash[_]+"</div>"}),$("generic_dialog_box").shake()):alert(MessageHash[_]))}else if("trigger_bg_action"==t[n].tagName){for(var b=t[n].getAttribute("name"),v=t[n].getAttribute("messageId"),y=new Hash,M=0;M<t[n].childNodes.length;M++){var w=t[n].childNodes[M];"param"==w.tagName&&y.set(w.getAttribute("name"),w.getAttribute("value"))}this.bgManager.queueAction(b,y,v),this.bgManager.next()}return i.length&&app.getContextHolder().multipleNodesReload(i),!s}},fireSelectionChange:function(){var e=null;app&&app.getUserSelection()&&(e=app.getUserSelection()).isEmpty()&&(e=null),this.actions.each(function(t){t.value.fireSelectionChange(e)}),document.fire("app:actions_refreshed")},fireContextChange:function(){if(app&&app.getContextNode())var e=app.getContextNode();this.actions.each(function(t){t.value.fireContextChange(this.usersEnabled,this.oUser,e)}.bind(this)),document.fire("app:actions_refreshed")},removeActions:function(){this.actions.each(function(e){e.value.remove()}),this.actions=new Hash,this.clearRegisteredKeys()},loadActionsFromRegistry:function(e){this.removeActions(),this.parseActions(e),app&&app.guiActions&&app.guiActions.each(function(e){var t=e.value;this.registerAction(t)}.bind(this)),document.fire("app:actions_loaded",this.actions),this.fireContextChange(),this.fireSelectionChange()},registerAction:function(e){var t=e.options.name;if(this.actions.set(t,e),e.defaults)for(var i in e.defaults)this.defaultActions.set(i,t);e.options.hasAccessKey&&this.registerKey(e.options.accessKey,t),e.options.specialAccessKey&&this.registerKey("key_"+e.options.specialAccessKey,t),e.setManager(this)},parseActions:function(e){actions=XPathSelectNodes(e,"actions/action");for(var t=0;t<actions.length;t++)if("action"==actions[t].nodeName&&"false"!=actions[t].getAttribute("enabled")){var i=new Action;i.createFromXML(actions[t]),this.registerAction(i)}},getActionByName:function(e){return this.actions.get(e)},getFlashVersion:function(){if(!this.pluginVersion){var e;if(navigator.plugins&&navigator.mimeTypes.length)(e=navigator.plugins["Shockwave Flash"])&&e.description&&(e=e.description);else if(Prototype.Browser.IE)try{e=(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(e){}this.pluginVersion="string"==typeof e?parseInt(e.match(/\d+/)[0]):0}return this.pluginVersion}}),Class.create("ActionsToolbar",{__implements:"IAppWidget",initialize:function(e,t){this.element=e,this.element.paneObject=this,this.options=Object.extend({buttonRenderer:"this",skipBubbling:!1,toolbarsList:$A(["default","put","get","change","user","remote"]),groupOtherToolbars:$A([]),skipCarousel:!1},t||{});var i=this.options.buttonRenderer;this.options.buttonRenderer="this"==i?this:new i,this.toolbars=$H(),this.options.skipCarousel||this.initCarousel(),this.options.styles&&(this.buildActionBarStylingMenu(),this.style=this.options.defaultStyle,document.observe("app:user_logged",function(){app.user&&app.user.getPreference("action_bar_style")?this.style=app.user.getPreference("action_bar_style"):this.style=this.options.defaultStyle,this.switchStyle(!1,!0)}.bind(this))),attachMobileScroll(e.id,"horizontal"),document.observe("app:actions_loaded",this.actionsLoaded.bind(this)),document.observe("app:actions_refreshed",this.refreshToolbarsSeparator.bind(this)),this.componentConfigHandler=function(e){"ActionsToolbar"==e.memo.className&&this.parseComponentConfig(e.memo.classConfig.get("all"))}.bind(this),document.observe("app:component_config_changed",this.componentConfigHandler)},getDomNode:function(){return this.element},destroy:function(){this.emptyToolbars()},parseComponentConfig:function(e){var t=XPathSelectSingleNode(e,'property[@name="style"]');if(t){var i=t.getAttribute("value");this.options.styles&&this.options.styles[i]&&(this.style=i,this.switchStyle())}},actionsLoaded:function(e){this.actions=e.memo,this.emptyToolbars(),this.initToolbars()},initToolbars:function(){if(this.registeredButtons=$A(),this.actions.each(function(e){var t=e.value,i=e.key;t.context.actionBar&&$A(t.context.actionBarGroup.split(",")).each(function(e){null==this.toolbars.get(e)&&this.toolbars.set(e,new Array),this.toolbars.get(e).push(i)}.bind(this))}.bind(this)),this.options.groupOtherToolbars.length){var e=[];this.options.groupOtherToolbars.each(function(t){var i=this.toolbars.get(t);i&&(i.each(function(t){e.push({actionId:t})}),t!=this.options.groupOtherToolbars.last()&&e.push({separator:!0}))}.bind(this));var t=new Action({name:"group_more_action",src:"view_icon.png",icon_class:"icon-none",text:MessageHash[456],title:MessageHash[456],hasAccessKey:!1,subMenu:!0,callback:function(){}},{selection:!1,dir:!0,actionBar:!0,actionBarGroup:"put",contextMenu:!0,infoPanel:!1},{},{},{dynamicItems:e});t.setManager(app.actionBar),this.actions.set("group_more_action",t);try{this.toolbars.get($A(this.options.toolbarsList).last()).push("group_more_action")}catch(e){}}var i=0,s=this.options.toolbarsList;s.each(function(e){var t=this.initToolbar(e);if(t&&t.actionsCount){if(i<s.size()-1){var n=new Element("div");n.addClassName("separator"),t.insert({top:n})}this.element.insert(t),i++}}.bind(this)),this.element.select("a").each(disableTextSelection)},refreshToolbarsSeparator:function(){this.toolbars.each(function(e){var t=this.element.select('[id="'+e.key+'_toolbar"]')[0];if(t){var i=t.select("div.separator")[0];if(i){var s=!1;t.select("a").each(function(e){e.visible()&&(s=!0)}),s?i.show():i.hide()}}}.bind(this)),this.options.skipCarousel||this.refreshSlides()},initToolbar:function(e){if(!this.toolbars.get(e))return"";if(!(t=this.element.down("#"+e+"_toolbar")))var t=new Element("div",{id:e+"_toolbar",className:"toolbarGroup"});return t.actionsCount=0,this.toolbars.get(e).each(function(e){var i=this.actions.get(e);if(i){var s=this.renderToolbarAction(i);t.insert(s),t.actionsCount++}}.bind(this)),t},emptyToolbars:function(){this.registeredButtons&&this.registeredButtons.each(function(e){e.ACTION&&e.OBSERVERS&&(e.OBSERVERS.each(function(t){e.ACTION.stopObserving(t.key,t.value)}),e.remove())}),this.element.subMenus&&this.element.subMenus.invoke("destroy"),this.element.select("div").each(function(e){e.remove()}.bind(this)),this.toolbars=new Hash},initCarousel:function(){this.outer=this.element;var e=this.outer.getHeight()-1;this.prev=new Element("a",{className:"carousel-control",rel:"prev",style:"height:"+e+"px;"}).update(new Element("img",{src:resourcesFolder+"/images/arrow_left.png"})),this.next=new Element("a",{className:"carousel-control",rel:"next",style:"float:right;height:"+e+"px;"}).update(new Element("img",{src:resourcesFolder+"/images/arrow_right.png"})),this.inner=new Element("div",{id:"buttons_inner",style:"width:1000px;"}),this.outer.insert({before:this.prev}),this.outer.insert({before:this.next}),this.outer.insert(this.inner),Prototype.Browser.IE&&this.outer.setStyle({cssFloat:"left"}),this.element=this.inner,this.carousel=new Carousel(this.outer,[],$A([this.prev,this.next]),{duration:.1})},refreshSlides:function(){var e=$A();this.inner.select("a").each(function(t){t.visible()&&e.push(t)}),this.carousel.refreshSlides(e),this.resize()},renderToolbarAction:function(e){var t=new Element("a",{href:e.options.name,id:e.options.name+"_button"}).observe("click",function(e){Event.stop(e),this.options.subMenu||this.apply()}.bind(e)),i=this.options.defaultIconSize?this.options.defaultIconSize:22;this.options.stylesImgSizes&&this.style&&this.options.stylesImgSizes[this.style]&&(i=this.options.stylesImgSizes[this.style]);var s;if(e.options.icon_class&&window.app.currentThemeUsesIconFonts)s=new Element("span",{className:e.options.icon_class+" icon_span",title:e.options.title});else{var n=resolveImageSource(e.options.src,e.__DEFAULT_ICON_PATH,i);s=new Element("img",{id:e.options.name+"_button_icon",className:"actionbar_button_icon",src:n,width:i,height:i,border:0,alt:e.options.title,title:e.options.title,"data-action-src":e.options.src})}var o=new Element("span",{id:e.options.name+"_button_label",className:"actionbar_button_label"});if(t.insert(s).insert(o.update(e.getKeyedText())),e.options.subMenu)if(this.buildActionBarSubMenu(t,e),window.app.currentThemeUsesIconFonts)t.insert(new Element("span",{className:"icon-caret-down icon_arrow"}));else{t.setStyle({position:"relative"});var a=new Element("div",{className:"actionbar_arrow_div"});a.insert(new Element("img",{src:resourcesFolder+"/images/arrow_down.png",height:6,width:10,border:0})),a.imgRef=s,t.insert(a)}else this.options.skipBubbling||(t.observe("mouseover",function(){this.buttonStateHover(t,e)}.bind(this)),t.observe("mouseout",function(){this.buttonStateOut(t,e)}.bind(this)));return this.options.skipBubbling||s.setStyle("width:18px;height:18px;margin-top:8px;"),t.hide(),this.attachListeners(t,e),this.registeredButtons||(this.registeredButtons=$A()),this.registeredButtons.push(t),t},attachListeners:function(e,t){if(this.options.attachToNode){console.log("from actions toolbar"),t.fireContextChange(app.usersEnabled,app.user,this.options.attachToNode.getParent());var i=new DataModel;return i.setSelectedNodes([this.options.attachToNode]),t.fireSelectionChange(i),t.deny?e.hide():e.show(),void(e.ACTION=t)}e.OBSERVERS=$H(),e.OBSERVERS.set("hide",function(){e.hide()}.bind(this)),e.OBSERVERS.set("show",function(){e.show()}.bind(this)),e.OBSERVERS.each(function(e){t.observe(e.key,e.value)}),e.ACTION=t,t.observe("hide",function(){e.hide()}.bind(this)),t.observe("show",function(){e.show()}.bind(this)),t.observe("disable",function(){e.addClassName("disabled")}.bind(this)),t.observe("enable",function(){e.removeClassName("disabled")}.bind(this)),t.observe("submenu_active",function(i){if(i.src&&t.options.subMenuUpdateImage){var s=e.select('img[id="'+t.options.name+'_button_icon"]');s.length&&(icSize=22,this.options.stylesImgSizes&&this.style&&this.options.stylesImgSizes[this.style]&&(icSize=this.options.stylesImgSizes[this.style]),s[0].src=resolveImageSource(i.src,t.__DEFAULT_ICON_PATH,icSize),t.options.src=i.src)}}.bind(this))},buildActionBarSubMenu:function(e,t){var i=new Proto.Menu({mouseClick:"over",anchor:e,className:"menu desktop toolbarmenu"+(this.options.submenuClassName?" "+this.options.submenuClassName:""),topOffset:this.options.submenuOffsetTop?this.options.submenuOffsetTop:0,leftOffset:this.options.submenuOffsetLeft?this.options.submenuOffsetLeft:0,parent:this.element,menuItems:t.subMenuItems.staticOptions||[],menuTitle:t.options.text,fade:!0,zIndex:2e3,position:this.options.submenuPosition?this.options.submenuPosition:"bottom"});e.select("span")[0];i.options.beforeShow=function(s){e.addClassName("menuAnchorSelected"),this.options.skipBubbling||this.buttonStateHover(e,t),t.subMenuItems.dynamicBuilder&&t.subMenuItems.dynamicBuilder(i)}.bind(this),i.options.beforeHide=function(i){e.removeClassName("menuAnchorSelected"),this.options.skipBubbling||this.buttonStateOut(e,t)}.bind(this),this.element.subMenus||(this.element.subMenus=$A([])),this.element.subMenus.push(i)},buildActionBarStylingMenu:function(){this.stylingMenu=new Proto.Menu({mouseClick:"right",selector:$(this.element.parentNode),anchor:"mouse",className:"menu desktop textual",topOffset:0,leftOffset:0,parent:this.element,menuItems:[],beforeShow:function(){this.stylingMenu.options.menuItems=this.listStyleMenuItems()}.bind(this),fade:!0,zIndex:2e3})},listStyleMenuItems:function(){var e=[],t=this;for(var i in this.options.styles)e.push({name:this.options.styles[i],alt:i,image:resolveImageSource(i==this.style?"button_ok.png":"transp.png",Action.prototype.__DEFAULT_ICON_PATH,16),isDefault:i==this.style,callback:function(){t.switchStyle(this)}});return e},switchStyle:function(e,t){var i=this.style;e&&("img"==e.nodeName.toLowerCase()&&(e=e.up("a")),i=e.getAttribute("title"),this.style=i);for(var s=this.element.up("div[@appClass]");void 0!=s.up("div[@appClass]");)s=s.up("div[@appClass]");var n=this.element.up("div.action_bar"),o=function(){for(var e in this.options.styles)e!=i&&this.element.parentNode.removeClassName(e);this.element.parentNode.addClassName(i),this.options.stylesImgSizes&&this.options.stylesImgSizes[i]&&this.element.select("img.actionbar_button_icon").each(function(e){e.src=resolveImageSource(e.getAttribute("data-action-src"),Action.prototype.__DEFAULT_ICON_PATH,this.options.stylesImgSizes[i])}.bind(this)),s.paneObject&&s.paneObject.resize(),app.user&&!t&&(app.user.setPreference("action_bar_style",i),app.user.savePreference("action_bar_style"))}.bind(this);this.options.stylesBarSizes&&this.options.stylesBarSizes[i]?new Effect.Morph(n,{style:"height:"+this.options.stylesBarSizes[i]+"px",duration:.5,afterFinish:o,afterUpdate:function(){n.select("div.separator").invoke("setStyle",{height:n.getHeight()-1+"px"}),s.paneObject&&s.paneObject.resize()}}):o()},buttonStateHover:function(e,t){e.hasClassName("disabled")||(e.hideTimeout&&clearTimeout(e.hideTimeout),new Effect.Morph(e.select('img[id="'+t.options.name+'_button_icon"]')[0],{style:"width:22px; height:22px;margin-top:3px;",duration:.08,transition:Effect.Transitions.sinoidal,afterFinish:function(){this.updateTitleSpan(e.select("span")[0],"big")}.bind(this)}))},buttonStateOut:function(e,t){e.hasClassName("disabled")||(e.hideTimeout=setTimeout(function(){new Effect.Morph(e.select('img[id="'+t.options.name+'_button_icon"]')[0],{style:"width:18px; height:18px;margin-top:8px;",duration:.2,transition:Effect.Transitions.sinoidal,afterFinish:function(){this.updateTitleSpan(e.select("span")[0],"small")}.bind(this)})}.bind(this),10))},updateTitleSpan:function(e,t){if(!e.orig_width&&"big"==t){var i=e.getWidth();e.setStyle({display:"block",width:i,overflow:"visible",padding:0}),e.orig_width=i}e.setStyle({fontSize:"big"==t?"11px":"9px"})},resize:function(){if(!this.options.skipCarousel){var e=0,t=$(this.outer).parentNode.getWidth();Prototype.Browser.IE&&(t=$(this.outer).getOffsetParent().getWidth()-4);var i=[];if(this.inner.select("a").each(function(e){e.visible()&&i.push(e)}),i.length)var s=i[i.length-1],e=s.cumulativeOffset()[0]+s.getWidth();if(e>t){var n=parseInt(this.element.up("div.action_bar").getHeight())-1,o=parseInt((n-10)/2);n-=o,this.prev.setStyle({height:n+"px",paddingTop:o+"px"}),this.next.setStyle({height:n+"px",paddingTop:o+"px"}),this.prev.show(),this.next.show(),this.outer.setStyle({width:t-this.prev.getWidth()-this.next.getWidth()+"px"})}else this.prev.hide(),this.next.hide(),this.carousel.first(),this.outer.setStyle({width:t+"px"})}},showElement:function(e){}}),Class.create("BackgroundManager",{queue:$A([]),initialize:function(e){this.actionManager=e,this.panel=new Element("div").addClassName("backgroundPanel"),Prototype.Browser.IE&&this.panel.setStyle({width:"35%"}),this.panel.hide(),this.working=!1,document.body.insert(this.panel)},queueAction:function(e,t,i){var s=new Hash;s.set("name",e),s.set("messageId",i),s.set("parameters",t),this.queue.push(s)},next:function(){if(this.queue.size()){if(!this.working){var e=this.queue[0];if("javascript_instruction"==e.get("name")&&e.get("parameters").get("callback")){var t=e.get("parameters").get("callback");this.updatePanelMessage(e.get("messageId")),this.queue.shift(),t(),this.working=!1,this.next()}else{var i=new Connexion;i.setMethod("POST"),i.setParameters(e.get("parameters")),i.addParameter("get_action",e.get("name")),i.onComplete=function(e){var t=e.responseXML;if(null==t||null==t.documentElement)return this.working=!1,void this.next();this.parseAnswer(e.responseXML),this.working=!1}.bind(this),i.sendAsync(),this.updatePanelMessage(e.get("messageId")),this.queue.shift(),this.working=!0}}}else this.finished()},updatePanelMessage:function(e){var t='<img src="'+resourcesFolder+'/images/loadingImage.gif" width="16" align="absmiddle">';this.panel.update(t+" "+e),this.panel.show()},parseAnswer:function(e){for(var t=e.documentElement.childNodes,i=0,s=0;s<t.length;s++)if("message"==t[s].tagName){if("SUCCESS"!=t[s].getAttribute("type"))return this.interruptOnError(t[s].firstChild.nodeValue)}else if("trigger_bg_action"==t[s].nodeName){var n=t[s].getAttribute("name"),o=t[s].getAttribute("messageId");i=parseInt(t[s].getAttribute("delay"));for(var a=new Hash,r=0;r<t[s].childNodes.length;r++){var l=t[s].childNodes[r];if("param"==l.tagName)a.set(l.getAttribute("name"),l.getAttribute("value"));else if("clientCallback"==l.tagName)var d=l.firstChild.nodeValue,h=new Function(d)}if("reload_node"==n){if(i)return void window.setTimeout(function(){app.fireContextRefresh(),this.next()}.bind(this),1e3*i);app.fireContextRefresh()}else"info_message"==n?this.updatePanelMessage(o):"javascript_instruction"==n&&h?(a.set("callback",h),this.queueAction("javascript_instruction",a,o)):this.queueAction(n,a,o)}this.working=!1,i?window.setTimeout(this.next.bind(this),1e3*i):this.next()},interruptOnError:function(e){this.queue.size()&&(this.queue=$A([])),this.panel.update(e),this.panel.insert(this.makeCloseLink()),this.working=!1},finished:function(){this.working=!1,this.panel.hide()},makeCloseLink:function(){return new Element("a",{href:"#"}).update("Close").observe("click",function(e){Event.stop(e),this.panel.hide()}.bind(this))},addStub:function(){this.queueAction("local_to_remote",new Hash,"Stubing a 10s bg action")}}),Class.create("DataModel",{_currentRep:void 0,_bEmpty:void 0,_bUnique:!1,_bFile:!1,_bDir:!1,_isRecycle:!1,_pendingContextPath:null,_pendingSelection:null,_selectionSource:{},_rootNode:null,_globalEvents:!0,initialize:function(e){this._currentRep="/",this._selectedNodes=$A([]),this._bEmpty=!0,e&&(this._globalEvents=!1)},setManifestNodeProvider:function(e){this._iManifestNodeProvider=e},getManifestNodeProvider:function(){return this._iManifestNodeProvider},requireContextChange:function(e,t){if(null!=e){var i=e.getPath();if(""!=i&&"/"!=i||e==this._rootNode||(e=this._rootNode),e.getMetadata().get("paginationData")&&e.getMetadata().get("paginationData").get("new_page")&&e.getMetadata().get("paginationData").get("new_page")!=e.getMetadata().get("paginationData").get("current")){var s=e.getMetadata().get("paginationData").get("new_page");t=!0}if(e!=this._rootNode&&(!e.getParent()||e.fake)){var n=[];if(e=e.findInArbo(this._rootNode,n),n.length){var o=n.shift();return o.observeOnce("first_load",function(t){this.requireContextChange(e)}.bind(this)),o.observeOnce("error",function(e){app.displayMessage("ERROR",e),o.notify("node_removed");var t=o.getParent();t.removeChild(o),delete o,this.requireContextChange(t)}.bind(this)),this.publish("context_loading"),void o.load(this._iManifestNodeProvider)}}e.observeOnce("loaded",function(){if(this.setContextNode(e,!0),this.publish("context_loaded"),this.getPendingSelection()){var t=e.getPath()+("/"==e.getPath()?"":"/")+this.getPendingSelection(),i=e.findChildByPath(t);if(i)this.setSelectedNodes([i],this);else if(e.getMetadata().get("paginationData")&&arguments.length<3){var s,n=e.getMetadata().get("current");if(this.loadPathInfoSync(t,function(e){s=e.getMetadata().get("page_position")}),s&&s!=n)return e.getMetadata().get("paginationData").set("new_page",s),void this.requireContextChange(e,!0,!0)}this.clearPendingSelection()}}.bind(this)),e.observeOnce("error",function(e){app.displayMessage("ERROR",e),this.publish("context_loaded")}.bind(this)),this.publish("context_loading");try{t?(s&&e.getMetadata().get("paginationData").set("current",s),e.reload(this._iManifestNodeProvider)):e.load(this._iManifestNodeProvider)}catch(e){this.publish("context_loaded")}}},requireNodeReload:function(e){Object.isString(e)&&(e=new ManifestNode(e));var t=null;if(this._selectedNodes.length){var i=!1;this._selectedNodes.each(function(t){t.getPath()==e.getPath()&&(i=t)}),i&&(this._selectedNodes=this._selectedNodes.without(i),this.publish("selection_changed",this),t=function(e){this._selectedNodes.push(e),this._selectionSource={},this.publish("selection_changed",this)}.bind(this))}this._iManifestNodeProvider.refreshNodeAndReplace(e,t)},loadPathInfoSync:function(e,t){this._iManifestNodeProvider.loadLeafNodeSync(new ManifestNode(e),t)},setRootNode:function(e){this._rootNode=e,this._rootNode.setRoot(),this._rootNode.observe("child_added",function(e){}),this.publish("root_node_changed",this._rootNode),this.setContextNode(this._rootNode)},getRootNode:function(){return this._rootNode},setContextNode:function(e,t){this._contextNode&&this._contextNode==e&&this._currentRep==e.getPath()&&!t||(this._contextNode=e,this._currentRep=e.getPath(),this.publish("context_changed",e))},publish:function(e,t){var i=$A(arguments).slice(1);this._globalEvents?(i.unshift("app:"+e),document.fire.apply(document,i)):(i.length?i=[e,{memo:i[0]}]:i.unshift(e),this.notify.apply(this,i))},getContextNode:function(){return this._contextNode},multipleNodesReload:function(e){e=$A(e);for(var t=0;t<e.length;t++){var i,s=e[t];i=Object.isString(s)?(i=new ManifestNode(s)).getPath()==this._rootNode.getPath()?this._rootNode:i.findInArbo(this._rootNode,[]):s,e[t]=i}var n=$A([]);e.sort(function(e,t){return e.isParentOf(t)?(n.push(t),-1):e.isChildOf(t)?(n.push(e),1):0}),n.each(function(t){e=e.without(t)}),e.each(this.queueNodeReload.bind(this)),this.nextNodeReloader()},queueNodeReload:function(e){this.queue||(this.queue=[]),e&&this.queue.push(e)},nextNodeReloader:function(){if(this.queue.length){var e=this.queue.shift(),t=this.nextNodeReloader.bind(this);e.observeOnce("loaded",t),e.observeOnce("error",t),e==this._contextNode||e.isParentOf(this._contextNode)?this.requireContextChange(e,!0):e.reload(this._iManifestNodeProvider)}else window.setTimeout(function(){this.publish("context_changed",this._contextNode)}.bind(this),200)},setPendingSelection:function(e){this._pendingSelection=e},getPendingSelection:function(){return this._pendingSelection},clearPendingSelection:function(){this._pendingSelection=null},setSelectedNodes:function(e,t){if(this._selectionSource=t||{},e=$A(e).without(this._rootNode),this._selectedNodes=$A(e),this._bEmpty=!e||!e.length,this._bFile=this._bDir=this._isRecycle=!1,!this._bEmpty){this._bUnique=1==e.length;for(var i=0;i<e.length;i++){var s=e[i];s.isLeaf()?this._bFile=!0:this._bDir=!0,s.isRecycle()&&(this._isRecycle=!0)}}this.publish("selection_changed",this)},getSelectedNodes:function(){return this._selectedNodes},getSelectionSource:function(){return this._selectionSource},setSelectionSource:function(e){this._selectionSource=e},getSelectedItems:function(){throw new Error("Deprecated : use getSelectedNodes() instead")},selectAll:function(){this.setSelectedNodes(this._contextNode.getChildren(),"dataModel")},isEmpty:function(){return!this._selectedNodes||0==this._selectedNodes.length},hasReadOnly:function(){var e=!1;return this._selectedNodes.each(function(t){if(t.hasMetadataInBranch("readonly","true"))throw e=!0,$break}),e},isUnique:function(){return this._bUnique},hasFile:function(){return this._bFile},hasDir:function(){return this._bDir},isRecycle:function(){return this._isRecycle},getCurrentRep:function(){return this._currentRep},isMultiple:function(){return!!(this._selectedNodes&&this._selectedNodes.length>1)},hasMime:function(e){if(1==e.length&&"*"==e[0])return!0;var t=!1;return e.each(function(e){t||(t=this._selectedNodes.any(function(t){return getMimeType(t)==e}))}.bind(this)),t},getFileNames:function(e){if(!this._selectedNodes.length)return alert("Please select a file!"),!1;var t=new Array(this._selectedNodes.length);for(i=0;i<this._selectedNodes.length;i++)t[i]=this._selectedNodes[i].getPath();return e?t.join(e):t},getContextFileNames:function(e){var t=this._contextNode.getChildren();if(!t.length)return!1;var s=$A([]);for(i=0;i<t.length;i++)s.push(getBaseName(t[i].getPath()));return e?s.join(e):s},fileNameExists:function(e,t){if(t){var i=this._contextNode.getPath()+"/"+e;return this._contextNode.getChildren().detect(function(e){return e.getPath()==i})}var s=!1;return this.loadPathInfoSync(this._contextNode.getPath()+"/"+e,function(e){s=!0}),s},applyCheckHook:function(e){"use strict";var t=new Connexion;t.setParameters(new Hash({get_action:"apply_check_hook",file:e.getPath(),hook_name:"before_create",hook_arg:e.getMetadata().get("filesize")||-1}));var i;if(t.onComplete=function(e){i=app.actionBar.parseXmlMessage(e.responseXML)},t.sendSync(),!1===i)throw new Error("Check failed"+error)},getUniqueFileName:function(){return this.getFileNames().length?this.getFileNames()[0]:null},getUniqueNode:function(){return this._selectedNodes.length?this._selectedNodes[0]:null},getUniqueItem:function(){throw new Error("getUniqueItem is deprecated, use getUniqueNode instead!")},getItem:function(e){throw new Error("getItem is deprecated, use getNode instead!")},getNode:function(e){return this._selectedNodes[e]},updateFormOrUrl:function(e,t){if(e&&$(e).getElementsBySelector("input").each(function(e){-1==e.name.indexOf("file_")&&"file"!=e.name||(e.value="")}),e&&e.rep&&(e.rep.value=this._currentRep),t+="&dir="+encodeURIComponent(this._currentRep),this.isEmpty())return t;var i=this.getFileNames();if(this.isUnique())t+="&file="+encodeURIComponent(i[0]),e&&this._addHiddenField(e,"file",i[0]);else for(var s=0;s<i.length;s++)t+="&file_"+s+"="+encodeURIComponent(i[s]),e&&this._addHiddenField(e,"file_"+s,i[s]);return t},_addHiddenField:function(e,t,i){if(e[t])e[t].value=i;else{var s=document.createElement("input");s.type="hidden",s.name=t,s.value=i,e.appendChild(s)}}}),Class.create("HeaderResizer",{initialize:function(e,t){this.element=e,this.options=Object.extend({initSizes:null,initSizesType:"percent",cellSelector:"div.header_cell",handleSelector:"div.resizer",body:$("tBody"),bodyRowSelector:"tr",bodyCellSelector:"td",bodyIsMaster:!1,handleWidth:3,headerData:null,useCSS3:!1,scrollerWidth:18},t||{}),this.options.headerData&&this.generateHeader(),this.options.useCSS3=this.detectCSS3(),this.mainSize=this.element.getWidth(),this.cells=this.element.select(this.options.cellSelector),this.cells.each(function(e){disableTextSelection(e)}),this.element.select(this.options.handleSelector).each(function(e){this.initDraggable(e)}.bind(this));var i;i=this.options.initSizes?"percent"==this.options.initSizesType?this.computePercentSizes(this.options.initSizes,100):this.options.initSizes:this.computeEqualSizes(),this.resizeHeaders(i),this.observe("drag_resize",function(e){this.refreshBody()}.bind(this))},generateHeader:function(){var e=this.options.headerData;this.element.addClassName("header_resizer");var t,i=0;e.each(function(s){this.element.insert('<div class="header_cell"><div class="header_label">'+s.label+"</div></div>"),s!=e.last()&&this.element.insert('<div class="resizer">&nbsp;</div>'),s.size&&(t||(t=$A()),t[i]=s.size),i++}.bind(this)),t&&t.length&&(this.options.initSizes=t)},computeEqualSizes:function(){for(var e=1/this.cells.length,t=$A(),i=this.getInnerWidth()-(this.cells.length-1)*this.options.handleWidth,s=Math.floor(i*e),n=0;n<this.cells.length;n++)t[n]=s;return this.log("Compute equal size on "+this.getInnerWidth()+" result:"+t.join(",")),t},computePercentSizes:function(e,t){var i=$A(),s=this.getInnerWidth();return e.each(function(e){i.push(Math.round(e*s/t))}),i},getCurrentSizes:function(e){if(!e)return this.currentSizes;for(var t=this.getInnerWidth(),i=$A(),s=0;s<this.currentSizes.length;s++)i[s]=Math.floor(this.currentSizes[s]/t*100);return i},resize:function(e){this.mainSize=e,this.element.setStyle({width:this.mainSize+"px"}),this.checkBodyScroll(),this.resizeHeaders(),this.log("Resize:"+e),this.timer&&window.clearTimeout(this.timer),this.timer=window.setTimeout(this.refreshBody.bind(this),50)},resizeHeaders:function(e){var t=this.getInnerWidth();if(t&&(!e&&this.currentInner&&t!=this.currentInner&&(e=this.computePercentSizes(this.currentSizes,this.currentInner)),e)){this.log("Inner Width:"+t+"/"+this.element.offsetWidth);for(var i=0,s=0;s<this.cells.length;s++)e[s]||(e[s]=Math.floor((t-(this.verticalScrollerMargin||0)-i)/(this.cells.length-s))),i+=e[s]+this.options.handleWidth,s<this.cells.length-1&&i<t?this.cells[s].setStyle({width:e[s]-(Prototype.Browser.IE?1:0)+"px"}):(i-=e[s]+this.options.handleWidth,e[s]=Math.floor((t-(this.verticalScrollerMargin||0)-i)/(this.cells.length-s)),this.cells[s].setStyle({width:e[s]+"px"}),Position.cumulativeOffset(this.cells[s])[1]>Position.cumulativeOffset(this.element)[1]+10&&(e[s]=t-i-1-(this.verticalScrollerMargin||0),this.cells[s].setStyle({width:e[s]+"px"})),i+=e[s]+this.options.handleWidth,s==this.cells.length-1&&i<t-(this.verticalScrollerMargin||0)&&(e[s]=t-(this.verticalScrollerMargin||0)-i,this.cells[s].setStyle({width:e[s]+"px"})));this.currentSizes=e,this.log(this.currentSizes.join(",")),this.currentInner=t,this.notify("headers_resize")}},initDraggable:function(e){new Draggable(e,{constraint:"horizontal",snap:function(e,t,i){var s=Element.cumulativeOffset(i.element).left-i.originalLeft;return(e<0&&-s>i._initLeftCell-10||s<0&&-s>i._initLeftCell)&&(e=0),e>0&&s>i._initRightCell-10&&(e=0),[function(e,t,i){return e>i?i:e<t?t:e}(e,-i._initLeftCell,i._initRightCell),t]},onDrag:function(e){for(var t=Element.cumulativeOffset(e.element).left,i=t-e.originalLeft,s=$A(),n=0;n<this.cells.length;n++)this.cells[n]==e.previous?s[n]=e._initLeftCell+i:s[n]=this.currentSizes[n]-(n==this.cells.length-1?i:0);this.log(s),e.element.setStyle({left:0}),this.resizeHeaders(s),e._ghost&&(e._ghost.getOffsetParent()&&(t-=e._ghost.getOffsetParent().cumulativeOffset()[0]+2),e._ghost.setStyle({left:t-(Prototype.Browser.IE?0:this.options.body.scrollLeft)+"px"}))}.bind(this),onStart:function(e){e.element.addClassName("dragging"),e.originalLeft=Element.cumulativeOffset(e.element).left,e.previous=e.element.previous(),e.next=e.element.next(),e._initLeftCell=e.previous.getWidth(),e._initRightCell=e.next.getWidth(),e._ghost=this.createResizeGhost(),e._ghost&&e._ghost.setStyle({left:e.originalLeft+"px"})}.bind(this),onEnd:function(e){e.element.setStyle({left:0}),e.element.removeClassName("dragging"),e._ghost&&e._ghost.remove();for(var t=0;t<this.cells.length;t++)this.cells[t]==e.previous&&(this.currentSizes[t]=e.previous.getWidth()),this.cells[t]==e.next&&(this.currentSizes[t]=e.next.getWidth());this.notify("drag_resize")}.bind(this)})},createResizeGhost:function(){if(!this.options.body)return null;var e=new Element("div",{className:"resizeGhost"});this.options.body.insert({before:e});var t=this.getInnerHeight(this.options.body)-(this.options.body.scrollWidth>this.options.body.getWidth()?16:0);return e.setStyle({height:t+"px",left:0}),e},refreshBody:function(){var e=this.getCurrentSizes();if(e){var t=this.options.useCSS3,i=this.createStyleSheet();if(Prototype.Browser.IE)return this.options.body.select(this.options.bodyRowSelector).each(function(t){for(var i=t.select(this.options.bodyCellSelector),s=0;s<i.length;s++)e[s]&&this.setGridCellWidth(i[s],e[s])}.bind(this)),void this.checkBodyScroll();for(var s=0;s<e.length;s++){var n;n=t?"#"+this.options.body.id+" td:nth-child("+(s+1)+")":"#"+this.options.body.id+" td.resizer_"+s;var o="width:"+(e[s]+(Prototype.Browser.IE?10:0))+"px !important;";this.addStyleRule(i,n,o),n=t?"#"+this.options.body.id+" td:nth-child("+(s+1)+") .text_label":"#"+this.options.body.id+" td.resizer_"+s+" .text_label",o="width:"+(e[s]-(Prototype.Browser.IE?0:(this.options.headerData[s]?this.options.headerData[s].leftPadding:0)+2))+"px !important;",this.addStyleRule(i,n,o)}this.checkBodyScroll()}},addStyleRule:function(e,t,i){Prototype.Browser.IE?e.addRule(t,i):e.insertRule(t+"{"+i+"}",e.cssRules.length)},createStyleSheet:function(){var e;if(Prototype.Browser.IE){return}else{var t=$("resizer_css-"+this.options.body.id);t&&t.remove(),t=new Element("style",{type:"text/css",id:"resizer_css-"+this.options.body.id}),$$("head")[0].insert(t),e=t.sheet}return e},removeStyleSheet:function(){if(Prototype.Browser.IE){return}else{var e=$("resizer_css-"+this.options.body.id);e&&e.remove()}},detectCSS3:function(){if(Prototype.Browser.IE)return!1;if(void 0!=window.resizer_csstest)return window.resizer_csstest;var e=this.createStyleSheet(),t=!1;try{this.addStyleRule(e,this.options.cellSelector+":nth-child(1)","color:rgb(0, 0, 15);");var i=this.element.down(this.options.cellSelector);i&&"rgb(0, 0, 15)"==i.getStyle("color")&&(t=!0),this.removeStyleSheet()}catch(e){}return window.resizer_csstest=t,t},setGridCellWidth:function(e,t,i){var s=e.down(".text_label");if(s){var n;n=t?parseInt(t):e.getWidth()-3;var o=1+(parseInt(s.getStyle("paddingLeft"))||0)+(i||0);s.siblings().each(function(e){o+=e.getWidth()}),s.setStyle({width:n-o+"px"}),t&&e.setStyle({width:n+"px"})}else t&&e.setStyle({width:t+"px"})},checkBodyScroll:function(){var e=this.options.body;e.scrollHeight>e.getHeight()?this.verticalScrollerMargin=this.options.scrollerWidth:e.scrollHeight<=e.getHeight()&&(this.verticalScrollerMargin=0),this.options.bodyIsMaster&&(e.scrollWidth>e.getWidth()?(this.scroller?this.scroller.setStyle({width:this.mainSize+"px"}):(this.element._origWidth=this.element.getWidth(),this.scroller=new Element("div",{style:"overflow:hidden;"}),this.scroller.setStyle({width:this.element._origWidth+"px"}),$(this.element.parentNode).insert({top:this.scroller}),this.scroller.insert(this.element),this.scroller.observer=function(){this.log(e.scrollWidth),this.scroller.scrollLeft=e.scrollLeft}.bind(this),e.observe("scroll",this.scroller.observer)),this.element.setStyle({width:e.scrollWidth+"px"}),this.verticalScrollerMargin=0,this.resizeHeaders()):e.scrollWidth<=e.getWidth()&&this.scroller&&(this.element.setStyle({width:this.element._origWidth+"px"}),$(this.scroller.parentNode)&&$(this.scroller.parentNode).insert({top:this.element}),e.stopObserving("scroll",this.scroller.observer),$(this.scroller.parentNode)&&this.scroller.remove(),this.scroller=null,this.resizeHeaders()))},getInnerWidth:function(){var e=parseInt(this.element.getStyle("borderLeftWidth"))||0,t=parseInt(this.element.getStyle("borderRightWidth"))||0;return this.element.getWidth()-e-t},getInnerHeight:function(e){return e.getHeight()-(parseInt(e.getStyle("borderTopWidth"))||0)-(parseInt(e.getStyle("borderBottomWidth"))||0)},log:function(e){}}),Class.create("PreviewFactory",{sequencialLoading:!0,imagesHash:$H(),_crtImageIndex:0,_thumbSize:64,initialize:function(e){this.imagesHash=$H()},clear:function(){this.imagesHash=$H()},generateBasePreview:function(e){return AbstractEditor.prototype.getPreview(e)},setThumbSize:function(e){this._thumbSize=e},enrichBasePreview:function(e,t){var i=app.findEditorsForMime(e.isLeaf()?e.getMime():"mime_folder",!0);if(i&&i.length){this._crtImageIndex++;var s=this._crtImageIndex;t.IMAGE_ELEMENT.writeAttribute("data-is_loaded","false"),t.IMAGE_ELEMENT.writeAttribute("id","image_"+s);var n=this._crtImageIndex;app.loadEditorResources(i[0].resourcesManager);var o=Class.getByName(i[0].editorClass);if(o){var a={index:"image_"+n,node:e,editorClass:o,mainObject:t};this.sequencialLoading?this.imagesHash.set(a.index,a):this.loadImage(a)}}},loadNextImage:function(){if(this.imagesHash&&this.imagesHash.size()){if(this.loading)return;var e=this.imagesHash.unset(this.imagesHash.keys()[0]);e.PFacLoader=new Image,e.PFacLoader.onerror=this.loadNextImage.bind(this);var t=function(){var t=e.mainObject.IMAGE_ELEMENT||$(e.index);if(null!=t&&null!=e.PFacLoader){var i=e.editorClass.prototype.getPreview(e.node);i.setAttribute("data-is_loaded","true"),t.parentNode.replaceChild(i,t),e.mainObject.IMAGE_ELEMENT=i,this.resizeThumbnail(i),e.PFacLoader=null,this.loadNextImage()}}.bind(this);e.PFacLoader.src=e.editorClass.prototype.getThumbnailSource(e.node),e.PFacLoader.readyState&&"complete"==e.PFacLoader.readyState?t():e.PFacLoader.onload=t}},loadImage:function(e){var t=new Image;t.editorClass=e.editorClass,t.src=t.editorClass.prototype.getThumbnailSource(e.node);var i=function(){var i=e.mainObject.IMAGE_ELEMENT||$(e.index);if(null!=i&&null!=t){var s=t.editorClass.prototype.getPreview(e.node);s.setAttribute("data-is_loaded","true"),i.parentNode.replaceChild(s,i),e.mainObject.IMAGE_ELEMENT=s,this.resizeThumbnail(s),delete t}}.bind(this);t.readyState&&"complete"==t.readyState?i():t.onload=i},resizeThumbnail:function(e){var t,i,s,n,o=this._thumbSize;e.resizePreviewElement&&"true"==e.getAttribute("data-is_loaded")?e.resizePreviewElement({width:o,height:o,margin:5}):(o>=64?(t=i=64,n=o+10-i-(s=parseInt((o-64)/2)+5)-1):(t=i=o,s=n=5),e.setStyle({width:t+"px",height:i+"px",marginTop:s+"px",marginBottom:n+"px"}))}}),Class.create("FilesList",SelectableElements,{__implements:["IAppWidget","IFocusable","IContextMenuable","IActionProvider"],__allObservers:null,__currentInstanceIndex:1,_dataModel:null,_doubleClickListener:null,_previewFactory:null,_detailThumbSize:28,_inlineToolbarOptions:null,_instanciatedToolbars:null,initialize:function($super,e,t){$super(null,!0),$(e).paneObject=this,this.htmlElement=$(e),this._previewFactory=new PreviewFactory,this._previewFactory.sequencialLoading=!0,this.__allObservers=$A(),"string"==typeof t?(this.options={},this._displayMode=t):(this.options=t,this.options.displayMode?this._displayMode=this.options.displayMode:this._displayMode="detail",this.options.dataModel&&(this._dataModel=this.options.dataModel),this.options.doubleClickListener&&(this._doubleClickListener=this.options.doubleClickListener),this.options.detailThumbSize&&(this._detailThumbSize=this.options.detailThumbSize),this.options.inlineToolbarOptions&&(this._inlineToolbarOptions=this.options.inlineToolbarOptions,this._instanciatedToolbars=$A())),FilesList.staticIndex?FilesList.staticIndex++:FilesList.staticIndex=1,this.__currentInstanceIndex=FilesList.staticIndex;var i=function(){app&&app.user&&(disp=app.user.getPreference("display"),!disp||"thumb"!=disp&&"list"!=disp&&"detail"!=disp||disp!=this._displayMode&&this.switchDisplayMode(disp),this._thumbSize=parseInt(app.user.getPreference("thumb_size")),this.slider&&(this.slider.setValue(this._thumbSize),this.resizeThumbnails()))}.bind(this);this._registerObserver(document,"app:user_logged",i);var s=this.contextObserver.bind(this),n=this.childAddedToContext.bind(this),o=this.setOnLoad.bind(this),a=this.removeOnLoad.bind(this),r=function(e){var t=e.memo,i=this.crtContext;if(i&&(i.stopObserving("loaded",a),i.stopObserving("loading",o),i.stopObserving("child_added",n)),this.crtContext=t,this.crtContext.isLoaded())this.contextObserver(e);else{var r=this;this.crtContext.observeOnce("loaded",function(){r.crtContext=this,s()})}this.crtContext.observe("loaded",a),this.crtContext.observe("loading",o),this.crtContext.observe("child_added",n)}.bind(this),l=function(e){if("FilesList"==e.memo.className){this.parseComponentConfig(e.memo.classConfig.get("all"))&&this.initGUI()}}.bind(this),d=function(e){if(null!=e.memo._selectionSource&&e.memo._selectionSource!=this){var t=this._dataModel?this._dataModel:app.getContextHolder(),i=this._fireChange;this._fireChange=!1,this.setSelectedNodes(t.getSelectedNodes()),this._fireChange=i}}.bind(this);this._dataModel?(this._registerObserver(this._dataModel,"context_changed",r,!0),this._registerObserver(this._dataModel,"context_loading",o,!0),this._registerObserver(this._dataModel,"component_config_changed",l,!0),this._registerObserver(this._dataModel,"selection_changed",d,!0)):(this._registerObserver(document,"app:context_changed",r,!1),this._registerObserver(document,"app:context_loading",o,!1),this._registerObserver(document,"app:component_config_changed",l,!1),this._registerObserver(document,"app:selection_changed",d,!1)),this._thumbSize=64,this._crtImageIndex=0,this._pendingFile=null,this.allDraggables=new Array,this.allDroppables=new Array,this.gridStyle="file",this.paginationData=null,this.even=!0,this.hiddenColumns=$A([]),this.options.columnsDef?(this.columnsDef=this.options.columnsDef,this.defaultSortTypes=this.options.defaultSortTypes,this.options.columnsTemplate&&(this.columnsTemplate=this.options.columnsTemplate)):(this.columnsDef=$A([]),this.columnsDef.push({messageId:1,attributeName:"APP_label"}),this.columnsDef.push({messageId:2,attributeName:"filesize"}),this.columnsDef.push({messageId:3,attributeName:"mimestring"}),this.columnsDef.push({messageId:4,attributeName:"modiftime"}),this.defaultSortTypes=["StringDirFile","NumberKo","String","MyDate"]),this._oSortTypes=this.defaultSortTypes,this.initGUI();var h=this.keydown.bind(this),c=this.setOnLoad.bind(this);this._registerObserver(document,"keydown",h),this._dataModel||this._registerObserver(document,"app:trigger_repository_switch",c)},_registerObserver:function(e,t,i,s){s?e.observe(t,i):Event.observe(e,t,i),this.__allObservers.push({object:e,event:t,handler:i,objectEvent:s})},_clearObservers:function(){this.__allObservers.each(function(e){e.objectEvent?e.object.stopObserving(e.event,e.handler):Event.stopObserving(e.object,e.event,e.handler)}),this.observer&&this.stopObserving("resize",this.observer),this.scrollSizeObserver&&this.stopObserving("resize",this.scrollSizeObserver)},getDomNode:function(){return this.htmlElement},destroy:function(){if(this._clearObservers(),window[this.htmlElement.id])try{delete window[this.htmlElement.id]}catch(e){}this.htmlElement=null},getVisibleColumns:function(){var e=$A([]);return this.columnsDef.each(function(t){this.hiddenColumns.include(t.attributeName)||e.push(t)}.bind(this)),e},getVisibleSortTypes:function(){for(var e=$A([]),t=0;t<this.columnsDef.length;t++)this.hiddenColumns.include(this.columnsDef[t].attributeName)||e.push(this.columnsDef[t].sortType);return e},setColumnVisible:function(e,t){var i=!1;if(t&&this.hiddenColumns.include(e)&&(this.hiddenColumns=this.hiddenColumns.without(e),i=!0),t||this.hiddenColumns.include(e)||(this.hiddenColumns.push(e),i=!0),i){if(app&&app.user){var s=app.user.getPreference("columns_visibility",!0)||{};(s=new Hash(s)).set(app.user.getActiveRepository(),this.hiddenColumns),app.user.setPreference("columns_visibility",s,!0)}this.initGUI(),this.empty(!0),this.fill(this.crtContext),app&&app.user&&app.user.savePreference("columns_visibility")}},contextObserver:function(e){this.crtContext&&(this.empty(),this.fill(this.crtContext),this.removeOnLoad())},extractComponentConfig:function(){return{gridStyle:{value:this.gridStyle},_displayMode:{value:this._displayMode},columnsTemplate:{value:this.columnsTemplate},columnsDef:{value:this.columnsDef?this.columnsDef.clone():this.columnsDef},oSortTypes:{value:this._oSortTypes?this._oSortTypes.clone():this._oSortTypes},_thumbSize:{value:this._thumbSize},_fixedThumbSize:{value:this._fixedThumbSize}}},applyComponentConfig:function(e){for(var t in e)this[t]=e[t].value},parseComponentConfig:function(e){e.getAttribute("local")&&!this.restoreConfig&&(this.restoreConfig=this.extractComponentConfig());var t=!1;this.columnsTemplate=!1;var i=XPathSelectSingleNode(e,"columns");if(i){if(i.getAttribute("switchGridMode")&&(this.gridStyle=i.getAttribute("switchGridMode"),t=!0),i.getAttribute("switchDisplayMode")){var s=i.getAttribute("switchDisplayMode");this._fullview=!1,"full"==s&&(this._fullview=!0,s="list"),s!=this._displayMode&&(this.switchDisplayMode(s),t=!0)}i.getAttribute("template_name")&&(this.columnsTemplate=i.getAttribute("template_name"));var n=XPathSelectNodes(i,"column"),o=XPathSelectNodes(i,"additional_column");if(n.length){var a=$A([]),r=$A([]);n.concat(o)}else{var a=this.columnsDef,r=this._oSortTypes;n=o}n.each(function(e){var t={};$A(e.attributes).each(function(i){t[i.nodeName]=i.nodeValue,"sortType"==i.nodeName?r.push(i.nodeValue):"defaultVisibilty"==i.nodeName&&"hidden"==i.nodeValue&&this.hiddenColumns.push(e.getAttribute("attributeName"))}.bind(this)),a.push(t)}.bind(this)),a.size()&&(this.columnsDef=a,this._oSortTypes=r,"list"==this._displayMode&&(t=!0))}var l=XPathSelectNodes(e,"property");if(l.length)for(var d=0;d<l.length;d++){var h=l[d];if("thumbSize"==h.getAttribute("name"))this._thumbSize=parseInt(h.getAttribute("value")),t=!0;else if("fixedThumbSize"==h.getAttribute("name"))this._fixedThumbSize=parseInt(h.getAttribute("value")),t=!0;else if("displayMode"==h.getAttribute("name")){var c=h.getAttribute("value");app&&app.user&&app.user.getPreference("display")||(this._displayMode=c,t=!0)}else if("detailThumbSize"==h.getAttribute("name")){var u=parseInt(h.getAttribute("value"));this._detailThumbSize=isNaN(u)?this._detailThumbSize:u,t=!0}else"fixedDisplayMode"==h.getAttribute("name")&&(this.fixedDisplayMode=h.getAttribute("value"),t=!0)}return t},getActions:function(){var e=this,t={name:"multi_display",src:"view_icon.png",icon_class:"icon-th-large",text_id:150,title_id:151,text:MessageHash[150],title:MessageHash[151],hasAccessKey:!1,subMenu:!0,subMenuUpdateImage:!0,callback:function(){if(window.actionArguments){var t;t=Object.isString(window.actionArguments[0])?window.actionArguments[0]:window.actionArguments[0].command,e.switchDisplayMode(t)}},listeners:{init:function(){window.setTimeout(function(){var t=e.getDisplayMode(),i=this.subMenuItems.staticItems.detect(function(e){return e.command==t});this.notify("submenu_active",i)}.bind(window.listenerContext),500)}}},i=new Action(t,{selection:!1,dir:!0,actionBar:!0,actionBarGroup:"default",contextMenu:!1,infoPanel:!1},{},{},{staticItems:[{text:226,title:227,src:"view_text.png",icon_class:"icon-table",command:"list",hasAccessKey:!0,accessKey:"list_access_key"},{text:460,title:461,src:"view_list_details.png",icon_class:"icon-th-list",command:"detail",hasAccessKey:!0,accessKey:"detail_access_key"},{text:228,title:229,src:"view_icon.png",icon_class:"icon-th",command:"thumb",hasAccessKey:!0,accessKey:"thumbs_access_key"}]}),s={name:"thumb_size",src:"view_icon.png",icon_class:"icon-resize-full",text_id:452,title_id:453,text:MessageHash[452],title:MessageHash[453],hasAccessKey:!1,subMenu:!1,subMenuUpdateImage:!1,callback:function(){e.slider.show($("thumb_size_button"))},listeners:{init:function(){var t=window.app.actionBar;e.observe("switch-display-mode",function(i){"thumb"!=e._displayMode?t.getActionByName("thumb_size").disable():t.getActionByName("thumb_size").enable()}),window.setTimeout(function(){"thumb"!=e._displayMode?t.getActionByName("thumb_size").disable():t.getActionByName("thumb_size").enable()}.bind(window.listenerContext),800)}}},n=new Action(s,{selection:!1,dir:!0,actionBar:!0,actionBarGroup:"default",contextMenu:!1,infoPanel:!1},{},{}),o={name:"thumbs_sortby",src:"view_icon.png",icon_class:"icon-sort",text_id:450,title_id:451,text:MessageHash[450],title:MessageHash[451],hasAccessKey:!1,subMenu:!0,subMenuUpdateImage:!1,callback:function(){},listeners:{init:function(){var t=window.app.actionBar;e.observe("switch-display-mode",function(i){"list"==e._displayMode?t.getActionByName("thumbs_sortby").disable():t.getActionByName("thumbs_sortby").enable()}),window.setTimeout(function(){"list"==e._displayMode?t.getActionByName("thumbs_sortby").disable():t.getActionByName("thumbs_sortby").enable()}.bind(window.listenerContext),800)}}},a={dynamicBuilder:function(t){"use strict";var i=$A([]),s=0;e.columnsDef.each(function(e){var n=this._sortableTable.sortColumn==s;i.push({name:e.messageId?MessageHash[e.messageId]:e.messageString,alt:e.messageId?MessageHash[e.messageId]:e.messageString,image:resolveImageSource((n?"column-visible":"transp")+".png","/images/actions/ICON_SIZE",16),icon_class:n?"icon-caret-"+(this._sortableTable.descending?"down":"up"):"",isDefault:!1,callback:function(t){var i=this.columnsDef.indexOf(e);this._sortableTable.sortColumn==i&&(this._sortableTable.descending=!this._sortableTable.descending),this._sortableTable.sort(i,this._sortableTable.descending)}.bind(this)}),s++,t.options.menuItems=i,t.refreshList()}.bind(e))}},r=new Action(o,{selection:!1,dir:!0,actionBar:!0,actionBarGroup:"default",contextMenu:!1,infoPanel:!1},{},{},a);return $H({thumb_size:n,thumb_sort:r,multi_display:i})},initGUI:function(){if(this.observer&&this.stopObserving("resize",this.observer),this.scrollSizeObserver&&this.stopObserving("resize",this.scrollSizeObserver),this.slider&&this.slider.destroy(),"list"==this._displayMode){u="";if(app&&app.user&&app.user.getPreference("columns_visibility",!0)){(i=new Hash(app.user.getPreference("columns_visibility",!0))).get(app.user.getActiveRepository())?this.hiddenColumns=$A(i.get(app.user.getActiveRepository())):this.hiddenColumns=$A()}var e,t=this.getVisibleColumns();if(app&&app.user&&app.user.getPreference("columns_size",!0)){var i=new Hash(app.user.getPreference("columns_size",!0));this.columnsTemplate&&i.get(this.columnsTemplate)?e=new Hash(i.get(this.columnsTemplate)):i.get(app.user.getActiveRepository())&&(e=new Hash(i.get(app.user.getActiveRepository())))}for(var s=$A(),n=0;n<t.length;n++){var o=t[n],a=0;o.defaultWidth&&(a=o.defaultWidth.replace("%","")),("grid"!=this.gridStyle||this.columnsTemplate)&&e&&e.get(n)&&n<t.length-1&&(a=e.get(n)),o.fixedWidth&&(a=o.fixedWidth);var r=o.messageId?MessageHash[o.messageId]:o.messageString,l=this.options.cellPaddingCorrection||0;"APP_label"==o.attributeName&&(l=24),s.push({label:r,size:a,leftPadding:l})}u=(u='<div id="selectable_div_header-'+this.__currentInstanceIndex+'" class="sort-table"></div>')+'<div id="table_rows_container-'+this.__currentInstanceIndex+'" class="table_rows_container"><table id="selectable_div-'+this.__currentInstanceIndex+'" class="selectable_div sort-table" width="100%" cellspacing="0"><tbody></tbody></table></div>',this.htmlElement.update(u);var d=this.htmlElement.down("div.table_rows_container");d.setStyle("grid"!=this.gridStyle?{overflowX:"hidden",overflowY:this.options.replaceScroller?"hidden":"auto"}:{overflow:"auto"}),attachMobileScroll(d,"vertical");var h=d,c=this.htmlElement.down(".selectable_div");this.paginationData&&parseInt(this.paginationData.get("total"))>1&&d.insert({before:this.createPaginator()}),void 0==this.options.selectable||!0===this.options.selectable?this.initSelectableItems(c,!0,d,!0):this.initNonSelectableItems(c),this._headerResizer=new HeaderResizer(this.htmlElement.down("div.sort-table"),{headerData:s,body:d,initSizesType:"percent",bodyIsMaster:"grid"==this.gridStyle,scrollerWidth:this.options.replaceScroller?0:18,handleWidth:this.options.replaceScroller?1:3}),this._headerResizer.observe("drag_resize",function(){this.prefSaver&&window.clearTimeout(this.prefSaver),this.prefSaver=window.setTimeout(function(){if(app.user&&("grid"!=this.gridStyle||this.columnsTemplate)){var e=this._headerResizer.getCurrentSizes("percent"),t=app.user.getPreference("columns_size",!0);t=t?new Hash(t):new Hash,e.type="percent";var i=this.columnsTemplate?this.columnsTemplate:app.user.getActiveRepository();t.set(i,e),app.user.setPreference("columns_size",t,!0),app.user.savePreference("columns_size")}}.bind(this),2e3)}.bind(this)),this._sortableTable=new ExtSortable(c,this.getVisibleSortTypes(),this.htmlElement.down("div.sort-table")),this._sortableTable.onsort=function(){this.redistributeBackgrounds();var e=this.getCurrentContextNode();e.getMetadata().set("filesList.sortColumn",""+this._sortableTable.sortColumn),e.getMetadata().set("filesList.descending",this._sortableTable.descending)}.bind(this),this.paginationData&&this.paginationData.get("remote_order")&&parseInt(this.paginationData.get("total"))>1&&this._sortableTable.setPaginationBehaviour(function(e){this.reload(e)}.bind(this),this.columnsDef,this.paginationData.get("currentOrderCol")||-1,this.paginationData.get("currentOrderDir")),this.disableTextSelection(this.htmlElement.down("div.sort-table"),!0),this.disableTextSelection(d,!0),this.observer=function(e){if(fitHeightToBottom(d,this.htmlElement),Prototype.Browser.IE)this._headerResizer.resize(d.getWidth());else{var t=this.htmlElement.getWidth();t-=parseInt(this.htmlElement.getStyle("borderLeftWidth"))+parseInt(this.htmlElement.getStyle("borderRightWidth")),this._headerResizer.resize(t)}}.bind(this),this.observe("resize",this.observer),this.headerMenu&&(this.headerMenu.destroy(),delete this.headerMenu),this.headerMenu=new Proto.Menu({selector:"#selectable_div_header-"+this.__currentInstanceIndex,className:"menu desktop",menuItems:[],fade:!0,zIndex:2e3,beforeShow:function(){var e=$A([]);this.columnsDef.each(function(t){var i=!this.hiddenColumns.include(t.attributeName);e.push({name:t.messageId?MessageHash[t.messageId]:t.messageString,alt:t.messageId?MessageHash[t.messageId]:t.messageString,image:resolveImageSource((i?"column-visible":"transp")+".png","/images/actions/ICON_SIZE",16),isDefault:!1,callback:function(e){this.setColumnVisible(t.attributeName,!i)}.bind(this)})}.bind(this)),this.headerMenu.options.menuItems=e,this.headerMenu.refreshList()}.bind(this)})}else if("thumb"==this._displayMode||"detail"==this._displayMode){this.headerMenu&&(this.headerMenu.destroy(),delete this.headerMenu);var u='<div class="panelHeader"><div style="float:right;padding-right:5px;font-size:1px;height:16px;"><input type="image" height="16" width="16" src="'+resourcesFolder+'/images/actions/16/zoom-in.png" id="slider-input-1" style="border:0px;width:16px;height:16px;margin-top:0px;padding:0px;" value="64"/></div>'+MessageHash[126]+"</div>";u+='<div id="selectable_div-'+this.__currentInstanceIndex+'" class="selectable_div'+("detail"==this._displayMode?" detailed":"")+'" style="overflow:auto;">',this.htmlElement.update(u),attachMobileScroll(this.htmlElement.down(".selectable_div"),"vertical"),this.paginationData&&parseInt(this.paginationData.get("total"))>1&&this.htmlElement.down(".selectable_div").insert({before:this.createPaginator()});h=this.htmlElement.down(".selectable_div");this.observer=function(e){fitHeightToBottom(h,this.htmlElement)}.bind(this),this.observe("resize",this.observer),app&&app.user&&app.user.getPreference("thumb_size")&&(this._thumbSize=parseInt(app.user.getPreference("thumb_size"))),this._fixedThumbSize&&(this._thumbSize=parseInt(this._fixedThumbSize)),this._sortableTable=new ExtSortable(h,null,null),this._sortableTable.setMetaSortType(this.columnsDef),this._sortableTable.onsort=function(){var e=this.getCurrentContextNode();e.getMetadata().set("filesList.sortColumn",""+this._sortableTable.sortColumn),e.getMetadata().set("filesList.descending",this._sortableTable.descending)}.bind(this),this.headerMenu&&(this.headerMenu.destroy(),delete this.headerMenu),this.headerMenu=new Proto.Menu({selector:"#content_pane div.panelHeader",className:"menu desktop",menuItems:[],fade:!0,zIndex:2e3,beforeShow:function(){var e=$A([]),t=0;this.columnsDef.each(function(i){var s=this._sortableTable.sortColumn==t;e.push({name:i.messageId?MessageHash[i.messageId]:i.messageString,alt:i.messageId?MessageHash[i.messageId]:i.messageString,image:resolveImageSource((s?"column-visible":"transp")+".png","/images/actions/ICON_SIZE",16),isDefault:!1,callback:function(e){var t=this.columnsDef.indexOf(i);this._sortableTable.sortColumn==t&&(this._sortableTable.descending=!this._sortableTable.descending),this._sortableTable.sort(t,this._sortableTable.descending)}.bind(this)}),t++}.bind(this)),this.headerMenu.options.menuItems=e,this.headerMenu.refreshList()}.bind(this)}),this.slider=new SliderInput($("slider-input-1"),{range:$R(30,250),sliderValue:this._thumbSize,leftOffset:0,onSlide:function(e){this._thumbSize=e,this.resizeThumbnails()}.bind(this),onChange:function(e){this.options.replaceScroller&&this.notify("resize"),app&&app.user&&(app.user.setPreference("thumb_size",this._thumbSize),app.user.savePreference("thumb_size"))}.bind(this)}),this.disableTextSelection(h,!0),void 0==this.options.selectable||!0===this.options.selectable?this.initSelectableItems(h,!0,h,!0):this.initNonSelectableItems(h)}this.options.replaceScroller&&(this.scroller=new Element("div",{id:"filelist_scroller"+this.__currentInstanceIndex,className:"scroller_track",style:"right:0px"}),this.scroller.insert('<div id="filelist_scrollbar_handle'+this.__currentInstanceIndex+'" class="scroller_handle"></div>'),h.insert({before:this.scroller}),"grid"==this.gridStyle?h.setStyle({overflowY:"hidden",overflowX:"auto"}):h.setStyle({overflow:"hidden"}),this.scrollbar=new Control.ScrollBar(h,"filelist_scroller"+this.__currentInstanceIndex),this.scrollSizeObserver&&this.stopObserving("resize",this.scrollSizeObserver),this.scrollSizeObserver=function(){this.scroller.setStyle({height:parseInt(h.getHeight())+"px"}),this.scrollbar.recalculateLayout()}.bind(this),this.observe("resize",this.scrollSizeObserver)),this.notify("resize")},createPaginator:function(){var e=parseInt(this.paginationData.get("current")),t=parseInt(this.paginationData.get("total")),i=new Element("div").addClassName("paginator"),s=new Element("input",{value:e,className:"paginatorInput"});return i.update(MessageHash[331]),i.insert(s),i.insert("/"+t),e>1&&(i.insert({top:this.createPaginatorLink(e-1,"<b>&lt;</b>","Previous")}),e>2&&i.insert({top:this.createPaginatorLink(1,"<b>&lt;&lt;</b>","First")})),t>1&&e<t&&(i.insert({bottom:this.createPaginatorLink(e+1,"<b>&gt;</b>","Next")}),e<t-1&&i.insert({bottom:this.createPaginatorLink(t,"<b>&gt;&gt;</b>","Last")})),s.observe("focus",function(){this.blockNavigation=!0}.bind(this)),s.observe("blur",function(){this.blockNavigation=!1}.bind(this)),s.observe("keydown",function(i){if(i.keyCode==Event.KEY_RETURN){Event.stop(i);var n=parseInt(s.getValue());if(n==e)return;if(n<1||n>t)return app.displayMessage("ERROR",MessageHash[335]+" "+t),void s.setValue(e);var o=this.getCurrentContextNode();o.getMetadata().get("paginationData").set("new_page",n),app.updateContextData(o)}}.bind(this)),i},createPaginatorLink:function(e,t,i){var s=this.getCurrentContextNode();return new Element("a",{href:"#",style:"font-size:12px;padding:0 7px;",title:i}).update(t).observe("click",function(t){s.getMetadata().get("paginationData").set("new_page",e),app.updateContextData(s),Event.stop(t)}.bind(this))},setColumnsDef:function(e){this.columnsDef=e,"list"==this._displayMode&&this.initGUI()},getColumnsDef:function(){return this.columnsDef},setContextualMenu:function(e){this.protoMenu=e},getCurrentContextNode:function(){return this._dataModel?this._dataModel.getContextNode():app.getContextNode()},resize:function(){if(this.options.fit&&"height"==this.options.fit){var marginBottom=0;if(this.options.fitMarginBottom){var expr=this.options.fitMarginBottom;try{marginBottom=parseInt(eval(expr))}catch(e){}}fitHeightToBottom(this.htmlElement,this.options.fitParent?$(this.options.fitParent):null,expr)}this.htmlElement.down(".table_rows_container")&&Prototype.Browser.IE&&"file"==this.gridStyle&&this.htmlElement.down(".table_rows_container").setStyle({width:"100%"}),this.notify("resize"),document.fire("app:resize-FilesList-"+this.htmlElement.id,this.htmlElement.getDimensions())},setFocusBehaviour:function(){var e=function(){app&&app.focusOn(this)}.bind(this);this._registerObserver(this.htmlElement,"click",e)},showElement:function(e){},switchDisplayMode:function(e){if(this.options.fixedDisplayMode){if(this.options.fixedDisplayMode==this._displayMode)return this._displayMode;e=this.options.fixedDisplayMode}return this.removeCurrentLines(!0),this._displayMode=e||("thumb"==this._displayMode?"list":"thumb"),this.notify("switch-display-mode"),this.initGUI(),this.empty(!0),this.fill(this.getCurrentContextNode()),this.fireChange(),app&&app.user&&(app.user.setPreference("display",this._displayMode),app.user.savePreference("display")),this._displayMode},getDisplayMode:function(){return this._displayMode},initRowsBuffered:function(){this.iRBTimer&&(window.clearTimeout(this.iRBTimer),this.iRBTimer=null),this.iRBTimer=window.setTimeout(function(){this.initRows(),this.iRBTimer=null}.bind(this),200)},initRows:function(){this.notify("rows:willInitialize"),"thumb"==this._displayMode||"detail"==this._displayMode?(this.resizeThumbnails(),this.protoMenu&&this.protoMenu.addElements("#selectable_div-"+this.__currentInstanceIndex),window.setTimeout(function(){this._previewFactory.setThumbSize("detail"==this._displayMode?this._detailThumbSize:this._thumbSize),this._previewFactory.loadNextImage()}.bind(this),10)):(this.protoMenu&&this.protoMenu.addElements("#table_rows_container-"+this.__currentInstanceIndex),this._headerResizer&&this._headerResizer.resize(this.htmlElement.getWidth()-2)),this.protoMenu&&this.protoMenu.addElements(".draggable");for(var e=this.getItems(),t=0;t<e.length;t++)this.disableTextSelection(e[t],!0);this.notify("resize"),this.notify("rows:didInitialize")},reload:function(e){this.getCurrentContextNode()&&(this.empty(),this.fill(this.getCurrentContextNode()))},empty:function(e){this._previewFactory.clear(),this.protoMenu&&(this.protoMenu.removeElements(".draggable"),this.protoMenu.removeElements(".selectable_div"));for(n=0;n<AllDroppables.length;n++){var t=AllDroppables[n];this.isItem(t)&&(Droppables.remove(AllDroppables[n]),delete AllDroppables[n])}for(n=0;n<AllDraggables.length;n++)if(AllDraggables[n]&&AllDraggables[n].element&&this.isItem(AllDraggables[n].element)){if(AllDraggables[n].element.IMAGE_ELEMENT)try{AllDraggables[n].element.IMAGE_ELEMENT.destroyElement&&AllDraggables[n].element.IMAGE_ELEMENT.destroyElement(),AllDraggables[n].element.IMAGE_ELEMENT=null,delete AllDraggables[n].element.IMAGE_ELEMENT}catch(e){}Element.remove(AllDraggables[n].element)}AllDraggables=$A([]);for(var i=this.getSelectedItems(),s=this.setItemSelected.bind(this),n=0;n<i.length;n++)s(i[n],!1);this.removeCurrentLines(e)},makeItemRefreshObserver:function(e,t,i){return function(){if(t.node&&(t.REMOVE_OBS&&t.node.stopObserving("node_removed",t.REMOVE_OBS),t.REPLACE_OBS&&t.node.stopObserving("node_replaced",t.REPLACE_OBS)),t.parentNode){var s=i(e,t);t.insert({before:s}),t.remove(),s.node=e,this.initRows(),t.node=null,delete t,s.REPLACE_OBS=this.makeItemRefreshObserver(e,s,i),e.observe("node_replaced",s.REPLACE_OBS);var n=this._dataModel?this._dataModel:app.getContextHolder();if(n.getSelectedNodes()&&n.getSelectedNodes().length){var o=n.getSelectedNodes();this._selectedItems=[];for(var a=0;a<o.length;a++)Object.isString(o[a])?this.selectFile(o[a],!0):this.selectFile(o[a].getPath(),!0);this.hasFocus=!0}}}.bind(this)},makeItemRemovedObserver:function(e,t){return function(){try{if(this.loading)return;this.setItemSelected(t,!1),t.node&&(t.REMOVE_OBS&&t.node.stopObserving("node_removed",t.REMOVE_OBS),t.REPLACE_OBS&&t.node.stopObserving("node_replaced",t.REPLACE_OBS),t.parentNode||(t=this.htmlElement.down('[id="'+t.node.getPath()+'"]'))),t.node=null,new Effect.Fade(t,{afterFinish:function(){try{t.remove()}catch(e){}delete t,this.initRowsBuffered()}.bind(this),duration:.2})}catch(e){}}.bind(this)},childAddedToContext:function(e){if(!this.loading){var t=this.getRenderer(),i=this.crtContext.findChildByPath(e);if(i){var s;if(s=t(i),s.node=i,s.addClassName("nodeProvider"),s.REPLACE_OBS=this.makeItemRefreshObserver(i,s,t),s.REMOVE_OBS=this.makeItemRemovedObserver(i,s),i.observe("node_replaced",s.REPLACE_OBS),i.observe("node_removed",s.REMOVE_OBS),this._sortableTable){var n=this.crtContext.getMetadata().get("filesList.sortColumn");this.crtContext.getMetadata().get("filesList.descending");if(void 0==n&&(n=0),void 0!=n){n=parseInt(n);var o=this._sortableTable.getSortFunction(this._sortableTable.getSortType(n),n),a=this._sortableTable.getCache(this._sortableTable.getSortType(n),n);a.sort(o);for(var r=0;r<a.length;r++)if(a[r].element==s){if(0==r)$(s.parentNode).insert({top:s});else{if(a[r-1].element.node.getPath()==s.node.getPath()){$(s.parentNode).remove(s);break}a[r-1].element.insert({after:s})}break}this._sortableTable.destroyCache(a)}}this.initRows()}}},getRenderer:function(){return"thumb"==this._displayMode?this.nodeToDiv.bind(this):"detail"==this._displayMode?this.nodeToLargeDiv.bind(this):"list"==this._displayMode?this.nodeToTableRow.bind(this):void 0},fill:function(e){var t=!1;this.gridStyle="file",this.even=!1,this._oSortrrs=this.defaultSortTypes;var i=!!this.paginationData;e.getMetadata().get("paginationData")?(this.paginationData=e.getMetadata().get("paginationData"),t=!0):(this.paginationData=null,i&&(t=!0));var s=e.getMetadata().get("client_configs");if(s){var n=XPathSelectSingleNode(s,'component_config[@className="FilesList"]');n&&(t=this.parseComponentConfig(n))}else this.restoreConfig&&(this.applyComponentConfig(this.restoreConfig),this.restoreConfig=null,t=!0);t&&this.initGUI(),this.parsingCache=new Hash;for(var o=e.getChildren(),a=this.getRenderer(),r=0;r<o.length;r++){var l,d=o[r];(l=a(d)).node=d,l.addClassName("nodeProvider"),l.REPLACE_OBS=this.makeItemRefreshObserver(d,l,a),l.REMOVE_OBS=this.makeItemRemovedObserver(d,l),d.observe("node_replaced",l.REPLACE_OBS),d.observe("node_removed",l.REMOVE_OBS)}if(this.initRows(),this.paginationData&&this.paginationData.get("remote_order")||(this._sortableTable.sortColumn=-1,this._sortableTable.updateHeaderArrows()),e.getMetadata().get("filesList.sortColumn")){var h=parseInt(e.getMetadata().get("filesList.sortColumn")),c=e.getMetadata().get("filesList.descending");this._sortableTable.sort(h,c),this._sortableTable.updateHeaderArrows()}var u=this._dataModel?this._dataModel:app.getContextHolder();if(u.getSelectedNodes()&&u.getSelectedNodes().length){for(var m=u.getSelectedNodes(),p=0;p<m.length;p++)Object.isString(m[p])?this.selectFile(m[p],!0):this.selectFile(m[p].getPath(),!0);this.hasFocus=!0}this.hasFocus&&window.setTimeout(function(){app.focusOn(this)}.bind(this),200)},switchCurrentLabelToEdition:function(e){var t=this.getSelectedItems()[0],i={top:0,left:0},s=0,n={fontSize:"12px"};if("list"==this._displayMode){var o=t.select("span.text_label")[0],a=t.select("span.list_selectable_span")[0];i.top=-3,i.left=25,s=this.htmlElement.down("div.table_rows_container").scrollTop}else if("thumb"==this._displayMode){a=o=t.select("div.thumbLabel")[0];i.top=-2,i.left=3,s=this.htmlElement.down(".selectable_div").scrollTop}else if("detail"==this._displayMode){a=o=t.select("div.thumbLabel")[0];i.top=0,i.left=0,s=this.htmlElement.down(".selectable_div").scrollTop,n={fontSize:"20px",paddingLeft:"2px",color:"rgb(111, 121, 131)"}}var r=a.cumulativeOffset(),l=(o.innerHTML,new Element("input",{value:t.node.getLabel("text"),id:"editbox"}).setStyle({zIndex:5e3,position:"absolute",marginLeft:"0px",marginTop:"0px",height:"24px",padding:0}));l.setStyle(n),$(document.getElementsByTagName("body")[0]).insert({bottom:l}),modal.showContent("editbox",a.getWidth()-i.left+"","26",!0,!1,{opacity:.25,backgroundColor:"#fff"}),l.setStyle({left:r.left+i.left+"px",top:r.top+i.top-s+"px"}),window.setTimeout(function(){l.focus();var e=l.getValue().lastIndexOf(".");if(-1==e)l.select();else{if(l.setSelectionRange)l.setSelectionRange(0,e);else if(l.createTextRange){var t=l.createTextRange();t.collapse(!0),t.moveStart("character",0),t.moveEnd("character",e),t.select()}}},300);var d=function(){var i=l.getValue();hideLightBox(),modal.close(),e(t.node,i)};l.observe("keydown",function(e){e.keyCode==Event.KEY_RETURN&&(Event.stop(e),d())}.bind(this));var h=modal.addSubmitCancel(l,null,!1,"after");h.addClassName("inlineEdition");h.select('input[name="ok"]')[0].observe("click",d);var c=l.getWidth()-44,u=c;c<70&&(l.setStyle({left:r.left+i.left-70+c}),u=70),"detail"==this._displayMode&&(c-=20,u-=20),l.setStyle({width:u+"px"}),h.select("input").invoke("setStyle",{margin:0,width:"22px",border:0,backgroundColor:"transparent"}),h.setStyle({position:"absolute",width:"46px",zIndex:2500,left:r.left+i.left+c+"px",top:r.top+i.top-s+1+"px"});o.setStyle({color:"#ddd"}),modal.setCloseAction(function(){o.setStyle({color:""}),l.remove(),h.remove()})},nodeToTableRow:function(node,replaceItem){var metaData=node.getMetadata(),newRow=new Element("tr",{id:slugString(node.getPath())}),tBody=this.parsingCache.get("tBody")||$(this._htmlElement).select("tbody")[0];this.parsingCache.set("tBody",tBody),metaData.each(function(e){Prototype.Browser.IE&&"ID"==e.key&&newRow.setAttribute("sql_"+e.key,e.value)});var attributeList;if(this.parsingCache.get("attributeList"))attributeList=this.parsingCache.get("attributeList");else{attributeList=$H();var visibleColumns=this.getVisibleColumns();visibleColumns.each(function(e){attributeList.set(e.attributeName,e)}),this.parsingCache.set("attributeList",attributeList)}for(var attKeys=attributeList.keys(),i=0;i<attKeys.length;i++){var s=attKeys[i],tableCell=new Element("td"),fullview="";if(this._fullview&&(fullview=" full"),"APP_label"==s){var textLabel=new Element("span",{id:"APP_label",className:"text_label"+fullview}).update(metaData.get("text")),backgroundPosition=this.options.iconBgPosition||"4px 2px",backgroundImage='url("'+resolveImageSource(metaData.get("icon"),"/images/mimes/ICON_SIZE",16)+'")';if(metaData.get("overlay_icon")&&Modernizr.multiplebgs){var ovIcs=metaData.get("overlay_icon").split(",");switch(ovIcs.length){case 1:backgroundPosition="14px 11px, "+backgroundPosition,backgroundImage='url("'+resolveImageSource(ovIcs[0],"/images/overlays/ICON_SIZE",8)+'"), '+backgroundImage;break;case 2:backgroundPosition="2px 11px, 14px 11px, "+backgroundPosition,backgroundImage='url("'+resolveImageSource(ovIcs[0],"/images/overlays/ICON_SIZE",8)+'"), url("'+resolveImageSource(ovIcs[1],"/images/overlays/ICON_SIZE",8)+'"), '+backgroundImage;break;case 3:backgroundPosition="14px 2px, 2px 11px, 14px 11px, "+backgroundPosition,backgroundImage='url("'+resolveImageSource(ovIcs[0],"/images/overlays/ICON_SIZE",8)+'"), url("'+resolveImageSource(ovIcs[1],"/images/overlays/ICON_SIZE",8)+'"), url("'+resolveImageSource(ovIcs[2],"/images/overlays/ICON_SIZE",8)+'"), '+backgroundImage;break;case 4:default:backgroundPosition="2px 2px, 14px 2px, 2px 11px, 14px 11px, "+backgroundPosition,backgroundImage='url("'+resolveImageSource(ovIcs[0],"/images/overlays/ICON_SIZE",8)+'"), url("'+resolveImageSource(ovIcs[1],"/images/overlays/ICON_SIZE",8)+'"), url("'+resolveImageSource(ovIcs[2],"/images/overlays/ICON_SIZE",8)+'"), url("'+resolveImageSource(ovIcs[3],"/images/overlays/ICON_SIZE",8)+'"), '+backgroundImage}}textLabel.setStyle({paddingLeft:"24px",backgroundRepeat:"no-repeat",backgroundPosition:backgroundPosition,backgroundImage:backgroundImage});var innerSpan=new Element("span",{className:"list_selectable_span",style:"cursor:default;display:block;"}).update(textLabel);innerSpan.node=node,tableCell.insert(innerSpan),void 0!=this.options.draggable&&!0!==this.options.draggable||window.setTimeout(function(){if("recycle"!=node.getMime()){new ExtDraggable(innerSpan,{revert:!0,ghosting:!0,scroll:$("tree_container")?"tree_container":null,containerScroll:this.htmlElement.down("div.table_rows_container")},this,"filesList");this.protoMenu&&this.protoMenu.addElements(innerSpan)}node.isLeaf()||AppDroppables.add(innerSpan,node)}.bind(this),500)}else if("modiftime"==s){var date=new Date;date.setTime(1e3*parseInt(metaData.get(s))),newRow.modiftime=date,tableCell.update('<span class="text_label'+fullview+'">'+formatDate(date)+"</span>")}else{var metaValue=metaData.get(s)||"";tableCell.update('<span class="text_label'+fullview+'">'+metaValue+"</span>")}if("grid"==this.gridStyle&&(tableCell.setAttribute("valign","top"),tableCell.setStyle({verticalAlign:"top",borderRight:"1px solid #eee"}),this.even&&tableCell.setStyle({borderRightColor:"#fff"}),""==tableCell.innerHTML&&(tableCell.innerHTML="&nbsp;")),this._headerResizer&&!this._headerResizer.options.useCSS3&&tableCell.addClassName("resizer_"+i),newRow.appendChild(tableCell),attributeList.get(s).modifier){var modifier=eval(attributeList.get(s).modifier);modifier(tableCell,node,"row")}}var hiddenModifiers=$A();return this.parsingCache.get("hiddenModifiers")?hiddenModifiers=this.parsingCache.get("hiddenModifiers"):(this.hiddenColumns.each(function(col){try{this.columnsDef.each(function(colDef){if(colDef.attributeName==col&&colDef.modifier){var mod=eval(colDef.modifier);hiddenModifiers.push(mod)}})}catch(e){}}.bind(this)),this.parsingCache.set("hiddenModifiers",hiddenModifiers)),hiddenModifiers.each(function(e){e(null,node,"row",newRow)}),tBody.appendChild(newRow),replaceItem?replaceItem.hasClassName("even")&&$(newRow).addClassName("even"):(this.even&&$(newRow).addClassName("even"),this.even=!this.even),this.addInlineToolbar(textLabel||tableCell,node),newRow},nodeToDiv:function(node){var newRow=new Element("div",{className:"thumbnail_selectable_cell",id:slugString(node.getPath())}),metadata=node.getMetadata(),innerSpan=new Element("span",{style:"cursor:default;"}),img=this._previewFactory.generateBasePreview(node),textNode=node.getLabel(),label=new Element("div",{className:"thumbLabel",title:textNode}).update(textNode);if(innerSpan.insert({bottom:img}),innerSpan.insert({bottom:label}),newRow.insert({bottom:innerSpan}),newRow.IMAGE_ELEMENT=img,newRow.LABEL_ELEMENT=label,node.getMetadata().get("overlay_icon")){var ovDiv=new Element("div"),ovIcs=$A(node.getMetadata().get("overlay_icon").split(",")),bgPos=$A(),bgImg=$A(),bgRep=$A(),index=0;ovIcs.each(function(e){bgPos.push("0px "+(12*index+(index>0?2:0))+"px"),bgImg.push("url('"+resolveImageSource(ovIcs[index],"/images/overlays/ICON_SIZE",12)+"')"),bgRep.push("no-repeat"),index++}),ovDiv.setStyle({position:"absolute",top:"3px",right:"2px",height:12*ovIcs.length+(ovIcs.length>1?2*(ovIcs.length-1):0)+"px",width:"12px",backgroundImage:bgImg.join(", "),backgroundPosition:bgPos.join(", "),backgroundRepeat:bgRep.join(", ")}),innerSpan.insert({after:ovDiv})}this._htmlElement.insert(newRow);var modifiers;return this.parsingCache.get("modifiers")?modifiers=this.parsingCache.get("modifiers"):(modifiers=$A(),this.columnsDef.each(function(column){if(column.modifier)try{modifiers.push(eval(column.modifier))}catch(e){}}),this.parsingCache.set("modifiers",modifiers)),modifiers.each(function(e){e(newRow,node,"thumb")}),this._previewFactory.enrichBasePreview(node,newRow),node.isRecycle()||window.setTimeout(function(){new ExtDraggable(newRow,{revert:!0,ghosting:!0,scroll:$("tree_container")?"tree_container":null,containerScroll:this.htmlElement.down(".selectable_div")},this,"filesList")}.bind(this),500),node.isLeaf()||AppDroppables.add(newRow,node),this.addInlineToolbar(newRow,node),newRow},nodeToLargeDiv:function(node){var largeRow=new Element("div",{className:"thumbnail_selectable_cell detailed",id:slugString(node.getPath())+"-cont"}),metadataDiv=new Element("div",{className:"thumbnail_cell_metadata"}),newRow=new Element("div",{className:"thumbnail_selectable_cell",id:node.getPath()}),metaData=node.getMetadata(),innerSpan=new Element("span",{style:"cursor:default;"}),img=this._previewFactory.generateBasePreview(node),textNode=node.getLabel(),label=new Element("div",{className:"thumbLabel",title:textNode}).update(textNode);if(innerSpan.insert({bottom:img}),newRow.insert({bottom:innerSpan}),newRow.IMAGE_ELEMENT=img,newRow.LABEL_ELEMENT=label,node.getMetadata().get("overlay_icon")){var ovDiv=new Element("div"),ovIcs=$A(node.getMetadata().get("overlay_icon").split(",")),bgPos=$A(),bgImg=$A(),bgRep=$A(),index=0;ovIcs.each(function(e){bgPos.push("0px "+(12*index+(index>0?2:0))+"px"),bgImg.push("url('"+resolveImageSource(ovIcs[index],"/images/overlays/ICON_SIZE",12)+"')"),bgRep.push("no-repeat"),index++}),ovDiv.setStyle({position:"absolute",top:"3px",right:"2px",height:12*ovIcs.length+(ovIcs.length>1?2*(ovIcs.length-1):0)+"px",width:"12px",backgroundImage:bgImg.join(", "),backgroundPosition:bgPos.join(", "),backgroundRepeat:bgRep.join(", ")}),newRow.setStyle({position:"relative"}),innerSpan.insert({after:ovDiv})}largeRow.insert(newRow),largeRow.insert(label),largeRow.insert(metadataDiv);var attributeList;if(this.parsingCache.get("attributeList"))attributeList=this.parsingCache.get("attributeList");else{attributeList=$H();var visibleColumns=this.getVisibleColumns();visibleColumns.each(function(e){attributeList.set(e.attributeName,e)}),this.parsingCache.set("attributeList",attributeList)}for(var first=!1,attKeys=attributeList.keys(),i=0;i<attKeys.length;i++){var s=attKeys[i],cell=new Element("span",{className:"metadata_chunk"});if("APP_label"!=s){if("modiftime"==s){var date=new Date;date.setTime(1e3*parseInt(metaData.get(s))),newRow.modiftime=date,cell.update('<span class="text_label">'+formatDate(date)+"</span>")}else{if("filesize"==s&&"-"==metaData.get(s))continue;var metaValue=metaData.get(s)||"";if(!metaValue)continue;var attr=attributeList.get(s);if(attr&&attr.additionalText){var isDate=/^date:/.test(attr.additionalText),metaKey=attr.additionalText.replace(/^date:/,""),extraText=metaData.get(metaKey);extraText&&(isDate&&(extraText=moment(extraText).format("YYYY-MM-DD hh:mm a")),metaValue+=" ("+extraText+")")}cell.update('<span class="text_label">'+metaValue+"</span>")}if(first||metadataDiv.insert(new Element("span",{className:"icon-angle-right"})),metadataDiv.insert(cell),first=!1,attributeList.get(s).modifier){var modifier=eval(attributeList.get(s).modifier);modifier(cell,node,"row")}}}this._htmlElement.insert(largeRow);var modifiers;return this.parsingCache.get("modifiers")?modifiers=this.parsingCache.get("modifiers"):(modifiers=$A(),this.columnsDef.each(function(column){if(column.modifier)try{modifiers.push(eval(column.modifier))}catch(e){}}),this.parsingCache.set("modifiers",modifiers)),modifiers.each(function(e){e(newRow,node,"thumb")}),this._previewFactory.enrichBasePreview(node,newRow),node.isRecycle()||window.setTimeout(function(){new ExtDraggable(largeRow,{revert:!0,ghosting:!0,scroll:$("tree_container")?"tree_container":null,containerScroll:this.htmlElement.down(".selectable_div")},this,"filesList")}.bind(this),500),node.isLeaf()||AppDroppables.add(largeRow,node),this.addInlineToolbar(largeRow,node),largeRow},addInlineToolbar:function(e,t){if(this._inlineToolbarOptions){var i=this._inlineToolbarOptions;this._inlineToolbarOptions.unique||(i=Object.extend(this._inlineToolbarOptions,{attachToNode:t}));var s=new Element("div",{id:"FL-tBar-"+this._instanciatedToolbars.size(),className:"FL-inlineToolbar"+(this._inlineToolbarOptions.unique?" FL-inlineToolbarUnique":" FL-inlineToolbarMultiple")});e.insert(s);var n=new ActionsToolbar(s,i);if(n.actions=app.actionBar.actions,n.initToolbars(),!this._inlineToolbarOptions.unique){var o=this._dataModel?this._dataModel:app.getContextHolder();n.registeredButtons.each(function(e){e.stopObserving("click"),e.observe("click",function(i){Event.stop(i),o.setSelectedNodes([t]),window.setTimeout(function(){e.ACTION.apply()},20)})})}this._instanciatedToolbars.push(n)}},partSizeCellRenderer:function(e,t,i){if(e&&(e.setAttribute("data-sorter_value",t.getMetadata().get("bytesize")),t.getMetadata().get("target_bytesize"))){var s=parseInt(parseInt(t.getMetadata().get("bytesize"))/parseInt(t.getMetadata().get("target_bytesize"))*100),n="uuid_"+(new Date).getTime(),o=new Element("div",{style:"padding-left:3px;",className:"text_label"}).update('<span class="percent_text" style="line-height:19px;padding-left:5px;">'+s+"%</span>"),a=new Element("span",{id:n}).update("0%"),r={animate:!0,showText:!1,width:80,boxImage:window.resourcesFolder+"/images/progress_box_80.gif",barImage:window.resourcesFolder+"/images/progress_bar_80.gif",height:8,visualStyle:"position:relative;"};if(e.update(o),o.insert({top:a}),t.getMetadata().get("process_stoppable")){var l=new Element("a",{className:"pg_cancel_button"}).update("X");l.observe("click",function(){var e=new Connexion;e.setParameters({action:"stop_dl",file:t.getPath(),dir:this.getCurrentContextNode().getPath()}),e.onComplete=function(e){"stop"==e.responseText&&$(n).pe&&($(n).pe.stop(),$(n).pgBar.setPercentage(0),window.setTimeout(function(){app.actionBar.fireAction("refresh")},2))},e.sendAsync()}),o.insert({bottom:l})}a.setAttribute("data-target_size",t.getMetadata().get("target_bytesize")),window.setTimeout(function(){a.pgBar=new JS_BRAMUS.jsProgressBar(a,s,r);var e=new PeriodicalExecuter(function(){if($(n)){var i=new Connexion;i.setParameters({action:"update_dl_data",file:t.getPath()}),i.onComplete=function(t){if("stop"==t.responseText)e.stop(),app.actionBar.fireAction("refresh");else{var i=parseInt(parseInt(t.responseText)/parseInt($(n).getAttribute("data-target_size"))*100);$(n).pgBar.setPercentage(i),$(n).next("span.percent_text").update(i+"%")}},i.sendAsync()}else e.stop()},2);$(n).pe=e},2)}},resizeThumbnails:function(e){(e?[e]:this._htmlElement.select("div.thumbnail_selectable_cell")).each(function(e){if(!e.up("div.thumbnail_selectable_cell.detailed")){e.node;var t=e.IMAGE_ELEMENT||e.down("img"),i=e.LABEL_ELEMENT||e.down(".thumbLabel"),s=i&&-1!==i.siblings().indexOf(t),n="detail"==this._displayMode?this._detailThumbSize:this._thumbSize;if(e.down("div.thumbnail_selectable_cell")?(e.down("div.thumbnail_selectable_cell").setStyle({width:n+5+"px",height:n+10+"px"}),e.setStyle({minHeight:n+20+"px"})):e.setStyle({width:n+25+"px",height:n+30+"px"}),this._previewFactory.setThumbSize(n),t&&this._previewFactory.resizeThumbnail(t),i){var o=s?n+25:e.getWidth()-n-10,a=parseInt(o/6),r=new String(i.getAttribute("title"));i.innerHTML=r.truncate(a,"...")}}}.bind(this))},redistributeBackgrounds:function(){var e=this.getItems();this.even=!1;for(var t=0;t<e.length;t++)this.even?$(e[t]).addClassName("even").removeClassName("odd"):$(e[t]).removeClassName("even").addClassName("odd"),this.even=!this.even},removeCurrentLines:function(e){this.notify("rows:willClear"),this._instanciatedToolbars&&this._instanciatedToolbars.size()&&(this._instanciatedToolbars.invoke("destroy"),this._instanciatedToolbars=$A());var t;t="list"==this._displayMode?$(this._htmlElement).select("tr"):$(this._htmlElement).select("div.thumbnail_selectable_cell");for(var i=0;i<t.length;i++){try{t[i].node&&(t[i].REPLACE_OBS&&t[i].node.stopObserving("node_replaced",t[i].REPLACE_OBS),t[i].REMOVE_OBS&&t[i].node.stopObserving("node_removed",t[i].REMOVE_OBS)),t[i].innerHTML="",t[i].IMAGE_ELEMENT&&(t[i].IMAGE_ELEMENT.destroyElement&&t[i].IMAGE_ELEMENT.destroyElement(),t[i].IMAGE_ELEMENT=null,delete t[i].IMAGE_ELEMENT)}catch(e){}t[i].parentNode&&t[i].remove()}e||this.fireChange(),this.notify("rows:didClear")},setOnLoad:function(){if(!this.loading){this.htmlElement.setStyle({position:"relative"});addLightboxMarkupToElement(this.htmlElement);var e=new Element("img",{src:resourcesFolder+"/images/loadingImage.gif"}),t=this.htmlElement.down("#element_overlay");t.insert(e),e.setStyle({marginTop:Math.max(0,(t.getHeight()-e.getHeight())/2)+"px"}),this.loading=!0}},removeOnLoad:function(){removeLightboxFromElement(this.htmlElement),this.loading=!1},fireChange:function(){this._fireChange&&(this._dataModel?this._dataModel.setSelectedNodes(this.getSelectedNodes()):app.updateContextData(null,this.getSelectedNodes(),this))},fireDblClick:function(e){if("recycle"!=this.getCurrentContextNode().getMime()&&(selRaw=this.getSelectedItems(),selRaw&&selRaw.length)){var t=selRaw[0].node;this._doubleClickListener?this._doubleClickListener(t):this._dataModel||(t.isLeaf()?app.getActionBar().fireDefaultAction("file"):app.getActionBar().fireDefaultAction("dir",t))}},selectFile:function(e,t){if(e=getBaseName(e),app.getContextHolder().fileNameExists(e,!0))for(var i=this.getItems(),s=0;s<i.length;s++)getBaseName(i[s].node.getPath())==getBaseName(e)?this.setItemSelected(i[s],!0):null==t&&this.setItemSelected(i[s],!1)},enableTextSelection:function(e){e.origOnSelectStart&&(e.onselectstart=e.origOnSelectStart),e.unselectable="off",e.style.MozUserSelect="text"},disableTextSelection:function(e,t){e.onselectstart&&(e.origOnSelectStart=e.onselectstart,e.onselectstart=function(){return!1}),e.unselectable="on",e.style.MozUserSelect="none",$(e).addClassName("no_select_bg"),t&&$(e).select("td,img,div,span").each(function(e){this.disableTextSelection(e)}.bind(this))},keydown:function(e){if(app.blockNavigation||this.blockNavigation)return!1;if(9==e.keyCode&&!app.blockNavigation)return!1;if(!this.hasFocus)return!0;var t=e.keyCode;if("thumb"!=this._displayMode&&t!=Event.KEY_UP&&t!=Event.KEY_DOWN&&t!=Event.KEY_RETURN&&t!=Event.KEY_END&&t!=Event.KEY_HOME)return!0;if("thumb"==this._displayMode&&t!=Event.KEY_UP&&t!=Event.KEY_DOWN&&t!=Event.KEY_LEFT&&t!=Event.KEY_RIGHT&&t!=Event.KEY_RETURN&&t!=Event.KEY_END&&t!=Event.KEY_HOME)return!0;var i=this._selectedItems;if(0==i.length)return!1;var s=this._fireChange;this._fireChange=!1;var n=this.getSelectedItems();Event.stop(e);var o,a,r=e.shiftKey;a=i[i.length-1];var l=this.getItems(),d=this.getItemIndex(a),h=!1;if(e.keyCode==Event.KEY_RETURN){for(m=0;m<i.length;m++)this.setItemSelected(i[m],!1);return this.setItemSelected(a,!0),this.fireDblClick(null),this._fireChange=s,!1}if(e.keyCode==Event.KEY_END?(o=l[l.length-1],r&&this._multiple&&(h=!0,nextItemIndex=l.length-1)):e.keyCode==Event.KEY_HOME?(o=l[0],r&&this._multiple&&(h=!0,nextItemIndex=0)):e.keyCode==Event.KEY_UP?"thumb"!=this._displayMode?o=this.getPrevious(a):(nextItemIndex=this.findOverlappingItem(d,!1),null!=nextItemIndex&&(o=l[nextItemIndex],h=!0)):e.keyCode==Event.KEY_LEFT?o=this.getPrevious(a):e.keyCode==Event.KEY_DOWN?"thumb"!=this._displayMode?o=this.getNext(a):(nextItemIndex=this.findOverlappingItem(d,!0),null!=nextItemIndex&&(o=l[nextItemIndex],h=!0)):e.keyCode==Event.KEY_RIGHT&&(o=this.getNext(a)),null==o)return this._fireChange=s,!1;if(r&&this._multiple){if(h)if(nextItemIndex>=d)for(m=d+1;m<nextItemIndex;m++)this.setItemSelected(l[m],!l[m]._selected);else for(m=nextItemIndex+1;m<d;m++)this.setItemSelected(l[m],!l[m]._selected)}else for(m=0;m<i.length;m++)this.setItemSelected(i[m],!1);this.setItemSelected(o,!o._selected);var c,u=n.length!=this._selectedItems.length;if(!u)for(var m=0;m<n.length;m++){c=!1;for(var p=0;p<this._selectedItems.length;p++)if(n[m]==this._selectedItems[p]){c=!0;break}if(!c){u=!0;break}}return this._fireChange=s,u&&this._fireChange&&this.fireChange(),!1},findOverlappingItem:function(e,t){if(!t&&0==e)return null;var i=this.getItems();if(t&&e==i.length-1)return null;var s=$(i[e]),n=Position.cumulativeOffset(s),o=Element.getDimensions(s),a=n[0]+parseInt(o.width/2);if(t){for(var r=n[1]+parseInt(3*o.height/2),l=e+1;l<i.length;l++)if(Position.within($(i[l]),a,r))return l;return null}for(var r=n[1]-parseInt(o.height/2),l=e-1;l>-1;l--)if(Position.within($(i[l]),a,r))return l;return null},isItem:function(e){return"list"==this._displayMode?!(null==e||"TR"!=e.tagName&&"tr"!=e.tagName||"TBODY"!=e.parentNode.tagName&&"tbody"!=e.parentNode.tagName||e.parentNode.parentNode!=this._htmlElement):null!=e&&("DIV"==e.tagName||"div"==e.tagName)&&e.parentNode==this._htmlElement},getItems:function(){if("list"==this._displayMode)return this._htmlElement.rows;for(var e=[],t=0,i=this._htmlElement.childNodes,s=i.length,n=0;n<s;n++)1==i[n].nodeType&&(e[t++]=i[n]);return e},getItemIndex:function(e){if("list"==this._displayMode)return e.rowIndex;for(var t=0,i=this._htmlElement.childNodes,s=i.length,n=0;n<s;n++){if(i[n]==e)return t;1==i[n].nodeType&&t++}return-1},getItem:function(e){if("list"==this._displayMode)return this._htmlElement.rows[e];for(var t=0,i=this._htmlElement.childNodes,s=i.length,n=0;n<s;n++)if(1==i[n].nodeType){if(t==e)return i[n];t++}return null}}),Class.create("FoldersTree",AppPane,{__implements:["IFocusable","IContextMenuable"],initialize:function($super,e,t){if($super(e,t),this.treeContainer=new Element("div",{id:"tree_container",style:"overflow:auto;height:100%;width:100%;"}),this.options.replaceScroller&&(this.scroller=new Element("div",{id:"tree_scroller",className:"scroller_track",style:"right:"+(parseInt(e.getStyle("marginRight"))-parseInt(e.getStyle("paddingRight")))+"px"}),this.scroller.insert('<div id="scrollbar_handle" class="scroller_handle"></div>'),e.insert(this.scroller),this.treeContainer.setStyle({overflow:"hidden"})),this.registeredObservers=$H(),e.insert(this.treeContainer),disableTextSelection(this.treeContainer),this.options.replaceScroller){this.scrollbar=new Control.ScrollBar("tree_container","tree_scroller");var i=this.scrollbar.recalculateLayout.bind(this.scrollbar);document.observe("app:tree_change",i),this.registeredObservers.set("app:tree_change",i)}this.options={},t&&(this.options=t);var s=this,n=this.createFilter(),o=new ManifestNode("/",!0,MessageHash[391],"folder.png");o._isLoaded=!0,this.tree=new CustomXTree(o,function(e){app&&(app.focusOn(s),this.node&&(app.getUserSelection().getContextNode()!=this.node&&app.actionBar.fireDefaultAction("dir",this.node),app.getUserSelection().setSelectedNodes([this.node],s)))},n),this.treeContainer.update(this.tree.toString()),$(this.tree.id).node=this.tree.node,$(this.tree.id).observe("click",function(e){this.action(e),Event.stop(e)}.bind(this.tree)),AppDroppables.add(this.tree.id,this.tree.node),this.tree.open||this.tree.loading||this.tree.toggle(),this.treeContainer.observe("click",function(){app.focusOn(this)}.bind(this)),this.rootNodeId=this.tree.id,this.hasFocus;var a=function(e){var t=e.memo.getPath();window.setTimeout(function(e){this.setSelectedPath(t)}.bind(this),100)}.bind(this);document.observe("app:context_changed",a),this.registeredObservers.set("app:context_changed",a);var r=function(e){var t=e.memo;this.tree.setRootNode(t),this.changeRootLabel(t.getLabel(),t.getIcon())}.bind(this);document.observe("app:root_node_changed",r),this.registeredObservers.set("app:root_node_changed",r);var l=function(e){if("FoldersTree"==e.memo.className){for(var t=e.memo.classConfig.get("all"),i=XPathSelectNodes(t,"property"),s=0;s<i.length;s++)this.options[i[s].getAttribute("name")]=i[s].getAttribute("value");this.tree&&(this.tree.filter=this.createFilter())}}.bind(this);document.observe("app:component_config_changed",l),this.registeredObservers.set("app:component_config_changed",l)},destroy:function(){if(this.registeredObservers.each(function(e){document.stopObserving(e.key,e.value)}),this.scrollbar&&this.scrollbar.destroy(),this.tree&&this.tree.destroy(),window[this.htmlElement.id])try{delete window[this.htmlElement.id]}catch(e){}},createFilter:function(){var e=this.options.display||"dz";e.indexOf("a")>-1&&(e="dzf"),e.indexOf("z")>-1&&!1===window.zipEnabled&&(e=e.split("z").join("")),this.options.display=e;var t=e.indexOf("d")>-1,i=e.indexOf("z")>-1,s=e.indexOf("f")>-1;return function(e){return(t&&!e.isLeaf()||s&&e.isLeaf()||i&&("zip"==e.getMime()||"browsable_archive"==e.getMime()))&&"recycle"!=e.getParent().getMime()}},focus:function(){webFXTreeHandler.selected&&(webFXTreeHandler.selected.focus(),webFXTreeHandler.selected.node&&app.getUserSelection().setSelectedNodes([webFXTreeHandler.selected.node],this)),webFXTreeHandler.setFocus(!0),this.hasFocus=!0},blur:function(){webFXTreeHandler.selected&&webFXTreeHandler.selected.blur(),webFXTreeHandler.setFocus(!1),this.hasFocus=!1},resize:function(){fitHeightToBottom(this.treeContainer,null),this.scrollbar&&(this.scroller.setStyle({height:parseInt(this.treeContainer.getHeight())+"px"}),this.scrollbar.recalculateLayout()),document.fire("app:resize-FoldersTree-"+this.htmlElement.id,this.htmlElement.getDimensions())},showElement:function(e){e?this.treeContainer.show():this.treeContainer.hide()},setContextualMenu:function(e){Event.observe(this.rootNodeId+"","contextmenu",function(e){this.select(),this.action(),Event.stop(e)}.bind(webFXTreeHandler.all[this.rootNodeId])),e.addElements("#"+this.rootNodeId),webFXTreeHandler.contextMenu=e},getNodeByPath:function(e){for(var t in webFXTreeHandler.all)if(webFXTreeHandler.all[t]&&webFXTreeHandler.all[t].node&&webFXTreeHandler.all[t].node.getPath()==e)return webFXTreeHandler.all[t]},setSelectedPath:function(e){if(""!=e&&"/"!=e){for(var t=this.cleanPathToArray(e),i="",s=0;s<t.length;s++){i+="/"+t[s];var n=this.getNodeByPath(i);n&&n.childNodes.length&&n._webfxtree_expand()}n&&n.select()}else this.tree.select()},cleanPathToArray:function(e){var t=e.split("/"),s=new Array,n=0;for(i=0;i<t.length;i++)""!=t[i]&&(s[n]=t[i],n++);return s},changeRootLabel:function(e,t){this.changeNodeLabel(this.tree.id,e,t)},changeNodeLabel:function(e,t,i){$(e+"-label").update(t);if(i){var s=webFXTreeHandler.all[e];s.icon=i,s.openIcon=i}},switchCurrentLabelToEdition:function(e){if(webFXTreeHandler.selected){var t=webFXTreeHandler.selected.id,i=this.treeContainer.down("#"+t),s={top:0,left:0},n=0,o=i.down("a"),a=i;s.top=1,s.left=43,n=this.treeContainer.scrollTop;var r=a.cumulativeOffset(),l=(o.innerHTML,new Element("input",{value:i.node.getLabel("text"),id:"editbox"}).setStyle({zIndex:5e3,position:"absolute",marginLeft:"0px",marginTop:"0px",height:"24px",padding:0}));$(document.getElementsByTagName("body")[0]).insert({bottom:l}),modal.showContent("editbox",a.getWidth()-s.left+"","20",!0,!1,{opacity:.25,backgroundColor:"#fff"}),l.setStyle({left:r.left+s.left+"px",top:r.top+s.top-n+"px"}),window.setTimeout(function(){l.focus();var e=l.getValue().lastIndexOf(".");if(-1==e)l.select();else{if(l.setSelectionRange)l.setSelectionRange(0,e);else if(l.createTextRange){var t=l.createTextRange();t.collapse(!0),t.moveStart("character",0),t.moveEnd("character",e),t.select()}}},300);var d=function(){var t=l.getValue();hideLightBox(),modal.close(),e(i.node,t)};l.observe("keydown",function(e){e.keyCode==Event.KEY_RETURN&&(Event.stop(e),d())}.bind(this));var h=modal.addSubmitCancel(l,null,!1,"after");h.addClassName("inlineEdition");h.select('input[name="ok"]')[0].observe("click",d);var c=l.getWidth()-44,u=c;c<70&&(l.setStyle({left:r.left+s.left-70+c}),u=70),l.setStyle({width:u+"px"}),h.select("input").invoke("setStyle",{margin:0,width:"22px",border:0,backgroundColor:"transparent"}),h.setStyle({position:"absolute",width:"46px",zIndex:2500,left:r.left+s.left+c+"px",top:r.top+s.top-n-1+"px"});o.setStyle({color:"#ddd"}),modal.setCloseAction(function(){o.setStyle({color:""}),l.remove(),h.remove()})}}}),Class.create("SearchEngine",AppPane,{htmlElement:void 0,_inputBox:void 0,_resultsBoxId:void 0,_searchButtonName:void 0,state:"idle",_runningQueries:void 0,_queriesIndex:0,_appOptions:void 0,_queue:void 0,_searchMode:"local",_even:!1,_rootNode:null,_dataModel:null,_fileList:null,initialize:function($super,e,t){this._appOptions={toggleResultsVisibility:!1},$(e).getAttribute("data-globalOptions")&&(this._appOptions=$(e).getAttribute("data-globalOptions").evalJSON()),t&&(this._appOptions=Object.extend(this._appOptions,t)),$super($(e),this._appOptions),this.updateSearchModeFromRegistry(),this.searchModeObserver=this.updateSearchModeFromRegistry.bind(this),document.observe("app:registry_loaded",this.searchModeObserver),this._dataModel=new DataModel(!0),this._rootNode=new ManifestNode("/",!1,"Results","folder.png"),this._dataModel.setRootNode(this._rootNode),this.initGUI(),this._dataModel.observe("selection_changed",function(){var e=this._dataModel.getSelectedNodes()[0];e&&app.goTo(e)}.bind(this))},updateSearchModeFromRegistry:function(){$(this._resultsBoxId)&&!this._rootNode?$(this._resultsBoxId).update(""):this._rootNode&&this._rootNode.clear();var e=app.getXmlRegistry(),t=XPathSelectSingleNode(e,"plugins/indexer");if(null!=t){if(t.getAttribute("indexed_meta_fields"))if(this.indexedFields=t.getAttribute("indexed_meta_fields").evalJSON(),this.indexedFields.indexed_meta_fields){var i=this.indexedFields.additionnal_meta_columns;this.indexedFields=$A(this.indexedFields.indexed_meta_fields),this._appOptions.metaColumns||(this._appOptions.metaColumns={});for(var s in i)this._appOptions.metaColumns[s]=i[s]}else this.indexedFields=$A(this.indexedFields);else this.indexedFields=$A();this._searchMode="remote"}else this._searchMode="local";if(this.htmlElement&&this.htmlElement.down("#search_meta")&&this.htmlElement.down("#search_meta").remove(),$("search_form")&&$("search_form").down("#search_meta")&&$("search_form").down("#search_meta").remove(),this._appOptions&&this._appOptions.metaColumns){var n=this._appOptions.metaColumns;if(this._appOptions.toggleResultsVisibility&&$(this._appOptions.toggleResultsVisibility)&&this.htmlElement?this.htmlElement.down("#"+this._appOptions.toggleResultsVisibility).insert({top:'<div id="search_meta">'+MessageHash[344]+' : <span id="search_meta_options"></span></div>'}):$("search_form")&&$("search_form").insert({bottom:'<div id="search_meta">'+MessageHash[344]+' : <span id="search_meta_options"></span></div>'}),$("search_meta_options")){this.initMetaOption($("search_meta_options"),"filename",MessageHash[1],!0);for(var s in n)this.indexedFields&&!this.indexedFields.include(s)||this.initMetaOption($("search_meta_options"),s,n[s],!1)}}},initGUI:function(){if(this.htmlElement){if(this.htmlElement.insert('<div id="search_panel"><div id="search_form"><input style="float:left;" type="text" id="search_txt" placeholder="'+MessageHash[87]+'" name="search_txt" onfocus="blockEvents=true;" onblur="blockEvents=false;"><a href="" id="search_button" class="icon-search" message_title_id="184" title="'+MessageHash[184]+'"><img width="16" height="16" align="absmiddle" src="'+resourcesFolder+'/images/actions/16/search.png" border="0"/></a><a class="icon-remove" href="" id="stop_search_button" message_title_id="185" title="'+MessageHash[185]+'"><img width="16" height="16" align="absmiddle" src="'+resourcesFolder+'/images/actions/16/fileclose.png" border="0" /></a></div><div id="search_results"></div></div>'),this._appOptions.toggleResultsVisibility&&(this.htmlElement.down("#search_results").insert({before:"<div style='display: none;' id='"+this._appOptions.toggleResultsVisibility+"'></div>"}),this.htmlElement.down("#"+this._appOptions.toggleResultsVisibility).insert(this.htmlElement.down("#search_results"))),this.htmlElement.down("div.panelHeader")&&this.htmlElement.down("div#search_panel").insert({top:this.htmlElement.down("div.panelHeader")}),this.metaOptions=[],this.htmlElement.down("#search_meta")&&this.htmlElement.down("#search_meta").remove(),this._appOptions&&this._appOptions.metaColumns){var e=this._appOptions.metaColumns;this._appOptions.toggleResultsVisibility?this.htmlElement.down("#"+this._appOptions.toggleResultsVisibility).insert({top:'<div id="search_meta">'+MessageHash[344]+' : <span id="search_meta_options"></span></div>'}):$("search_form").insert({bottom:'<div id="search_meta">'+MessageHash[344]+' : <span id="search_meta_options"></span></div>'}),this.initMetaOption($("search_meta_options"),"filename",MessageHash[1],!0);for(var t in e)this.indexedFields&&!this.indexedFields.include(t)||this.initMetaOption($("search_meta_options"),t,e[t])}else $("search_form").insert('<div style="clear:left;height:9px;"></div>');this._inputBox=$("search_txt"),this._resultsBoxId="search_results",this._searchButtonName="search_button",this._runningQueries=new Array,this._queue=$A([]),$("stop_"+this._searchButtonName).addClassName("disabled"),this._fileList=new FilesList($(this._resultsBoxId),{dataModel:this._dataModel,columnsDef:[{attributeName:"APP_label",messageId:1,sortType:"String"},{attributeName:"search_score",messageString:"Score",sortType:"Number"},{attributeName:"filename",messageString:"Path",sortType:"String"}],displayMode:"detail",fixedDisplayMode:"detail",defaultSortTypes:["String","String","String"],columnsTemplate:"search_results",selectable:!0,draggable:!1,replaceScroller:!0,fit:"height",fitParent:this.options.toggleResultsVisibility,detailThumbSize:64}),this.htmlElement.select("a",'div[id="search_results"]').each(function(e){disableTextSelection(e)}),this._inputBox.observe("keydown",function(e){return e.keyCode==Event.KEY_RETURN&&(Event.stop(e),this.search()),e.keyCode!=Event.KEY_TAB}.bind(this)),this._inputBox.observe("focus",function(e){return app.disableShortcuts(),app.disableNavigation(),this.hasFocus=!0,this._inputBox.select(),this.hasResults&&this._appOptions.toggleResultsVisibility&&!$(this._appOptions.toggleResultsVisibility).visible()&&(this.updateSearchResultPosition($(this._appOptions.toggleResultsVisibility)),$(this._appOptions.toggleResultsVisibility).setStyle({display:"block"})),!1}.bind(this)),this._inputBox.observe("blur",function(e){app.enableShortcuts(),app.enableNavigation(),this.hasFocus=!1}.bind(this)),$(this._searchButtonName).onclick=function(){return this.search(),!1}.bind(this),$("stop_"+this._searchButtonName).onclick=function(){return this.interrupt(),!1}.bind(this),this.refreshObserver=function(e){"use strict";this._inputBox.setValue(""),this.clearResults(),$(this.options.toggleResultsVisibility)&&$(this._appOptions.toggleResultsVisibility).setStyle({display:"none"})}.bind(this),document.observe("app:repository_list_refreshed",this.refreshObserver),this.resize()}},showElement:function(e){this.htmlElement&&(e?this.htmlElement.show():this.htmlElement.hide())},resize:function($super){this._appOptions.toggleResultsVisibility?(fitHeightToBottom($(this._appOptions.toggleResultsVisibility),null,this._appOptions.fitMarginBottom?this._appOptions.fitMarginBottom:0),fitHeightToBottom($(this._resultsBoxId))):fitHeightToBottom($(this._resultsBoxId),null,this._appOptions.fitMarginBottom?this._appOptions.fitMarginBottom:0),this._fileList&&this._fileList.resize(),this.htmlElement&&this.htmlElement.visible()},destroy:function(){if(this._fileList&&(this._fileList.destroy(),this._fileList=null),this.htmlElement){var e=this.htmlElement.id;this.htmlElement.update("")}if(document.stopObserving("app:repository_list_refreshed",this.refreshObserver),document.stopObserving("app:registry_loaded",this.searchModeObserver),this.htmlElement=null,e&&window[e])try{delete window[e]}catch(e){}},initMetaOption:function(e,t,i,s){var n=new Element("span",{value:t,className:"search_meta_opt"}).update('<span class="icon-ok"></span>'+i);s&&n.addClassName("checked"),e.childElements().length&&e.insert(", "),e.insert(n),n.observe("click",function(e){n.toggleClassName("checked")}),this.metaOptions.push(n)},hasMetaSearch:function(){var e=!1;return this.metaOptions.each(function(t){"filename"!=t.getAttribute("value")&&t.hasClassName("checked")&&(e=!0)}),e},getSearchColumns:function(){var e=$A();return this.metaOptions.each(function(t){t.hasClassName("checked")&&e.push(t.getAttribute("value"))}),e},focus:function(){this.htmlElement&&this.htmlElement.visible()&&(this._inputBox.activate(),this.hasFocus=!0)},blur:function(){this._inputBox&&this._inputBox.blur(),this.hasFocus=!1},search:function(){var e=this._inputBox.value;if(""!=e){this.crtText=e.toLowerCase(),this.updateStateSearching(),this.clearResults();var t=app.getContextNode().getPath();"/"==t&&(t=""),window.setTimeout(function(){this.searchFolderContent(t)}.bind(this),0)}},interrupt:function(){"idle"!=this._state&&(this._state="interrupt",this._queue=$A())},updateStateSearching:function(){this._state="searching",$(this._searchButtonName).addClassName("disabled"),$("stop_"+this._searchButtonName).removeClassName("disabled"),this._appOptions.toggleResultsVisibility&&($(this._appOptions.toggleResultsVisibility).down("div.panelHeader.toggleResults")||($(this._appOptions.toggleResultsVisibility).insert({top:"<div class='panelHeader toggleResults'>Results<span class='close_results icon-remove-sign'></span></div>"}),this.resultsDraggable=new Draggable(this._appOptions.toggleResultsVisibility,{handle:"panelHeader",zindex:999,starteffect:function(e){},endeffect:function(e){}})),$(this._appOptions.toggleResultsVisibility).down("span.close_results")&&$(this._appOptions.toggleResultsVisibility).down("span.close_results").observe("click",function(){$(this._appOptions.toggleResultsVisibility).setStyle({display:"none"})}.bind(this)),$(this._appOptions.toggleResultsVisibility).visible()||(this.updateSearchResultPosition($(this._appOptions.toggleResultsVisibility)),$(this._appOptions.toggleResultsVisibility).setStyle({display:"block",position:"absolute"})),this.resize())},updateSearchResultPosition:function(e){var t=this._inputBox.cumulativeOffset().top+this._inputBox.getHeight()+3,i=this._inputBox.cumulativeOffset().left;i+e.getWidth()>document.viewport.getWidth()+10&&(i=document.viewport.getWidth()-e.getWidth()-10),e.setStyle({top:t+"px",left:i+"px"})},updateStateFinished:function(e){this._state="idle",this._inputBox.disabled=!1,$(this._searchButtonName).removeClassName("disabled"),$("stop_"+this._searchButtonName).addClassName("disabled")},clear:function(){this.clearResults(),this._inputBox&&(this._inputBox.value="")},clearResults:function(){this.hasResults=!1,this._rootNode.clear(),this._even=!1},addResult:function(e,t,i){if(this._rootNode)this._rootNode.addChild(t);else{var s=t.getLabel(),n=t.getIcon();""==e&&(e="/"),"remote"==this._searchMode&&(e=getRepName(t.getPath()));var o=!1;null==n&&(o=!0,n="folder.png","/"!=e&&(e+="/"),e+=s);var a,r='<img align="absmiddle" width="16" height="16" src="'+resolveImageSource(n,"/images/mimes/16",16)+'"> ';a=i?s+" ("+this.highlight(i,this.crtText,20)+") ":this.highlight(s,this.crtText);var l=new Element("div",{title:MessageHash[224]+" "+e,className:this._even?"even":""}).update(r+a);this._even=!this._even,$(this._resultsBoxId).insert(l),"remote"==this._searchMode&&t.getMetadata().get("search_score")&&l.insert(new Element("span",{className:"searchScore"}).update("SCORE "+t.getMetadata().get("search_score"))),o?l.observe("click",function(t){app.goTo(e)}):l.observe("click",function(t){app.goTo(e+"/"+s)}),this.hasResults=!0}},addNoResultString:function(){$(this._resultsBoxId).insert(new Element("div").update("No results found."))},appendFolderToQueue:function(e){this._queue.push(e)},searchNext:function(){if(this._queue.length){var e=this._queue.first();this._queue.shift(),this.searchFolderContent(e)}else this.updateStateFinished()},searchFolderContent:function(e){if("interrupt"!=this._state)if("remote"==this._searchMode){(t=new Connexion).addParameter("get_action","search"),t.addParameter("query",this.crtText),this.hasMetaSearch()&&t.addParameter("fields",this.getSearchColumns().join(",")),t.onComplete=function(t){this._parseResults(t.responseXML,e),this.updateStateFinished(),this.removeOnLoad($(this._resultsBoxId))}.bind(this),this.setOnLoad($(this._resultsBoxId)),t.sendAsync()}else{var t=new Connexion;t.addParameter("get_action","ls"),t.addParameter("options","a"+(this.hasMetaSearch()?"l":"")),t.addParameter("dir",e),t.onComplete=function(t){this._parseXmlAndSearchString(t.responseXML,e),this.searchNext()}.bind(this),t.sendAsync()}else this.updateStateFinished()},_parseXmlAndSearchString:function(e,t){if("interrupt"!=this._state){if(null==e||null==e.documentElement);else for(var i=XPathSelectNodes(e.documentElement,"tree"),s=0;s<i.length;s++)if("tree"==i[s].tagName){var n=this.parseManifestNode(i[s]);if(this._searchNode(n,t),!n.isLeaf()){var o=n.getPath();this.appendFolderToQueue(o)}}}else this.updateStateFinished()},_parseResults:function(e,t){if("interrupt"!=this._state&&null!=e&&null!=e.documentElement){var i=XPathSelectNodes(e.documentElement,"tree");i.length||this.addNoResultString();for(var s=0;s<i.length;s++)if("tree"==i[s].tagName){var n=this.parseManifestNode(i[s]);if(this.hasMetaSearch()){for(var o=this.getSearchColumns(),a=!1,r=0;r<o.length;r++){var l=n.getMetadata().get(o[r]);l&&-1!=l.toLowerCase().indexOf(this.crtText)&&(this.addResult(t,n,l),a=!0)}a||this.addResult(t,n)}else this.addResult(t,n)}this._fileList&&this._fileList.reload()}else this.updateStateFinished()},_searchNode:function(e,t){var i,s=!0;if(this.hasMetaSearch()&&((i=this.getSearchColumns()).indexOf("filename")||(s=!1)),s&&-1!=e.getLabel().toLowerCase().indexOf(this.crtText))return this.addResult(t,e),void(this._fileList&&this._fileList.reload());if(i)for(var n=0;n<i.length;n++){var o=e.getMetadata().get(i[n]);if(o&&-1!=o.toLowerCase().indexOf(this.crtText))return this.addResult(t,e,o),void(this._fileList&&this._fileList.reload())}},parseManifestNode:function(e){for(var t=new ManifestNode(e.getAttribute("filename"),"1"==e.getAttribute("is_file")||"true"==e.getAttribute("is_file"),e.getAttribute("text"),e.getAttribute("icon")),i=new Hash,s=0;s<e.attributes.length;s++)i.set(e.attributes[s].nodeName,e.attributes[s].nodeValue),Prototype.Browser.IE&&"ID"==e.attributes[s].nodeName&&i.set("sql_"+e.attributes[s].nodeName,e.attributes[s].nodeValue);return t.setMetadata(i),t},highlight:function(e,t,i){var s=e.toLowerCase().indexOf(t);if(-1==s)return e;var n=s+t.length;if(i&&e.length>i){Math.round(i/2);var o=Math.max(Math.round((n+s)/2-i/2),0),a=Math.min(Math.round((n+s)/2+i/2),e.length);e=e.substring(o,a),o>0&&(e="..."+e),a<e.length&&(e+="..."),n=(s=e.toLowerCase().indexOf(t))+t.length}return e.substring(0,s)+"<em>"+e.substring(s,n)+"</em>"+e.substring(n)},setOnLoad:function(e){addLightboxMarkupToElement(e);var t=new Element("img",{src:resourcesFolder+"/images/loadingImage.gif",style:"margin-top: 10px;"});$(e).down("#element_overlay").insert(t),this.loading=!0},removeOnLoad:function(e){removeLightboxFromElement(e),this.loading=!1}}),Class.create("FetchedResultPane",FilesList,{_rootNode:null,_dataLoaded:!1,initialize:function($super,e,t){var i=new DataModel(!0),s=new RemoteNodeProvider;i.setManifestNodeProvider(s),s.initProvider(t.nodeProviderProperties),this._rootNode=new ManifestNode("/",!1,"Results","folder.png",s),i.setRootNode(this._rootNode),$super($(e),{dataModel:i,columnsDef:[{attributeName:"APP_label",messageId:1,sortType:"String"},{attributeName:"filename",messageString:"Path",sortType:"String"},{attributeName:"is_file",messageString:"Type",sortType:"String",defaultVisibility:"hidden"}],displayMode:"detail",fixedDisplayMode:"detail",defaultSortTypes:["String","String","String"],columnsTemplate:"search_results",selectable:!0,draggable:!1,replaceScroller:!0,fit:"height",detailThumbSize:22}),i.observe("selection_changed",function(){if(this._dataLoaded){var e=this._dataModel.getSelectedNodes()[0];e&&app.goTo(e)}}.bind(this)),document.observe("app:repository_list_refreshed",function(){this._rootNode.clear(),this._dataLoaded=!1,this.htmlElement&&this.htmlElement.visible()&&this.showElement(!0)}.bind(this)),this.hiddenColumns.push("is_file"),this._sortableTable.sort(2,!1),e.addClassName("class-FetchedResultPane"),t.reloadOnServerMessage&&app.observe("server_message",function(e){XPathSelectSingleNode(e,t.reloadOnServerMessage)&&this._dataLoaded&&(this._rootNode.clear(),this._dataLoaded=!1,this.htmlElement&&this.htmlElement.visible()&&(this._dataModel.requireContextChange(this._rootNode,!0),this._dataLoaded=!0))}.bind(this))},showElement:function(e){this.htmlElement&&(e&&!this._dataLoaded&&(this._dataModel.requireContextChange(this._rootNode,!0),this._dataLoaded=!0),e?this.htmlElement.show():(this._dataModel.setSelectedNodes($A()),this.htmlElement.hide()))},getActions:function(){}}),Class.create("InfoPanel",AppPane,{initialize:function($super,e,t){$super(e,t),disableTextSelection(e);var i=e.id,s=new Element("div",{className:"panelContent",id:"ip_content_"+i});t||(t={replaceScroller:!0}),t.replaceScroller&&(this.scroller=new Element("div",{id:"ip_scroller_"+i,className:"scroller_track"}),this.scroller.insert(new Element("div",{id:"ip_scrollbar_handle_"+i,className:"scroller_handle"})),this.htmlElement.insert(this.scroller),s.setStyle({overflow:"hidden"})),this.htmlElement.insert(s),t.replaceScroller&&(this.scrollbar=new Control.ScrollBar("ip_content_"+i,"ip_scroller_"+i,{fixed_scroll_distance:50})),window.isMobile&&attachMobileScroll(s,"vertical"),this.contentContainer=s,this.setContent("<br><br><center><i>"+MessageHash[132]+"</i></center>"),this.mimesTemplates=new Hash,this.registeredMimes=new Hash,this.updateHandler=this.update.bind(this),this.componentConfigHandler=function(e){"InfoPanel"==e.memo.className&&this.parseComponentConfig(e.memo.classConfig.get("all"))}.bind(this),this.userLogHandler=this.clearPanels.bind(this),this.options.skipObservers||(document.observe("app:actions_refreshed",this.updateHandler),document.observe("app:component_config_changed",this.componentConfigHandler),document.observe("app:user_logged",this.userLogHandler))},open:function($super,e){this.htmlElement.up("div.dialogBox").setStyle({width:Math.min(450,document.viewport.getWidth())+"px"}),this.htmlElement.up("div.dialogContent").setStyle({padding:0}),this.htmlElement.down("#ip_content_info_panel").setStyle({position:"relative",top:0,left:0,width:"100%",height:Math.min(450,document.viewport.getHeight()-28)+"px",overflow:"auto"});try{this.htmlElement.down("#ip_content_modal_action_form").remove(),this.htmlElement.down("#ip_scroller_modal_action_form").remove()}catch(e){}modal.refreshDialogPosition()},destroy:function(){if(this.options.skipObservers||(document.stopObserving("app:actions_refreshed",this.updateHandler),document.stopObserving("app:component_config_changed",this.componentConfigHandler),document.stopObserving("app:user_logged",this.userLogHandler)),this.empty(),this.scrollbar&&(this.scrollbar.destroy(),this.scroller.remove()),this.htmlElement.update(""),window[this.htmlElement.id])try{delete window[this.htmlElement.id]}catch(e){}this.htmlElement=null},clearPanels:function(){this.mimesTemplates=new Hash,this.registeredMimes=new Hash},empty:function(){this.currentPreviewElement&&this.currentPreviewElement.destroyElement&&(this.currentPreviewElement.destroyElement(),this.currentPreviewElement=null),this.setContent("")},update:function(e){if(this.htmlElement){if(e.__className&&"ManifestNode"==e.__className)var t=e;var i=app.getUserSelection(),s=i.getContextNode();if(this.empty(),this.clearPanelHeaderIcons(),this.scrollbar&&this.scrollbar.recalculateLayout(),s){if(!t&&i.isEmpty()){var n;i.getContextNode()&&(n=getBaseName(i.getContextNode().getPath())),""==n&&$("repo_path")&&(n=$("repo_path").value);for(var o=i.getContextNode().getChildren(),a=0,r=0,l=0,d=0;d<o.length;d++){o[d].isLeaf()?l++:r++;var h=o[d].getMetadata();h.get("bytesize")&&""!=h.get("bytesize")&&(a+=parseInt(h.get("bytesize")))}this.evalTemplateForMime("no_selection",null,{filelist_folders_count:r,filelist_files_count:l,filelist_totalsize:roundSize(a,MessageHash?MessageHash[266]:"B"),current_folder:n});try{!r&&$(this.contentContainer).select('[id="filelist_folders_count"]').length&&$(this.contentContainer).select('[id="filelist_folders_count"]')[0].hide(),!l&&$(this.contentContainer).select('[id="filelist_files_count').length&&$(this.contentContainer).select('[id="filelist_files_count"]')[0].hide(),!a&&$(this.contentContainer).select('[id="filelist_totalsize"]').length&&$(this.contentContainer).select('[id="filelist_totalsize"]')[0].hide()}catch(e){}return this.addActions("empty"),this.scrollbar&&this.scrollbar.recalculateLayout(),this.updateTitle(),void disableTextSelection(this.contentContainer)}if(!t&&!i.isUnique())return this.setContent("<br><br><center><i>"+i.getFileNames().length+" "+MessageHash[128]+"</i></center><br><br>"),this.addActions("multiple"),this.scrollbar&&this.scrollbar.recalculateLayout(),void disableTextSelection(this.contentContainer);if(t)c=t;else var c=i.getUniqueNode();this.updateTitle(c.getLabel());var u=!1;c&&(u=c.isLeaf());var m=getMimeType(c),p=c.getMetadata();"dco"!=m&&this.evalTemplateForMime(u?"generic_file":"generic_dir",c),this.registeredMimes.each(function(e){"use strict";e.key==m&&this.evalTemplateForMime(m,c),0===e.key.indexOf("meta:")&&p.get(e.key.replace("meta:",""))&&this.evalTemplateForMime(e.key,c)}.bind(this)),this.contentContainer.select("[data-action]").each(function(e){"no-action"!=e.getAttribute("data-action")?e.observe("click",function(e){window.app.actionBar.fireAction(e.target.getAttribute("data-action"))}.bind(this)):e.setStyle({cursor:"default"});var t=e.up("div.panelHeader").next();this.contributePanelHeaderIcon(e.getAttribute("class"),e.getAttribute("title"),e.getAttribute("data-action"),t)}.bind(this)),this.addActions("unique");var _=this.contentContainer.select('div[id="preview_rich_fake_element"]');_&&_.length&&(this.currentPreviewElement=this.getPreviewElement(c,!1),$(_[0]).replace(this.currentPreviewElement),this.resize()),this.scrollbar&&this.scrollbar.recalculateLayout(),disableTextSelection(this.contentContainer)}}},setContent:function(e){this.htmlElement&&this.contentContainer.update(e)},updateTitle:function(e){if(this.htmlElement){e||(e=MessageHash[131]);var t=this.htmlElement.down("div.panelHeader");t&&t.down("span[message_id]")&&t.down("span[message_id]").update(e)}},clearPanelHeaderIcons:function(){if(this.htmlElement){var e=this.htmlElement.down("div.folded_icons");e&&e.update("")}},contributePanelHeaderIcon:function(e,t,i,s){if(this.htmlElement&&this.htmlElement.down("div.panelHeader")){var n=this.htmlElement.down("div.folded_icons");if(n){if(n.down("span."+e))return}else n=new Element("div",{className:"folded_icons"}),this.htmlElement.down("div.panelHeader").insert(n);var o=new Element("span",{className:e,title:t});n.insert(o),i&&(o.addClassName("clickable"),o.observe("click",function(){app.actionBar.fireAction(i)}.bind(this))),s&&modal.simpleTooltip(o,s,"bottom left","foldedPanel_tooltip","element",!0)}},showElement:function(e){this.htmlElement&&(e?this.htmlElement.show():this.htmlElement.hide())},resize:function(){this.contentContainer.removeClassName("double"),this.contentContainer.removeClassName("triple");var e=150;if(parseInt(this.contentContainer.getWidth())>500&&(this.contentContainer.addClassName("double"),e=300),parseInt(this.contentContainer.getWidth())>750&&(this.contentContainer.addClassName("triple"),e=450),fitHeightToBottom(this.contentContainer,null),e=Math.min(e,parseInt(this.contentContainer.getHeight())-parseInt(this.contentContainer.getStyle("paddingTop"))),this.scrollbar&&(this.scroller.setStyle({height:parseInt(this.contentContainer.getHeight())+"px"}),this.scrollbar.recalculateLayout()),this.htmlElement&&this.currentPreviewElement&&this.currentPreviewElement.visible()){var t=Math.min(parseInt(this.htmlElement.getWidth()-40));this.currentPreviewElement.resizePreviewElement({width:t,height:t,maxHeight:e})}this.htmlElement&&document.fire("app:resize-InfoPanel-"+this.htmlElement.id,this.htmlElement.getDimensions())},evalTemplateForMime:function(mimeType,fileNode,tArgs){if(this.htmlElement&&this.registeredMimes.get(mimeType))for(var registeredTemplates=this.registeredMimes.get(mimeType),i=0;i<registeredTemplates.length;i++){var templateData=this.mimesTemplates.get(registeredTemplates[i]),tString=templateData[0],tAttributes=templateData[1],tMessages=templateData[2],tModifier=templateData[3];tArgs||(tArgs=new Object);var panelWidth=this.htmlElement.getWidth(),oThis=this;if(fileNode){var metadata=fileNode.getMetadata();tAttributes.each(function(e){if("basename"==e&&metadata.get("filename"))this[e]=getBaseName(metadata.get("filename"));else if("compute_image_dimensions"==e){if(metadata.get("image_width")&&metadata.get("image_height")){var t=metadata.get("image_width"),i=metadata.get("image_height"),s=150;i<s&&(s=i);var n='height="'+s+'"';s*t/i>panelWidth-16&&(n='width="100%"')}else n='height="64" width="64"';this[e]=n}else if("preview_rich"==e)this[e]=oThis.getPreviewElement(fileNode,!0);else if("encoded_filename"==e&&metadata.get("filename"))this[e]=encodeURIComponent(metadata.get("filename"));else if("escaped_filename"==e&&metadata.get("filename"))this[e]=escape(encodeURIComponent(metadata.get("filename")));else if("formated_date"==e&&metadata.get("modiftime")){var o=metadata.get("modiftime");if(o instanceof Object)this[e]=formatDate(o);else{var a=new Date;a.setTime(1e3*parseInt(metadata.get("modiftime"))),this[e]=formatDate(a)}}else if("uri"==e){var r=document.location.href;"/"==r[r.length-1]?r=r.substr(0,r.length-1):r.lastIndexOf("/")>-1&&(r=r.substr(0,r.lastIndexOf("/"))),this[e]=r}else if("customicon"==e){var l=metadata.get(e);if(l&&""!=l){var d=l.split(".").pop().toLowerCase(),h=app.findEditorsForMime(d);if(h.length){var c=new ManifestNode([fileNode.getPath(),"src",l].join("/"),!0);c.getMetadata().set("repository_id",fileNode.getMetadata().get("repository_id")),l=Class.getByName(h[0].editorClass).prototype.getThumbnailSource(c)}else l=resolveImageSource(metadata.get("icon"),"/images/mimes/64")}else l=resolveImageSource(metadata.get("icon"),"/images/mimes/64");this[e]=l}else metadata.get(e)?this[e]=metadata.get(e):this[e]=""}.bind(tArgs))}tMessages.each(function(e){this[e.key]=MessageHash[e.value]}.bind(tArgs));var template=new Template(tString);if(this.contentContainer.down("div.infoPanelAllMetadata")?this.contentContainer.down("div.infoPanelAllMetadata").insert(template.evaluate(tArgs)):this.contentContainer.insert(template.evaluate(tArgs)),tModifier){var modifierFunc=eval(tModifier);modifierFunc(this.contentContainer,fileNode)}}},addActions:function(e){if(!this.options.skipActions){var t=app.actionBar.getActionsForAppWidget("InfoPanel",this.htmlElement.id);if(t.length){var i='<div class="panelHeader infoPanelGroup">'+MessageHash[5]+'</div><div class="infoPanelActions">',s=0;t.each(function(t){if(("empty"!=e||!t.context.selection)&&("multiple"!=e||!t.selectionContext.unique)&&("unique"!=e||t.context.selection&&!t.selectionContext.multipleOnly)){var n="";t.options.name&&(n='id="action_instance_'+t.options.name+'"'),i+='<a href="" '+n+" onclick=\"app.actionBar.fireAction('"+t.options.name+'\');return false;"><img src="'+resolveImageSource(t.options.src,"/images/actions/ICON_SIZE",16)+'" width="16" height="16" align="absmiddle" border="0"> '+t.options.title+"</a>",s++}}.bind(this)),i+="</div>",s&&this.contentContainer.insert(i)}}},getPreviewElement:function(e,t){var i=app.findEditorsForMime(e.getMime(),!0);if(i&&i.length){app.loadEditorResources(i[0].resourcesManager);var s=Class.getByName(i[0].editorClass);if(s){if(this.contributePanelHeaderIcon("icon-eye-close","Preview","open_with"),t)return'<div id="preview_rich_fake_element"></div>';return s.prototype.getPreview(e,!0)}}return'<img src="'+resolveImageSource(e.getIcon(),"/images/mimes/ICON_SIZE",64)+'" height="64" width="64">'},parseComponentConfig:function(e){for(var t=XPathSelectNodes(e,"infoPanel|infoPanelExtension"),i=0;i<t.length;i++){var s=t[i].getAttribute("mime"),n=$A(t[i].getAttribute("attributes").split(",")),o=new Hash,a=t[i].getAttribute("modifier")||"",r="",l=t[i].childNodes;for(j=0;j<l.length;j++)if("messages"==l[j].nodeName){var d=l[j].childNodes;for(k=0;k<d.length;k++)"message"==d[k].nodeName&&o.set(d[k].getAttribute("key"),d[k].getAttribute("id"))}else"html"==l[j].nodeName&&l[j].firstChild&&(r=l[j].firstChild.nodeValue);var h=hex_md5(r);this.mimesTemplates.get(h)||(this.mimesTemplates.set(h,$A([r,n,o,a])),$A(s.split(",")).each(function(e){var t=this.registeredMimes.get(e)||$A([]);t.push(h),this.registeredMimes.set(e,t)}.bind(this)))}}}),Class.create("PropertyPanel",{initialize:function(e,t){this.rights=["4","2","1"],this.accessors=["u","g","a"],this.accessLabels=[MessageHash[288],MessageHash[289],MessageHash[290]],this.rightsLabels=["r","w","x"],this.htmlElement=$(t).select("[id='properties_box']")[0],e.isUnique()?this.origValue=e.getUniqueNode().getMetadata().get("file_perms"):this.origValue="",this.createChmodForm(),this.valueInput.observe(Prototype.Browser.IE?"change":"input",function(e){this.updateBoxesFromValue(this.valueInput.value)}.bind(this)),this.updateBoxesFromValue(this.valueInput.value),e.hasDir()&&this.createRecursiveBox()},valueChanged:function(){return this.origValue!=this.valueInput.value},createChmodForm:function(){this.checks=$H({});var e=new Element("table",{style:"font-size:11px;"}),t=new Element("thead"),i=new Element("tbody");e.insert(t),e.insert(i);var s=new Element("tr"),n=new Element("td");s.insert(n),t.insert(s);for(l=0;l<3;l++)s.insert(new Element("td").update(this.rightsLabels[l]+"&nbsp;&nbsp;").setStyle({textAlign:"center"}));for(var o=0;o<3;o++){var a=new Element("tr"),r=new Element("td").setStyle({textAlign:"right",paddingRight:"2px",width:"35px"});r.insert(this.accessLabels[o]),i.insert(a),a.insert(r);for(var l=0;l<3;l++){var d=this.createCheckBox(this.accessors[o],this.rights[l]);a.insert(d)}}this.valueInput=new Element("input",{value:this.origValue,name:"chmod_value"}).setStyle({width:"95%"});var h=new Element("tr");i.insert(h),h.insert(new Element("td")),h.insert(new Element("td",{colspan:3}).update(this.valueInput)),this.htmlElement.insert(e)},createCheckBox:function(e,t){var i=new Element("input",{type:"checkbox",id:e+"_"+t}).setStyle({width:"14px",height:"14px",borderWidth:"0"}),s=new Element("td",{align:"center"}).insert(i).setStyle({width:"25px"});return i.observe("click",function(e){this.updateValueFromBoxes()}.bind(this)),this.checks.set(e+"_"+t,i),s},createRecursiveBox:function(){var e=new Element("div",{style:"padding-top:8px;"}),t=new Element("input",{type:"checkbox",name:"recursive"}).setStyle({width:"14px",height:"14px",borderWidth:"0"});e.insert(t),e.insert(MessageHash[291]),this.htmlElement.insert(e);var i={both:"Both",file:"Files",dir:"Folders"},s=new Element("div");e.insert(s);for(var n in i){var o=new Element("div",{style:"padding-left:25px"}),a=new Element("input",{type:"radio",name:"recur_apply_to",value:n,style:"width:25px;border:0;"});o.insert(a),"both"==n&&(a.checked=!0),o.insert(i[n]),s.insert(o)}s.hide(),t.observe("click",function(e){t.checked?s.show():s.hide(),modal.refreshDialogAppearance()})},updateValueFromBoxes:function(){for(var e="0",t=0;t<3;t++)e+=this.updateValueForAccessor(this.accessors[t]);this.valueInput.value=e},updateValueForAccessor:function(e){for(var t=0,i=0;i<3;i++)t+=this.checks.get(e+"_"+this.rights[i]).checked?parseInt(this.rights[i]):0;return t},updateBoxesFromValue:function(e){if(4==e.length)for(var t=0;t<3;t++)this.valueToBoxes(parseInt(e.charAt(t+1)),this.accessors[t])},valueToBoxes:function(e,t){for(var i=0;i<3;i++)this.checks.get(t+"_"+this.rights[i]).checked=!1;if(0!=e){var s=$A([]);switch(e){case 1:s.push("1");break;case 2:s.push("2");break;case 3:s.push("1"),s.push("2");break;case 4:s.push("4");break;case 5:s.push("4"),s.push("1");break;case 6:s.push("4"),s.push("2");break;case 7:s.push("2"),s.push("4"),s.push("1")}s.each(function(e){this.checks.get(t+"_"+e).checked=!0}.bind(this))}}}),Class.create("AbstractEditor",{defaultActions:new Hash,toolbarSeparator:'<div class="separator"></div>',fullScreenMode:!1,editorOptions:null,inputNode:null,initialize:function(e,t){this.editorOptions=Object.extend({fullscreen:!0,closable:!0,floatingToolbar:!1},t||{}),this.element=$(e),this.defaultActions=new Hash({fs:'<a id="fsButton" class="icon-resize-full"><img src="'+resourcesFolder+'/images/actions/22/window_fullscreen.png"  width="22" height="22" alt="" border="0"><br><span message_id="235"></span></a>',nofs:'<a id="nofsButton" class="icon-resize-small" style="display:none;"><img src="'+resourcesFolder+'/images/actions/22/window_nofullscreen.png"  width="22" height="22" alt="" border="0"><br><span message_id="236"></span></a>',close:'<a id="closeButton" class="icon-remove-sign"><img src="'+resourcesFolder+'/images/actions/22/fileclose.png"  width="22" height="22" alt="" border="0"><br><span message_id="86"></span></a>'}),this.editorOptions.actions&&(this.defaultActions=$H(Object.extend(this.defaultActions._object,this.editorOptions.actions))),this.createTitleSpans(),this.initActions(),modal.setCloseAction(function(){this.close()}.bind(this))},initActions:function(){this.actions=new Hash,this.registeredActions=new Hash;var e=this.element.select(".action_bar");e.length?this.actionBar=e[0]:(this.actionBar=new Element("div",{className:"action_bar"}),this.element.insert({top:this.actionBar})),this.actionBar.addClassName("editor_action_bar"),this.editorOptions.fullscreen||(this.defaultActions.unset("fs"),this.defaultActions.unset("nofs")),this.actionBar.insert({top:this.toolbarSeparator}),this.actionBar.insert({bottom:this.toolbarSeparator}),this.actionBar.insert({bottom:this.defaultActions.values().join("\n")}),this.actionBar.select("a").each(function(e){e.onclick=function(){return!1},e.href="#",e.select("br").invoke("remove"),e.select("img").invoke("addClassName","actionbar_button_icon"),e.select("span").invoke("addClassName","actionbar_button_label");var t=e.select("span[message_id]")[0],i=MessageHash[t.readAttribute("message_id")];if(t&&t.update(i),this.actions.set(e.id,e),e.getAttribute("access_key")){var s=e.getAttribute("access_key");Event[s]&&(s=Event[s]),this.registeredActions.set(s,e.id),!isNaN(parseFloat(s))&&isFinite(s)||(i+=" ("+s+")")}e.setAttribute("title",i)},this),this.registeredActions.size()&&(this.keyObs=function(e){app.blockEditorShortcuts||(this.registeredActions.get(e.keyCode)?this.actions.get(this.registeredActions.get(e.keyCode)).onclick():this.registeredActions.get(String.fromCharCode(e.keyCode).toLowerCase())&&this.actions.get(this.registeredActions.get(String.fromCharCode(e.keyCode).toLowerCase())).onclick())}.bind(this),Event.observe(document,"keydown",this.keyObs),this.element.observe("editor:close",function(){Event.stopObserving(document,"keydown",this.keyObs)}.bind(this))),this.actions.get("closeButton")&&(this.actions.get("closeButton").observe("click",function(){hideLightBox(!0)}.bind(this)),modal.setCloseValidation(function(){return!(this.isModified&&!window.confirm(MessageHash[201]))}.bind(this)),window.isMobile&&this.actionBar.insert({top:this.actions.get("closeButton")})),this.actions.get("fsButton")&&(this.actions.get("fsButton").observe("click",this.setFullScreen.bind(this)),this.actions.get("nofsButton").observe("click",this.exitFullScreen.bind(this)),this.actions.get("fsButton").show(),this.actions.get("nofsButton").hide()),this.editorOptions.floatingToolbar&&this.makeToolbarFloatable(),this.editorOptions.toolbarStyle&&this.actionBar.addClassName(this.editorOptions.toolbarStyle),attachMobileScroll(this.actionBar,"horizontal");var t=this.resize.bind(this);modal.observe("modal:resize",t),this.element.observe("editor:close",function(){modal.stopObserving("modal:resize",t),this.element.up("div.dialogContent").setStyle({position:null})}.bind(this))},makeToolbarFloatable:function(){this.element.up("div.dialogContent").setStyle({position:"relative"}),this.actionBar.absolutize();var e=parseInt(this.element.getStyle("zIndex"));e||(e=1e3),this.actionBar.setStyle({zIndex:e+1e3,width:"",top:""}),this.actionBar.addClassName("floatingBar"),this.actionBar.down("div.separator").remove(),this.actionBarPlacer=function(){var e=this.floatingToolbarAnchor?this.floatingToolbarAnchor:this.contentMainContainer;if(e){var t=this.actionBar.getWidth(),i=e.getWidth();this.actionBar.setStyle({left:Math.max(0,(i-t)/2)+e.positionedOffset().left+"px"}),this.actionBar.setStyle({top:e.getHeight()-this.actionBar.getHeight()-30+"px"})}}.bind(this),this.element.observe("editor:resize",this.actionBarPlacer),this.element.observe("editor:close",function(){this.element.stopObserving("editor:resize",this.actionBarPlacer)}.bind(this)),window.setTimeout(this.actionBarPlacer,100),new Draggable(this.actionBar)},createTitleSpans:function(){var e=$(modal.dialogTitle).select("span.titleString")[0];this.filenameSpan=new Element("span",{className:"filenameSpan"}),e.insert({bottom:this.filenameSpan}),this.modifSpan=new Element("span",{className:"modifiedSpan"}),e.insert({bottom:this.modifSpan})},open:function(e){this.inputNode=e},updateTitle:function(e){""!=e&&(e=" - "+e),this.filenameSpan.update(e),this.fullScreenMode&&this.refreshFullScreenTitle()},setModified:function(e){this.isModified=e,this.modifSpan.update(e?"*":""),this.actions.get("saveButton")&&(e?this.actions.get("saveButton").removeClassName("disabled"):this.actions.get("saveButton").addClassName("disabled")),this.fullScreenMode&&this.refreshFullScreenTitle(),this.element.fire("editor:modified",e)},setFullScreen:function(){this.contentMainContainer||(this.contentMainContainer=this.element),this.originalHeight=this.contentMainContainer.getHeight(),this.originalWindowTitle=document.title,this.element.fire("editor:enterFS"),this.element.absolutize(),this.actionBar.setStyle({marginTop:0}),$(document.body).insert(this.element),this.element.setStyle({top:0,left:0,marginBottom:0,backgroundColor:"#fff",width:parseInt(document.viewport.getWidth())+"px",height:parseInt(document.viewport.getHeight())+"px",zIndex:3e3}),this.actions.get("fsButton").hide(),this.actions.get("nofsButton").show(),this.fullScreenListener=function(){this.element.setStyle({height:parseInt(document.viewport.getHeight())+"px"}),this.resize()}.bind(this),Event.observe(window,"resize",this.fullScreenListener),this.refreshFullScreenTitle(),this.resize(),this.fullScreenMode=!0,this.element.fire("editor:enterFSend")},exitFullScreen:function(){if(this.fullScreenMode){this.element.fire("editor:exitFS"),Event.stopObserving(window,"resize",this.fullScreenListener);var e=$$(".dialogContent")[0];e.setStyle({position:"relative"}),e.insert(this.element),this.element.relativize(),this.element.setStyle({position:"relative"}),this.element.setStyle({top:0,left:0,width:parseInt(e.getWidth())+"px",height:parseInt(e.getHeight())+"px",zIndex:100}),this.resize(this.originalHeight),this.actions.get("fsButton").show(),this.actions.get("nofsButton").hide(),document.title=this.originalWindowTitle,this.fullScreenMode=!1,this.element.fire("editor:exitFSend")}},resize:function(e){e?this.contentMainContainer.setStyle({height:e+"px"}):fitHeightToBottom(this.contentMainContainer,this.element),this.element.fire("editor:resize",e)},close:function(){return this.fullScreenMode&&this.exitFullScreen(),this.element.fire("editor:close"),modal.setCloseAction(null),!1},refreshFullScreenTitle:function(){document.title=MessageHash["App Title"]+" - "+$(modal.dialogTitle).innerHTML.stripTags().replace("&nbsp;","")},setOnLoad:function(e){e||(e=this.element),addLightboxMarkupToElement(e);var t=new Element("img",{src:resourcesFolder+"/images/loadingImage.gif"});$(e).down("#element_overlay").insert(t),this.loading=!0},removeOnLoad:function(e){e||(e=this.element),removeLightboxFromElement(e),this.loading=!1},getPreview:function(e,t){return src=AbstractEditor.prototype.getThumbnailSource(e),imgObject=new Element("img",{src:src,width:64,height:64,align:"absmiddle",border:0}),imgObject.resizePreviewElement=function(e){e.maxWidth=e.maxHeight=64;var t=fitRectangleToDimension({width:64,height:64},e);if(e.width>=64){var i=parseInt(t.height),s=parseInt((e.width-64)/2)+e.margin,n=e.width+2*e.margin-i-s-1;t.marginTop=s+"px",t.marginBottom=n+"px"}this.setStyle(t)}.bind(imgObject),imgObject},getThumbnailSource:function(e){return resolveImageSource(e.getIcon(),"/images/mimes/ICON_SIZE",64)}}),Class.create("Modal",{pageLoading:!0,initialize:function(){},currentLightBoxElement:null,currentLightBoxModal:null,initForms:function(){this.elementName="generic_dialog_box",this.htmlElement=$(this.elementName),this.dialogTitle=this.htmlElement.select(".dialogTitle")[0],this.dialogContent=this.htmlElement.select(".dialogContent")[0],this.currentForm,this.cachedForms=new Hash,this.iframeIndex=0},prepareHeader:function(e,t,i){var s='<span class="titleString">';""!=t&&(s='<span class="titleString"><img src="'+t.replace("22","16")+'" width="16" height="16" align="top"/>&nbsp;');var n;window.app.currentThemeUsesIconFonts?(i&&(s='<span class="titleString"><span class=\''+i+" icon_span'></span>"),n='<span id="modalCloseBtn" class="icon-remove-sign" style="cursor:pointer;float:right;"></span>'):n='<img id="modalCloseBtn" style="cursor:pointer;float:right;margin-top:2px;" src="'+resourcesFolder+'/images/actions/16/window_close.png" />',s+=e+"</span>",this.dialogTitle.update(n+s)},showDialogForm:function(e,t,i,s,n,o,a,r){this.clearContent(this.dialogContent);if("FORM"==$(t).tagName)(l=$(t)).show();else{var l,d=$(t);(l=document.createElement("form")).id="modal_action_form",l.setAttribute("name","modal_action_form"),l.appendChild(d.cloneNode(!0));var h=null;if($(l).getElementsByTagName("iframe")[0]&&(h=$(l).getElementsByTagName("iframe")[0],reloadIFrameSrc=$(l).getElementsByTagName("iframe")[0].getAttribute("src")),d.getAttribute("action")){var c=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name","get_action"),c.setAttribute("value",d.getAttribute("action")),l.appendChild(c)}}this.cachedForms.get(t)||a||this.addSubmitCancel(l,n,o,"bottom",r),this.dialogContent.appendChild(l);var u=$(t).getAttribute("box_padding");u||(u=10),this.dialogContent.setStyle({padding:u+"px"}),n?this.dialogTitle.select("#modalCloseBtn")[0].observe("click",function(){n(modal.getForm()),hideLightBox()}):this.dialogTitle.select("#modalCloseBtn")[0].observe("click",function(){hideLightBox()}),l.onsubmit=s?function(){try{s(modal.getForm())}catch(e){alert("Unexpected Error : please report!\n"+e)}return!1}:function(){return app.actionBar.submitForm(modal.getForm()),hideLightBox(),!1};var m=void 0;$(t).getAttribute("overlayStyle")&&(m=$(t).getAttribute("overlayStyle").evalJSON()),this.showContent(this.elementName,$(t).getAttribute("box_width"),$(t).getAttribute("box_height"),null,$(t).getAttribute("box_resize")&&"true"==$(t).getAttribute("box_resize"),m),$(l).select(".dialogFocus").length&&(objToFocus=$(l).select(".dialogFocus")[0],setTimeout("objToFocus.focus()",500)),$(l).select(".replace_rep").length&&(repDisplay=$(l).select(".replace_rep")[0],repDisplay.innerHTML=app.getContextHolder().getContextNode().getPath()),$(l).select(".replace_file").length&&(repDisplay=$(l).select(".replace_file")[0],repDisplay.innerHTML=getBaseName(app.getUserSelection().getUniqueFileName())),$(l).select(".dialogEnterKey").length&&Prototype.Browser.IE&&$(l).select(".dialogEnterKey").each(function(e){e.enterObserver||(e.observe("keypress",function(e){e.keyCode==Event.KEY_RETURN&&l.onsubmit()}),e.enterObserver=!0)}),this.currentForm=l,null!=i&&(i(this.currentForm),this.refreshDialogAppearance()),Prototype.Browser.WebKit&&h&&reloadIFrameSrc&&(h.src=reloadIFrameSrc)},showContent:function(e,t,i,s,n,o){app.disableShortcuts(),app.disableNavigation(),app.blurAll();var a=document.viewport.getWidth(),r=document.viewport.getHeight();this.currentListensToWidth=!1,this.currentListensToHeight=!1,null!=t&&(-1==t.indexOf("%")&&parseInt(t)>a&&(t="90%"),t.indexOf("%")>-1&&(percentWidth=parseInt(t),t=parseInt(a*percentWidth/100),this.currentListensToWidth=percentWidth),$(e).setStyle({width:t+"px"})),null!=i?(i.indexOf("%")>-1&&(percentHeight=parseInt(i),i=parseInt(r*percentHeight/100),this.currentListensToHeight=percentHeight),$(e).setStyle({height:i+"px"})):$(e).setStyle({height:"auto"}),this.refreshDialogPosition(),n&&(this.currentListensToWidth||this.currentListensToHeight)?(this.currentResizeListener=function(){if(this.currentListensToWidth){var i=document.viewport.getWidth();t=parseInt(i*this.currentListensToWidth/100),$(e).setStyle({width:t+"px"})}if(this.currentListensToHeight){var s=document.viewport.getHeight();boxH=parseInt(s*this.currentListensToHeight/100),$(e).setStyle({height:boxH+"px"})}this.notify("modal:resize")}.bind(this),Event.observe(window,"resize",this.currentResizeListener)):(this.currentResizeListener=function(){this.refreshDialogPosition()}.bind(this),Event.observe(window,"resize",this.currentResizeListener)),displayLightBoxById(e,o),$(e).style.position="absolute",Prototype.Browser.Gecko?$(e).style.position="fixed":Prototype.Browser.IE&&($$("select").invoke("show"),refreshPNGImages(this.dialogContent))},openEditorDialog:function(editorData,editorArgument){if(editorData.formId){var editorKlass=editorData.editorClass;modal.prepareHeader(editorData.text,resolveImageSource(editorData.icon,"/images/actions/ICON_SIZE",16),editorData.icon_class);var loadFunc=function(oForm){app.actionBar.editor="string"==typeof editorKlass?eval("new "+editorKlass+"(oForm)"):new editorKlass(oForm),editorArgument?app.actionBar.editor.open(editorArgument):app.actionBar.editor.open(app.getUserSelection().getUniqueNode())};this.showDialogForm("",editorData.formId,loadFunc,null,null,!0,!0)}else app.displayMessage("ERROR",'Error, you must define a formId attribute in your &lt;editor&gt; manifest (or set it as openable="false")')},showSimpleModal:function(e,t,i,s,n){var o=new Element("div",{className:"dialogBox css_boxshadow"});if(o.insert(t),t.addClassName("dialogContent"),addLightboxMarkupToElement(e),Prototype.Browser.IE){$("all_forms").insert(o);var a=e.up(".dialogBox");a?o.setStyle({display:"block",zIndex:a.getStyle("zIndex"),top:parseInt(a.getStyle("top")),left:parseInt(a.getStyle("left"))}):o.setStyle({display:"block",zIndex:2e3,top:parseInt(e.getStyle("top")),left:parseInt(e.getStyle("left"))})}else $(e).down("#element_overlay").insert({after:o});this.currentLightBoxElement=$(e),this.currentLightBoxModal=o,this.addSubmitCancel(t,s,null==s,n),t.down(".dialogButtons").select("input").each(function(t){null==s&&"close"==t.getAttribute("name")||"ok"==t.getAttribute("name")?t.observe("click",function(t){Event.stop(t);i()&&(o.remove(),removeLightboxFromElement(e),this.currentLightBoxElement=null,this.currentLightBoxModal=null)}.bind(this)):(t.stopObserving("click"),t.observe("click",function(t){Event.stop(t);s()&&(o.remove(),removeLightboxFromElement(e),this.currentLightBoxElement=null,this.currentLightBoxModal=null)}.bind(this)))})},createTopCaret:function(e){"use strict";e.insert({top:'<span class="icon-caret-up caret-up"></span>'});var t=e.down("span.caret-up");t.setStyle({left:(e.getWidth()-t.getWidth())/2+"px"})},getForm:function(){return this.currentForm},refreshDialogPosition:function(e,t){var i=document.viewport.getWidth(),s=document.viewport.getHeight(),n=$(this.elementName);boxWidth=n.getWidth();var o=n.getHeight();if(e&&o>parseInt(90*s/100)){var a=parseInt(90*s/100),r=o-t.getHeight();a>r&&(t.setStyle({overflow:"auto",height:a-r+"px"}),o=n.getHeight())}var l=parseInt((i-parseInt(boxWidth))/2),d=parseInt((s-parseInt(o))/3);n.offsetLeft&&n.offsetTop?new Effect.Morph($(this.elementName),{style:"top:"+d+"px;left:"+l+"px",duration:.4,afterFinish:this.refreshDialogAppearance.bind(this)}):(n.setStyle({top:d+"px",left:l+"px"}),this.refreshDialogAppearance())},refreshDialogAppearance:function(){},clearContent:function(e){if(e.select("form").length){var t=this;e.select("form").each(function(i){if("hidden_iframe"==i.target||"login_form"==i.id||"user_pref_form"==i.id)i.hide(),t.cachedForms.set(i.id,!0);else try{e.removeChild(i)}catch(e){}})}},addSubmitCancel:function(e,t,i,s,n){var o=new Element("div",{className:"dialogButtons"});n&&o.setStyle({direction:"rtl"});var a=new Element("input",{type:"image",name:"ok",src:resourcesFolder+"/images/actions/22/"+(i?"dialog_ok_apply":n?"forward":"dialog_ok_apply")+".png",height:22,width:22,title:MessageHash[48]});if(a.addClassName("dialogButton"),a.addClassName("dialogFocus"),o.insert(a),!i){var r=new Element("input",{type:"image",name:"can",height:22,width:22,src:resourcesFolder+"/images/actions/22/dialog_close.png",title:MessageHash[49],className:"dialogButton"});t?r.observe("click",function(e){return t(modal.getForm()),hideLightBox(),Event.stop(e),!1}):r.observe("click",function(e){return hideLightBox(),Event.stop(e),!1}),o.insert(r)}s||(s="bottom");var l={};return l[s]=o,$(e).insert(l),e.hasButtons=!0,o},simpleTooltip:function(e,t,i,s,n,o){i||(i="bottom right"),n||(n="pointer"),e.observe("mouseover",function(a){this.tooltip||(this.tooltip=new Element("div",{className:"simple_tooltip"}),s&&this.tooltip.addClassName(s),$$("body")[0].insert(this.tooltip)),o?this.tooltip.update(t.cloneNode(!0)):this.tooltip.update(t);var r="element"==n?Element.cumulativeOffset(e).left:Event.pointerX(a),l="element"==n?Element.cumulativeOffset(e).top:Event.pointerY(a),d=-1!=i.indexOf("right")?r+10:r-10-parseInt(this.tooltip.getWidth()),h=l+10;-1!=i.indexOf("middle")?h-=5+parseInt(this.tooltip.getHeight())/2:-1!=i.indexOf("bottom")&&(h-=13+parseInt(e.getHeight())),this.tooltip.setStyle({top:h+"px",left:d+"px"}),this.tipTimer&&window.clearTimeout(this.tipTimer),e.addClassName("simple_tooltip_observer_active"),this.tooltip.show()}.bind(this)),e.observe("mouseout",function(t){this.tooltip&&(this.tipTimer=window.setTimeout(function(){this.tooltip.hide()}.bind(this),200),e.removeClassName("simple_tooltip_observer_active"))}.bind(this)),e.addClassName("simple_tooltip_observer")},closeMessageDiv:function(){this.messageDivOpen&&(new Effect.Fade(this.messageBox),this.messageDivOpen=!1)},tempoMessageDivClosing:function(){this.messageDivOpen=!0,setTimeout("modal.closeMessageDiv()",6e3)},displayMessage:function(e,t){this.messageBox||(this.messageBox=new Element("div",{title:MessageHash[98],id:"message_div",className:"messageBox"}),$(document.body).insert(this.messageBox),this.messageContent=new Element("div",{id:"message_content"}),this.messageBox.update(this.messageContent),this.messageBox.observe("click",this.closeMessageDiv.bind(this))),t=(t=t.stripScripts()).replace(new RegExp("(\\n)","g"),"<br>"),"ERROR"==e?(this.messageBox.removeClassName("logMessage"),this.messageBox.addClassName("errorMessage")):(this.messageBox.removeClassName("errorMessage"),this.messageBox.addClassName("logMessage")),this.messageContent.update(t);var i=$("content_pane");i||(i=$(window._bootstrap.parameters.get("MAIN_ELEMENT")));var s=Position.cumulativeOffset(i),n=i.getDimensions(),o=$(this.messageBox).getHeight(),a=s[1]+n.height-o-20,r=parseInt(90*n.width/100),l=s[0]+parseInt(5*n.width/100);this.messageBox.setStyle({top:a+"px",left:l+"px",width:r+"px"}),new Effect.Appear(this.messageBox),this.tempoMessageDivClosing()},setLoadingStepCounts:function(e){this.loadingStepsCount=e,this.loadingStep=e},incrementStepCounts:function(e){this.loadingStepsCount+=e,this.loadingStep+=e},updateLoadingProgress:function(e){this.loadingStep--;var t=1-this.loadingStep/this.loadingStepsCount;window.loaderProgress&&window.loaderProgress.setPercentage(100*parseInt(t),!1),e&&$("progressState")&&$("progressState").update(e),0==this.loadingStep&&(this.pageLoading=!1)},setCloseValidation:function(e){this.closeValidation=e},setCloseAction:function(e){this.closeFunction=e},close:function(){this.closeFunction&&this.closeFunction(),this.currentResizeListener&&(Event.stopObserving(window,"resize",this.currentResizeListener),this.currentResizeListener=null)}});var modal=new Modal;Class.create("BookmarksBar",{bookmarksMenuOptions:{className:"menu bookmarksMenu",mouseClick:"left",createAnchor:!1,topOffset:2,leftOffset:0,fade:!0,zIndex:2e3},initialize:function(e,t){this.element=$(e),this.currentCount=0,this.bookmarks=$A([]),t&&t.bookmarksMenuOptions&&(this.bookmarksMenuOptions.menuTitle=MessageHash[145],this.bookmarksMenuOptions=Object.extend(this.bookmarksMenuOptions,t.bookmarksMenuOptions)),this.createMenu(),document.observe("app:registry_loaded",function(e){this.parseXml(e.memo)}.bind(this)),document.observeOnce("app:actions_loaded",function(){var e=app.actionBar.actions.get("bookmark");this.addBookmarkObject={name:e.getKeyedText(),alt:e.options.title,image:resourcesFolder+"/images/actions/16/bookmark_add.png",callback:function(e){document.fire("app:add_bookmark")}.bind(this)}}.bind(this)),document.observe("app:add_bookmark",function(){var e=app.getUserSelection().getUniqueNode();e.getMetadata().get("bookmarked")&&"true"==e.getMetadata().get("bookmarked")?this.removeBookmark(e.getPath(),function(){app.fireNodeRefresh(e)}):this.addBookmark(e.getPath(),e.getLabel(),function(){app.fireNodeRefresh(e)})}.bind(this)),this.bmMenu&&document.observeOnce("app:file_renamed",function(e){var t=new Hash;t.set("bm_action","load_bookmarks"),this.load(t,!0,null)}.bind(this))},parseXml:function(e){this.clear();for(var t=XPathSelectNodes(e,"user/bookmarks/bookmark"),i=0;i<t.length;i++){var s={name:t[i].getAttribute("title"),alt:t[i].getAttribute("path"),image:resourcesFolder+"/images/mimes/16/folder.png",icon_class:"icon-star-empty"};s.callback=function(e){app.goTo(this.alt)}.bind(s),s.moreActions=this.getContextActions(s.alt,s.name),this.bookmarks.push(s)}this.bmMenu&&(this.bmMenu.options.menuItems=this.bookmarks,this.bmMenu.refreshList()),this.bookmarks.length&&this.element&&this.element.removeClassName("inline_disabled"),modal.pageLoading&&modal.updateLoadingProgress("Bookmarks Loaded")},createMenu:function(){this.element&&(this.bmMenu=new Proto.Menu(Object.extend(this.bookmarksMenuOptions,{anchor:this.element,menuItems:this.bookmarks})))},clear:function(){this.currentCount=0,this.addBookmarkObject?this.bookmarks=$A([this.addBookmarkObject,{separator:!0}]):this.bookmarks=$A(),this.element&&this.element.addClassName("inline_disabled"),this.bmMenu&&(this.bmMenu.options.menuItems=this.bookmarks,this.bmMenu.refreshList())},getContextActions:function(e,t){var i={name:MessageHash[146],alt:MessageHash[146],image:resourcesFolder+"/images/actions/16/delete_bookmark.png",icon_class:"icon-remove",disabled:!1,className:"edit",callback:function(t){this.removeBookmark(e)}.bind(this)},s={name:MessageHash[6],alt:MessageHash[6],image:resourcesFolder+"/images/actions/16/applix.png",icon_class:"icon-edit",disabled:!1,className:"edit",callback:function(i){this.toggleRenameForm(e,t)}.bind(this)};return new Array(s,i)},toggleRenameForm:function(e,t){modal.prepareHeader(MessageHash[225],resourcesFolder+"/images/actions/16/bookmark.png");var i=function(){this.renameBookmark(modal.getForm().bm_path.value,modal.getForm().bm_title.value),hideLightBox(!0)}.bind(this);modal.showDialogForm("Rename","rename_bookmark",function(i){$(i).bm_path.value=e,$(i).bm_title.value=t},i)},load:function(e,t,i){if(app&&app.user){var s=new Connexion;e||(e=new Hash),e.set("get_action","get_bookmarks"),s.setParameters(e),s.onComplete=function(e){i&&i(),document.observeOnce("app:registry_part_loaded",function(e){"user/bookmarks"==e.memo&&this.parseXml(app.getXmlRegistry())}.bind(this)),app.loadXmlRegistry(!1,"user/bookmarks"),this.bmMenu&&(this.bmMenu.refreshList(),t||this.bmMenu.show())}.bind(this),s.sendAsync()}},addBookmark:function(e,t,i){var s=new Hash;s.set("bm_action","add_bookmark"),s.set("bm_path",e),t&&s.set("bm_title",t),this.load(s,!0,i)},removeBookmark:function(e,t){var i=new Hash;i.set("bm_action","delete_bookmark"),i.set("bm_path",e),this.load(i,!0,t)},renameBookmark:function(e,t){var i=new Hash;i.set("bm_action","rename_bookmark"),i.set("bm_path",e),i.set("bm_title",t),this.load(i)}}),Class.create("FormManager",{_lang:null,modalParent:null,availableLanguages:null,initialize:function(e){e&&(this.modalParent=e)},parseParameters:function(e,t){var i=$A();return $A(XPathSelectNodes(e,t)).each(function(e){i.push(this.parameterNodeToHash(e))}.bind(this)),i},setAvailableLanguages:function(e){this.availableLanguages=e},parameterNodeToHash:function(e){for(var t=e.attributes,i=new Hash,s=!1,n=0;n<t.length;n++){var o=t.item(n).nodeName,a=t.item(n).nodeValue;"label"!=o&&"description"!=o&&"group"!=o&&0!==o.indexOf("group_switch_")||!MessageHash[a]||(a=MessageHash[a]),"cdatavalue"!=o?"editable"==o?i.set("readonly","true"!=a):i.set(o,a):s=!0}return s&&i.set("value",e.firstChild.nodeValue),i.set("xmlNode",e),i},createParametersInputs:function(e,t,i,s,n,o,a,r){var l=document.body,d=$H({}),h=$H({});if(t.each(function(i){var r=null,c=i.get("label");if(i.get("labelId")&&(c=MessageHash[i.get("labelId")]),!i.get("group_switch_name")){var u=i.get("name"),m=i.get("type"),p=i.get("description"),_=i.get("translatable"),f=null;if(_&&(f=i.get("languages")||[]),"btnaddnew"==u&&console.log(m),!e.down('[name="'+u+'"]')){i.get("descriptionId")&&(p=MessageHash[i.get("descriptionId")]);var g=i.get("group")||MessageHash[439];i.get("groupId")&&(g=MessageHash[i.get("groupId")]);var b=!1;i.get("mandatory")&&"true"==i.get("mandatory")&&(b=!0);var v="";s&&void 0!==s.get(u)?v=s.get(u):void 0!==i.get("default")&&(v=i.get("default"));var y,M=n||i.get("readonly")?' disabled="true" ':"",w={name:u,"data-ctrl_type":m,"data-mandatory":b?"true":"false"};if((n||i.get("readonly"))&&(w.disabled="true"),"string"==m||"integer"==m||"array"==m||"hidden"==m)y="string"==m&&_?this.createTranslatable(m,v,f,w):new Element("input",Object.extend({type:"hidden"==m?"hidden":"text",className:"SF_input",value:v},w));else if("date"==m||"datetime"==m)y=new Element("div",{className:"input-group date",id:u}).insert(new Element("input",Object.extend({type:"text",className:"form-control"},w)).store("date",v)).insert('<span class="input-group-addon datepickerbutton"><span class="glyphicon glyphicon-calendar"></span></span>');else if("keywords"==m)v&&v.join&&(v=v.join(",")),y=_?this.createTranslatable(m,v,f,w):new Element("input",Object.extend({type:"text",className:"SF_input",value:v},w));else if("duration"==m){y=new Element("div",{className:"SF_inputContainer"});var L={_row1:["years","months","days"],_row2:["hours","minutes","seconds"]};for(var S in L){$=new Element("div",{className:"input-group",id:u+S});y.insert($);for(var k=0;k<L[S].length;k++){var T=L[S][k];$.insert('<span class="input-group-addon">'+MessageHash["duration_"+T]+"</span>").insert(new Element("input",{type:"text",className:"form-control small",name:u+"."+T,value:v&&v[T]||""}))}}}else if("composed"==m)y=new Element("div",{className:"SF_inputContainer"}),$A(i.get("childs")).each(function(e){var t=e.get("name"),i=e.get("type"),s=e.get("mandatory")&&"true"==e.get("mandatory"),n="true"===e.get("translatable"),o=new Element("div",{className:"input-group",id:u+"."+t});y.insert(o),o.insert('<span class="input-group-addon">'+e.get("label")+(s?"*":"")+"</span>"),"string"!=i&&"integer"!=i&&"email"!=i||("string"==i&&n?o.insert(this.createTranslatable("childstring",v&&v[t],f,{name:u+"."+t,"data-mandatory":s?"true":"false"})):o.insert(new Element("input",{type:"text",className:"form-control",name:u+"."+t,value:v&&v[t]||"","data-mandatory":s?"true":"false"}))),"date"!=i&&"datetime"!=i||o.addClassName("date").insert(new Element("input",{type:"text",className:"form-control",name:u+"."+t,"data-ctrl_type":i,"data-mandatory":s?"true":"false"}).store("date",v&&v[t]||"")).insert('<span class="input-group-addon datepickerbutton"><span class="glyphicon glyphicon-calendar"></span></span>')});else if("button"==m)(y=new Element("div",{className:"SF_input SF_inlineButton"}).update('<span class="icon-play-circle"></span>'+i.get("description"))).observe("click",function(t){y.addClassName("SF_inlineButtonWorking");var s=$H();this.serializeParametersInputs(e,s,"DRIVER_OPTION_");var n=new Connexion,o=i.get("choices").split(":");s.set("get_action",o.shift()),o.length>1&&(s.set("action_plugin_id",o.shift()),s.set("action_plugin_method",o.shift())),-1!==u.indexOf("/")&&s.set("button_key",getRepName(u)),n.setMethod("post"),n.setParameters(s),n.onComplete=function(e){y.removeClassName("SF_inlineButtonWorking"),e.responseText.startsWith("SUCCESS:")?app.displayMessage("SUCCESS",e.responseText.replace("SUCCESS:","")):app.displayMessage("ERROR",e.responseText.replace("ERROR:","")),y.siblings().each(function(e){e.pe&&e.pe.onTimerEvent()})},n.sendAsync()}.bind(this));else if("monitor"==m)(y=new Element("div",{className:"SF_input SF_inlineMonitoring"}).update("loading...")).pe=new PeriodicalExecuter(function(){y.addClassName("SF_inlineMonitoringWorking");var t=$H();this.serializeParametersInputs(e,t,"DRIVER_OPTION_");var s=new Connexion,n=i.get("choices").split(":");t.set("get_action",n.shift()),n.length>1&&(t.set("action_plugin_id",n.shift()),t.set("action_plugin_method",n.shift())),-1!==u.indexOf("/")&&t.set("button_key",getRepName(u)),s.discrete=!0,s.setMethod("post"),s.setParameters(t),s.onComplete=function(e){y.removeClassName("SF_inlineMonitoringWorking"),y.update(e.responseText)},s.sendAsync()}.bind(this),10),y.pe.onTimerEvent();else if("textarea"==m)_?(/^\s*$/.test(M)||(w.disabled=!0),y=this.createTranslatable(m,v,f,w)):(v&&(v=v.replace(new RegExp("__LBR__","g"),"\n")),y='<textarea class="SF_input" style="height:70px;" data-ctrl_type="'+m+'" data-mandatory="'+(b?"true":"false")+'" name="'+u+'"'+M+">"+v+"</textarea>");else if("password"==m)y='<input type="password" autocomplete="off" data-ctrl_type="'+m+'" data-mandatory="'+(b?"true":"false")+'" name="'+u+'" value="'+v+'"'+M+' class="SF_input">';else if("boolean"==m){var x,Y;void 0!==v&&("true"!=v&&"1"!=v&&!0!==v||(x=!0),"false"!=v&&"0"!=v&&!1!==v||(Y=!0)),x||Y||(Y=!0),y='<input type="radio" data-ctrl_type="'+m+'" class="SF_box" name="'+u+'" id="'+u+'-true" value="true" '+(x?"checked":"")+M+'><label for="'+u+'-true">'+MessageHash[440]+"</label>",y=y+'<input type="radio" data-ctrl_type="'+m+'" class="SF_box" name="'+u+'" id="'+u+'-false"  '+(Y?"checked":"")+' value="false"'+M+'><label for="'+u+'-false">'+MessageHash[441]+"</label>",y='<div class="SF_input">'+y+"</div>"}else if("select"==m){var D,E,C=i.get("choices"),N="";if(Object.isString(C))if(C.startsWith("json_list:"))D=["loading|"+MessageHash[466]+"..."],E=C.split(":")[1];else if("APP_AVAILABLE_LANGUAGES"==C){var O=window._bootstrap.parameters.get("availableLanguages");D=[];for(var I in O)D.push(I+"|"+O[I])}else D=C.split(",");else D=Object.isFunction(C)?C(i.get("dependencies")):C;D||(D=[]),i.get("dependencies")&&(N=' data-dependencies="true" ');var A=i.get("multiple")?"multiple='true'":"";y='<select class="SF_input" name="'+u+'" data-mandatory="'+(b?"true":"false")+'"'+N+A+M+">";var H=function(e){var t="";b||A||(t+='<option value=""></option>');var s;i.get("multiple")&&(s=Object.isArray(v)?v:v.split(","));var n="";e=$A(e).map(function(e){var t=e.split("|"),i=t[0],s=t[t.length-1],o=/^_grp_/.test(i);return n=o?s:n,{value:i,label:s,sortKey:[n,"::",o?"":s].join("")}}).sort(function(e,t){return e.sortKey.localeCompare(t.sortKey)});for(var o=0;o<e.length;o++){var a,r;r=e[o].value,a=e[o].label;var l="";/^_grp_/.test(r)?t+='<optgroup label="'+a+'">':(i.get("multiple")?$A(s).each(function(e){e==r&&(l=" selected")}):l=v==r?" selected":"",t+='<option value="'+r+'"'+l+">"+a+"</option>")}return t};y+=H(D),y+="</select>";(N=i.get("dependencies"))&&(r={dependencies:N,createOptions:H,getChoices:C})}else if("image"==m&&i.get("uploadAction")){if(v&&!i.get("useDefaultImage")){var P=(X=new Connexion)._baseUrl+"&get_action="+i.get("loadAction")+"&binary_id="+v;i.get("binary_context")&&(P+="&"+i.get("binary_context"))}else i.get("defaultImage")&&(P=i.get("defaultImage"));y="<div class='SF_image_block'><img src='"+P+"' class='SF_image small'><span class='SF_image_link image_update'>"+(i.get("uploadLegend")?i.get("uploadLegend"):MessageHash[457])+"</span><span class='SF_image_link image_remove'>"+(i.get("removeLegend")?i.get("removeLegend"):MessageHash[458])+"</span><input type='hidden' name='"+i.get("name")+"' data-ctrl_type='binary'><input type='hidden' name='"+i.get("name")+"_original_binary' value='"+v+"' data-ctrl_type='string'></div>"}else if(0===m.indexOf("group_switch:")){var F=m.split(":")[1],j={};v="",s&&s.get(u)&&(v=s.get(u));var B=$A();t.each(function(e){"use strict";if(e.get("group_switch_name")){if(e.get("group_switch_name")!=F)return e=new Hash(e._object),void B.push(e);j[e.get("group_switch_value")]||(j[e.get("group_switch_value")]={label:e.get("group_switch_label"),fields:[],values:$H()}),(e=new Hash(e._object)).unset("group_switch_name"),e.set("name",u+"/"+e.get("name")),j[e.get("group_switch_value")].fields.push(e);var t=e.get("name");s&&s.get(t)&&j[e.get("group_switch_value")].values.set(t,s.get(t))}});var R=new Element("select",{className:"SF_input",name:u,"data-mandatory":b?"true":"false","data-ctrl_type":m});b||R.insert(new Element("option")),$H(j).each(function(e){"use strict";var t={value:e.key};v&&v==e.key&&(t.selected="true"),R.insert(new Element("option",t).update(e.value.label)),B.length&&B.each(function(t){e.value.fields.push(t)})}),R.SWITCH_VALUES=$H(j),y=new Element("div").update(R);var z=new Element("div");if(y.insert(z),e.paneObject&&(z.paneObject=e.paneObject),R.FIELDS_CONTAINER=z,R.observe("change",function(e){"use strict";var t=e.target;if(t.FIELDS_CONTAINER.update(""),t.getValue()){var i=t.SWITCH_VALUES.get(t.getValue());this.createParametersInputs(t.FIELDS_CONTAINER,i.fields,!0,s,!1,!0)}}.bind(this)),R.getValue()){var W=R.SWITCH_VALUES.get(R.getValue());this.createParametersInputs(R.FIELDS_CONTAINER,W.fields,!0,s,!1,!0)}}var $;if("legend"!=m?($=new Element("div",{className:"SF_element"+(a?" SF_elementWithCheckbox":"")}),"hidden"==m&&$.setStyle({display:"none"}),$.insert(new Element("div",{className:"SF_label"}).update(c+(b?"*":"")+" :")),a&&(cBox=new Element("input",{type:"checkbox",className:"SF_fieldCheckBox",name:"SFCB_"+u,autocomplete:"off"}),cBox.checked=!!v,$.insert(cBox)),$.insert(y),r&&$.down(".SF_input").store(r)):$=new Element("div",{className:"dialogLegend"}).update(p),"image"==m&&($.down("span.SF_image_link.image_update").observe("click",function(){this.createUploadForm(e,$.down("img"),i)}.bind(this)),$.down("span.SF_image_link.image_remove").observe("click",function(){this.confirmExistingImageDelete(e,$.down("img"),$.down('input[name="'+i.get("name")+'"]'),i)}.bind(this))),p&&"legend"!=m&&modal.simpleTooltip($.select(".SF_label")[0],'<div class="simple_tooltip_title">'+c+"</div>"+p),E){var X=new Connexion;y=$.down("select"),v&&(y.defaultValue=v);var U=E.split("|"),V={get_action:U[0]};U.length>1&&(V.plugin_id=U[1]),X.setParameters(V),X.onComplete=function(e){var t=e.responseJSON;if(y.down("option").update(t.LEGEND?t.LEGEND:"Select..."),y.setAttribute("data-empty",y.down("option").value),t.HAS_GROUPS)for(var i in t.LIST){var s=new Element("OPTGROUP",{label:i});y.insert(s);for(var n=0;n<t.LIST[i].length;n++){o=new Element("OPTION").update(t.LIST[i][n].action);y.insert(o)}}else for(var i in t.LIST){var o=new Element("OPTION",{value:i}).update(t.LIST[i]);i==v&&o.setAttribute("selected","true"),y.insert(o)}},X.sendAsync()}if(i.get("replicationGroup")){var G,K=i.get("replicationGroup");if(h.get(K))G=h.get(K);else{var J=!0;null!==i.get("replicatable")&&void 0!==i.get("replicatable")&&(J=i.get("replicatable"));var q=i.get("groupRequired");q=null===q||void 0===q||q;var Z=i.get("groupFixed");G=new Element("div",{id:"replicable_"+K,className:"SF_replicableGroup","data-replicatable":J?"true":"false"}).update('<div class="SF_Content" data-required="'+q+'" data-fixed="'+Z+'"/>')}G.down(".SF_Content").insert($),h.set(K,G),$=G}if(o)e.insert({bottom:$});else{var Q=d.get(g)||new Element("div",{className:"accordion_content"});l.insert($);var ee=parseInt(e.getWidth())+(Prototype.Browser.IE?40:0);if(ee>(Prototype.Browser.IE?40:0)){var te=$.down(".SF_label");te&&(te.setStyle({fontSize:"11px"}),te.setStyle({width:parseInt(39*ee/100)+"px"}),parseInt(te.getHeight())>Math.round(parseFloat(te.getStyle("lineHeight"))+Math.round(parseFloat(te.getStyle("paddingTop")))+Math.round(parseFloat(te.getStyle("paddingBottom"))))&&te.next().setStyle({marginTop:te.getStyle("lineHeight")}),te.setStyle({width:"39%"}))}Q.insert($),d.set(g,Q)}}}}.bind(this)),h.size()&&h.each(function(t){var i=t.value,n=i.getAttribute("data-replicatable"),o=i.down(".SF_Content"),a=!("false"===o.getAttribute("data-required")),r="true"===o.getAttribute("data-fixed"),l=s&&s.keys().filter(function(e){return e.replace(t.key+".","")!=e}).length>0;if(null===n||"true"===n){if(!r){var d=new Element("a",{className:"SF_replication_Add",title:"Replicate this group"}).update("&nbsp;").observe("click",function(t){$(t.target).match(".SF_disabled")||this.replicateRow(i,1,e,null,$(t.target).up(".SF_replicableGroup"))}.bind(this));if(i.insert({bottom:d}),!a&&l){var h=new Element("a",{className:"SF_replication_Remove",title:"Remove this group"}).update("&nbsp;").observe("click",function(){e.paneObject&&($continue=e.paneObject.notify("before_remove_replicated_row",i)),o.hide(),h.stopObserving("click"),h.remove(),e.paneObject&&e.paneObject.notify("after_remove_replicated_row",i)});i.insert(h)}}i.insert({bottom:new Element("div",{className:"SF_rgClear"})})}if(s){for(var c=!0,u=1,m=i;c;){var p=i.select("input,select,textarea");if(!p.length)break;p.each(function(e){var t=e.name;c&=null!=s.get(t+"_"+u)}),c&&(m=this.replicateRow(i,1,e,s,m),u++)}a||l||"true"!==n||o.hide()}else a||"true"!==n||o.hide()}.bind(this)),this.createFormToolbar(e),this.createDatePickers(e),a&&e.select("input.SF_fieldCheckBox").each(function(e){e.checked=!1,e.observe("click",this.fieldCheckboxClick),this.fieldCheckboxClick({target:e})}.bind(this)),d.size()){d.each(function(t){var i=new Element("div",{className:"accordion_toggle",tabIndex:0}).update(t.key);i.observe("focus",function(){e.SF_accordion&&e.SF_accordion.showAccordion!=i.next(0)&&e.SF_accordion.activate(i)}),e.insert(i),e.insert(t.value)}),e.SF_accordion=new accordion(e,{classNames:{toggle:"accordion_toggle",toggleActive:"accordion_toggle_active",content:"accordion_content"},defaultSize:{width:"360px",height:null},direction:"vertical"}),r||e.SF_accordion.activate(e.down("div.accordion_toggle"))}},fieldCheckboxClick:function(e){var t=e.target,i=!t.checked,s=t.next("input.SF_input,select.SF_input,div.SF_input,div.SF_inputContainer,textarea.SF_input,div.input-group.date");(s&&"div"==s.nodeName.toLowerCase()?s.select("input,select"):$A(s?[s]:[])).invoke(i?"disable":"enable");var n=t.up(0).next("div");if(n&&n.match(".SF_replicableGroup")){var o=n.down(".SF_replication_Add");o&&i?n.down(".SF_replication_Add").addClassName("SF_disabled"):o&&n.down(".SF_replication_Add").removeClassName("SF_disabled")}i?t.previous("div.SF_label").addClassName("SF_disabled"):t.previous("div.SF_label").removeClassName("SF_disabled")},createFormToolbar:function(e){if(e.down("[data-language]")){var t=new Element("div",{name:"_form_toolbar_container",className:"formToolbar"}),i=new Element("select",{name:"_translateto_lang"});t.insert(new Element("div").insert(i));var s=this.availableLanguages;s&&0!=Object.keys(s).length||(s=window._bootstrap.parameters.get("availableLanguages"));var n=[];n.push('<option value="none" selected="selected">'+MessageHash[480]+"</option>"),$A(Object.keys(s)).each(function(e){"none"!=e&&n.push('<option value="'+e+'">'+s[e]+"</option>")}),i.update(n.join("")),this._lang="none",i.observe("change",function(t){"use strict";!this._ignoreLanguageChanging&&this.changeInputLanguage(e,t.target.value)||(Event.stop(t),i.setValue(this._lang)),this._ignoreLanguageChanging=!0,e.up("form").select('select[name="_translateto_lang"]').each(function(e){e.setValue(t.target.value)}),delete this._ignoreLanguageChanging}.bind(this)),e.insert({top:t})}},changeInputLanguage:function(e,t){return!Event.fire(e.up("form"),"form:language_changing",{current:this._lang,next:t}).stopped&&($A(e.up("form").select("[data-language]")).each(function(e){var i=e.retrieve("translations");i[this._lang]=e.getValue?e.getValue():e.value||"",e.store("translations",i),e.setValue(""),e.setValue(i[t]),e.setAttribute("data-language",t)}.bind(this)),this._lang=t,!0)},createTranslatable:function(e,t,i,s){var n=t?t.none:"";switch(e){case"keywords":case"string":element=new Element("input",Object.extend({type:"text",className:"SF_input",value:n},s));break;case"childstring":element=new Element("input",Object.extend({type:"text",className:"form-control",value:n},s));break;case"textarea":n&&(n=n.replace(new RegExp("__LBR__","g"),"\n"));s["data-ctrl_type"],s["data-mandatory"];element=new Element("textarea",Object.extend({className:"SF_input",style:"height:70px;"},s)).update(n)}return element.store("translations",t||{}),element.writeAttribute("data-language","none"),element},createUploadForm:function(e,t,i){this.modalParent&&(e=this.modalParent);var s=new Connexion,n=s._baseUrl+"&get_action="+i.get("uploadAction");i.get("binary_context")&&(n+="&"+i.get("binary_context")),$("formManager_hidden_iframe")||$("hidden_frames").insert(new Element("iframe",{id:"formManager_hidden_iframe",name:"formManager_hidden_iframe"}));i.get("name");var o=new Element("div");o.update("<form id='formManager_uploader' enctype='multipart/form-data' target='formManager_hidden_iframe' method='post' action='"+n+"'><div class='dialogLegend'>Select an image on your computer</div> <input type='file' name='userfile' style='width: 270px;'></form>"),modal.showSimpleModal(e,o,function(){return window.formManagerHiddenIFrameSubmission=function(e){t.src=s._baseUrl+"&get_action="+i.get("loadAction")+"&tmp_file="+e.trim(),t.next("input[type='hidden']").setValue(e.trim()),this.triggerEvent(t.next("input[type='hidden']"),"change"),t.next("input[type='hidden']").setAttribute("data-ctrl_type","binary"),window.formManagerHiddenIFrameSubmission=null}.bind(this),o.down("#formManager_uploader").submit(),!0}.bind(this),function(){return!0}.bind(this))},triggerEvent:function(e,t){if(document.createEvent){var i=document.createEvent("HTMLEvents");return i.initEvent(t,!0,!0),e.dispatchEvent(i)}if(e.fireEvent)return e.fireEvent("on"+t)},observeFormChanges:function(e,t,i){var s,n="timer-"+parseInt(1e3*Math.random());s=i?function(){window[n]&&window.clearTimeout(window[n]),window[n]=window.setTimeout(function(){t()},i)}:t,e.select("div.SF_element").each(function(e){e.select("input,textarea,select").invoke("observe","change",s),e.select(".input-group.date").invoke("observe","dp:change",s),e.select("input,textarea").invoke("observe","keydown",function(e){e.keyCode!=Event.KEY_DOWN&&e.keyCode!=Event.KEY_UP&&e.keyCode!=Event.KEY_RIGHT&&e.keyCode!=Event.KEY_LEFT&&e.keyCode!=Event.KEY_TAB&&s(e)})}.bind(this)),e.paneObject&&(e.paneObject.observe("after_replicate_row",function(e){e.select("div.SF_element").each(function(e){e.select("input,textarea,select").invoke("observe","change",s),e.select(".input-group.date").invoke("observe","dp:change",s),e.select("input,textarea").invoke("observe","keydown",function(e){e.keyCode!=Event.KEY_DOWN&&e.keyCode!=Event.KEY_UP&&e.keyCode!=Event.KEY_RIGHT&&e.keyCode!=Event.KEY_LEFT&&e.keyCode!=Event.KEY_TAB&&s(e)})}.bind(this))}),e.paneObject.observe("after_remove_replicated_row",function(e){s(e)}))},confirmExistingImageDelete:function(e,t,i,s){window.confirm("Do you want to remove the current image?")&&(i.setValue("remove-original"),t.src=s.get("defaultImage"),this.triggerEvent(t.next("input[type='hidden']"),"change"))},serializeParametersInputs:function(e,t,i,s){i=i||"";var n=$A(),o=!1;e.select("input,textarea").each(function(s){var a=s.getAttribute("data-language");if("text"==s.type||"hidden"==s.type||"password"==s.type||"textarea"==s.nodeName.toLowerCase()){if(s.up(".SF_Content")&&!s.up(".SF_Content").visible())return;var r=a?s.retrieve("translations")||{}:s.value;a&&(r[a]=s.value);var l=a?r.none||"":r;"true"!=s.getAttribute("data-mandatory")||""!=l||s.disabled||n.push(s);var d=s.getAttribute("data-ctrl_type");/(date|datetime)/i.test(d)?t.set(i+s.name,s.retrieve("date")):a?(s.store("translations",r),t.set(i+s.name,JSON.stringify(r))):t.set(i+s.name,s.value)}else"radio"==s.type&&s.checked&&t.set(i+s.name,s.value);s.getAttribute("data-ctrl_type")&&t.set(i+s.name+"_apptype",s.getAttribute("data-ctrl_type"));var h=e.down('[name="SFCB_'+s.name+'"]');if(h&&(o=!0,t.set(i+s.name+"_checkbox",h.checked?"checked":"unchecked")),h=s.up(".SF_replicableGroup")){h.id;t.set(i+s.name+"_replication",h.id)}(h=s.up(".SF_inputContainer"))&&h.previous().match("input.SF_fieldCheckBox")&&(o=!0,t.set(i+s.name+"_checkbox",h.previous().checked?"checked":"unchecked"))}),e.select("select").each(function(s){"true"!=s.getAttribute("data-mandatory")||""!=s.getValue()&&s.getValue()!=s.getAttribute("data-empty")||s.disabled||n.push(s),s.getAttribute("data-ctrl_type")&&t.set(i+s.name+"_apptype",s.getAttribute("data-ctrl_type")),t.set(i+s.name,s.getValue()),e.down('[name="SFCB_'+s.name+'"]')&&(o=!0,t.set(i+s.name+"_checkbox",e.down('[name="SFCB_'+s.name+'"]').checked?"checked":"unchecked")),s.up(".SF_replicableGroup")&&t.set(i+s.name+"_replication",s.up(".SF_replicableGroup").id)}),o&&t.set("sf_checkboxes_active","true"),s||n.each(function(t){t.addClassName("SF_failed"),e.SF_accordion&&t.up("div.accordion_content").previous("div.accordion_toggle")&&t.up("div.accordion_content").previous("div.accordion_toggle").addClassName("accordion_toggle_failed")});var a=t.keys();a.sort(),a.reverse();var r={};return a.each(function(e){if(-1!==e.indexOf("/")&&!e.endsWith("_apptype")){for(var i,s=e+"_apptype",n=e.split("/"),o=n.shift();n.length>0;)i||(i=r),i[o]||(i[o]={}),i=i[o],o=n.shift();var a=t.unset(s);if(i&&!i[o])if("boolean"==a){var l=t.get(e);i[o]="true"==l||1==l||!0===l}else i[o]="integer"==a?parseInt(t.get(e)):t.get(e);else i&&a.startsWith("group_switch:")&&(i[o].group_switch_value=t.get(e));t.unset(e)}}),$H(r).each(function(e){t.get(e.key+"_apptype")&&t.get(e.key+"_apptype").startsWith("group_switch:")&&!e.value.group_switch_value&&(e.value.group_switch_value=t.get(e.key)),t.set(e.key,Object.toJSON(e.value)),t.set(e.key+"_apptype","text/json")}),n.size()},replicateRow:function(e,t,i,s,n){i.paneObject&&i.paneObject.notify("before_replicate_row",e);var o=n.down(".SF_Content"),a="true"===o.getAttribute("data-fixed");if(o.visible()){var r=e.getAttribute("data-replication-index");r=null===r?0:parseInt(r);for(var l=0;l<t;l++){r++,e.setAttribute("data-replication-index",r);var d=$(e.cloneNode(!0));d.id&&(d.id=d.id+"_"+r);if(d.select("input","select","textarea").each(function(e){var t=e.getAttribute("name")+"_"+r;e.setAttribute("name",t),i&&Prototype.Browser.IE&&(i[t]=e),s&&s.get(t)?/(date|datetime)/.test(e.getAttribute("data-ctrl_type"))?e.store("date",s.get(t)):e.setValue(s.get(t)):e.setValue("")}),n?(n.insert({after:d}),a||(d.select(".SF_replication_Add").length&&d.select(".SF_replication_Add").invoke("remove"),d.insert(n.select(".SF_replication_Add")[0]))):e.insert({after:d}),!a){h=new Element("a",{className:"SF_replication_Remove",title:"Remove this group"}).update("&nbsp;").observe("click",function(){i.paneObject&&($continue=i.paneObject.notify("before_remove_replicated_row",d)),d.select(".SF_replication_Add").length&&d.previous(".SF_replicableGroup").insert(d.select(".SF_replication_Add")[0]),d.remove(),i.paneObject&&i.paneObject.notify("after_remove_replicated_row",d)});d.insert(h)}this.createDatePickers(d),i.paneObject&&i.paneObject.notify("after_replicate_row",d),n=d}return n}if(e.select("input","select","textarea").each(function(e){e.setValue("")}),!a){var h=new Element("a",{className:"SF_replication_Remove",title:"Remove this group"}).update("&nbsp;").observe("click",function(){i.paneObject&&($continue=i.paneObject.notify("before_remove_replicated_row",e)),o.hide(),h.stopObserving("click"),h.remove(),i.paneObject&&i.paneObject.notify("after_remove_replicated_row",e)});n.insert(h)}o.show()},createDatePickers:function(e){e.select(".input-group.date").each(function(e){try{var t="datetime"==e.down("input").readAttribute("data-ctrl_type");new DateTimePicker(e,{debug:!1,locale:app.currentLanguage,format:"YYYY-MM-DD"+(t?" LT":"")})}catch(e){console.log(e)}})},fetchValueToForm:function(e,t,i,s){$A(t).each(function(t){if(i[t]){realFieldName=null!=s?t+"_"+s:t;var n=e[realFieldName];if(n){switch(n.nodeName.toLowerCase()){case"input":"checkbox"==n.getAttribute("type")?n.value==i[t]&&(n.checked=!0):n.value=i[t];break;case"select":n.select("option").each(function(e){e.value==i[t]&&(e.selected=!0)});break;case"textarea":n.update(i[t]),n.value=i[t]}}}})},fetchMultipleValueToForm:function(e,t,i){var s=0;$A(i).each(function(i){this.fetchValueToForm(e,t,i,s),s++}.bind(this))},destroyForm:function(e){e.select("div.SF_inlineMonitoring").each(function(e){e.pe&&e.pe.stop()})}}),Class.create("MultiDownloader",{initialize:function(e,t){this.list_target=e,this.count=0,this.id=0,this.downloadUrl=t},setDownloadUrl:function(e){this.downloadUrl=e},addListRow:function(e,t){this.count++;var i=new Element("div"),s=new Element("a");s.href=this.downloadUrl+e,s.insert('<img src="'+resourcesFolder+'/images/actions/16/download_manager.png" height="16" width="16" align="absmiddle" border="0"> '+(t||getBaseName(e))),s.multidownloader=this,s.onclick=function(){this.parentNode.parentNode.removeChild(this.parentNode),this.multidownloader.count--,0==this.multidownloader.count&&this.multidownloader.triggerEnd&&this.multidownloader.triggerEnd(),gaTrackEvent("Data","Download",e)},i.insert(s),$(this.list_target).insert(i)},emptyList:function(){},setOnLoad:function(){if(!this.loading){addLightboxMarkupToElement(this.list_target);var e=new Element("img",{src:resourcesFolder+"/images/loadingImage.gif"}),t=$(this.list_target).down("#element_overlay");t.insert(e),e.setStyle({marginTop:Math.max(0,(t.getHeight()-e.getHeight())/2)}),this.loading=!0}},removeOnLoad:function(){removeLightboxFromElement(this.list_target),this.loading=!1}}),Class.create("ActivityMonitor",{_serverSessionTime:0,_warningTime:0,_logoutTime:0,_warningMinutes:3,_renewMinutes:10,_logoutMinutes:0,_lastActive:0,_state:"active",_longTaskRunning:!1,initialize:function(e,t,i){if(e){if(e<=60*this._renewMinutes&&(this._renewMinutes=2),-1==t)return this._renewTime=e-60*this._renewMinutes,void(this.serverInterval=window.setInterval(this.serverObserver.bind(this),1e3*this._renewTime));this._serverSessionTime=e,i?(this._warningMinutes=i,this._warningTime=t-60*this._warningMinutes):this._warningTime=!1,this._logoutTime=t-60*this._logoutMinutes,this._renewTime=e-60*this._renewMinutes,this._lastActive=this.getNow();var s=this.activityObserver.bind(this);document.observe("app:user_logged",function(){this._lastActive=this.getNow(),this.interval&&window.clearInterval(this.interval),this.serverInterval&&window.clearInterval(this.serverInterval),$(document.body).stopObserving("keypress",s),$(document.body).stopObserving("mouseover",s),$(document.body).stopObserving("mousemove",s),document.stopObserving("app:server_answer",s),this._state="inactive",app.user&&(this._state="active",$(document.body).observe("keypress",s),$(document.body).observe("mouseover",s),$(document.body).observe("mousemove",s),document.observe("app:server_answer",s),this.interval=window.setInterval(this.idleObserver.bind(this),5e3),this.serverInterval=window.setInterval(this.serverObserver.bind(this),1e3*this._renewTime))}.bind(this)),document.observe("app:longtask_starting",function(){this._longTaskRunning=!0}.bind(this)),document.observe("app:longtask_finished",function(){this._longTaskRunning=!1}.bind(this))}},activityObserver:function(){"warning"!=this._state&&(this.timer&&window.clearTimeout(this.timer),this.timer=window.setTimeout(this.activityUpdater.bind(this),1e3))},activityUpdater:function(){this._lastActive=this.getNow()},serverObserver:function(){new Ajax.Request(window.appServerAccessPath,{method:"get",parameters:{get_action:"ping"}})},idleObserver:function(){if("inactive"!=this._state)if(this._longTaskRunning)this.activityUpdater();else{var e=this.getNow()-this._lastActive;if(e>=this._logoutTime)return this.removeWarningState(),this._state="active",this.interval&&window.clearInterval(this.interval),this.serverInterval&&window.clearInterval(this.serverInterval),void app.actionBar.fireDefaultAction("expire");this._warningTime&&e>=this._warningTime&&("active"==this._state&&this.setWarningState(),this.updateWarningTimer(this._logoutTime-e))}},exitIdleState:function(){this.removeWarningState(),this.activityUpdater(),this._state="active",window.clearInterval(this.interval),this.interval=window.setInterval(this.idleObserver.bind(this),5e3)},setWarningState:function(){if(this._state="warning",window.clearInterval(this.interval),this.interval=window.setInterval(this.idleObserver.bind(this),1e3),!this.warningPane){var e=MessageHash[375].replace("__IDLE__",Math.round(this._warningTime/60)+"mn");e=e.replace("__LOGOUT__",'<span class="warning_timer"></span>'),this.warningPane=new Element("div",{id:"activity_monitor_warning",className:"dialogBox",style:"padding:3px"}).update('<div class="dialogContent">'+e+'<br><span class="click_anywhere">'+MessageHash[376]+"</span></div>"),$(document.body).insert(this.warningPane)}displayLightBoxById("activity_monitor_warning"),$("overlay").setStyle({cursor:"pointer"}),$("overlay").observeOnce("click",this.exitIdleState.bind(this)),$("activity_monitor_warning").observeOnce("click",this.exitIdleState.bind(this)),new Effect.Shake(this.warningPane),this.opaFx=new Effect.Opacity($("overlay"),{from:.4,to:1,duration:60*this._warningMinutes})},updateWarningTimer:function(e){var t=Math.floor(e/60)+"mn"+e%60+"s";this.warningPane.down("span.warning_timer").update(t),this.warningPane.visible()&&e%60%10==0&&new Effect.Shake(this.warningPane.down("div.dialogContent"))},removeWarningState:function(){this.opaFx&&this.opaFx.cancel(),$("overlay").setStyle({cursor:"default",opacity:.4}),hideLightBox()},getNow:function(){return Math.round((new Date).getTime()/1e3)}}),function(){"use strict";var e=Class.create({width:function(){var e=0;return"number"==typeof window.innerWidth?e=window.innerWidth:document.documentElement&&document.documentElement.clientWidth?e=document.documentElement.clientWidth:document.body&&document.body.clientWidth&&(e=document.body.clientWidth),e},height:function(){var e=0;return"number"==typeof window.innerHeight?e=window.innerHeight:document.documentElement&&document.documentElement.clientHeight?e=document.documentElement.clientHeight:document.body&&document.body.clientHeight&&(e=document.body.clientHeight),e},scrollTop:function(){return document.viewport.getScrollOffsets().top}}),t={timeZone:"",format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:moment.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!0,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(e){if(e){var t=this.date()||this.getMoment();e.down(".datepicker").visible()?this.date(t.clone().subtract(7,"d")):this.date(t.clone().add(this.stepping(),"m"))}},down:function(e){if(e){var t=this.date()||this.getMoment();e.down(".datepicker").visible()?this.date(t.clone().add(7,"d")):this.date(t.clone().subtract(this.stepping(),"m"))}else this.show()},"control up":function(e){if(e){var t=this.date()||this.getMoment();e.down(".datepicker").visible()?this.date(t.clone().subtract(1,"y")):this.date(t.clone().add(1,"h"))}},"control down":function(e){if(e){var t=this.date()||this.getMoment();e.down(".datepicker").visible()?this.date(t.clone().add(1,"y")):this.date(t.clone().subtract(1,"h"))}},left:function(e){if(e){var t=this.date()||this.getMoment();e.down(".datepicker").visible()&&this.date(t.clone().subtract(1,"d"))}},right:function(e){if(e){var t=this.date()||this.getMoment();e.down(".datepicker").visible()&&this.date(t.clone().add(1,"d"))}},pageUp:function(e){if(e){var t=this.date()||this.getMoment();e.down(".datepicker").visible()&&this.date(t.clone().subtract(1,"M"))}},pageDown:function(e){if(e){var t=this.date()||this.getMoment();e.down(".datepicker").visible()&&this.date(t.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(e){e&&e.down(".timepicker").visible()&&e.down('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(this.getMoment())},delete:function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1},i={es:{today:"Hoy",clear:"Limpiar seleccin",close:"Cerrar",selectMonth:"Seleccionar mes",prevMonth:"Mes anterior",nextMonth:"Mes siguiente",selectYear:"Seleccionar ao",prevYear:"Ao anterior",nextYear:"Ao siguiente",selectDecade:"Seleccionar dcada",prevDecade:"Dcada anterior",nextDecade:"Dcada siguiente",prevCentury:"Siglo siguiente",nextCentury:"Siglo anterior",pickHour:"Seleccionar hora",incrementHour:"Aumentar hora",decrementHour:"Disminuir hora",pickMinute:"Seleccionar minuto",incrementMinute:"Aumentar minuto",decrementMinute:"Disminuir minuto",pickSecond:"Seleccionar segundo",incrementSecond:"Aumentar segundo",decrementSecond:"Disminuir segundo",togglePeriod:"Toggle Period",selectTime:"Select Time"}};Class.create("DateTimePicker",{picker:null,initialize:function(s,n){var o=Object.extend({},t);(o=Object.extend(o,n||{})).tooltips=i[o.locale]||o.tooltips,this.picker=function(t,s){var n,o,a,r,l,d,h,c={},u=!0,m=!1,p=!1,_=0,f=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],g=["days","months","years","decades"],b=["top","bottom","auto"],v=["left","right","auto"],y=["default","top","bottom"],M={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t",delete:46,46:"delete"},w={},L=function(){return void 0!==moment.tz&&void 0!==s.timeZone&&null!==s.timeZone&&""!==s.timeZone},S=function(e){var t;return t=void 0===e||null===e?moment():moment.isDate(e)||moment.isMoment(e)?moment(e):L()?moment.tz(e,d,s.useStrict,s.timeZone):moment(e,d,s.useStrict),L()&&t.tz(s.timeZone),t},k=function(e){if("string"!=typeof e||e.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(e){case"y":return-1!==l.indexOf("Y");case"M":return-1!==l.indexOf("M");case"d":return-1!==l.toLowerCase().indexOf("d");case"h":case"H":return-1!==l.toLowerCase().indexOf("h");case"m":return-1!==l.indexOf("m");case"s":return-1!==l.indexOf("s");default:return!1}},T=function(){return k("h")||k("m")||k("s")},x=function(){return k("y")||k("M")||k("d")},Y=function(e){return e.stop(),!1},D=function(){var i,n=(m||t).getLayout(!0),o=(n.get("top"),n.get("left"),(m||t).cumulativeOffset()),a=s.widgetPositioning.vertical,r=s.widgetPositioning.horizontal;m.insert(p),i=m;var l=new e,d=p.getLayout(!0),h=n.get("height")+n.get("border-box-height");n.get("width"),n.get("border-box-width"),"auto"===a&&(a=o.top+1.5*d.get("height")>=l.height()+l.scrollTop()&&d.get("height")+h<o.top?"top":"bottom");var c=i.getLayout(!0);if(c.get("height"),c.get("border-box-height"),c.get("width"),c.get("border-box-width"),"auto"===r){var u=d.get("width")+d.get("border-box-width");r=c.get("width")<o.left+u/2&&o.left+u>l.width()?"right":"left"}if(p.addClassName("bottom"),p.removeClassName("pull-right"),"static"===i.getStyle("position")&&(i=i.ancestors().filter(function(e){return"static"!==$(e).getStyle("position")}).first()),!i)throw new Error("datetimepicker component should be placed within a non-static positioned container");var _=[0];p.ancestors().each(function(e){var t=$(e).getStyle("z-index");"auto"!==t&&0!==Number(t)&&_.push(Number(t))});var f={top:"26px",left:0,right:"auto",bottom:"auto",zIndex:Math.max.apply(Math,_)+10};p.setStyle(f)},E=function(e){"dp:change"===e.type&&(e.date&&e.date.isSame(e.oldDate)||!e.date&&!e.oldDate)||t.fire(e.type,e)},C=function(e){"y"===e&&(e="YYYY"),E({type:"dp:update",change:e,viewDate:o.clone()})},N=function(e){p&&(e&&(h=Math.max(_,Math.min(3,h+e))),p.select(".datepicker > div").each(function(e){e.hide(),e.match(".datepicker-"+f[h].clsName)&&e.setStyle({display:"block"})}))},O=function(e,t){if(!e.isValid())return!1;if(s.disabledDates&&"d"===t&&function(e){return!0===s.disabledDates[e.format("YYYY-MM-DD")]}(e))return!1;if(s.enabledDates&&"d"===t&&!function(e){return!0===s.enabledDates[e.format("YYYY-MM-DD")]}(e))return!1;if(s.minDate&&e.isBefore(s.minDate,t))return!1;if(s.maxDate&&e.isAfter(s.maxDate,t))return!1;if(s.daysOfWeekDisabled&&"d"===t&&-1!==s.daysOfWeekDisabled.indexOf(e.day()))return!1;if(s.disabledHours&&("h"===t||"m"===t||"s"===t)&&function(e){return!0===s.disabledHours[e.format("H")]}(e))return!1;if(s.enabledHours&&("h"===t||"m"===t||"s"===t)&&!function(e){return!0===s.enabledHours[e.format("H")]}(e))return!1;if(s.disabledTimeIntervals&&("h"===t||"m"===t||"s"===t)){var i=!1;if($A(s.disabledTimeIntervals).each(function(t){if(e.isBetween(t[0],t[1]))return i=!0,!1}),i)return!1}return!0},I=function(){var e,t,i,a=p.select(".datepicker-days").first(),r=a.select("th"),l=[],d=[];if(x()){var h=Prototype.Selector.find(r,"th",0);h&&h.down("span")&&h.down("span").writeAttribute("title",s.tooltips.prevMonth);var c=Prototype.Selector.find(r,"th",1);c&&c.down("span")&&c.down("span").writeAttribute("title",s.tooltips.selectMonth);var m=Prototype.Selector.find(r,"th",2);for(m&&m.down("span")&&m.down("span").writeAttribute("title",s.tooltips.nextMonth),a.select(".disabled").each(function(e){e.removeClassName("disabled")}),c.update(o.format(s.dayViewHeaderFormat)),O(o.clone().subtract(1,"M"),"M")||h.addClassName("disabled"),O(o.clone().add(1,"M"),"M")||m.addClassName("disabled"),e=o.clone().startOf("M").startOf("w").startOf("d"),i=0;i<42;i++)0===e.weekday()&&(t=new Element("tr"),s.calendarWeeks&&t.insert('<td class="cw">'+e.week()+"</td>"),l.push(t)),d=["day"],e.isBefore(o,"M")&&d.push("old"),e.isAfter(o,"M")&&d.push("new"),e.isSame(n,"d")&&!u&&d.push("active"),O(e,"d")||d.push("disabled"),e.isSame(S(),"d")&&d.push("today"),0!==e.day()&&6!==e.day()||d.push("weekend"),E({type:"dp:classify",date:e,classNames:d}),t.insert('<td data-action="selectDay" data-day="'+e.format("L")+'" class="'+d.join(" ")+'">'+e.date()+"</td>"),e.add(1,"d");var _=a.select("tbody").first().update("");$A(l).each(function(e){_.insert(e)}),function(){var e=p.select(".datepicker-months").first(),t=e.select("th"),i=e.select("tbody").first().select("span"),a=Prototype.Selector.find(t,"th",0);a&&a.down("span")&&a.down("span").writeAttribute("title",s.tooltips.prevYear);var r=Prototype.Selector.find(t,"th",1);r&&r.down("span")&&r.down("span").writeAttribute("title",s.tooltips.selectYear);var l=Prototype.Selector.find(t,"th",2);l&&l.down("span")&&l.down("span").writeAttribute("title",s.tooltips.nextYear),e.select(".disabled").each(function(e){e.removeClassName("disabled")}),O(o.clone().subtract(1,"y"),"y")||a.addClassName("disabled"),r.update(o.year()),O(o.clone().add(1,"y"),"y")||l.addClassName("disabled"),i.each(function(e){e.removeClassName("active")}),n.isSame(o,"y")&&!u&&Prototype.Selector.find(i,"span",n.month()).addClassName("active"),i.each(function(e,t){O(o.clone().month(t),"M")||e.addClassName("disabled")})}(),function(){var e=p.select(".datepicker-years").first(),t=e.select("th"),i=o.clone().subtract(5,"y"),a=o.clone().add(6,"y"),r="",l=Prototype.Selector.find(t,"th",0);l&&l.down("span")&&l.down("span").writeAttribute("title",s.tooltips.prevDecade);var d=Prototype.Selector.find(t,"th",1);d&&d.down("span")&&d.down("span").writeAttribute("title",s.tooltips.selectDecade);var h=Prototype.Selector.find(t,"th",2);for(d&&h.down("span")&&h.down("span").writeAttribute("title",s.tooltips.nextDecade),e.select(".disabled").each(function(e){e.removeClassName("disabled")}),s.minDate&&s.minDate.isAfter(i,"y")&&l.addClassName("disabled"),d.update(i.year()+"-"+a.year()),s.maxDate&&s.maxDate.isBefore(a,"y")&&h.addClassName("disabled");!i.isAfter(a,"y");)r+='<span data-action="selectYear" class="year'+(i.isSame(n,"y")&&!u?" active":"")+(O(i,"y")?"":" disabled")+'">'+i.year()+"</span>",i.add(1,"y");e.select("td").each(function(e){e.update(r)})}(),function(){var e,t=p.select(".datepicker-decades").first(),i=t.select("th"),a=moment({y:o.year()-o.year()%100-1}),r=a.clone().add(100,"y"),l=a.clone(),d=!1,h=!1,c="",u=Prototype.Selector.find(i,"th",0);u&&u.down("span")&&u.down("span").writeAttribute("title",s.tooltips.prevCentury);var m=Prototype.Selector.find(i,"th",1),_=Prototype.Selector.find(i,"th",2);for(_&&_.down("span")&&_.down("span").writeAttribute("title",s.tooltips.nextCentury),t.select(".disabled").each(function(e){e.removeClassName("disabled")}),(a.isSame(moment({y:1900}))||s.minDate&&s.minDate.isAfter(a,"y"))&&u.addClassName("disabled"),m.update(a.year()+"-"+r.year()),(a.isSame(moment({y:2e3}))||s.maxDate&&s.maxDate.isBefore(r,"y"))&&_.addClassName("disabled");!a.isAfter(r,"y");)e=a.year()+12,d=s.minDate&&s.minDate.isAfter(a,"y")&&s.minDate.year()<=e,h=s.maxDate&&s.maxDate.isAfter(a,"y")&&s.maxDate.year()<=e,c+='<span data-action="selectDecade" class="decade'+(n.isAfter(a)&&n.year()<=e?" active":"")+(O(a,"y")||d||h?"":" disabled")+'" data-selection="'+(a.year()+6)+'">'+(a.year()+1)+" - "+(a.year()+12)+"</span>",a.add(12,"y");c+="<span></span><span></span><span></span>",t.select("td").each(function(e){e.update(c)}),m.update(l.year()+1+"-"+a.year())}()}},A=function(){p&&(I(),function(){var e,t,i=p.select(".timepicker span[data-time-component]");r||(e=p.select(".timepicker [data-action=togglePeriod]").first(),t=n.clone().add(n.hours()>=12?-12:12,"h"),e.update(n.format("A")),O(t,"h")?e.removeClassName("disabled"):e.addClassName("disabled")),i.each(function(e){e.match("[data-time-component=hours]")&&e.update(n.format(r?"HH":"hh")),e.match("[data-time-component=minute]")&&e.update(n.format("mm")),e.match("[data-time-component=seconds]")&&e.update(n.format(n.format("ss")))}),k("h")&&function(){var e=p.select(".timepicker-hours table").first(),t=o.clone().startOf("d"),i=[],s=new Element("tr");for(o.hour()>11&&!r&&t.hour(12);t.isSame(o,"d")&&(r||o.hour()<12&&t.hour()<12||o.hour()>11);)t.hour()%4==0&&(s=new Element("tr"),i.push(s)),s.insert('<td data-action="selectHour" class="hour'+(O(t,"h")?"":" disabled")+'">'+t.format(r?"HH":"hh")+"</td>"),t.add(1,"h");e.update(""),$A(i).each(function(t){e.insert(t)})}(),k("m")&&function(){for(var e=p.select(".timepicker-minutes table").first(),t=o.clone().startOf("h"),i=[],n=new Element("tr"),a=1===s.stepping?5:s.stepping;o.isSame(t,"h");)t.minute()%(4*a)==0&&(n=new Element("tr"),i.push(n)),n.insert('<td data-action="selectMinute" class="minute'+(O(t,"m")?"":" disabled")+'">'+t.format("mm")+"</td>"),t.add(a,"m");e.update(""),$A(i).each(function(t){e.insert(t)})}(),k("s")&&function(){var e=p.select(".timepicker-seconds table").first(),t=o.clone().startOf("m"),i=[],s=new Element("tr");if(e){for(;o.isSame(t,"m");)t.second()%20==0&&(s=new Element("tr"),i.push(s)),s.insert('<td data-action="selectSecond" class="second'+(O(t,"s")?"":" disabled")+'">'+t.format("ss")+"</td>"),t.add(5,"s");e.update(""),$A(i).each(function(t){e.insert(t)})}}()}())},H=function(e){var i=u?null:n;if(!e)return u=!0,a.setValue(""),a.store(n,""),t.store("date",""),E({type:"dp:change",date:!1,oldDate:i}),void A();if(e=e.clone().locale(s.locale),L()&&e.tz(s.timeZone),1!==s.stepping)for(e.minutes(Math.round(e.minutes()/s.stepping)*s.stepping).seconds(0);s.minDate&&e.isBefore(s.minDate);)e.add(s.stepping,"minutes");O(e)?(o=(n=e).clone(),a.setValue(n.format(l)),t.store("date",n.format(l)),a.store("date",n.toISOString()),u=!1,A(),E({type:"dp:change",date:n.clone(),oldDate:i})):(s.keepInvalid?E({type:"dp:change",date:e,oldDate:i}):Form.Element.setValue(a,u?"":n.format(l)),E({type:"dp:error",date:e,oldDate:i}))},P=function(){var e=!1;return p?(p.select(".collapse").each(function(t){var i=t.retrieve("collapse");return!i||!i.transitioning||(e=!0,!1)}),e?c:(m&&m.hasClassName("btn")&&m.toggleClassName("active"),p.hide(),Event.stopObserving(window,"resize",D),p.stopObserving("click",R),p.stopObserving("mousedown",Y),p.remove(),p=!1,E({type:"dp:hide",date:n.clone()}),a.blur(),o=n.clone(),c)):c},F=function(){H(null)},j=function(e){return void 0===s.parseInputDate?(!moment.isMoment(e)||e instanceof Date)&&(e=S(e)):e=s.parseInputDate(e),e},B={next:function(){var e=f[h].navFnc;o.add(f[h].navStep,e),I(),C(e)},previous:function(){var e=f[h].navFnc;o.subtract(f[h].navStep,e),I(),C(e)},pickerSwitch:function(){N(1)},selectMonth:function(e){var t=$(e.target).previousSiblings().size();o.month(t),h===_?(H(n.clone().year(o.year()).month(o.month())),s.inline||P()):(N(-1),I()),C("M")},selectYear:function(e){var t=parseInt($(e.target).innerText,10)||0;o.year(t),h===_?(H(n.clone().year(o.year())),s.inline||P()):(N(-1),I()),C("YYYY")},selectDecade:function(e){var t=parseInt($(e.target).readAttribute("data-selection"),10)||0;o.year(t),h===_?(H(n.clone().year(o.year())),s.inline||P()):(N(-1),I()),C("YYYY")},selectDay:function(e){var t=o.clone();$(e.target).match(".old")&&t.subtract(1,"M"),$(e.target).match(".new")&&t.add(1,"M"),H(t.date(parseInt($(e.target).innerText,10))),T()||s.keepOpen||s.inline||P()},incrementHours:function(){var e=n.clone().add(1,"h");O(e,"h")&&H(e)},incrementMinutes:function(){var e=n.clone().add(s.stepping,"m");O(e,"m")&&H(e)},incrementSeconds:function(){var e=n.clone().add(1,"s");O(e,"s")&&H(e)},decrementHours:function(){var e=n.clone().subtract(1,"h");O(e,"h")&&H(e)},decrementMinutes:function(){var e=n.clone().subtract(s.stepping,"m");O(e,"m")&&H(e)},decrementSeconds:function(){var e=n.clone().subtract(1,"s");O(e,"s")&&H(e)},togglePeriod:function(){H(n.clone().add(n.hours()>=12?-12:12,"h"))},togglePicker:function(e){var t,i=$(e.target),n=i.up("ul"),o=n.select(".in").first(),a=n.select(".collapse:not(.in)").first();if(o){if((t=o.retrieve("collapse"))&&t.transitioning)return;o.removeClassName("in"),a.addClassName("in"),i.match("span")?i.toggleClassName(s.icons.time+" "+s.icons.date):i.down("span").toggleClassName(s.icons.time+" "+s.icons.date)}},showPicker:function(){p.select(".timepicker > div:not(.timepicker-picker)").each(function(e){e.hide()}),p.down(".timepicker .timepicker-picker").show()},showHours:function(){p.down(".timepicker .timepicker-picker").hide(),p.down(".timepicker .timepicker-hours").show()},showMinutes:function(){p.down(".timepicker .timepicker-picker").hide(),p.down(".timepicker .timepicker-minutes").show()},showSeconds:function(){p.down(".timepicker .timepicker-picker").hide(),p.down(".timepicker .timepicker-seconds").show()},selectHour:function(e){var t=parseInt($(e.target).innerText,10);r||(n.hours()>=12?12!==t&&(t+=12):12===t&&(t=0)),H(n.clone().hours(t)),B.showPicker.call(c)},selectMinute:function(e){H(n.clone().minutes(parseInt($(e.target).innerText,10))),B.showPicker.call(c)},selectSecond:function(e){H(n.clone().seconds(parseInt($(e.target).innerText,10))),B.showPicker.call(c)},clear:F,today:function(){var e=S();O(e,"d")&&H(e)},close:P},R=function(e){Event.stop(e);var t=e.findElement("[data-action]");return!!t&&!$(e.target).match(".disabled")&&(B[t.readAttribute("data-action")].apply(c,arguments),!1)},z=function(){var e;if(a.readAttribute("disabled")||!s.ignoreReadonly&&a.readAttribute("readonly")||p)return c;var t=a.retrieve("date");return t?t=moment(t.trim()):(t=$F(a),t=moment(t.trim(),l)),void 0!==t?H(j(t)):u&&s.useCurrent&&(s.inline||a.match("input")&&0===t.trim().length)&&(e=S(),"string"==typeof s.useCurrent&&(e={year:function(e){return e.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(e){return e.date(1).hours(0).seconds(0).minutes(0)},day:function(e){return e.hours(0).seconds(0).minutes(0)},hour:function(e){return e.seconds(0).minutes(0)},minute:function(e){return e.seconds(0)}}[s.useCurrent](e)),H(e)),p=function(){var e=new Element("div",{className:"bootstrap-datetimepicker-widget dropdown-menu"}),t=new Element("div",{className:"datepicker"}),i=new Element("div",{className:"timepicker"}),n=new Element("ul",{className:"list-unstyled"}),o=new Element("li",{className:"picker-switch"+(s.collapse?" accordion-toggle":"")}).update(function(){var e=["<tbody><tr>"];return s.showTodayButton&&e.splice(e.length,0,"<td>",'<a data-action="today" title="'+s.tooltips.today+'">','<span class="'+s.icons.today+'"/>',"</a>","</td>"),!s.sideBySide&&x()&&T()&&e.splice(e.length,0,"<td>",'<a data-action="togglePicker" title="'+s.tooltips.selectTime+'">','<span class="'+s.icons.time+'"/>',"</a>","</td>"),s.showClear&&e.splice(e.length,0,"<td>",'<a data-action="clear" title="'+s.tooltips.clear+'">','<span class="'+s.icons.clear+'"/>',"</a>","</td>"),s.showClose&&e.splice(e.length,0,"<td>",'<a data-action="close" title="'+s.tooltips.close+'">','<span class="'+s.icons.close+'"/>',"</a>","</td>"),e.push("</tr></tbody>"),new Element("table",{className:"table-condensed"}).update(e.join(""))}());return $A(function(){var e=["<thead>","<tr>",'<th class="prev" data-action="previous">','<span class="'+s.icons.previous+'"/>',"</th>",'<th class="picker-switch" data-action="pickerSwitch" colspan="'+(s.calendarWeeks?"6":"5")+'"></th>','<th class="next" data-action="next">','<span class="'+s.icons.next+'"/>',"</th>","</tr>","</thead>"].join(""),t=["<tbody>","<tr>",'<td colspan="'+(s.calendarWeeks?"8":"7")+'"/>',"</tr>","<tbody>"].join("");return[new Element("div",{className:"datepicker-days"}).update(['<table class="table-condensed">',e,"<tbody/>","</table>"].join("")),new Element("div",{className:"datepicker-months"}).update(['<table class="table-condensed">',e,t,"</table>"].join("")),new Element("div",{className:"datepicker-years"}).update(['<table class="table-condensed">',e,t,"</table>"].join("")),new Element("div",{className:"datepicker-decades"}).update(['<table class="table-condensed">',e,t,"</table>"].join(""))]}()).each(function(e){t.insert(e)}),$A(function(){var e=new Element("div",{className:"timepicker-hours"}).update('<table class="table-condensed"></table>'),t=new Element("div",{className:"timepicker-minutes"}).update('<table class="table-condensed"></table>'),i=new Element("div",{className:"timepicker-seconds"}).update('<table class="table-condensed"></table>'),n=[function(){var e=["<tr>"],t=["<tr>"],i=["<tr>"];k("h")&&(e.splice(e.length,0,"<td>",'<a class="btn" href="#" tabindex="-1" title="'+s.tooltips.incrementHour+'" data-action="incrementHours">','<span class="'+s.icons.up+'"/>',"</a>","</td>"),t.splice(t.length,0,"<td>",'<span class="timepicker-hour" data-time-component="hours" title="'+s.tooltips.pickHour+'" data-action="showHours"/>',"</td>"),i.splice(i.length,0,"<td>",'<a class="btn" href="#" tab-index="-1" title="'+s.tooltips.decrementHour+'" data-action="decrementHours"/>','<span class="'+s.icons.down+'"/>',"</a>","</td>")),k("m")&&(k("h")&&(e.push('<td class="separator"></td>'),t.push('<td class="separator">:</td>'),i.push('<td class="separator"></td>')),e.splice(e.length,0,"<td>",'<a class="btn" href="#" tabindex="-1" title="'+s.tooltips.incrementMinute+'" data-action="incrementMinutes">','<span class="'+s.icons.up+'"/>',"</a>","</td>"),t.splice(t.length,0,"<td>",'<span class="timepicker-minute" data-time-component="minute" title="'+s.tooltips.pickMinute+'" data-action="showMinutes"/>',"</td>"),i.splice(i.length,0,"<td>",'<a class="btn" href="#" tab-index="-1" title="'+s.tooltips.decrementMinute+'" data-action="decrementMinutes"/>','<span class="'+s.icons.down+'"/>',"</a>","</td>")),k("s")&&(k("m")&&(e.push('<td class="separator"></td>'),t.push('<td class="separator">:</td>'),i.push('<td class="separator"></td>')),e.splice(e.length,0,"<td>",'<a class="btn" href="#" tabindex="-1" title="'+s.tooltips.incrementSecond+'" data-action="incrementSeconds">','<span class="'+s.icons.up+'"/>',"</a>","</td>"),t.splice(t.length,0,"<td>",'<span class="timepicker-second" data-time-component="seconds" title="'+s.tooltips.pickSecond+'" data-action="showSeconds"/>',"</td>"),i.splice(i.length,0,"<td>",'<a class="btn" href="#" tab-index="-1" title="'+s.tooltips.decrementSecond+'" data-action="decrementSeconds"/>','<span class="'+s.icons.down+'"/>',"</a>","</td>")),r||(e.push('<td class="separator"/>'),t.splice(t.length,0,"<td>",'<button class="btn btn-primary" data-action="togglePeriod" tabindex="-1"',' title="'+s.tooltips.togglePeriod+'"/>',"</td>"),i.push('<td class="separator"/>')),e.push("</tr>"),t.push("</tr>"),i.push("</tr>");var n=['<table class="table-condensed">',e.join(""),t.join(""),i.join(""),"</table>"].join("");return new Element("div",{className:"timepicker-picker"}).update(n)}()];return k("h")&&n.push(e),k("m")&&n.push(t),k("s")&&n.push(i),n}()).each(function(e){i.insert(e)}),s.inline&&e.removeClassName("dropdown-menu"),r&&e.addClassName("usetwentyfour"),k("s")&&!r&&e.addClassName("wider"),s.sideBySide&&x()&&T()?(e.addClassName("timepicker-sbs"),"top"===s.toolbarPlacement&&e.insert(o),e.insert(new Element("div",{className:"row"}).insert(t.addClassName("col-md-6")).insert(i.addClassName("col-md-6"))),"bottom"===s.toolbarPlacement&&e.insert(o),e):("top"===s.toolbarPlacement&&n.insert(o),x()&&n.insert(new Element("li",{className:s.collapse&&T()?"collapse in":""}).update(t)),"default"===s.toolbarPlacement&&n.insert(o),T()&&n.insert(new Element("li",{className:s.collapse&&x()?"collapse":""}).update(i)),"bottom"===s.toolbarPlacement&&n.insert(o),e.insert(n))}(),function(){var e=new Element("tr"),t=o.clone().startOf("w").startOf("d");for(!0===s.calendarWeeks&&e.insert(new Element("th",{className:"cw"}).update("#"));t.isBefore(o.clone().endOf("w"));)e.insert(new Element("th",{className:"dow"}).update(t.format("dd"))),t.add(1,"d");p.select(".datepicker-days thead").first().insert(e)}(),function(){var e=o.clone().startOf("y").startOf("d"),t=p.select(".datepicker-months td").first();for(t.update("");e.isSame(o,"y");)t.insert(new Element("span",{"data-action":"selectMonth",className:"month"}).update(e.format("MMM"))),e.add(1,"M")}(),p.down(".timepicker-hours")&&p.down(".timepicker-hours").hide(),p.down(".timepicker-minutes")&&p.down(".timepicker-minutes").hide(),p.down(".timepicker-seconds")&&p.down(".timepicker-seconds").hide(),A(),N(),Event.observe(window,"resize",D),p.observe("click",R),p.observe("mousedown",Y),m&&m.hasClassName("btn")&&m.toggleClassName("active"),D(),s.focusOnShow&&!function(e){return e===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(e.type||e.href||~e.tabIndex)}(a)&&a.focus(),E({type:"dp:show"}),c},W=function(){if(!a.match("[disabled]"))return p?P():z()},X=function(){var e=s.format||"L LT";l=e.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){return(n.localeData().longDateFormat(e)||e).replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){return n.localeData().longDateFormat(e)||e})}),(d=s.extraFormats?s.extraFormats.slice():[]).indexOf(e)<0&&d.indexOf(l)<0&&d.push(l),r=l.toLowerCase().indexOf("a")<1&&l.replace(/\[.*?\]/g,"").indexOf("h")<1,k("y")&&(_=2),k("M")&&(_=1),k("d")&&(_=0),h=Math.max(_,h),u||H(n)};if(c.destroy=function(){P(),detachDatePickerElementEvents()},c.toggle=W,c.show=z,c.hide=P,c.disable=function(){return P(),m&&m.hasClassName("btn")&&m.addClassName("disabled"),a.prop("disabled",!0),c},c.enable=function(){return m&&m.hasClassName("btn")&&m.removeClassName("disabled"),a.prop("disabled",!1),c},c.ignoreReadonly=function(e){if(0===arguments.length)return s.ignoreReadonly;if("boolean"!=typeof e)throw new TypeError("ignoreReadonly () expects a boolean parameter");return s.ignoreReadonly=e,c},c.options=function(e){if(0===arguments.length)return Object.extend({},s);if(!(e instanceof Object))throw new TypeError("options() options parameter should be an object");return Object.extend(s,e),$H(s).each(function(e){if(void 0===c[e.key])throw new TypeError("option "+key+" is not recognized!");c[e.key](e.value)}),c},c.date=function(e){if(0===arguments.length)return u?null:n.clone();if(!(null===e||"string"==typeof e||moment.isMoment(e)||e instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return H(null===e?null:j(e)),c},c.format=function(e){if(0===arguments.length)return s.format;if("string"!=typeof e&&("boolean"!=typeof e||!1!==e))throw new TypeError("format() expects a string or boolean:false parameter "+e);return s.format=e,l&&X(),c},c.timeZone=function(e){if(0===arguments.length)return s.timeZone;if("string"!=typeof e)throw new TypeError("newZone() expects a string parameter");return s.timeZone=e,c},c.dayViewHeaderFormat=function(e){if(0===arguments.length)return s.dayViewHeaderFormat;if("string"!=typeof e)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return s.dayViewHeaderFormat=e,c},c.extraFormats=function(e){if(0===arguments.length)return s.extraFormats;if(!1!==e&&!(e instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return s.extraFormats=e,d&&X(),c},c.disabledDates=function(e){if(0===arguments.length)return s.disabledDates?Object.extend({},s.disabledDates):s.disabledDates;if(!e)return s.disabledDates=!1,A(),c;if(!(e instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return s.disabledDates=indexGivenDates(e),s.enabledDates=!1,A(),c},c.enabledDates=function(e){if(0===arguments.length)return s.enabledDates?Object.extend({},s.enabledDates):s.enabledDates;if(!e)return s.enabledDates=!1,A(),c;if(!(e instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return s.enabledDates=indexGivenDates(e),s.disabledDates=!1,A(),c},c.daysOfWeekDisabled=function(e){if(0===arguments.length)return s.daysOfWeekDisabled.splice(0);if("boolean"==typeof e&&!e)return s.daysOfWeekDisabled=!1,A(),c;if(!(e instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(s.daysOfWeekDisabled=e.reduce(function(e,t){return(t=parseInt(t,10))>6||t<0||isNaN(t)?e:(-1===e.indexOf(t)&&e.push(t),e)},[]).sort(),s.useCurrent&&!s.keepInvalid){for(var t=0;!O(n,"d");){if(n.add(1,"d"),31===t)throw"Tried 31 times to find a valid date";t++}H(n)}return A(),c},c.maxDate=function(e){if(0===arguments.length)return s.maxDate?s.maxDate.clone():s.maxDate;if("boolean"==typeof e&&!1===e)return s.maxDate=!1,A(),c;"string"==typeof e&&("now"!==e&&"moment"!==e||(e=S()));var t=j(e);if(!t.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+e);if(s.minDate&&t.isBefore(s.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+t.format(l));return s.maxDate=t,s.useCurrent&&!s.keepInvalid&&n.isAfter(e)&&H(s.maxDate),o.isAfter(t)&&(o=t.clone().subtract(s.stepping,"m")),A(),c},c.minDate=function(e){if(0===arguments.length)return s.minDate?s.minDate.clone():s.minDate;if("boolean"==typeof e&&!1===e)return s.minDate=!1,A(),c;"string"==typeof e&&("now"!==e&&"moment"!==e||(e=S()));var t=j(e);if(!t.isValid())throw new TypeError("minDate() Could not parse date parameter: "+e);if(s.maxDate&&t.isAfter(s.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+t.format(l));return s.minDate=t,s.useCurrent&&!s.keepInvalid&&n.isBefore(e)&&H(s.minDate),o.isBefore(t)&&(o=t.clone().add(s.stepping,"m")),A(),c},c.defaultDate=function(e){if(0===arguments.length)return s.defaultDate?s.defaultDate.clone():s.defaultDate;if(!e)return s.defaultDate=!1,c;"string"==typeof e&&(e="now"===e||"moment"===e?S():S(e));var t=j(e);if(!t.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+e);if(!O(t))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return s.defaultDate=t,(s.defaultDate&&s.inline||""===a.val().trim())&&H(s.defaultDate),c},c.locale=function(e){if(0===arguments.length)return s.locale;if(!moment.localeData(e))throw new TypeError("locale() locale "+e+" is not loaded from moment locales!");return s.locale=e,s.tooltips=i[e]||s.locale,n.locale(s.locale),o.locale(s.locale),l&&X(),p&&(P(),z()),c},c.stepping=function(e){return 0===arguments.length?s.stepping:(e=parseInt(e,10),(isNaN(e)||e<1)&&(e=1),s.stepping=e,c)},c.useCurrent=function(e){var t=["year","month","day","hour","minute"];if(0===arguments.length)return s.useCurrent;if("boolean"!=typeof e&&"string"!=typeof e)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof e&&-1===t.indexOf(e.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+t.join(", "));return s.useCurrent=e,c},c.collapse=function(e){if(0===arguments.length)return s.collapse;if("boolean"!=typeof e)throw new TypeError("collapse() expects a boolean parameter");return s.collapse===e?c:(s.collapse=e,p&&(P(),z()),c)},c.icons=function(e){if(0===arguments.length)return Object.extend({},s.icons);if(!(e instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return Object.extend(s.icons,e),p&&(P(),z()),c},c.tooltips=function(e){if(0===arguments.length)return Object.extend({},s.tooltips);if(!(e instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return Object.extend(s.tooltips,e),p&&(P(),z()),c},c.useStrict=function(e){if(0===arguments.length)return s.useStrict;if("boolean"!=typeof e)throw new TypeError("useStrict() expects a boolean parameter");return s.useStrict=e,c},c.sideBySide=function(e){if(0===arguments.length)return s.sideBySide;if("boolean"!=typeof e)throw new TypeError("sideBySide() expects a boolean parameter");return s.sideBySide=e,p&&(P(),z()),c},c.viewMode=function(e){if(0===arguments.length)return s.viewMode;if("string"!=typeof e)throw new TypeError("viewMode() expects a string parameter");if(-1===g.indexOf(e))throw new TypeError("viewMode() parameter must be one of ("+g.join(", ")+") value");return s.viewMode=e,h=Math.max(g.indexOf(e),_),N(),c},c.toolbarPlacement=function(e){if(0===arguments.length)return s.toolbarPlacement;if("string"!=typeof e)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===y.indexOf(e))throw new TypeError("toolbarPlacement() parameter must be one of ("+y.join(", ")+") value");return s.toolbarPlacement=e,p&&(P(),z()),c},c.widgetPositioning=function(e){if(0===arguments.length)return Object.extend({},s.widgetPositioning);if("[object Object]"!=={}.toString.call(e))throw new TypeError("widgetPositioning() expects an object variable");if(e.horizontal){if("string"!=typeof e.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(e.horizontal=e.horizontal.toLowerCase(),-1===v.indexOf(e.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+v.join(", ")+")");s.widgetPositioning.horizontal=e.horizontal}if(e.vertical){if("string"!=typeof e.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(e.vertical=e.vertical.toLowerCase(),-1===b.indexOf(e.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+b.join(", ")+")");s.widgetPositioning.vertical=e.vertical}return A(),c},c.calendarWeeks=function(e){if(0===arguments.length)return s.calendarWeeks;if("boolean"!=typeof e)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return s.calendarWeeks=e,A(),c},c.showTodayButton=function(e){if(0===arguments.length)return s.showTodayButton;if("boolean"!=typeof e)throw new TypeError("showTodayButton() expects a boolean parameter");return s.showTodayButton=e,p&&(P(),z()),c},c.showClear=function(e){if(0===arguments.length)return s.showClear;if("boolean"!=typeof e)throw new TypeError("showClear() expects a boolean parameter");return s.showClear=e,p&&(P(),z()),c},c.widgetParent=function(e){if(0===arguments.length)return s.widgetParent;if("string"==typeof e&&(e=$(e)),null!==e&&"string"!=typeof e&&!(e instanceof Element))throw new TypeError("widgetParent() expects a string or a Element object parameter");return s.widgetParent=e,p&&(P(),z()),c},c.keepOpen=function(e){if(0===arguments.length)return s.keepOpen;if("boolean"!=typeof e)throw new TypeError("keepOpen() expects a boolean parameter");return s.keepOpen=e,c},c.focusOnShow=function(e){if(0===arguments.length)return s.focusOnShow;if("boolean"!=typeof e)throw new TypeError("focusOnShow() expects a boolean parameter");return s.focusOnShow=e,c},c.inline=function(e){if(0===arguments.length)return s.inline;if("boolean"!=typeof e)throw new TypeError("inline() expects a boolean parameter");return s.inline=e,c},c.clear=function(){return F(),c},c.keyBinds=function(e){return 0===arguments.length?s.keyBinds:(s.keyBinds=e,c)},c.getMoment=function(e){return S(e)},c.debug=function(e){if("boolean"!=typeof e)throw new TypeError("debug() expects a boolean parameter");return s.debug=e,c},c.allowInputToggle=function(e){if(0===arguments.length)return s.allowInputToggle;if("boolean"!=typeof e)throw new TypeError("allowInputToggle() expects a boolean parameter");return s.allowInputToggle=e,c},c.showClose=function(e){if(0===arguments.length)return s.showClose;if("boolean"!=typeof e)throw new TypeError("showClose() expects a boolean parameter");return s.showClose=e,c},c.keepInvalid=function(e){if(0===arguments.length)return s.keepInvalid;if("boolean"!=typeof e)throw new TypeError("keepInvalid() expects a boolean parameter");return s.keepInvalid=e,c},c.datepickerInput=function(e){if(0===arguments.length)return s.datepickerInput;if("string"!=typeof e)throw new TypeError("datepickerInput() expects a string parameter");return s.datepickerInput=e,c},c.parseInputDate=function(e){if(0===arguments.length)return s.parseInputDate;if("function"!=typeof e)throw new TypeError("parseInputDate() sholud be as function");return s.parseInputDate=e,c},c.disabledTimeIntervals=function(e){if(0===arguments.length)return s.disabledTimeIntervals?Object.extend({},s.disabledTimeIntervals):s.disabledTimeIntervals;if(!e)return s.disabledTimeIntervals=!1,A(),c;if(!(e instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return s.disabledTimeIntervals=e,A(),c},c.disabledHours=function(e){if(0===arguments.length)return s.disabledHours?Object.extend({},s.disabledHours):s.disabledHours;if(!e)return s.disabledHours=!1,A(),c;if(!(e instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(s.disabledHours=indexGivenHours(e),s.enabledHours=!1,s.useCurrent&&!s.keepInvalid){for(var t=0;!O(n,"h");){if(n.add(1,"h"),24===t)throw"Tried 24 times to find a valid date";t++}H(n)}return A(),c},c.enabledHours=function(e){if(0===arguments.length)return s.enabledHours?Object.extend({},s.enabledHours):s.enabledHours;if(!e)return s.enabledHours=!1,A(),c;if(!(e instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(s.enabledHours=indexGivenHours(e),s.disabledHours=!1,s.useCurrent&&!s.keepInvalid){for(var t=0;!O(n,"h");){if(n.add(1,"h"),24===t)throw"Tried 24 times to find a valid date";t++}H(n)}return A(),c},c.viewDate=function(e){if(0===arguments.length)return o.clone();if(!e)return o=n.clone(),c;if(!("string"==typeof e||moment.isMoment(e)||e instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return o=j(e),C(),c},t.match("input"))a=t;else if(0===(a=t.select(s.datepickerInput)).length)a=t.select("input").first();else if(!a.match("input"))throw new Error('CSS class "'+s.datepickerInput+'" cannot be applied to non input element');if(t.hasClassName("input-group")&&(m=0===t.select(".datepickerbutton").length?t.select(".input-group-addon").first():t.select(".datepickerbutton").first()),!s.inline&&!a.match("input"))throw new Error("Could not initialize DateTimePicker without an input element");n=S(),o=n.clone(),Object.extend(s,function(){var e,i={};return(e=t.match("input")||s.inline?t.retrieve("dateoptions"):t.select("input").first().retrieve("dateoptions"))&&e instanceof Object&&(i=Object.extend(i,e)),$A(s).each(function(t){var s="date"+t.charAt(0).toUpperCase()+t.slice(1);void 0!==e[s]&&(i[t]=e[s])}),i}()),c.options(s),X(),a.observe("change",function(e){var t=$F($(e.target)).trim(),i=t?j(t):null;return H(i),e.stopImmediatePropagation(),!1}),a.observe("blur",s.debug?Prototype.emptyFunction:P),a.observe("keydown",function(e){var t,i,n,o,a=null,r=[],l={},d=e.which;w[d]="p";for(t in w)w.hasOwnProperty(t)&&"p"===w[t]&&(r.push(t),parseInt(t,10)!==d&&(l[t]=!0));for(t in s.keyBinds)if(s.keyBinds.hasOwnProperty(t)&&"function"==typeof s.keyBinds[t]&&(n=t.split(" ")).length===r.length&&M[d]===n[n.length-1]){for(o=!0,i=n.length-2;i>=0;i--)if(!(M[n[i]]in l)){o=!1;break}if(o){a=s.keyBinds[t];break}}a&&(a.call(c,p),e.stopPropagation(),e.preventDefault())}),a.observe("keyup",function(e){w[e.which]="r",e.stopPropagation(),e.preventDefault()}),a.observe("focus",s.allowInputToggle?z:Prototype.emptyFunction),t.match("input")?a.observe("focus",z):m&&(m.observe("click",W),m.observe("mousedown",Y)),a.readAttribute("disabled")&&c.disable();var U=a.retrieve("date");return U=U?moment(U):$F(a).trim(),a.match("input")&&0!==U.length?H(j(U)):!s.defaultDate||void 0!==a.readAttribute("placeholder")&&null!==a.readAttribute("placeholder")||H(s.defaultDate),s.inline&&z(),c}(s,o)}})}(),Class.create("App",{blockEditorShortcuts:!1,blockShortcuts:!1,blockNavigation:!1,initialize:function(e,t,i){this._initLoadRep=e,this._initObj=!0,this.usersEnabled=t,this._initLoggedUser=i,this._contextHolder=new DataModel,this._contextHolder.setManifestNodeProvider(new RemoteNodeProvider),this._focusables=[],this._registry=null,this._resourcesRegistry={},this._initDefaultDisp="list",this.histCount=0,this._guiComponentsConfigs=new Hash,this.appTitle=window._bootstrap.parameters.get("customWording").title||"System"},init:function(){document.observe("app:registry_loaded",function(){if(this.refreshExtensionsRegistry(),this.logXmlUser(this._registry),this.user){var e=this.user.getActiveRepository(),t=this.user.getRepositoriesList().get(e);t&&t.loadResources()}this.guiLoaded?(this.refreshTemplateParts(),this.refreshGuiComponentConfigs()):document.observe("app:gui_loaded",function(){this.refreshTemplateParts(),this.refreshGuiComponentConfigs()}.bind(this)),this.loadActiveRepository()}.bind(this)),modal.setLoadingStepCounts(5),window._bootstrap.parameters.get("PRELOADED_REGISTRY")?(this._registry=parseXml(window._bootstrap.parameters.unset("PRELOADED_REGISTRY")).documentElement,modal.updateLoadingProgress("XML Registry loaded")):this.loadXmlRegistry(!0),this.initTemplates(),modal.initForms(),this.initObjects(),window.setTimeout(function(){document.fire("app:loaded")},200)},loadXmlRegistry:function(e,t){var i=new Connexion;i.onComplete=function(t){null!=t.responseXML&&null!=t.responseXML.documentElement&&("registry"==t.responseXML.documentElement.nodeName?(this._registry=t.responseXML.documentElement,modal.updateLoadingProgress("XML Registry loaded"),e||document.fire("app:registry_loaded",this._registry)):"registry_part"==t.responseXML.documentElement.nodeName&&this.refreshXmlRegistryPart(t.responseXML.documentElement))}.bind(this),i.addParameter("get_action","get_xml_registry"),t&&i.addParameter("xPath",t),e?i.sendSync():i.sendAsync()},refreshXmlRegistryPart:function(e){var t=e.getAttribute("xPath"),i=XPathSelectSingleNode(this._registry,t);if(i&&i.parentNode){(n=i.parentNode).removeChild(i),e.firstChild&&n.appendChild(e.firstChild.cloneNode(!0))}else if(t.indexOf("/")>-1){var s=t.substring(0,t.lastIndexOf("/")),n=XPathSelectSingleNode(this._registry,s);n&&e.firstChild&&n.appendChild(e.firstChild.cloneNode(!0))}else e.firstChild&&this._registry.appendChild(e.firstChild.cloneNode(!0));document.fire("app:registry_part_loaded",t)},initObjects:function(){this.contextMenu=new Proto.Menu({selector:"",className:"menu desktop",menuItems:[],fade:!1,zIndex:2e3});var e=this.contextMenu;e.options.beforeShow=function(e){this.options.lastElement=Event.element(e),this.options.menuItems=app.actionBar.getContextActions(Event.element(e),["inline"]),this.refreshList()}.bind(e),e.options.beforeHide=function(e){this.options.lastElement=null}.bind(e),document.observe("app:actions_refreshed",function(){this.options.lastElement&&(this.options.menuItems=app.actionBar.getContextActions(this.options.lastElement,["inline"]),this.refreshList())}.bind(e)),this.actionBar=new ActionsManager(this.usersEnabled),this._registry&&this.actionBar.loadActionsFromRegistry(this._registry),document.observe("app:registry_loaded",function(e){Prototype.Browser.IE&&ResourcesManager.prototype.loadAutoLoadResources(e.memo),this.actionBar.loadActionsFromRegistry(e.memo)}.bind(this)),Prototype.Browser.WebKit||Prototype.Browser.IE?document.observe("app:context_changed",function(e){var t=this.getContextNode().getPath();document.title=this.appTitle+" - "+(getBaseName(t)?getBaseName(t):"/")}.bind(this)):(this.history=new Proto.History(function(e){this.goTo(this.historyHashToPath(e))}.bind(this)),document.observe("app:context_changed",function(e){this.updateHistory(this.getContextNode().getPath())}.bind(this))),document.observe("app:context_changed",function(e){!this.skipLsHistory&&this.user&&this.user.getActiveRepository()&&window.setTimeout(function(){var e=this.user.getPreference("ls_history",!0)||{};(e=new Hash(e)).set(this.user.getActiveRepository(),this.getContextNode().getPath()),this.user.setPreference("ls_history",e,!0),this.user.savePreference("ls_history")}.bind(this),100)}.bind(this)),modal.updateLoadingProgress("Actions Initialized"),this.activityMonitor=new ActivityMonitor(window._bootstrap.parameters.get("session_timeout"),window._bootstrap.parameters.get("client_timeout"),window._bootstrap.parameters.get("client_timeout_warning")),this.guiLoaded=!1,this.buildGUI($(window._bootstrap.parameters.get("MAIN_ELEMENT"))),document.fire("app:before_gui_load"),this.guiCompRegistry&&this.initAppWidgets(this.guiCompRegistry),this.guiLoaded=!0,document.fire("app:gui_loaded"),modal.updateLoadingProgress("GUI Initialized"),this.initTabNavigation(),this.blockShortcuts=!1,this.blockNavigation=!1,modal.updateLoadingProgress("Navigation loaded"),this.tryLogUserFromCookie(),document.fire("app:registry_loaded",this._registry)},initAppWidgets:function(e){var t;if(e.length){for(var i=e.length;i>0;i--){var s=e[i-1],n=s.appId;e[i-1]=new s.appClass(s.node,s.appOptions),window[n]=e[i-1],t=e[i-1]}t&&t.resize();for(var o=0;o<e.length;o++){var a=e[o];Class.objectImplements(a,"IFocusable")&&(a.setFocusBehaviour(),this._focusables.push(a)),Class.objectImplements(a,"IContextMenuable")&&a.setContextualMenu(this.contextMenu),Class.objectImplements(a,"IActionProvider")&&(this.guiActions||(this.guiActions=new Hash),this.guiActions.update(a.getActions()))}}},buildGUI:function(e,t){if(1==e.nodeType){this.guiCompRegistry||(this.guiCompRegistry=$A([])),t||(t=this.guiCompRegistry);var i=(e=$(e)).readAttribute("appClass")||"",s=Class.getByName(i),n=e.readAttribute("id")||"",o={};if(e.readAttribute("appOptions"))try{o=e.readAttribute("appOptions").evalJSON()}catch(e){alert("Error while parsing JSON for GUI template part "+n+"!")}s&&n&&Class.objectImplements(s,"IAppWidget")&&t.push({appId:n,node:e,appClass:s,appOptions:o}),$A(e.childNodes).each(function(e){this.buildGUI(e,t)}.bind(this))}},refreshTemplateParts:function(){var e=XPathSelectNodes(this._registry,"client_configs/template_part"),t={};this.templatePartsToRestore||(this.templatePartsToRestore=$A());for(var i=0;i<e.length;i++)if(!e[i].getAttribute("theme")||e[i].getAttribute("theme")==window._bootstrap.parameters.get("theme")){var s=e[i].getAttribute("appId"),n=e[i].getAttribute("appClass"),o=e[i].getAttribute("appOptions"),a="";e[i].firstChild&&4==e[i].firstChild.nodeType&&""!=e[i].firstChild.nodeValue&&(a=e[i].firstChild.nodeValue);var r=Class.getByName(n);r&&s&&Class.objectImplements(r,"IAppWidget")&&(t[s]=[r,n,o,a],this.templatePartsToRestore=this.templatePartsToRestore.without(s))}var l=$A(Object.keys(t));this.templatePartsToRestore.each(function(e){var i=this.findOriginalTemplatePart(e);if(i){var s=i.getAttribute("appClass"),n=i.getAttribute("appOptions"),o=i.innerHTML,a=Class.getByName(s);t[e]=[a,s,n,o]}}.bind(this));for(var d in t)this.refreshGuiComponent(d,t[d][0],t[d][1],t[d][2],t[d][3]);this.templatePartsToRestore=l},refreshGuiComponent:function(e,t,i,s,n){if(window[e]){var o=window[e];if(o.__className!=i||o.__appOptionsString!=s){var a={};if(s&&(a=s.evalJSON()),Class.objectImplements(o,"IFocusable")&&(this._focusables=this._focusables.without(o)),Class.objectImplements(o,"IActionProvider")&&o.getActions().each(function(e){this.guiActions.unset(e.key)}.bind(this)),o.htmlElement)var r=o.htmlElement;if(o.destroy(),n&&r){r.insert(n);var l=$A();$A(r.children).each(function(e){this.buildGUI(e,l)}.bind(this)),l.length&&this.initAppWidgets(l)}var d=new t($(e),a);Class.objectImplements(d,"IFocusable")&&(d.setFocusBehaviour(),this._focusables.push(d)),Class.objectImplements(d,"IContextMenuable")&&d.setContextualMenu(this.contextMenu),Class.objectImplements(d,"IActionProvider")&&(this.guiActions||(this.guiActions=new Hash),this.guiActions.update(d.getActions())),$(e).parentNode&&$(e).parentNode.paneObject&&$(e).parentNode.paneObject.scanChildrenPanes&&$(e).parentNode.paneObject.scanChildrenPanes($(e).parentNode.paneObject.htmlElement),d.__appOptionsString=s,window[e]=d,d.resize(),delete o}}},refreshGuiComponentConfigs:function(){this._guiComponentsConfigs=$H();var e=XPathSelectNodes(this._registry,"client_configs/component_config");if(e.length)for(var t=0;t<e.length;t++)this.setGuiComponentConfig(e[t])},setGuiComponentConfig:function(e){var t=e.getAttribute("className"),i=e.getAttribute("classId")||null,s=new Hash;i?s.set(i,e):s.set("all",e);var n=this._guiComponentsConfigs.get(t);n||(n=$A()),n.push(s),this._guiComponentsConfigs.set(t,n),document.fire("app:component_config_changed",{className:t,classConfig:s})},getGuiComponentConfigs:function(e){return this._guiComponentsConfigs.get(e)},tryLogUserFromCookie:function(){var e=new Connexion,t=retrieveRememberData();null!=t&&(e.addParameter("get_action","login"),e.addParameter("userid",t.user),e.addParameter("password",t.pass),e.addParameter("cookie_login","true"),e.onComplete=function(e){hideLightBox(),this.actionBar.parseXmlMessage(e.responseXML)}.bind(this),e.sendSync())},logXmlUser:function(e,t){this.user=null;var i=XPathSelectSingleNode(e,"user");if(i){var s=i.getAttribute("id"),n=i.childNodes;s&&(this.user=new User(s,n))}t||document.fire("app:user_logged",this.user)},loadActiveRepository:function(){var e=new Repository(null);if(null!=this.user){var t=this.user.getActiveRepository(),i=this.user.getRepositoriesList();if(!(e=i.get(t))){if(this.user.lock)return this.actionBar.loadActionsFromRegistry(this._registry),void window.setTimeout(function(){this.actionBar.fireAction(this.user.lock)}.bind(this),50);alert("No active repository found for user!")}if(this.user.getPreference("pending_folder")&&"-1"!=this.user.getPreference("pending_folder"))this._initLoadRep=this.user.getPreference("pending_folder"),this.user.setPreference("pending_folder","-1"),this.user.savePreference("pending_folder");else if(this.user.getPreference("ls_history",!0)){var s=new Hash(this.user.getPreference("ls_history",!0));this._initLoadRep=s.get(t)}}this.loadRepository(e),i&&t?document.fire("app:repository_list_refreshed",{list:i,active:t}):document.fire("app:repository_list_refreshed",{list:!1,active:!1})},reloadRepositoriesList:function(){this.user&&(document.observeOnce("app:registry_part_loaded",function(e){"user/repositories"==e.memo&&(this.logXmlUser(this._registry,!0),repId=this.user.getActiveRepository(),repList=this.user.getRepositoriesList(),document.fire("app:repository_list_refreshed",{list:repList,active:repId}))}.bind(this)),this.loadXmlRegistry(!1,"user/repositories"))},loadRepository:function(repository){if(null==this.repositoryId||this.repositoryId!=repository.getId()){repository.loadResources();var repositoryId=repository.getId(),newIcon=repository.getIcon();this.skipLsHistory=!0;var providerDef=repository.getNodeProviderDef();if(null!=providerDef){var provider=eval("new "+providerDef.name+"()");providerDef.options&&provider.initProvider(providerDef.options),this._contextHolder.setManifestNodeProvider(provider);var rootNode=new ManifestNode("/",!1,repository.getLabel(),newIcon,provider)}else{var rootNode=new ManifestNode("/",!1,repository.getLabel(),newIcon);this._contextHolder.setManifestNodeProvider(new RemoteNodeProvider)}if(this._contextHolder.setRootNode(rootNode),this.repositoryId=repositoryId,this._initLoadRep)if(""!=this._initLoadRep&&"/"!=this._initLoadRep){var copy=this._initLoadRep.valueOf();this._initLoadRep=null,rootNode.observeOnce("first_load",function(){setTimeout(function(){this.goTo(copy),this.skipLsHistory=!1}.bind(this),1e3)}.bind(this))}else this.skipLsHistory=!1;else this.skipLsHistory=!1;rootNode.load()}},pathExists:function(e){var t=new Connexion;t.addParameter("get_action","stat"),t.addParameter("file",e);var i=!1;return t.onComplete=function(e){e.responseJSON&&e.responseJSON.mode&&(i=!0)}.bind(this),t.sendSync(),i},goTo:function(e){var t;if(Object.isString(e))t=e;else if(t=e.getPath(),void 0!=e.getMetadata().get("repository_id")&&e.getMetadata().get("repository_id")!=this.repositoryId)return app.user&&app.user.setPreference("pending_folder",e.getPath()),void this.triggerRepositoryChange(e.getMetadata().get("repository_id"));var i;if(""==t||"/"==t)return i=new ManifestNode("/"),void this._contextHolder.requireContextChange(i);window.setTimeout(function(){this._contextHolder.loadPathInfoSync(t,function(e){e.isLeaf()?(this._contextHolder.setPendingSelection(getBaseName(t)),i=new ManifestNode(getRepName(t))):i=e}.bind(this)),this._contextHolder.requireContextChange(i)}.bind(this),0)},triggerRepositoryChange:function(e){document.fire("app:trigger_repository_switch");var t=new Connexion;t.addParameter("get_action","switch_repository"),t.addParameter("repository_id",e),oThis=this,t.onComplete=function(e){this.repositoryId=null,this.loadXmlRegistry()}.bind(this);var i=this._contextHolder.getRootNode();i&&(this.skipLsHistory=!0,i.clear()),t.sendAsync()},initExtension:function(xmlNode,extensionDefinition){var activeCondition=XPathSelectSingleNode(xmlNode,"processing/activeCondition");if(activeCondition&&activeCondition.firstChild)try{var func=new Function(activeCondition.firstChild.nodeValue.strip());if(!1===func())return!1}catch(e){}if("editor"==xmlNode.nodeName)Object.extend(extensionDefinition,{openable:"true"==xmlNode.getAttribute("openable"),previewProvider:"true"==xmlNode.getAttribute("previewProvider"),order:xmlNode.getAttribute("order")?parseInt(xmlNode.getAttribute("order")):0,formId:xmlNode.getAttribute("formId")||null,text:MessageHash[xmlNode.getAttribute("text")],title:MessageHash[xmlNode.getAttribute("title")],icon:xmlNode.getAttribute("icon"),icon_class:xmlNode.getAttribute("iconClass"),editorClass:xmlNode.getAttribute("className"),mimes:$A(xmlNode.getAttribute("mimes").split(",")),write:!(!xmlNode.getAttribute("write")||"true"!=xmlNode.getAttribute("write"))});else if("uploader"==xmlNode.nodeName){var th=window._bootstrap.parameters.get("theme"),clientForm=XPathSelectSingleNode(xmlNode,'processing/clientForm[@theme="'+th+'"]');clientForm||(clientForm=XPathSelectSingleNode(xmlNode,"processing/clientForm")),clientForm&&clientForm.firstChild&&clientForm.getAttribute("id")&&(extensionDefinition.formId=clientForm.getAttribute("id"),$("all_forms").select('[id="'+clientForm.getAttribute("id")+'"]').length||$("all_forms").insert(clientForm.firstChild.nodeValue));var extensionOnInit=XPathSelectSingleNode(xmlNode,"processing/extensionOnInit");if(extensionOnInit&&extensionOnInit.firstChild)try{eval(extensionOnInit.firstChild.nodeValue)}catch(e){}var dialogOnOpen=XPathSelectSingleNode(xmlNode,"processing/dialogOnOpen");dialogOnOpen&&dialogOnOpen.firstChild&&(extensionDefinition.dialogOnOpen=dialogOnOpen.firstChild.nodeValue);var dialogOnComplete=XPathSelectSingleNode(xmlNode,"processing/dialogOnComplete");dialogOnComplete&&dialogOnComplete.firstChild&&(extensionDefinition.dialogOnComplete=dialogOnComplete.firstChild.nodeValue)}return!0},refreshExtensionsRegistry:function(){this._extensionsRegistry={editor:$A([]),uploader:$A([])};for(var e=XPathSelectNodes(this._registry,"plugins/editor|plugins/uploader"),t=0;t<e.length;t++){var i={id:e[t].getAttribute("id"),xmlNode:e[t],resourcesManager:new ResourcesManager};this._resourcesRegistry[i.id]=i.resourcesManager;for(var s=XPathSelectNodes(e[t],"client_settings/resources|dependencies|clientForm"),n=0;n<s.length;n++){var o=s[n];i.resourcesManager.loadFromXmlNode(o)}this.initExtension(e[t],i)&&this._extensionsRegistry[e[t].nodeName].push(i)}ResourcesManager.prototype.loadAutoLoadResources(this._registry)},getPluginConfigs:function(e){for(var t=XPathSelectNodes(this._registry,"plugins/"+e+'/plugin_configs/property | plugins/core[@id="core.'+e+'"]/plugin_configs/property | plugins/plugin[@id="core.'+e+'"]/plugin_configs/property'),i=$H(),s=0;s<t.length;s++){var n=t[s];i.set(n.getAttribute("name"),n.firstChild.nodeValue.evalJSON())}return i},hasPluginOfType:function(e,t){if(null==t)i=XPathSelectSingleNode(this._registry,'plugins/plugin[contains(@id, "'+e+'.")] | plugins/'+e+"[@id]");else var i=XPathSelectSingleNode(this._registry,'plugins/plugin[@id="'+e+"."+t+'"] | plugins/'+e+'[@id="'+e+"."+t+'"]');return!!i},getActiveExtensionByType:function(e){$A();return this._extensionsRegistry[e]},findEditorById:function(e){return this._extensionsRegistry.editor.detect(function(t){return t.id==e})},findEditorsForMime:function(e,t){var i=$A([]),s=!1;return null==this.user||this.user.canWrite()||(s=!0),this._extensionsRegistry.editor.each(function(n){if(n.mimes.include(e)||n.mimes.include("*")){if(t&&!n.previewProvider)return;s&&n.write||i.push(n)}}),i.length&&i.length>1&&(i=i.sortBy(function(e){return e.order||0})),i},loadEditorResources:function(e){var t=this._resourcesRegistry;e.load(t)},initTemplates:function(e){if(this._registry){for(var t=XPathSelectNodes(this._registry,"client_configs/template"),i=0;i<t.length;i++){var s=t[i].getAttribute("element"),n=t[i].getAttribute("theme");if((!n||!window._bootstrap.parameters.get("theme")||window._bootstrap.parameters.get("theme")==n)&&($(s)||$$(s).length||e)){s=$(s)?$(s):$$(s)[0],e&&(s=e);var o=t[i].getAttribute("position"),a={};a[o]=t[i].firstChild.nodeValue,s.insert(a),a[o].evalScripts()}}modal.updateLoadingProgress("Html templates loaded")}},findOriginalTemplatePart:function(e){var t=new Element("div",{style:"display:none;"});$$("body")[0].insert(t),this.initTemplates(t);var i=t.down('[id="'+e+'"]');return i&&(i=i.clone(!0)),t.remove(),i},triggerDownload:function(e){document.location.href=e},loadI18NMessages:function(e){var t=new Connexion;t.addParameter("get_action","get_i18n_messages"),t.addParameter("lang",e),t.onComplete=function(t){if(t.responseText){var i=t.responseText.evalScripts();MessageHash=i[0];for(var s in MessageHash)MessageHash[s]=MessageHash[s].replace("\\n","\n");this.updateI18nTags(),this.guiActions&&this.guiActions.each(function(e){e.value.refreshFromI18NHash()}),this.loadXmlRegistry(),this.fireContextRefresh(),this.currentLanguage=e}}.bind(this),t.sendSync()},updateI18nTags:function(){$$("[message_id]").each(function(e){var t=e.getAttribute("message_id");try{e.update(MessageHash[t])}catch(e){}})},loadSeedOrCaptcha:function(e,t,i,s){var n=new Connexion;n.addParameter("get_action","get_seed"),n.onComplete=function(n){if(n.responseJSON){e.value=n.responseJSON.seed;var o=window.appServerAccessPath+"&get_action=get_captcha&sid="+Math.random(),a=resourcesFolder+"/images/actions/16/reload.png";if(t)t.src=o;else{var r={},l='<div class="main_captcha_div" style="padding-top: 4px;"><div class="dialogLegend" message_id="389">'+MessageHash[389]+"</div>";l+='<div class="captcha_container"><img id="captcha_image" align="top" src="'+o+'" width="170" height="80"><img align="top" style="cursor:pointer;" id="captcha_refresh" src="'+a+'" with="16" height="16"></div>',l+='<div class="SF_element">',l+='\t\t<div class="SF_label" message_id="390">'+MessageHash[390]+'</div> <div class="SF_input"><input type="text" class="dialogFocus dialogEnterKey" style="width: 100px; padding: 0px;" name="captcha_code"></div>',l+="</div>",l+='<div style="clear:left;margin-bottom:7px;"></div></div>',r[s]=l,i.insert(r),modal.refreshDialogPosition(),modal.refreshDialogAppearance(),$("captcha_refresh").observe("click",function(){$("captcha_image").src=window.appServerAccessPath+"&get_action=get_captcha&sid="+Math.random()})}}else e.value=n.responseText,t&&(t.up(".main_captcha_div").remove(),modal.refreshDialogPosition(),modal.refreshDialogAppearance())},n.sendSync()},updateHistory:function(e){this.history&&this.history.historyLoad(this.pathToHistoryHash(e))},pathToHistoryHash:function(e){document.title=this.appTitle+" - "+(getBaseName(e)?getBaseName(e):"/"),this.pathesHash||(this.pathesHash=new Hash,this.histCount=-1);var t;return this.pathesHash.each(function(i){i.value==e&&(t=i.key)}),void 0!=t?t:(this.histCount++,this.pathesHash.set(this.histCount,e),this.histCount)},historyHashToPath:function(e){if(!this.pathesHash)return"/";var t=this.pathesHash.get(e);return void 0==t?"/":t},updateContextData:function(e,t,i){e&&this._contextHolder.requireContextChange(e),t&&this._contextHolder.setSelectedNodes(t,i)},getContextHolder:function(){return this._contextHolder},getContextNode:function(){return this._contextHolder.getContextNode()||new ManifestNode("")},getUserSelection:function(){return this._contextHolder},fireContextRefresh:function(){this.getContextHolder().requireContextChange(this.getContextNode(),!0)},fireNodeRefresh:function(e){this.getContextHolder().requireNodeReload(e)},fireContextUp:function(){this.getContextNode().isRoot()||this.updateContextData(this.getContextNode().getParent())},getXmlRegistry:function(){return this._registry},cancelCopyOrMove:function(){return this.actionBar.treeCopyActive=!1,!1},disableShortcuts:function(){this.blockShortcuts=!0},enableShortcuts:function(){this.blockShortcuts=!1},disableNavigation:function(){this.blockNavigation=!0},enableNavigation:function(){this.blockNavigation=!1},disableAllKeyBindings:function(){this.blockNavigation=this.blockShortcuts=this.blockEditorShortcuts=!0},enableAllKeyBindings:function(){this.blockNavigation=this.blockShortcuts=this.blockEditorShortcuts=!1},getActionBar:function(){return this.actionBar},displayMessage:function(e,t){var i=parseUrl(t);i.length&&this.user&&this.user.repositories&&i.each(function(e){var i=this.user.repositories.get(e.host);i&&(t=t.replace(e.url,i.label+":"+e.path+e.file))}.bind(this)),modal.displayMessage(e,t)},focusOn:function(e){this._focusables.each(function(t){t!=e&&t.blur()}),e.focus()},blurAll:function(){this._focusables.each(function(e){e.hasFocus&&(this._lastFocused=e),e.blur()}.bind(this))},focusLast:function(){this._lastFocused&&this.focusOn(this._lastFocused)},initTabNavigation:function(){Event.observe(document,"keydown",function(e){if(e.keyCode==Event.KEY_TAB){if(this.blockNavigation)return;var t=[];$A(this._focusables).each(function(e){e.htmlElement&&!e.htmlElement.visible()||t.push(e)});var s=e.shiftKey,n=!1;for(i=0;i<t.length;i++)if(t[i].hasFocus){t[i].blur();var o;o=s?i>0?i-1:t.length-1:i<t.length-1?i+1:0,t[o].focus(),n=!0;break}!n&&t[0]&&this.focusOn(t[0]),Event.stop(e)}if(!(this.blockShortcuts||e.ctrlKey||e.metaKey))return e.keyCode!=Event.KEY_DELETE&&(e.keyCode>90||e.keyCode<65)?void 0:this.actionBar.fireActionByKey(e,e.keyCode==Event.KEY_DELETE?"key_delete":String.fromCharCode(e.keyCode).toLowerCase())}.bind(this))}});